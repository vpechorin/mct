(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

//require('es5-shim');
//require('es5-sham');

require('jquery');
require('ng-file-upload-shim');
var angular = require('angular');
require('ng-file-upload');
require('angular-resource');
require('angular-cookies');
require('angular-ui-router');
require('restangular');
require('lodash');
require('angular-ui-tree');
require('angular-bootstrap');
require('textAngularSanitize');
require('textAngular');
require('angular-formly');
require('angular-loading-bar');

//var app = angular.module('kontApp', ['ui.router']);

var app = angular.module('kontApp', ['ng', 'ui.router', 'ngResource', 'ngCookies',
  'ui.bootstrap', 'ui.tree',
  'restangular','textAngular', 'formly', 'angularFileUpload', 'angular-loading-bar']);

// app.constant('VERSION', require('../../package.json').version);

require('./filters');
require('./directives');
require('./controllers');

app.config(function ($stateProvider, $urlRouterProvider, $locationProvider, $httpProvider, RestangularProvider) {

  $locationProvider.html5Mode(false);

  RestangularProvider.setBaseUrl('/api');

  $urlRouterProvider.otherwise('/sites');

  $stateProvider
  .state('login', {
    url: '/login',
    templateUrl: 'partials/login.html',
    controller: 'LoginController'
  })

  .state('sites', {
    url: '/sites',
    templateUrl: 'partials/sitelist.html',
    controller: 'SiteListController'
  })
  .state('sites.detail', {
    url: '/{siteId:[0-9]{0,9}}',
    templateUrl: 'partials/sitedetail.html',
    controller: 'SiteDetailController'
  })
  .state('sites.create', {
    url: '/create',
    templateUrl: 'partials/siteadd.html',
    controller: 'SiteAddController'
  })
  .state('sites.pagetree', {
    url: '/{siteId:[0-9]{0,9}}/pagetree',
    templateUrl: 'partials/pagetree.html',
    controller: 'PageTreeController'
  })
  .state('sites.pages', {
    url: '/{siteId:[0-9]{0,9}}/pages/{pageId:[0-9]{0,9}}',
    templateUrl: 'partials/pagedetail.html',
    controller: 'PageEditController'
  })

  .state('dataforms', {
    url: '/dataforms',
    templateUrl: 'partials/dataforms.html',
    controller: 'DataFormListController'
  })
  .state('dataforms.detail', {
    url: '/{formId}',
    templateUrl: 'partials/dataformdetail.html',
    controller: 'DataFormDetailsController'
  })
  .state('dataforms.create', {
    url: '/create',
    templateUrl: 'partials/dataformdetail.html',
    controller: 'DataFormAddController'
  })

  .state('users', {
    url: '/users',
    templateUrl: 'partials/userlist.html',
    controller: 'UserListController'
  })
  .state('users.add', {
    url: '/add',
    templateUrl: 'partials/useradd.html',
    controller: 'UserAddNewController'
  })
  .state('users.detail', {
    url: '/{userId:[0-9]{0,9}}',
    templateUrl: 'partials/userdetail.html',
    controller: 'UserDetailController'
  })
  .state('users.detail.credentials', {
    url: '/credentials',
    templateUrl: 'partials/usercredentials.html',
    controller: 'UserCredController'
  })
  .state('users.detail.credentials.chpassword', {
    url: '/chpassword/{credId}',
    templateUrl: 'partials/usercredchpassword.html',
    controller: 'UserCredPasswordController'
  })
  .state('users.detail.authtokens', {
    url: '/authtokens',
    templateUrl: 'partials/userauthtokens.html',
    controller: 'UserAuthTokenController'
  })

  .state('sitemap', {
    url: '/sitemap/{actionName}',
    template: 'OK',
    controller: 'SitemapController'
  })
  .state('prerender', {
    url: '/prerender/do',
    template: 'OK',
    controller: 'PrerenderController'
  });

  /* Register error provider that shows message on failed requests or redirects to login page on
            * unauthenticated requests */
  $httpProvider.interceptors.push(function ($q, $rootScope, $location) {
    return {
      'responseError': function (rejection) {
        var status = rejection.status;
        var config = rejection.config;
        var method = config.method;
        var url = config.url;

        if (status == 401) {
          $location.path('/login');
        } else {
          $rootScope.error = method + ' on ' + url + ' failed with status ' + status;
        }

        return $q.reject(rejection);
      }
    };
  }
                                 );

  /* Registers auth token interceptor, auth token is either passed by header or by query parameter
            * as soon as there is an authenticated user */
  $httpProvider.interceptors.push(function ($q, $rootScope) {
    return {
      'request': function (config) {

        var useAuthTokenHeader = true;

        var isRestCall = config.url.indexOf('/api') == 0;
        if (isRestCall && angular.isDefined($rootScope.authToken)) {
          var authToken = $rootScope.authToken;
          if (useAuthTokenHeader) {
            config.headers['X-Auth-Token'] = authToken;
          } else {
            config.url = config.url + '?token=' + authToken;
          }
        }
        return config || $q.when(config);
      }
    };
  }
                                 );

});

app.run(function ($rootScope, $location, $cookieStore, Restangular) {

  // console.log("Initialize rootScope");

  /* Reset error when a new view is loaded */
  $rootScope.$on('$viewContentLoaded', function () {
    delete $rootScope.error;
  });

  // console.log("Initialize hasRole function");

  $rootScope.hasRole = function (role) {

    if ($rootScope.user === undefined) {
      return false;
    }

    if ($rootScope.user.roles[role] === undefined) {
      return false;
    }

    return $rootScope.user.roles[role];
  };

  $rootScope.logout = function () {
    delete $rootScope.user;
    delete $rootScope.authToken;
    $cookieStore.remove('authToken');
    $location.path('/login');
  };

  /* Try getting valid user from cookie or go to login page */
  var originalPath = $location.path();
  $location.path('/login');
  var authToken = $cookieStore.get('authToken');
  if (authToken !== undefined) {
    $rootScope.authToken = authToken;
    Restangular.one('user').get().then(function (currentUser) {
      $rootScope.user = currentUser.plain();
      $location.path(originalPath);
    });
  }

  $rootScope.initialized = true;
});

},{"./controllers":18,"./directives":34,"./filters":35,"angular":2,"angular-bootstrap":3,"angular-cookies":4,"angular-formly":5,"angular-loading-bar":6,"angular-resource":7,"angular-ui-router":8,"angular-ui-tree":9,"jquery":11,"lodash":12,"ng-file-upload":14,"ng-file-upload-shim":13,"restangular":15,"textAngular":17,"textAngularSanitize":16}],2:[function(require,module,exports){
require('./bower_components/angular/angular.min.js');
module.exports = angular;

},{"./bower_components/angular/angular.min.js":10}],3:[function(require,module,exports){
/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.11.2 - 2014-09-26
 * License: MIT
 */
angular.module("ui.bootstrap", ["ui.bootstrap.tpls", "ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]);
angular.module("ui.bootstrap.tpls", ["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]);
angular.module('ui.bootstrap.transition', [])

/**
 * $transition service provides a consistent interface to trigger CSS 3 transitions and to be informed when they complete.
 * @param  {DOMElement} element  The DOMElement that will be animated.
 * @param  {string|object|function} trigger  The thing that will cause the transition to start:
 *   - As a string, it represents the css class to be added to the element.
 *   - As an object, it represents a hash of style attributes to be applied to the element.
 *   - As a function, it represents a function to be called that will cause the transition to occur.
 * @return {Promise}  A promise that is resolved when the transition finishes.
 */
.factory('$transition', ['$q', '$timeout', '$rootScope', function($q, $timeout, $rootScope) {

  var $transition = function(element, trigger, options) {
    options = options || {};
    var deferred = $q.defer();
    var endEventName = $transition[options.animation ? 'animationEndEventName' : 'transitionEndEventName'];

    var transitionEndHandler = function(event) {
      $rootScope.$apply(function() {
        element.unbind(endEventName, transitionEndHandler);
        deferred.resolve(element);
      });
    };

    if (endEventName) {
      element.bind(endEventName, transitionEndHandler);
    }

    // Wrap in a timeout to allow the browser time to update the DOM before the transition is to occur
    $timeout(function() {
      if ( angular.isString(trigger) ) {
        element.addClass(trigger);
      } else if ( angular.isFunction(trigger) ) {
        trigger(element);
      } else if ( angular.isObject(trigger) ) {
        element.css(trigger);
      }
      //If browser does not support transitions, instantly resolve
      if ( !endEventName ) {
        deferred.resolve(element);
      }
    });

    // Add our custom cancel function to the promise that is returned
    // We can call this if we are about to run a new transition, which we know will prevent this transition from ending,
    // i.e. it will therefore never raise a transitionEnd event for that transition
    deferred.promise.cancel = function() {
      if ( endEventName ) {
        element.unbind(endEventName, transitionEndHandler);
      }
      deferred.reject('Transition cancelled');
    };

    return deferred.promise;
  };

  // Work out the name of the transitionEnd event
  var transElement = document.createElement('trans');
  var transitionEndEventNames = {
    'WebkitTransition': 'webkitTransitionEnd',
    'MozTransition': 'transitionend',
    'OTransition': 'oTransitionEnd',
    'transition': 'transitionend'
  };
  var animationEndEventNames = {
    'WebkitTransition': 'webkitAnimationEnd',
    'MozTransition': 'animationend',
    'OTransition': 'oAnimationEnd',
    'transition': 'animationend'
  };
  function findEndEventName(endEventNames) {
    for (var name in endEventNames){
      if (transElement.style[name] !== undefined) {
        return endEventNames[name];
      }
    }
  }
  $transition.transitionEndEventName = findEndEventName(transitionEndEventNames);
  $transition.animationEndEventName = findEndEventName(animationEndEventNames);
  return $transition;
}]);

angular.module('ui.bootstrap.collapse', ['ui.bootstrap.transition'])

  .directive('collapse', ['$transition', function ($transition) {

    return {
      link: function (scope, element, attrs) {

        var initialAnimSkip = true;
        var currentTransition;

        function doTransition(change) {
          var newTransition = $transition(element, change);
          if (currentTransition) {
            currentTransition.cancel();
          }
          currentTransition = newTransition;
          newTransition.then(newTransitionDone, newTransitionDone);
          return newTransition;

          function newTransitionDone() {
            // Make sure it's this transition, otherwise, leave it alone.
            if (currentTransition === newTransition) {
              currentTransition = undefined;
            }
          }
        }

        function expand() {
          if (initialAnimSkip) {
            initialAnimSkip = false;
            expandDone();
          } else {
            element.removeClass('collapse').addClass('collapsing');
            doTransition({ height: element[0].scrollHeight + 'px' }).then(expandDone);
          }
        }

        function expandDone() {
          element.removeClass('collapsing');
          element.addClass('collapse in');
          element.css({height: 'auto'});
        }

        function collapse() {
          if (initialAnimSkip) {
            initialAnimSkip = false;
            collapseDone();
            element.css({height: 0});
          } else {
            // CSS transitions don't work with height: auto, so we have to manually change the height to a specific value
            element.css({ height: element[0].scrollHeight + 'px' });
            //trigger reflow so a browser realizes that height was updated from auto to a specific value
            var x = element[0].offsetWidth;

            element.removeClass('collapse in').addClass('collapsing');

            doTransition({ height: 0 }).then(collapseDone);
          }
        }

        function collapseDone() {
          element.removeClass('collapsing');
          element.addClass('collapse');
        }

        scope.$watch(attrs.collapse, function (shouldCollapse) {
          if (shouldCollapse) {
            collapse();
          } else {
            expand();
          }
        });
      }
    };
  }]);

angular.module('ui.bootstrap.accordion', ['ui.bootstrap.collapse'])

.constant('accordionConfig', {
  closeOthers: true
})

.controller('AccordionController', ['$scope', '$attrs', 'accordionConfig', function ($scope, $attrs, accordionConfig) {

  // This array keeps track of the accordion groups
  this.groups = [];

  // Ensure that all the groups in this accordion are closed, unless close-others explicitly says not to
  this.closeOthers = function(openGroup) {
    var closeOthers = angular.isDefined($attrs.closeOthers) ? $scope.$eval($attrs.closeOthers) : accordionConfig.closeOthers;
    if ( closeOthers ) {
      angular.forEach(this.groups, function (group) {
        if ( group !== openGroup ) {
          group.isOpen = false;
        }
      });
    }
  };

  // This is called from the accordion-group directive to add itself to the accordion
  this.addGroup = function(groupScope) {
    var that = this;
    this.groups.push(groupScope);

    groupScope.$on('$destroy', function (event) {
      that.removeGroup(groupScope);
    });
  };

  // This is called from the accordion-group directive when to remove itself
  this.removeGroup = function(group) {
    var index = this.groups.indexOf(group);
    if ( index !== -1 ) {
      this.groups.splice(index, 1);
    }
  };

}])

// The accordion directive simply sets up the directive controller
// and adds an accordion CSS class to itself element.
.directive('accordion', function () {
  return {
    restrict:'EA',
    controller:'AccordionController',
    transclude: true,
    replace: false,
    templateUrl: 'template/accordion/accordion.html'
  };
})

// The accordion-group directive indicates a block of html that will expand and collapse in an accordion
.directive('accordionGroup', function() {
  return {
    require:'^accordion',         // We need this directive to be inside an accordion
    restrict:'EA',
    transclude:true,              // It transcludes the contents of the directive into the template
    replace: true,                // The element containing the directive will be replaced with the template
    templateUrl:'template/accordion/accordion-group.html',
    scope: {
      heading: '@',               // Interpolate the heading attribute onto this scope
      isOpen: '=?',
      isDisabled: '=?'
    },
    controller: function() {
      this.setHeading = function(element) {
        this.heading = element;
      };
    },
    link: function(scope, element, attrs, accordionCtrl) {
      accordionCtrl.addGroup(scope);

      scope.$watch('isOpen', function(value) {
        if ( value ) {
          accordionCtrl.closeOthers(scope);
        }
      });

      scope.toggleOpen = function() {
        if ( !scope.isDisabled ) {
          scope.isOpen = !scope.isOpen;
        }
      };
    }
  };
})

// Use accordion-heading below an accordion-group to provide a heading containing HTML
// <accordion-group>
//   <accordion-heading>Heading containing HTML - <img src="..."></accordion-heading>
// </accordion-group>
.directive('accordionHeading', function() {
  return {
    restrict: 'EA',
    transclude: true,   // Grab the contents to be used as the heading
    template: '',       // In effect remove this element!
    replace: true,
    require: '^accordionGroup',
    link: function(scope, element, attr, accordionGroupCtrl, transclude) {
      // Pass the heading to the accordion-group controller
      // so that it can be transcluded into the right place in the template
      // [The second parameter to transclude causes the elements to be cloned so that they work in ng-repeat]
      accordionGroupCtrl.setHeading(transclude(scope, function() {}));
    }
  };
})

// Use in the accordion-group template to indicate where you want the heading to be transcluded
// You must provide the property on the accordion-group controller that will hold the transcluded element
// <div class="accordion-group">
//   <div class="accordion-heading" ><a ... accordion-transclude="heading">...</a></div>
//   ...
// </div>
.directive('accordionTransclude', function() {
  return {
    require: '^accordionGroup',
    link: function(scope, element, attr, controller) {
      scope.$watch(function() { return controller[attr.accordionTransclude]; }, function(heading) {
        if ( heading ) {
          element.html('');
          element.append(heading);
        }
      });
    }
  };
});

angular.module('ui.bootstrap.alert', [])

.controller('AlertController', ['$scope', '$attrs', function ($scope, $attrs) {
  $scope.closeable = 'close' in $attrs;
}])

.directive('alert', function () {
  return {
    restrict:'EA',
    controller:'AlertController',
    templateUrl:'template/alert/alert.html',
    transclude:true,
    replace:true,
    scope: {
      type: '@',
      close: '&'
    }
  };
});

angular.module('ui.bootstrap.bindHtml', [])

  .directive('bindHtmlUnsafe', function () {
    return function (scope, element, attr) {
      element.addClass('ng-binding').data('$binding', attr.bindHtmlUnsafe);
      scope.$watch(attr.bindHtmlUnsafe, function bindHtmlUnsafeWatchAction(value) {
        element.html(value || '');
      });
    };
  });
angular.module('ui.bootstrap.buttons', [])

.constant('buttonConfig', {
  activeClass: 'active',
  toggleEvent: 'click'
})

.controller('ButtonsController', ['buttonConfig', function(buttonConfig) {
  this.activeClass = buttonConfig.activeClass || 'active';
  this.toggleEvent = buttonConfig.toggleEvent || 'click';
}])

.directive('btnRadio', function () {
  return {
    require: ['btnRadio', 'ngModel'],
    controller: 'ButtonsController',
    link: function (scope, element, attrs, ctrls) {
      var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];

      //model -> UI
      ngModelCtrl.$render = function () {
        element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, scope.$eval(attrs.btnRadio)));
      };

      //ui->model
      element.bind(buttonsCtrl.toggleEvent, function () {
        var isActive = element.hasClass(buttonsCtrl.activeClass);

        if (!isActive || angular.isDefined(attrs.uncheckable)) {
          scope.$apply(function () {
            ngModelCtrl.$setViewValue(isActive ? null : scope.$eval(attrs.btnRadio));
            ngModelCtrl.$render();
          });
        }
      });
    }
  };
})

.directive('btnCheckbox', function () {
  return {
    require: ['btnCheckbox', 'ngModel'],
    controller: 'ButtonsController',
    link: function (scope, element, attrs, ctrls) {
      var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];

      function getTrueValue() {
        return getCheckboxValue(attrs.btnCheckboxTrue, true);
      }

      function getFalseValue() {
        return getCheckboxValue(attrs.btnCheckboxFalse, false);
      }

      function getCheckboxValue(attributeValue, defaultValue) {
        var val = scope.$eval(attributeValue);
        return angular.isDefined(val) ? val : defaultValue;
      }

      //model -> UI
      ngModelCtrl.$render = function () {
        element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, getTrueValue()));
      };

      //ui->model
      element.bind(buttonsCtrl.toggleEvent, function () {
        scope.$apply(function () {
          ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass) ? getFalseValue() : getTrueValue());
          ngModelCtrl.$render();
        });
      });
    }
  };
});

/**
* @ngdoc overview
* @name ui.bootstrap.carousel
*
* @description
* AngularJS version of an image carousel.
*
*/
angular.module('ui.bootstrap.carousel', ['ui.bootstrap.transition'])
.controller('CarouselController', ['$scope', '$timeout', '$transition', function ($scope, $timeout, $transition) {
  var self = this,
    slides = self.slides = $scope.slides = [],
    currentIndex = -1,
    currentTimeout, isPlaying;
  self.currentSlide = null;

  var destroyed = false;
  /* direction: "prev" or "next" */
  self.select = $scope.select = function(nextSlide, direction) {
    var nextIndex = slides.indexOf(nextSlide);
    //Decide direction if it's not given
    if (direction === undefined) {
      direction = nextIndex > currentIndex ? 'next' : 'prev';
    }
    if (nextSlide && nextSlide !== self.currentSlide) {
      if ($scope.$currentTransition) {
        $scope.$currentTransition.cancel();
        //Timeout so ng-class in template has time to fix classes for finished slide
        $timeout(goNext);
      } else {
        goNext();
      }
    }
    function goNext() {
      // Scope has been destroyed, stop here.
      if (destroyed) { return; }
      //If we have a slide to transition from and we have a transition type and we're allowed, go
      if (self.currentSlide && angular.isString(direction) && !$scope.noTransition && nextSlide.$element) {
        //We shouldn't do class manip in here, but it's the same weird thing bootstrap does. need to fix sometime
        nextSlide.$element.addClass(direction);
        var reflow = nextSlide.$element[0].offsetWidth; //force reflow

        //Set all other slides to stop doing their stuff for the new transition
        angular.forEach(slides, function(slide) {
          angular.extend(slide, {direction: '', entering: false, leaving: false, active: false});
        });
        angular.extend(nextSlide, {direction: direction, active: true, entering: true});
        angular.extend(self.currentSlide||{}, {direction: direction, leaving: true});

        $scope.$currentTransition = $transition(nextSlide.$element, {});
        //We have to create new pointers inside a closure since next & current will change
        (function(next,current) {
          $scope.$currentTransition.then(
            function(){ transitionDone(next, current); },
            function(){ transitionDone(next, current); }
          );
        }(nextSlide, self.currentSlide));
      } else {
        transitionDone(nextSlide, self.currentSlide);
      }
      self.currentSlide = nextSlide;
      currentIndex = nextIndex;
      //every time you change slides, reset the timer
      restartTimer();
    }
    function transitionDone(next, current) {
      angular.extend(next, {direction: '', active: true, leaving: false, entering: false});
      angular.extend(current||{}, {direction: '', active: false, leaving: false, entering: false});
      $scope.$currentTransition = null;
    }
  };
  $scope.$on('$destroy', function () {
    destroyed = true;
  });

  /* Allow outside people to call indexOf on slides array */
  self.indexOfSlide = function(slide) {
    return slides.indexOf(slide);
  };

  $scope.next = function() {
    var newIndex = (currentIndex + 1) % slides.length;

    //Prevent this user-triggered transition from occurring if there is already one in progress
    if (!$scope.$currentTransition) {
      return self.select(slides[newIndex], 'next');
    }
  };

  $scope.prev = function() {
    var newIndex = currentIndex - 1 < 0 ? slides.length - 1 : currentIndex - 1;

    //Prevent this user-triggered transition from occurring if there is already one in progress
    if (!$scope.$currentTransition) {
      return self.select(slides[newIndex], 'prev');
    }
  };

  $scope.isActive = function(slide) {
     return self.currentSlide === slide;
  };

  $scope.$watch('interval', restartTimer);
  $scope.$on('$destroy', resetTimer);

  function restartTimer() {
    resetTimer();
    var interval = +$scope.interval;
    if (!isNaN(interval) && interval>=0) {
      currentTimeout = $timeout(timerFn, interval);
    }
  }

  function resetTimer() {
    if (currentTimeout) {
      $timeout.cancel(currentTimeout);
      currentTimeout = null;
    }
  }

  function timerFn() {
    if (isPlaying) {
      $scope.next();
      restartTimer();
    } else {
      $scope.pause();
    }
  }

  $scope.play = function() {
    if (!isPlaying) {
      isPlaying = true;
      restartTimer();
    }
  };
  $scope.pause = function() {
    if (!$scope.noPause) {
      isPlaying = false;
      resetTimer();
    }
  };

  self.addSlide = function(slide, element) {
    slide.$element = element;
    slides.push(slide);
    //if this is the first slide or the slide is set to active, select it
    if(slides.length === 1 || slide.active) {
      self.select(slides[slides.length-1]);
      if (slides.length == 1) {
        $scope.play();
      }
    } else {
      slide.active = false;
    }
  };

  self.removeSlide = function(slide) {
    //get the index of the slide inside the carousel
    var index = slides.indexOf(slide);
    slides.splice(index, 1);
    if (slides.length > 0 && slide.active) {
      if (index >= slides.length) {
        self.select(slides[index-1]);
      } else {
        self.select(slides[index]);
      }
    } else if (currentIndex > index) {
      currentIndex--;
    }
  };

}])

/**
 * @ngdoc directive
 * @name ui.bootstrap.carousel.directive:carousel
 * @restrict EA
 *
 * @description
 * Carousel is the outer container for a set of image 'slides' to showcase.
 *
 * @param {number=} interval The time, in milliseconds, that it will take the carousel to go to the next slide.
 * @param {boolean=} noTransition Whether to disable transitions on the carousel.
 * @param {boolean=} noPause Whether to disable pausing on the carousel (by default, the carousel interval pauses on hover).
 *
 * @example
<example module="ui.bootstrap">
  <file name="index.html">
    <carousel>
      <slide>
        <img src="http://placekitten.com/150/150" style="margin:auto;">
        <div class="carousel-caption">
          <p>Beautiful!</p>
        </div>
      </slide>
      <slide>
        <img src="http://placekitten.com/100/150" style="margin:auto;">
        <div class="carousel-caption">
          <p>D'aww!</p>
        </div>
      </slide>
    </carousel>
  </file>
  <file name="demo.css">
    .carousel-indicators {
      top: auto;
      bottom: 15px;
    }
  </file>
</example>
 */
.directive('carousel', [function() {
  return {
    restrict: 'EA',
    transclude: true,
    replace: true,
    controller: 'CarouselController',
    require: 'carousel',
    templateUrl: 'template/carousel/carousel.html',
    scope: {
      interval: '=',
      noTransition: '=',
      noPause: '='
    }
  };
}])

/**
 * @ngdoc directive
 * @name ui.bootstrap.carousel.directive:slide
 * @restrict EA
 *
 * @description
 * Creates a slide inside a {@link ui.bootstrap.carousel.directive:carousel carousel}.  Must be placed as a child of a carousel element.
 *
 * @param {boolean=} active Model binding, whether or not this slide is currently active.
 *
 * @example
<example module="ui.bootstrap">
  <file name="index.html">
<div ng-controller="CarouselDemoCtrl">
  <carousel>
    <slide ng-repeat="slide in slides" active="slide.active">
      <img ng-src="{{slide.image}}" style="margin:auto;">
      <div class="carousel-caption">
        <h4>Slide {{$index}}</h4>
        <p>{{slide.text}}</p>
      </div>
    </slide>
  </carousel>
  Interval, in milliseconds: <input type="number" ng-model="myInterval">
  <br />Enter a negative number to stop the interval.
</div>
  </file>
  <file name="script.js">
function CarouselDemoCtrl($scope) {
  $scope.myInterval = 5000;
}
  </file>
  <file name="demo.css">
    .carousel-indicators {
      top: auto;
      bottom: 15px;
    }
  </file>
</example>
*/

.directive('slide', function() {
  return {
    require: '^carousel',
    restrict: 'EA',
    transclude: true,
    replace: true,
    templateUrl: 'template/carousel/slide.html',
    scope: {
      active: '=?'
    },
    link: function (scope, element, attrs, carouselCtrl) {
      carouselCtrl.addSlide(scope, element);
      //when the scope is destroyed then remove the slide from the current slides array
      scope.$on('$destroy', function() {
        carouselCtrl.removeSlide(scope);
      });

      scope.$watch('active', function(active) {
        if (active) {
          carouselCtrl.select(scope);
        }
      });
    }
  };
});

angular.module('ui.bootstrap.dateparser', [])

.service('dateParser', ['$locale', 'orderByFilter', function($locale, orderByFilter) {

  this.parsers = {};

  var formatCodeToRegex = {
    'yyyy': {
      regex: '\\d{4}',
      apply: function(value) { this.year = +value; }
    },
    'yy': {
      regex: '\\d{2}',
      apply: function(value) { this.year = +value + 2000; }
    },
    'y': {
      regex: '\\d{1,4}',
      apply: function(value) { this.year = +value; }
    },
    'MMMM': {
      regex: $locale.DATETIME_FORMATS.MONTH.join('|'),
      apply: function(value) { this.month = $locale.DATETIME_FORMATS.MONTH.indexOf(value); }
    },
    'MMM': {
      regex: $locale.DATETIME_FORMATS.SHORTMONTH.join('|'),
      apply: function(value) { this.month = $locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value); }
    },
    'MM': {
      regex: '0[1-9]|1[0-2]',
      apply: function(value) { this.month = value - 1; }
    },
    'M': {
      regex: '[1-9]|1[0-2]',
      apply: function(value) { this.month = value - 1; }
    },
    'dd': {
      regex: '[0-2][0-9]{1}|3[0-1]{1}',
      apply: function(value) { this.date = +value; }
    },
    'd': {
      regex: '[1-2]?[0-9]{1}|3[0-1]{1}',
      apply: function(value) { this.date = +value; }
    },
    'EEEE': {
      regex: $locale.DATETIME_FORMATS.DAY.join('|')
    },
    'EEE': {
      regex: $locale.DATETIME_FORMATS.SHORTDAY.join('|')
    }
  };

  function createParser(format) {
    var map = [], regex = format.split('');

    angular.forEach(formatCodeToRegex, function(data, code) {
      var index = format.indexOf(code);

      if (index > -1) {
        format = format.split('');

        regex[index] = '(' + data.regex + ')';
        format[index] = '$'; // Custom symbol to define consumed part of format
        for (var i = index + 1, n = index + code.length; i < n; i++) {
          regex[i] = '';
          format[i] = '$';
        }
        format = format.join('');

        map.push({ index: index, apply: data.apply });
      }
    });

    return {
      regex: new RegExp('^' + regex.join('') + '$'),
      map: orderByFilter(map, 'index')
    };
  }

  this.parse = function(input, format) {
    if ( !angular.isString(input) || !format ) {
      return input;
    }

    format = $locale.DATETIME_FORMATS[format] || format;

    if ( !this.parsers[format] ) {
      this.parsers[format] = createParser(format);
    }

    var parser = this.parsers[format],
        regex = parser.regex,
        map = parser.map,
        results = input.match(regex);

    if ( results && results.length ) {
      var fields = { year: 1900, month: 0, date: 1, hours: 0 }, dt;

      for( var i = 1, n = results.length; i < n; i++ ) {
        var mapper = map[i-1];
        if ( mapper.apply ) {
          mapper.apply.call(fields, results[i]);
        }
      }

      if ( isValid(fields.year, fields.month, fields.date) ) {
        dt = new Date( fields.year, fields.month, fields.date, fields.hours);
      }

      return dt;
    }
  };

  // Check if date is valid for specific month (and year for February).
  // Month: 0 = Jan, 1 = Feb, etc
  function isValid(year, month, date) {
    if ( month === 1 && date > 28) {
        return date === 29 && ((year % 4 === 0 && year % 100 !== 0) || year % 400 === 0);
    }

    if ( month === 3 || month === 5 || month === 8 || month === 10) {
        return date < 31;
    }

    return true;
  }
}]);

angular.module('ui.bootstrap.position', [])

/**
 * A set of utility methods that can be use to retrieve position of DOM elements.
 * It is meant to be used where we need to absolute-position DOM elements in
 * relation to other, existing elements (this is the case for tooltips, popovers,
 * typeahead suggestions etc.).
 */
  .factory('$position', ['$document', '$window', function ($document, $window) {

    function getStyle(el, cssprop) {
      if (el.currentStyle) { //IE
        return el.currentStyle[cssprop];
      } else if ($window.getComputedStyle) {
        return $window.getComputedStyle(el)[cssprop];
      }
      // finally try and get inline style
      return el.style[cssprop];
    }

    /**
     * Checks if a given element is statically positioned
     * @param element - raw DOM element
     */
    function isStaticPositioned(element) {
      return (getStyle(element, 'position') || 'static' ) === 'static';
    }

    /**
     * returns the closest, non-statically positioned parentOffset of a given element
     * @param element
     */
    var parentOffsetEl = function (element) {
      var docDomEl = $document[0];
      var offsetParent = element.offsetParent || docDomEl;
      while (offsetParent && offsetParent !== docDomEl && isStaticPositioned(offsetParent) ) {
        offsetParent = offsetParent.offsetParent;
      }
      return offsetParent || docDomEl;
    };

    return {
      /**
       * Provides read-only equivalent of jQuery's position function:
       * http://api.jquery.com/position/
       */
      position: function (element) {
        var elBCR = this.offset(element);
        var offsetParentBCR = { top: 0, left: 0 };
        var offsetParentEl = parentOffsetEl(element[0]);
        if (offsetParentEl != $document[0]) {
          offsetParentBCR = this.offset(angular.element(offsetParentEl));
          offsetParentBCR.top += offsetParentEl.clientTop - offsetParentEl.scrollTop;
          offsetParentBCR.left += offsetParentEl.clientLeft - offsetParentEl.scrollLeft;
        }

        var boundingClientRect = element[0].getBoundingClientRect();
        return {
          width: boundingClientRect.width || element.prop('offsetWidth'),
          height: boundingClientRect.height || element.prop('offsetHeight'),
          top: elBCR.top - offsetParentBCR.top,
          left: elBCR.left - offsetParentBCR.left
        };
      },

      /**
       * Provides read-only equivalent of jQuery's offset function:
       * http://api.jquery.com/offset/
       */
      offset: function (element) {
        var boundingClientRect = element[0].getBoundingClientRect();
        return {
          width: boundingClientRect.width || element.prop('offsetWidth'),
          height: boundingClientRect.height || element.prop('offsetHeight'),
          top: boundingClientRect.top + ($window.pageYOffset || $document[0].documentElement.scrollTop),
          left: boundingClientRect.left + ($window.pageXOffset || $document[0].documentElement.scrollLeft)
        };
      },

      /**
       * Provides coordinates for the targetEl in relation to hostEl
       */
      positionElements: function (hostEl, targetEl, positionStr, appendToBody) {

        var positionStrParts = positionStr.split('-');
        var pos0 = positionStrParts[0], pos1 = positionStrParts[1] || 'center';

        var hostElPos,
          targetElWidth,
          targetElHeight,
          targetElPos;

        hostElPos = appendToBody ? this.offset(hostEl) : this.position(hostEl);

        targetElWidth = targetEl.prop('offsetWidth');
        targetElHeight = targetEl.prop('offsetHeight');

        var shiftWidth = {
          center: function () {
            return hostElPos.left + hostElPos.width / 2 - targetElWidth / 2;
          },
          left: function () {
            return hostElPos.left;
          },
          right: function () {
            return hostElPos.left + hostElPos.width;
          }
        };

        var shiftHeight = {
          center: function () {
            return hostElPos.top + hostElPos.height / 2 - targetElHeight / 2;
          },
          top: function () {
            return hostElPos.top;
          },
          bottom: function () {
            return hostElPos.top + hostElPos.height;
          }
        };

        switch (pos0) {
          case 'right':
            targetElPos = {
              top: shiftHeight[pos1](),
              left: shiftWidth[pos0]()
            };
            break;
          case 'left':
            targetElPos = {
              top: shiftHeight[pos1](),
              left: hostElPos.left - targetElWidth
            };
            break;
          case 'bottom':
            targetElPos = {
              top: shiftHeight[pos0](),
              left: shiftWidth[pos1]()
            };
            break;
          default:
            targetElPos = {
              top: hostElPos.top - targetElHeight,
              left: shiftWidth[pos1]()
            };
            break;
        }

        return targetElPos;
      }
    };
  }]);

angular.module('ui.bootstrap.datepicker', ['ui.bootstrap.dateparser', 'ui.bootstrap.position'])

.constant('datepickerConfig', {
  formatDay: 'dd',
  formatMonth: 'MMMM',
  formatYear: 'yyyy',
  formatDayHeader: 'EEE',
  formatDayTitle: 'MMMM yyyy',
  formatMonthTitle: 'yyyy',
  datepickerMode: 'day',
  minMode: 'day',
  maxMode: 'year',
  showWeeks: true,
  startingDay: 0,
  yearRange: 20,
  minDate: null,
  maxDate: null
})

.controller('DatepickerController', ['$scope', '$attrs', '$parse', '$interpolate', '$timeout', '$log', 'dateFilter', 'datepickerConfig', function($scope, $attrs, $parse, $interpolate, $timeout, $log, dateFilter, datepickerConfig) {
  var self = this,
      ngModelCtrl = { $setViewValue: angular.noop }; // nullModelCtrl;

  // Modes chain
  this.modes = ['day', 'month', 'year'];

  // Configuration attributes
  angular.forEach(['formatDay', 'formatMonth', 'formatYear', 'formatDayHeader', 'formatDayTitle', 'formatMonthTitle',
                   'minMode', 'maxMode', 'showWeeks', 'startingDay', 'yearRange'], function( key, index ) {
    self[key] = angular.isDefined($attrs[key]) ? (index < 8 ? $interpolate($attrs[key])($scope.$parent) : $scope.$parent.$eval($attrs[key])) : datepickerConfig[key];
  });

  // Watchable date attributes
  angular.forEach(['minDate', 'maxDate'], function( key ) {
    if ( $attrs[key] ) {
      $scope.$parent.$watch($parse($attrs[key]), function(value) {
        self[key] = value ? new Date(value) : null;
        self.refreshView();
      });
    } else {
      self[key] = datepickerConfig[key] ? new Date(datepickerConfig[key]) : null;
    }
  });

  $scope.datepickerMode = $scope.datepickerMode || datepickerConfig.datepickerMode;
  $scope.uniqueId = 'datepicker-' + $scope.$id + '-' + Math.floor(Math.random() * 10000);
  this.activeDate = angular.isDefined($attrs.initDate) ? $scope.$parent.$eval($attrs.initDate) : new Date();

  $scope.isActive = function(dateObject) {
    if (self.compare(dateObject.date, self.activeDate) === 0) {
      $scope.activeDateId = dateObject.uid;
      return true;
    }
    return false;
  };

  this.init = function( ngModelCtrl_ ) {
    ngModelCtrl = ngModelCtrl_;

    ngModelCtrl.$render = function() {
      self.render();
    };
  };

  this.render = function() {
    if ( ngModelCtrl.$modelValue ) {
      var date = new Date( ngModelCtrl.$modelValue ),
          isValid = !isNaN(date);

      if ( isValid ) {
        this.activeDate = date;
      } else {
        $log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');
      }
      ngModelCtrl.$setValidity('date', isValid);
    }
    this.refreshView();
  };

  this.refreshView = function() {
    if ( this.element ) {
      this._refreshView();

      var date = ngModelCtrl.$modelValue ? new Date(ngModelCtrl.$modelValue) : null;
      ngModelCtrl.$setValidity('date-disabled', !date || (this.element && !this.isDisabled(date)));
    }
  };

  this.createDateObject = function(date, format) {
    var model = ngModelCtrl.$modelValue ? new Date(ngModelCtrl.$modelValue) : null;
    return {
      date: date,
      label: dateFilter(date, format),
      selected: model && this.compare(date, model) === 0,
      disabled: this.isDisabled(date),
      current: this.compare(date, new Date()) === 0
    };
  };

  this.isDisabled = function( date ) {
    return ((this.minDate && this.compare(date, this.minDate) < 0) || (this.maxDate && this.compare(date, this.maxDate) > 0) || ($attrs.dateDisabled && $scope.dateDisabled({date: date, mode: $scope.datepickerMode})));
  };

  // Split array into smaller arrays
  this.split = function(arr, size) {
    var arrays = [];
    while (arr.length > 0) {
      arrays.push(arr.splice(0, size));
    }
    return arrays;
  };

  $scope.select = function( date ) {
    if ( $scope.datepickerMode === self.minMode ) {
      var dt = ngModelCtrl.$modelValue ? new Date( ngModelCtrl.$modelValue ) : new Date(0, 0, 0, 0, 0, 0, 0);
      dt.setFullYear( date.getFullYear(), date.getMonth(), date.getDate() );
      ngModelCtrl.$setViewValue( dt );
      ngModelCtrl.$render();
    } else {
      self.activeDate = date;
      $scope.datepickerMode = self.modes[ self.modes.indexOf( $scope.datepickerMode ) - 1 ];
    }
  };

  $scope.move = function( direction ) {
    var year = self.activeDate.getFullYear() + direction * (self.step.years || 0),
        month = self.activeDate.getMonth() + direction * (self.step.months || 0);
    self.activeDate.setFullYear(year, month, 1);
    self.refreshView();
  };

  $scope.toggleMode = function( direction ) {
    direction = direction || 1;

    if (($scope.datepickerMode === self.maxMode && direction === 1) || ($scope.datepickerMode === self.minMode && direction === -1)) {
      return;
    }

    $scope.datepickerMode = self.modes[ self.modes.indexOf( $scope.datepickerMode ) + direction ];
  };

  // Key event mapper
  $scope.keys = { 13:'enter', 32:'space', 33:'pageup', 34:'pagedown', 35:'end', 36:'home', 37:'left', 38:'up', 39:'right', 40:'down' };

  var focusElement = function() {
    $timeout(function() {
      self.element[0].focus();
    }, 0 , false);
  };

  // Listen for focus requests from popup directive
  $scope.$on('datepicker.focus', focusElement);

  $scope.keydown = function( evt ) {
    var key = $scope.keys[evt.which];

    if ( !key || evt.shiftKey || evt.altKey ) {
      return;
    }

    evt.preventDefault();
    evt.stopPropagation();

    if (key === 'enter' || key === 'space') {
      if ( self.isDisabled(self.activeDate)) {
        return; // do nothing
      }
      $scope.select(self.activeDate);
      focusElement();
    } else if (evt.ctrlKey && (key === 'up' || key === 'down')) {
      $scope.toggleMode(key === 'up' ? 1 : -1);
      focusElement();
    } else {
      self.handleKeyDown(key, evt);
      self.refreshView();
    }
  };
}])

.directive( 'datepicker', function () {
  return {
    restrict: 'EA',
    replace: true,
    templateUrl: 'template/datepicker/datepicker.html',
    scope: {
      datepickerMode: '=?',
      dateDisabled: '&'
    },
    require: ['datepicker', '?^ngModel'],
    controller: 'DatepickerController',
    link: function(scope, element, attrs, ctrls) {
      var datepickerCtrl = ctrls[0], ngModelCtrl = ctrls[1];

      if ( ngModelCtrl ) {
        datepickerCtrl.init( ngModelCtrl );
      }
    }
  };
})

.directive('daypicker', ['dateFilter', function (dateFilter) {
  return {
    restrict: 'EA',
    replace: true,
    templateUrl: 'template/datepicker/day.html',
    require: '^datepicker',
    link: function(scope, element, attrs, ctrl) {
      scope.showWeeks = ctrl.showWeeks;

      ctrl.step = { months: 1 };
      ctrl.element = element;

      var DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
      function getDaysInMonth( year, month ) {
        return ((month === 1) && (year % 4 === 0) && ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];
      }

      function getDates(startDate, n) {
        var dates = new Array(n), current = new Date(startDate), i = 0;
        current.setHours(12); // Prevent repeated dates because of timezone bug
        while ( i < n ) {
          dates[i++] = new Date(current);
          current.setDate( current.getDate() + 1 );
        }
        return dates;
      }

      ctrl._refreshView = function() {
        var year = ctrl.activeDate.getFullYear(),
          month = ctrl.activeDate.getMonth(),
          firstDayOfMonth = new Date(year, month, 1),
          difference = ctrl.startingDay - firstDayOfMonth.getDay(),
          numDisplayedFromPreviousMonth = (difference > 0) ? 7 - difference : - difference,
          firstDate = new Date(firstDayOfMonth);

        if ( numDisplayedFromPreviousMonth > 0 ) {
          firstDate.setDate( - numDisplayedFromPreviousMonth + 1 );
        }

        // 42 is the number of days on a six-month calendar
        var days = getDates(firstDate, 42);
        for (var i = 0; i < 42; i ++) {
          days[i] = angular.extend(ctrl.createDateObject(days[i], ctrl.formatDay), {
            secondary: days[i].getMonth() !== month,
            uid: scope.uniqueId + '-' + i
          });
        }

        scope.labels = new Array(7);
        for (var j = 0; j < 7; j++) {
          scope.labels[j] = {
            abbr: dateFilter(days[j].date, ctrl.formatDayHeader),
            full: dateFilter(days[j].date, 'EEEE')
          };
        }

        scope.title = dateFilter(ctrl.activeDate, ctrl.formatDayTitle);
        scope.rows = ctrl.split(days, 7);

        if ( scope.showWeeks ) {
          scope.weekNumbers = [];
          var weekNumber = getISO8601WeekNumber( scope.rows[0][0].date ),
              numWeeks = scope.rows.length;
          while( scope.weekNumbers.push(weekNumber++) < numWeeks ) {}
        }
      };

      ctrl.compare = function(date1, date2) {
        return (new Date( date1.getFullYear(), date1.getMonth(), date1.getDate() ) - new Date( date2.getFullYear(), date2.getMonth(), date2.getDate() ) );
      };

      function getISO8601WeekNumber(date) {
        var checkDate = new Date(date);
        checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7)); // Thursday
        var time = checkDate.getTime();
        checkDate.setMonth(0); // Compare with Jan 1
        checkDate.setDate(1);
        return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
      }

      ctrl.handleKeyDown = function( key, evt ) {
        var date = ctrl.activeDate.getDate();

        if (key === 'left') {
          date = date - 1;   // up
        } else if (key === 'up') {
          date = date - 7;   // down
        } else if (key === 'right') {
          date = date + 1;   // down
        } else if (key === 'down') {
          date = date + 7;
        } else if (key === 'pageup' || key === 'pagedown') {
          var month = ctrl.activeDate.getMonth() + (key === 'pageup' ? - 1 : 1);
          ctrl.activeDate.setMonth(month, 1);
          date = Math.min(getDaysInMonth(ctrl.activeDate.getFullYear(), ctrl.activeDate.getMonth()), date);
        } else if (key === 'home') {
          date = 1;
        } else if (key === 'end') {
          date = getDaysInMonth(ctrl.activeDate.getFullYear(), ctrl.activeDate.getMonth());
        }
        ctrl.activeDate.setDate(date);
      };

      ctrl.refreshView();
    }
  };
}])

.directive('monthpicker', ['dateFilter', function (dateFilter) {
  return {
    restrict: 'EA',
    replace: true,
    templateUrl: 'template/datepicker/month.html',
    require: '^datepicker',
    link: function(scope, element, attrs, ctrl) {
      ctrl.step = { years: 1 };
      ctrl.element = element;

      ctrl._refreshView = function() {
        var months = new Array(12),
            year = ctrl.activeDate.getFullYear();

        for ( var i = 0; i < 12; i++ ) {
          months[i] = angular.extend(ctrl.createDateObject(new Date(year, i, 1), ctrl.formatMonth), {
            uid: scope.uniqueId + '-' + i
          });
        }

        scope.title = dateFilter(ctrl.activeDate, ctrl.formatMonthTitle);
        scope.rows = ctrl.split(months, 3);
      };

      ctrl.compare = function(date1, date2) {
        return new Date( date1.getFullYear(), date1.getMonth() ) - new Date( date2.getFullYear(), date2.getMonth() );
      };

      ctrl.handleKeyDown = function( key, evt ) {
        var date = ctrl.activeDate.getMonth();

        if (key === 'left') {
          date = date - 1;   // up
        } else if (key === 'up') {
          date = date - 3;   // down
        } else if (key === 'right') {
          date = date + 1;   // down
        } else if (key === 'down') {
          date = date + 3;
        } else if (key === 'pageup' || key === 'pagedown') {
          var year = ctrl.activeDate.getFullYear() + (key === 'pageup' ? - 1 : 1);
          ctrl.activeDate.setFullYear(year);
        } else if (key === 'home') {
          date = 0;
        } else if (key === 'end') {
          date = 11;
        }
        ctrl.activeDate.setMonth(date);
      };

      ctrl.refreshView();
    }
  };
}])

.directive('yearpicker', ['dateFilter', function (dateFilter) {
  return {
    restrict: 'EA',
    replace: true,
    templateUrl: 'template/datepicker/year.html',
    require: '^datepicker',
    link: function(scope, element, attrs, ctrl) {
      var range = ctrl.yearRange;

      ctrl.step = { years: range };
      ctrl.element = element;

      function getStartingYear( year ) {
        return parseInt((year - 1) / range, 10) * range + 1;
      }

      ctrl._refreshView = function() {
        var years = new Array(range);

        for ( var i = 0, start = getStartingYear(ctrl.activeDate.getFullYear()); i < range; i++ ) {
          years[i] = angular.extend(ctrl.createDateObject(new Date(start + i, 0, 1), ctrl.formatYear), {
            uid: scope.uniqueId + '-' + i
          });
        }

        scope.title = [years[0].label, years[range - 1].label].join(' - ');
        scope.rows = ctrl.split(years, 5);
      };

      ctrl.compare = function(date1, date2) {
        return date1.getFullYear() - date2.getFullYear();
      };

      ctrl.handleKeyDown = function( key, evt ) {
        var date = ctrl.activeDate.getFullYear();

        if (key === 'left') {
          date = date - 1;   // up
        } else if (key === 'up') {
          date = date - 5;   // down
        } else if (key === 'right') {
          date = date + 1;   // down
        } else if (key === 'down') {
          date = date + 5;
        } else if (key === 'pageup' || key === 'pagedown') {
          date += (key === 'pageup' ? - 1 : 1) * ctrl.step.years;
        } else if (key === 'home') {
          date = getStartingYear( ctrl.activeDate.getFullYear() );
        } else if (key === 'end') {
          date = getStartingYear( ctrl.activeDate.getFullYear() ) + range - 1;
        }
        ctrl.activeDate.setFullYear(date);
      };

      ctrl.refreshView();
    }
  };
}])

.constant('datepickerPopupConfig', {
  datepickerPopup: 'yyyy-MM-dd',
  currentText: 'Today',
  clearText: 'Clear',
  closeText: 'Done',
  closeOnDateSelection: true,
  appendToBody: false,
  showButtonBar: true
})

.directive('datepickerPopup', ['$compile', '$parse', '$document', '$position', 'dateFilter', 'dateParser', 'datepickerPopupConfig',
function ($compile, $parse, $document, $position, dateFilter, dateParser, datepickerPopupConfig) {
  return {
    restrict: 'EA',
    require: 'ngModel',
    scope: {
      isOpen: '=?',
      currentText: '@',
      clearText: '@',
      closeText: '@',
      dateDisabled: '&'
    },
    link: function(scope, element, attrs, ngModel) {
      var dateFormat,
          closeOnDateSelection = angular.isDefined(attrs.closeOnDateSelection) ? scope.$parent.$eval(attrs.closeOnDateSelection) : datepickerPopupConfig.closeOnDateSelection,
          appendToBody = angular.isDefined(attrs.datepickerAppendToBody) ? scope.$parent.$eval(attrs.datepickerAppendToBody) : datepickerPopupConfig.appendToBody;

      scope.showButtonBar = angular.isDefined(attrs.showButtonBar) ? scope.$parent.$eval(attrs.showButtonBar) : datepickerPopupConfig.showButtonBar;

      scope.getText = function( key ) {
        return scope[key + 'Text'] || datepickerPopupConfig[key + 'Text'];
      };

      attrs.$observe('datepickerPopup', function(value) {
          dateFormat = value || datepickerPopupConfig.datepickerPopup;
          ngModel.$render();
      });

      // popup element used to display calendar
      var popupEl = angular.element('<div datepicker-popup-wrap><div datepicker></div></div>');
      popupEl.attr({
        'ng-model': 'date',
        'ng-change': 'dateSelection()'
      });

      function cameltoDash( string ){
        return string.replace(/([A-Z])/g, function($1) { return '-' + $1.toLowerCase(); });
      }

      // datepicker element
      var datepickerEl = angular.element(popupEl.children()[0]);
      if ( attrs.datepickerOptions ) {
        angular.forEach(scope.$parent.$eval(attrs.datepickerOptions), function( value, option ) {
          datepickerEl.attr( cameltoDash(option), value );
        });
      }

      scope.watchData = {};
      angular.forEach(['minDate', 'maxDate', 'datepickerMode'], function( key ) {
        if ( attrs[key] ) {
          var getAttribute = $parse(attrs[key]);
          scope.$parent.$watch(getAttribute, function(value){
            scope.watchData[key] = value;
          });
          datepickerEl.attr(cameltoDash(key), 'watchData.' + key);

          // Propagate changes from datepicker to outside
          if ( key === 'datepickerMode' ) {
            var setAttribute = getAttribute.assign;
            scope.$watch('watchData.' + key, function(value, oldvalue) {
              if ( value !== oldvalue ) {
                setAttribute(scope.$parent, value);
              }
            });
          }
        }
      });
      if (attrs.dateDisabled) {
        datepickerEl.attr('date-disabled', 'dateDisabled({ date: date, mode: mode })');
      }

      function parseDate(viewValue) {
        if (!viewValue) {
          ngModel.$setValidity('date', true);
          return null;
        } else if (angular.isDate(viewValue) && !isNaN(viewValue)) {
          ngModel.$setValidity('date', true);
          return viewValue;
        } else if (angular.isString(viewValue)) {
          var date = dateParser.parse(viewValue, dateFormat) || new Date(viewValue);
          if (isNaN(date)) {
            ngModel.$setValidity('date', false);
            return undefined;
          } else {
            ngModel.$setValidity('date', true);
            return date;
          }
        } else {
          ngModel.$setValidity('date', false);
          return undefined;
        }
      }
      ngModel.$parsers.unshift(parseDate);

      // Inner change
      scope.dateSelection = function(dt) {
        if (angular.isDefined(dt)) {
          scope.date = dt;
        }
        ngModel.$setViewValue(scope.date);
        ngModel.$render();

        if ( closeOnDateSelection ) {
          scope.isOpen = false;
          element[0].focus();
        }
      };

      element.bind('input change keyup', function() {
        scope.$apply(function() {
          scope.date = ngModel.$modelValue;
        });
      });

      // Outter change
      ngModel.$render = function() {
        var date = ngModel.$viewValue ? dateFilter(ngModel.$viewValue, dateFormat) : '';
        element.val(date);
        scope.date = parseDate( ngModel.$modelValue );
      };

      var documentClickBind = function(event) {
        if (scope.isOpen && event.target !== element[0]) {
          scope.$apply(function() {
            scope.isOpen = false;
          });
        }
      };

      var keydown = function(evt, noApply) {
        scope.keydown(evt);
      };
      element.bind('keydown', keydown);

      scope.keydown = function(evt) {
        if (evt.which === 27) {
          evt.preventDefault();
          evt.stopPropagation();
          scope.close();
        } else if (evt.which === 40 && !scope.isOpen) {
          scope.isOpen = true;
        }
      };

      scope.$watch('isOpen', function(value) {
        if (value) {
          scope.$broadcast('datepicker.focus');
          scope.position = appendToBody ? $position.offset(element) : $position.position(element);
          scope.position.top = scope.position.top + element.prop('offsetHeight');

          $document.bind('click', documentClickBind);
        } else {
          $document.unbind('click', documentClickBind);
        }
      });

      scope.select = function( date ) {
        if (date === 'today') {
          var today = new Date();
          if (angular.isDate(ngModel.$modelValue)) {
            date = new Date(ngModel.$modelValue);
            date.setFullYear(today.getFullYear(), today.getMonth(), today.getDate());
          } else {
            date = new Date(today.setHours(0, 0, 0, 0));
          }
        }
        scope.dateSelection( date );
      };

      scope.close = function() {
        scope.isOpen = false;
        element[0].focus();
      };

      var $popup = $compile(popupEl)(scope);
      // Prevent jQuery cache memory leak (template is now redundant after linking)
      popupEl.remove();

      if ( appendToBody ) {
        $document.find('body').append($popup);
      } else {
        element.after($popup);
      }

      scope.$on('$destroy', function() {
        $popup.remove();
        element.unbind('keydown', keydown);
        $document.unbind('click', documentClickBind);
      });
    }
  };
}])

.directive('datepickerPopupWrap', function() {
  return {
    restrict:'EA',
    replace: true,
    transclude: true,
    templateUrl: 'template/datepicker/popup.html',
    link:function (scope, element, attrs) {
      element.bind('click', function(event) {
        event.preventDefault();
        event.stopPropagation();
      });
    }
  };
});

angular.module('ui.bootstrap.dropdown', [])

.constant('dropdownConfig', {
  openClass: 'open'
})

.service('dropdownService', ['$document', function($document) {
  var openScope = null;

  this.open = function( dropdownScope ) {
    if ( !openScope ) {
      $document.bind('click', closeDropdown);
      $document.bind('keydown', escapeKeyBind);
    }

    if ( openScope && openScope !== dropdownScope ) {
        openScope.isOpen = false;
    }

    openScope = dropdownScope;
  };

  this.close = function( dropdownScope ) {
    if ( openScope === dropdownScope ) {
      openScope = null;
      $document.unbind('click', closeDropdown);
      $document.unbind('keydown', escapeKeyBind);
    }
  };

  var closeDropdown = function( evt ) {
    var toggleElement = openScope.getToggleElement();
    if ( evt && toggleElement && toggleElement[0].contains(evt.target) ) {
        return;
    }

    openScope.$apply(function() {
      openScope.isOpen = false;
    });
  };

  var escapeKeyBind = function( evt ) {
    if ( evt.which === 27 ) {
      openScope.focusToggleElement();
      closeDropdown();
    }
  };
}])

.controller('DropdownController', ['$scope', '$attrs', '$parse', 'dropdownConfig', 'dropdownService', '$animate', function($scope, $attrs, $parse, dropdownConfig, dropdownService, $animate) {
  var self = this,
      scope = $scope.$new(), // create a child scope so we are not polluting original one
      openClass = dropdownConfig.openClass,
      getIsOpen,
      setIsOpen = angular.noop,
      toggleInvoker = $attrs.onToggle ? $parse($attrs.onToggle) : angular.noop;

  this.init = function( element ) {
    self.$element = element;

    if ( $attrs.isOpen ) {
      getIsOpen = $parse($attrs.isOpen);
      setIsOpen = getIsOpen.assign;

      $scope.$watch(getIsOpen, function(value) {
        scope.isOpen = !!value;
      });
    }
  };

  this.toggle = function( open ) {
    return scope.isOpen = arguments.length ? !!open : !scope.isOpen;
  };

  // Allow other directives to watch status
  this.isOpen = function() {
    return scope.isOpen;
  };

  scope.getToggleElement = function() {
    return self.toggleElement;
  };

  scope.focusToggleElement = function() {
    if ( self.toggleElement ) {
      self.toggleElement[0].focus();
    }
  };

  scope.$watch('isOpen', function( isOpen, wasOpen ) {
    $animate[isOpen ? 'addClass' : 'removeClass'](self.$element, openClass);

    if ( isOpen ) {
      scope.focusToggleElement();
      dropdownService.open( scope );
    } else {
      dropdownService.close( scope );
    }

    setIsOpen($scope, isOpen);
    if (angular.isDefined(isOpen) && isOpen !== wasOpen) {
      toggleInvoker($scope, { open: !!isOpen });
    }
  });

  $scope.$on('$locationChangeSuccess', function() {
    scope.isOpen = false;
  });

  $scope.$on('$destroy', function() {
    scope.$destroy();
  });
}])

.directive('dropdown', function() {
  return {
    restrict: 'CA',
    controller: 'DropdownController',
    link: function(scope, element, attrs, dropdownCtrl) {
      dropdownCtrl.init( element );
    }
  };
})

.directive('dropdownToggle', function() {
  return {
    restrict: 'CA',
    require: '?^dropdown',
    link: function(scope, element, attrs, dropdownCtrl) {
      if ( !dropdownCtrl ) {
        return;
      }

      dropdownCtrl.toggleElement = element;

      var toggleDropdown = function(event) {
        event.preventDefault();

        if ( !element.hasClass('disabled') && !attrs.disabled ) {
          scope.$apply(function() {
            dropdownCtrl.toggle();
          });
        }
      };

      element.bind('click', toggleDropdown);

      // WAI-ARIA
      element.attr({ 'aria-haspopup': true, 'aria-expanded': false });
      scope.$watch(dropdownCtrl.isOpen, function( isOpen ) {
        element.attr('aria-expanded', !!isOpen);
      });

      scope.$on('$destroy', function() {
        element.unbind('click', toggleDropdown);
      });
    }
  };
});

angular.module('ui.bootstrap.modal', ['ui.bootstrap.transition'])

/**
 * A helper, internal data structure that acts as a map but also allows getting / removing
 * elements in the LIFO order
 */
  .factory('$$stackedMap', function () {
    return {
      createNew: function () {
        var stack = [];

        return {
          add: function (key, value) {
            stack.push({
              key: key,
              value: value
            });
          },
          get: function (key) {
            for (var i = 0; i < stack.length; i++) {
              if (key == stack[i].key) {
                return stack[i];
              }
            }
          },
          keys: function() {
            var keys = [];
            for (var i = 0; i < stack.length; i++) {
              keys.push(stack[i].key);
            }
            return keys;
          },
          top: function () {
            return stack[stack.length - 1];
          },
          remove: function (key) {
            var idx = -1;
            for (var i = 0; i < stack.length; i++) {
              if (key == stack[i].key) {
                idx = i;
                break;
              }
            }
            return stack.splice(idx, 1)[0];
          },
          removeTop: function () {
            return stack.splice(stack.length - 1, 1)[0];
          },
          length: function () {
            return stack.length;
          }
        };
      }
    };
  })

/**
 * A helper directive for the $modal service. It creates a backdrop element.
 */
  .directive('modalBackdrop', ['$timeout', function ($timeout) {
    return {
      restrict: 'EA',
      replace: true,
      templateUrl: 'template/modal/backdrop.html',
      link: function (scope, element, attrs) {
        scope.backdropClass = attrs.backdropClass || '';

        scope.animate = false;

        //trigger CSS transitions
        $timeout(function () {
          scope.animate = true;
        });
      }
    };
  }])

  .directive('modalWindow', ['$modalStack', '$timeout', function ($modalStack, $timeout) {
    return {
      restrict: 'EA',
      scope: {
        index: '@',
        animate: '='
      },
      replace: true,
      transclude: true,
      templateUrl: function(tElement, tAttrs) {
        return tAttrs.templateUrl || 'template/modal/window.html';
      },
      link: function (scope, element, attrs) {
        element.addClass(attrs.windowClass || '');
        scope.size = attrs.size;

        $timeout(function () {
          // trigger CSS transitions
          scope.animate = true;

          /**
           * Auto-focusing of a freshly-opened modal element causes any child elements
           * with the autofocus attribute to loose focus. This is an issue on touch
           * based devices which will show and then hide the onscreen keyboard.
           * Attempts to refocus the autofocus element via JavaScript will not reopen
           * the onscreen keyboard. Fixed by updated the focusing logic to only autofocus
           * the modal element if the modal does not contain an autofocus element.
           */
          if (!element[0].querySelectorAll('[autofocus]').length) {
            element[0].focus();
          }
        });

        scope.close = function (evt) {
          var modal = $modalStack.getTop();
          if (modal && modal.value.backdrop && modal.value.backdrop != 'static' && (evt.target === evt.currentTarget)) {
            evt.preventDefault();
            evt.stopPropagation();
            $modalStack.dismiss(modal.key, 'backdrop click');
          }
        };
      }
    };
  }])

  .directive('modalTransclude', function () {
    return {
      link: function($scope, $element, $attrs, controller, $transclude) {
        $transclude($scope.$parent, function(clone) {
          $element.empty();
          $element.append(clone);
        });
      }
    };
  })

  .factory('$modalStack', ['$transition', '$timeout', '$document', '$compile', '$rootScope', '$$stackedMap',
    function ($transition, $timeout, $document, $compile, $rootScope, $$stackedMap) {

      var OPENED_MODAL_CLASS = 'modal-open';

      var backdropDomEl, backdropScope;
      var openedWindows = $$stackedMap.createNew();
      var $modalStack = {};

      function backdropIndex() {
        var topBackdropIndex = -1;
        var opened = openedWindows.keys();
        for (var i = 0; i < opened.length; i++) {
          if (openedWindows.get(opened[i]).value.backdrop) {
            topBackdropIndex = i;
          }
        }
        return topBackdropIndex;
      }

      $rootScope.$watch(backdropIndex, function(newBackdropIndex){
        if (backdropScope) {
          backdropScope.index = newBackdropIndex;
        }
      });

      function removeModalWindow(modalInstance) {

        var body = $document.find('body').eq(0);
        var modalWindow = openedWindows.get(modalInstance).value;

        //clean up the stack
        openedWindows.remove(modalInstance);

        //remove window DOM element
        removeAfterAnimate(modalWindow.modalDomEl, modalWindow.modalScope, 300, function() {
          modalWindow.modalScope.$destroy();
          body.toggleClass(OPENED_MODAL_CLASS, openedWindows.length() > 0);
          checkRemoveBackdrop();
        });
      }

      function checkRemoveBackdrop() {
          //remove backdrop if no longer needed
          if (backdropDomEl && backdropIndex() == -1) {
            var backdropScopeRef = backdropScope;
            removeAfterAnimate(backdropDomEl, backdropScope, 150, function () {
              backdropScopeRef.$destroy();
              backdropScopeRef = null;
            });
            backdropDomEl = undefined;
            backdropScope = undefined;
          }
      }

      function removeAfterAnimate(domEl, scope, emulateTime, done) {
        // Closing animation
        scope.animate = false;

        var transitionEndEventName = $transition.transitionEndEventName;
        if (transitionEndEventName) {
          // transition out
          var timeout = $timeout(afterAnimating, emulateTime);

          domEl.bind(transitionEndEventName, function () {
            $timeout.cancel(timeout);
            afterAnimating();
            scope.$apply();
          });
        } else {
          // Ensure this call is async
          $timeout(afterAnimating);
        }

        function afterAnimating() {
          if (afterAnimating.done) {
            return;
          }
          afterAnimating.done = true;

          domEl.remove();
          if (done) {
            done();
          }
        }
      }

      $document.bind('keydown', function (evt) {
        var modal;

        if (evt.which === 27) {
          modal = openedWindows.top();
          if (modal && modal.value.keyboard) {
            evt.preventDefault();
            $rootScope.$apply(function () {
              $modalStack.dismiss(modal.key, 'escape key press');
            });
          }
        }
      });

      $modalStack.open = function (modalInstance, modal) {

        openedWindows.add(modalInstance, {
          deferred: modal.deferred,
          modalScope: modal.scope,
          backdrop: modal.backdrop,
          keyboard: modal.keyboard
        });

        var body = $document.find('body').eq(0),
            currBackdropIndex = backdropIndex();

        if (currBackdropIndex >= 0 && !backdropDomEl) {
          backdropScope = $rootScope.$new(true);
          backdropScope.index = currBackdropIndex;
          var angularBackgroundDomEl = angular.element('<div modal-backdrop></div>');
          angularBackgroundDomEl.attr('backdrop-class', modal.backdropClass);
          backdropDomEl = $compile(angularBackgroundDomEl)(backdropScope);
          body.append(backdropDomEl);
        }

        var angularDomEl = angular.element('<div modal-window></div>');
        angularDomEl.attr({
          'template-url': modal.windowTemplateUrl,
          'window-class': modal.windowClass,
          'size': modal.size,
          'index': openedWindows.length() - 1,
          'animate': 'animate'
        }).html(modal.content);

        var modalDomEl = $compile(angularDomEl)(modal.scope);
        openedWindows.top().value.modalDomEl = modalDomEl;
        body.append(modalDomEl);
        body.addClass(OPENED_MODAL_CLASS);
      };

      $modalStack.close = function (modalInstance, result) {
        var modalWindow = openedWindows.get(modalInstance);
        if (modalWindow) {
          modalWindow.value.deferred.resolve(result);
          removeModalWindow(modalInstance);
        }
      };

      $modalStack.dismiss = function (modalInstance, reason) {
        var modalWindow = openedWindows.get(modalInstance);
        if (modalWindow) {
          modalWindow.value.deferred.reject(reason);
          removeModalWindow(modalInstance);
        }
      };

      $modalStack.dismissAll = function (reason) {
        var topModal = this.getTop();
        while (topModal) {
          this.dismiss(topModal.key, reason);
          topModal = this.getTop();
        }
      };

      $modalStack.getTop = function () {
        return openedWindows.top();
      };

      return $modalStack;
    }])

  .provider('$modal', function () {

    var $modalProvider = {
      options: {
        backdrop: true, //can be also false or 'static'
        keyboard: true
      },
      $get: ['$injector', '$rootScope', '$q', '$http', '$templateCache', '$controller', '$modalStack',
        function ($injector, $rootScope, $q, $http, $templateCache, $controller, $modalStack) {

          var $modal = {};

          function getTemplatePromise(options) {
            return options.template ? $q.when(options.template) :
              $http.get(angular.isFunction(options.templateUrl) ? (options.templateUrl)() : options.templateUrl,
                {cache: $templateCache}).then(function (result) {
                  return result.data;
              });
          }

          function getResolvePromises(resolves) {
            var promisesArr = [];
            angular.forEach(resolves, function (value) {
              if (angular.isFunction(value) || angular.isArray(value)) {
                promisesArr.push($q.when($injector.invoke(value)));
              }
            });
            return promisesArr;
          }

          $modal.open = function (modalOptions) {

            var modalResultDeferred = $q.defer();
            var modalOpenedDeferred = $q.defer();

            //prepare an instance of a modal to be injected into controllers and returned to a caller
            var modalInstance = {
              result: modalResultDeferred.promise,
              opened: modalOpenedDeferred.promise,
              close: function (result) {
                $modalStack.close(modalInstance, result);
              },
              dismiss: function (reason) {
                $modalStack.dismiss(modalInstance, reason);
              }
            };

            //merge and clean up options
            modalOptions = angular.extend({}, $modalProvider.options, modalOptions);
            modalOptions.resolve = modalOptions.resolve || {};

            //verify options
            if (!modalOptions.template && !modalOptions.templateUrl) {
              throw new Error('One of template or templateUrl options is required.');
            }

            var templateAndResolvePromise =
              $q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));


            templateAndResolvePromise.then(function resolveSuccess(tplAndVars) {

              var modalScope = (modalOptions.scope || $rootScope).$new();
              modalScope.$close = modalInstance.close;
              modalScope.$dismiss = modalInstance.dismiss;

              var ctrlInstance, ctrlLocals = {};
              var resolveIter = 1;

              //controllers
              if (modalOptions.controller) {
                ctrlLocals.$scope = modalScope;
                ctrlLocals.$modalInstance = modalInstance;
                angular.forEach(modalOptions.resolve, function (value, key) {
                  ctrlLocals[key] = tplAndVars[resolveIter++];
                });

                ctrlInstance = $controller(modalOptions.controller, ctrlLocals);
                if (modalOptions.controllerAs) {
                  modalScope[modalOptions.controllerAs] = ctrlInstance;
                }
              }

              $modalStack.open(modalInstance, {
                scope: modalScope,
                deferred: modalResultDeferred,
                content: tplAndVars[0],
                backdrop: modalOptions.backdrop,
                keyboard: modalOptions.keyboard,
                backdropClass: modalOptions.backdropClass,
                windowClass: modalOptions.windowClass,
                windowTemplateUrl: modalOptions.windowTemplateUrl,
                size: modalOptions.size
              });

            }, function resolveError(reason) {
              modalResultDeferred.reject(reason);
            });

            templateAndResolvePromise.then(function () {
              modalOpenedDeferred.resolve(true);
            }, function () {
              modalOpenedDeferred.reject(false);
            });

            return modalInstance;
          };

          return $modal;
        }]
    };

    return $modalProvider;
  });

angular.module('ui.bootstrap.pagination', [])

.controller('PaginationController', ['$scope', '$attrs', '$parse', function ($scope, $attrs, $parse) {
  var self = this,
      ngModelCtrl = { $setViewValue: angular.noop }, // nullModelCtrl
      setNumPages = $attrs.numPages ? $parse($attrs.numPages).assign : angular.noop;

  this.init = function(ngModelCtrl_, config) {
    ngModelCtrl = ngModelCtrl_;
    this.config = config;

    ngModelCtrl.$render = function() {
      self.render();
    };

    if ($attrs.itemsPerPage) {
      $scope.$parent.$watch($parse($attrs.itemsPerPage), function(value) {
        self.itemsPerPage = parseInt(value, 10);
        $scope.totalPages = self.calculateTotalPages();
      });
    } else {
      this.itemsPerPage = config.itemsPerPage;
    }
  };

  this.calculateTotalPages = function() {
    var totalPages = this.itemsPerPage < 1 ? 1 : Math.ceil($scope.totalItems / this.itemsPerPage);
    return Math.max(totalPages || 0, 1);
  };

  this.render = function() {
    $scope.page = parseInt(ngModelCtrl.$viewValue, 10) || 1;
  };

  $scope.selectPage = function(page) {
    if ( $scope.page !== page && page > 0 && page <= $scope.totalPages) {
      ngModelCtrl.$setViewValue(page);
      ngModelCtrl.$render();
    }
  };

  $scope.getText = function( key ) {
    return $scope[key + 'Text'] || self.config[key + 'Text'];
  };
  $scope.noPrevious = function() {
    return $scope.page === 1;
  };
  $scope.noNext = function() {
    return $scope.page === $scope.totalPages;
  };

  $scope.$watch('totalItems', function() {
    $scope.totalPages = self.calculateTotalPages();
  });

  $scope.$watch('totalPages', function(value) {
    setNumPages($scope.$parent, value); // Readonly variable

    if ( $scope.page > value ) {
      $scope.selectPage(value);
    } else {
      ngModelCtrl.$render();
    }
  });
}])

.constant('paginationConfig', {
  itemsPerPage: 10,
  boundaryLinks: false,
  directionLinks: true,
  firstText: 'First',
  previousText: 'Previous',
  nextText: 'Next',
  lastText: 'Last',
  rotate: true
})

.directive('pagination', ['$parse', 'paginationConfig', function($parse, paginationConfig) {
  return {
    restrict: 'EA',
    scope: {
      totalItems: '=',
      firstText: '@',
      previousText: '@',
      nextText: '@',
      lastText: '@'
    },
    require: ['pagination', '?ngModel'],
    controller: 'PaginationController',
    templateUrl: 'template/pagination/pagination.html',
    replace: true,
    link: function(scope, element, attrs, ctrls) {
      var paginationCtrl = ctrls[0], ngModelCtrl = ctrls[1];

      if (!ngModelCtrl) {
         return; // do nothing if no ng-model
      }

      // Setup configuration parameters
      var maxSize = angular.isDefined(attrs.maxSize) ? scope.$parent.$eval(attrs.maxSize) : paginationConfig.maxSize,
          rotate = angular.isDefined(attrs.rotate) ? scope.$parent.$eval(attrs.rotate) : paginationConfig.rotate;
      scope.boundaryLinks = angular.isDefined(attrs.boundaryLinks) ? scope.$parent.$eval(attrs.boundaryLinks) : paginationConfig.boundaryLinks;
      scope.directionLinks = angular.isDefined(attrs.directionLinks) ? scope.$parent.$eval(attrs.directionLinks) : paginationConfig.directionLinks;

      paginationCtrl.init(ngModelCtrl, paginationConfig);

      if (attrs.maxSize) {
        scope.$parent.$watch($parse(attrs.maxSize), function(value) {
          maxSize = parseInt(value, 10);
          paginationCtrl.render();
        });
      }

      // Create page object used in template
      function makePage(number, text, isActive) {
        return {
          number: number,
          text: text,
          active: isActive
        };
      }

      function getPages(currentPage, totalPages) {
        var pages = [];

        // Default page limits
        var startPage = 1, endPage = totalPages;
        var isMaxSized = ( angular.isDefined(maxSize) && maxSize < totalPages );

        // recompute if maxSize
        if ( isMaxSized ) {
          if ( rotate ) {
            // Current page is displayed in the middle of the visible ones
            startPage = Math.max(currentPage - Math.floor(maxSize/2), 1);
            endPage   = startPage + maxSize - 1;

            // Adjust if limit is exceeded
            if (endPage > totalPages) {
              endPage   = totalPages;
              startPage = endPage - maxSize + 1;
            }
          } else {
            // Visible pages are paginated with maxSize
            startPage = ((Math.ceil(currentPage / maxSize) - 1) * maxSize) + 1;

            // Adjust last page if limit is exceeded
            endPage = Math.min(startPage + maxSize - 1, totalPages);
          }
        }

        // Add page number links
        for (var number = startPage; number <= endPage; number++) {
          var page = makePage(number, number, number === currentPage);
          pages.push(page);
        }

        // Add links to move between page sets
        if ( isMaxSized && ! rotate ) {
          if ( startPage > 1 ) {
            var previousPageSet = makePage(startPage - 1, '...', false);
            pages.unshift(previousPageSet);
          }

          if ( endPage < totalPages ) {
            var nextPageSet = makePage(endPage + 1, '...', false);
            pages.push(nextPageSet);
          }
        }

        return pages;
      }

      var originalRender = paginationCtrl.render;
      paginationCtrl.render = function() {
        originalRender();
        if (scope.page > 0 && scope.page <= scope.totalPages) {
          scope.pages = getPages(scope.page, scope.totalPages);
        }
      };
    }
  };
}])

.constant('pagerConfig', {
  itemsPerPage: 10,
  previousText: '« Previous',
  nextText: 'Next »',
  align: true
})

.directive('pager', ['pagerConfig', function(pagerConfig) {
  return {
    restrict: 'EA',
    scope: {
      totalItems: '=',
      previousText: '@',
      nextText: '@'
    },
    require: ['pager', '?ngModel'],
    controller: 'PaginationController',
    templateUrl: 'template/pagination/pager.html',
    replace: true,
    link: function(scope, element, attrs, ctrls) {
      var paginationCtrl = ctrls[0], ngModelCtrl = ctrls[1];

      if (!ngModelCtrl) {
         return; // do nothing if no ng-model
      }

      scope.align = angular.isDefined(attrs.align) ? scope.$parent.$eval(attrs.align) : pagerConfig.align;
      paginationCtrl.init(ngModelCtrl, pagerConfig);
    }
  };
}]);

/**
 * The following features are still outstanding: animation as a
 * function, placement as a function, inside, support for more triggers than
 * just mouse enter/leave, html tooltips, and selector delegation.
 */
angular.module( 'ui.bootstrap.tooltip', [ 'ui.bootstrap.position', 'ui.bootstrap.bindHtml' ] )

/**
 * The $tooltip service creates tooltip- and popover-like directives as well as
 * houses global options for them.
 */
.provider( '$tooltip', function () {
  // The default options tooltip and popover.
  var defaultOptions = {
    placement: 'top',
    animation: true,
    popupDelay: 0
  };

  // Default hide triggers for each show trigger
  var triggerMap = {
    'mouseenter': 'mouseleave',
    'click': 'click',
    'focus': 'blur'
  };

  // The options specified to the provider globally.
  var globalOptions = {};

  /**
   * `options({})` allows global configuration of all tooltips in the
   * application.
   *
   *   var app = angular.module( 'App', ['ui.bootstrap.tooltip'], function( $tooltipProvider ) {
   *     // place tooltips left instead of top by default
   *     $tooltipProvider.options( { placement: 'left' } );
   *   });
   */
	this.options = function( value ) {
		angular.extend( globalOptions, value );
	};

  /**
   * This allows you to extend the set of trigger mappings available. E.g.:
   *
   *   $tooltipProvider.setTriggers( 'openTrigger': 'closeTrigger' );
   */
  this.setTriggers = function setTriggers ( triggers ) {
    angular.extend( triggerMap, triggers );
  };

  /**
   * This is a helper function for translating camel-case to snake-case.
   */
  function snake_case(name){
    var regexp = /[A-Z]/g;
    var separator = '-';
    return name.replace(regexp, function(letter, pos) {
      return (pos ? separator : '') + letter.toLowerCase();
    });
  }

  /**
   * Returns the actual instance of the $tooltip service.
   * TODO support multiple triggers
   */
  this.$get = [ '$window', '$compile', '$timeout', '$parse', '$document', '$position', '$interpolate', function ( $window, $compile, $timeout, $parse, $document, $position, $interpolate ) {
    return function $tooltip ( type, prefix, defaultTriggerShow ) {
      var options = angular.extend( {}, defaultOptions, globalOptions );

      /**
       * Returns an object of show and hide triggers.
       *
       * If a trigger is supplied,
       * it is used to show the tooltip; otherwise, it will use the `trigger`
       * option passed to the `$tooltipProvider.options` method; else it will
       * default to the trigger supplied to this directive factory.
       *
       * The hide trigger is based on the show trigger. If the `trigger` option
       * was passed to the `$tooltipProvider.options` method, it will use the
       * mapped trigger from `triggerMap` or the passed trigger if the map is
       * undefined; otherwise, it uses the `triggerMap` value of the show
       * trigger; else it will just use the show trigger.
       */
      function getTriggers ( trigger ) {
        var show = trigger || options.trigger || defaultTriggerShow;
        var hide = triggerMap[show] || show;
        return {
          show: show,
          hide: hide
        };
      }

      var directiveName = snake_case( type );

      var startSym = $interpolate.startSymbol();
      var endSym = $interpolate.endSymbol();
      var template =
        '<div '+ directiveName +'-popup '+
          'title="'+startSym+'tt_title'+endSym+'" '+
          'content="'+startSym+'tt_content'+endSym+'" '+
          'placement="'+startSym+'tt_placement'+endSym+'" '+
          'animation="tt_animation" '+
          'is-open="tt_isOpen"'+
          '>'+
        '</div>';

      return {
        restrict: 'EA',
        scope: true,
        compile: function (tElem, tAttrs) {
          var tooltipLinker = $compile( template );

          return function link ( scope, element, attrs ) {
            var tooltip;
            var transitionTimeout;
            var popupTimeout;
            var appendToBody = angular.isDefined( options.appendToBody ) ? options.appendToBody : false;
            var triggers = getTriggers( undefined );
            var hasEnableExp = angular.isDefined(attrs[prefix+'Enable']);

            var positionTooltip = function () {

              var ttPosition = $position.positionElements(element, tooltip, scope.tt_placement, appendToBody);
              ttPosition.top += 'px';
              ttPosition.left += 'px';

              // Now set the calculated positioning.
              tooltip.css( ttPosition );
            };

            // By default, the tooltip is not open.
            // TODO add ability to start tooltip opened
            scope.tt_isOpen = false;

            function toggleTooltipBind () {
              if ( ! scope.tt_isOpen ) {
                showTooltipBind();
              } else {
                hideTooltipBind();
              }
            }

            // Show the tooltip with delay if specified, otherwise show it immediately
            function showTooltipBind() {
              if(hasEnableExp && !scope.$eval(attrs[prefix+'Enable'])) {
                return;
              }
              if ( scope.tt_popupDelay ) {
                // Do nothing if the tooltip was already scheduled to pop-up.
                // This happens if show is triggered multiple times before any hide is triggered.
                if (!popupTimeout) {
                  popupTimeout = $timeout( show, scope.tt_popupDelay, false );
                  popupTimeout.then(function(reposition){reposition();});
                }
              } else {
                show()();
              }
            }

            function hideTooltipBind () {
              scope.$apply(function () {
                hide();
              });
            }

            // Show the tooltip popup element.
            function show() {

              popupTimeout = null;

              // If there is a pending remove transition, we must cancel it, lest the
              // tooltip be mysteriously removed.
              if ( transitionTimeout ) {
                $timeout.cancel( transitionTimeout );
                transitionTimeout = null;
              }

              // Don't show empty tooltips.
              if ( ! scope.tt_content ) {
                return angular.noop;
              }

              createTooltip();

              // Set the initial positioning.
              tooltip.css({ top: 0, left: 0, display: 'block' });

              // Now we add it to the DOM because need some info about it. But it's not 
              // visible yet anyway.
              if ( appendToBody ) {
                  $document.find( 'body' ).append( tooltip );
              } else {
                element.after( tooltip );
              }

              positionTooltip();

              // And show the tooltip.
              scope.tt_isOpen = true;
              scope.$digest(); // digest required as $apply is not called

              // Return positioning function as promise callback for correct
              // positioning after draw.
              return positionTooltip;
            }

            // Hide the tooltip popup element.
            function hide() {
              // First things first: we don't show it anymore.
              scope.tt_isOpen = false;

              //if tooltip is going to be shown after delay, we must cancel this
              $timeout.cancel( popupTimeout );
              popupTimeout = null;

              // And now we remove it from the DOM. However, if we have animation, we 
              // need to wait for it to expire beforehand.
              // FIXME: this is a placeholder for a port of the transitions library.
              if ( scope.tt_animation ) {
                if (!transitionTimeout) {
                  transitionTimeout = $timeout(removeTooltip, 500);
                }
              } else {
                removeTooltip();
              }
            }

            function createTooltip() {
              // There can only be one tooltip element per directive shown at once.
              if (tooltip) {
                removeTooltip();
              }
              tooltip = tooltipLinker(scope, function () {});

              // Get contents rendered into the tooltip
              scope.$digest();
            }

            function removeTooltip() {
              transitionTimeout = null;
              if (tooltip) {
                tooltip.remove();
                tooltip = null;
              }
            }

            /**
             * Observe the relevant attributes.
             */
            attrs.$observe( type, function ( val ) {
              scope.tt_content = val;

              if (!val && scope.tt_isOpen ) {
                hide();
              }
            });

            attrs.$observe( prefix+'Title', function ( val ) {
              scope.tt_title = val;
            });

            attrs.$observe( prefix+'Placement', function ( val ) {
              scope.tt_placement = angular.isDefined( val ) ? val : options.placement;
            });

            attrs.$observe( prefix+'PopupDelay', function ( val ) {
              var delay = parseInt( val, 10 );
              scope.tt_popupDelay = ! isNaN(delay) ? delay : options.popupDelay;
            });

            var unregisterTriggers = function () {
              element.unbind(triggers.show, showTooltipBind);
              element.unbind(triggers.hide, hideTooltipBind);
            };

            attrs.$observe( prefix+'Trigger', function ( val ) {
              unregisterTriggers();

              triggers = getTriggers( val );

              if ( triggers.show === triggers.hide ) {
                element.bind( triggers.show, toggleTooltipBind );
              } else {
                element.bind( triggers.show, showTooltipBind );
                element.bind( triggers.hide, hideTooltipBind );
              }
            });

            var animation = scope.$eval(attrs[prefix + 'Animation']);
            scope.tt_animation = angular.isDefined(animation) ? !!animation : options.animation;

            attrs.$observe( prefix+'AppendToBody', function ( val ) {
              appendToBody = angular.isDefined( val ) ? $parse( val )( scope ) : appendToBody;
            });

            // if a tooltip is attached to <body> we need to remove it on
            // location change as its parent scope will probably not be destroyed
            // by the change.
            if ( appendToBody ) {
              scope.$on('$locationChangeSuccess', function closeTooltipOnLocationChangeSuccess () {
              if ( scope.tt_isOpen ) {
                hide();
              }
            });
            }

            // Make sure tooltip is destroyed and removed.
            scope.$on('$destroy', function onDestroyTooltip() {
              $timeout.cancel( transitionTimeout );
              $timeout.cancel( popupTimeout );
              unregisterTriggers();
              removeTooltip();
            });
          };
        }
      };
    };
  }];
})

.directive( 'tooltipPopup', function () {
  return {
    restrict: 'EA',
    replace: true,
    scope: { content: '@', placement: '@', animation: '&', isOpen: '&' },
    templateUrl: 'template/tooltip/tooltip-popup.html'
  };
})

.directive( 'tooltip', [ '$tooltip', function ( $tooltip ) {
  return $tooltip( 'tooltip', 'tooltip', 'mouseenter' );
}])

.directive( 'tooltipHtmlUnsafePopup', function () {
  return {
    restrict: 'EA',
    replace: true,
    scope: { content: '@', placement: '@', animation: '&', isOpen: '&' },
    templateUrl: 'template/tooltip/tooltip-html-unsafe-popup.html'
  };
})

.directive( 'tooltipHtmlUnsafe', [ '$tooltip', function ( $tooltip ) {
  return $tooltip( 'tooltipHtmlUnsafe', 'tooltip', 'mouseenter' );
}]);

/**
 * The following features are still outstanding: popup delay, animation as a
 * function, placement as a function, inside, support for more triggers than
 * just mouse enter/leave, html popovers, and selector delegatation.
 */
angular.module( 'ui.bootstrap.popover', [ 'ui.bootstrap.tooltip' ] )

.directive( 'popoverPopup', function () {
  return {
    restrict: 'EA',
    replace: true,
    scope: { title: '@', content: '@', placement: '@', animation: '&', isOpen: '&' },
    templateUrl: 'template/popover/popover.html'
  };
})

.directive( 'popover', [ '$tooltip', function ( $tooltip ) {
  return $tooltip( 'popover', 'popover', 'click' );
}]);

angular.module('ui.bootstrap.progressbar', [])

.constant('progressConfig', {
  animate: true,
  max: 100
})

.controller('ProgressController', ['$scope', '$attrs', 'progressConfig', function($scope, $attrs, progressConfig) {
    var self = this,
        animate = angular.isDefined($attrs.animate) ? $scope.$parent.$eval($attrs.animate) : progressConfig.animate;

    this.bars = [];
    $scope.max = angular.isDefined($attrs.max) ? $scope.$parent.$eval($attrs.max) : progressConfig.max;

    this.addBar = function(bar, element) {
        if ( !animate ) {
            element.css({'transition': 'none'});
        }

        this.bars.push(bar);

        bar.$watch('value', function( value ) {
            bar.percent = +(100 * value / $scope.max).toFixed(2);
        });

        bar.$on('$destroy', function() {
            element = null;
            self.removeBar(bar);
        });
    };

    this.removeBar = function(bar) {
        this.bars.splice(this.bars.indexOf(bar), 1);
    };
}])

.directive('progress', function() {
    return {
        restrict: 'EA',
        replace: true,
        transclude: true,
        controller: 'ProgressController',
        require: 'progress',
        scope: {},
        templateUrl: 'template/progressbar/progress.html'
    };
})

.directive('bar', function() {
    return {
        restrict: 'EA',
        replace: true,
        transclude: true,
        require: '^progress',
        scope: {
            value: '=',
            type: '@'
        },
        templateUrl: 'template/progressbar/bar.html',
        link: function(scope, element, attrs, progressCtrl) {
            progressCtrl.addBar(scope, element);
        }
    };
})

.directive('progressbar', function() {
    return {
        restrict: 'EA',
        replace: true,
        transclude: true,
        controller: 'ProgressController',
        scope: {
            value: '=',
            type: '@'
        },
        templateUrl: 'template/progressbar/progressbar.html',
        link: function(scope, element, attrs, progressCtrl) {
            progressCtrl.addBar(scope, angular.element(element.children()[0]));
        }
    };
});
angular.module('ui.bootstrap.rating', [])

.constant('ratingConfig', {
  max: 5,
  stateOn: null,
  stateOff: null
})

.controller('RatingController', ['$scope', '$attrs', 'ratingConfig', function($scope, $attrs, ratingConfig) {
  var ngModelCtrl  = { $setViewValue: angular.noop };

  this.init = function(ngModelCtrl_) {
    ngModelCtrl = ngModelCtrl_;
    ngModelCtrl.$render = this.render;

    this.stateOn = angular.isDefined($attrs.stateOn) ? $scope.$parent.$eval($attrs.stateOn) : ratingConfig.stateOn;
    this.stateOff = angular.isDefined($attrs.stateOff) ? $scope.$parent.$eval($attrs.stateOff) : ratingConfig.stateOff;

    var ratingStates = angular.isDefined($attrs.ratingStates) ? $scope.$parent.$eval($attrs.ratingStates) :
                        new Array( angular.isDefined($attrs.max) ? $scope.$parent.$eval($attrs.max) : ratingConfig.max );
    $scope.range = this.buildTemplateObjects(ratingStates);
  };

  this.buildTemplateObjects = function(states) {
    for (var i = 0, n = states.length; i < n; i++) {
      states[i] = angular.extend({ index: i }, { stateOn: this.stateOn, stateOff: this.stateOff }, states[i]);
    }
    return states;
  };

  $scope.rate = function(value) {
    if ( !$scope.readonly && value >= 0 && value <= $scope.range.length ) {
      ngModelCtrl.$setViewValue(value);
      ngModelCtrl.$render();
    }
  };

  $scope.enter = function(value) {
    if ( !$scope.readonly ) {
      $scope.value = value;
    }
    $scope.onHover({value: value});
  };

  $scope.reset = function() {
    $scope.value = ngModelCtrl.$viewValue;
    $scope.onLeave();
  };

  $scope.onKeydown = function(evt) {
    if (/(37|38|39|40)/.test(evt.which)) {
      evt.preventDefault();
      evt.stopPropagation();
      $scope.rate( $scope.value + (evt.which === 38 || evt.which === 39 ? 1 : -1) );
    }
  };

  this.render = function() {
    $scope.value = ngModelCtrl.$viewValue;
  };
}])

.directive('rating', function() {
  return {
    restrict: 'EA',
    require: ['rating', 'ngModel'],
    scope: {
      readonly: '=?',
      onHover: '&',
      onLeave: '&'
    },
    controller: 'RatingController',
    templateUrl: 'template/rating/rating.html',
    replace: true,
    link: function(scope, element, attrs, ctrls) {
      var ratingCtrl = ctrls[0], ngModelCtrl = ctrls[1];

      if ( ngModelCtrl ) {
        ratingCtrl.init( ngModelCtrl );
      }
    }
  };
});

/**
 * @ngdoc overview
 * @name ui.bootstrap.tabs
 *
 * @description
 * AngularJS version of the tabs directive.
 */

angular.module('ui.bootstrap.tabs', [])

.controller('TabsetController', ['$scope', function TabsetCtrl($scope) {
  var ctrl = this,
      tabs = ctrl.tabs = $scope.tabs = [];

  ctrl.select = function(selectedTab) {
    angular.forEach(tabs, function(tab) {
      if (tab.active && tab !== selectedTab) {
        tab.active = false;
        tab.onDeselect();
      }
    });
    selectedTab.active = true;
    selectedTab.onSelect();
  };

  ctrl.addTab = function addTab(tab) {
    tabs.push(tab);
    // we can't run the select function on the first tab
    // since that would select it twice
    if (tabs.length === 1) {
      tab.active = true;
    } else if (tab.active) {
      ctrl.select(tab);
    }
  };

  ctrl.removeTab = function removeTab(tab) {
    var index = tabs.indexOf(tab);
    //Select a new tab if the tab to be removed is selected
    if (tab.active && tabs.length > 1) {
      //If this is the last tab, select the previous tab. else, the next tab.
      var newActiveIndex = index == tabs.length - 1 ? index - 1 : index + 1;
      ctrl.select(tabs[newActiveIndex]);
    }
    tabs.splice(index, 1);
  };
}])

/**
 * @ngdoc directive
 * @name ui.bootstrap.tabs.directive:tabset
 * @restrict EA
 *
 * @description
 * Tabset is the outer container for the tabs directive
 *
 * @param {boolean=} vertical Whether or not to use vertical styling for the tabs.
 * @param {boolean=} justified Whether or not to use justified styling for the tabs.
 *
 * @example
<example module="ui.bootstrap">
  <file name="index.html">
    <tabset>
      <tab heading="Tab 1"><b>First</b> Content!</tab>
      <tab heading="Tab 2"><i>Second</i> Content!</tab>
    </tabset>
    <hr />
    <tabset vertical="true">
      <tab heading="Vertical Tab 1"><b>First</b> Vertical Content!</tab>
      <tab heading="Vertical Tab 2"><i>Second</i> Vertical Content!</tab>
    </tabset>
    <tabset justified="true">
      <tab heading="Justified Tab 1"><b>First</b> Justified Content!</tab>
      <tab heading="Justified Tab 2"><i>Second</i> Justified Content!</tab>
    </tabset>
  </file>
</example>
 */
.directive('tabset', function() {
  return {
    restrict: 'EA',
    transclude: true,
    replace: true,
    scope: {
      type: '@'
    },
    controller: 'TabsetController',
    templateUrl: 'template/tabs/tabset.html',
    link: function(scope, element, attrs) {
      scope.vertical = angular.isDefined(attrs.vertical) ? scope.$parent.$eval(attrs.vertical) : false;
      scope.justified = angular.isDefined(attrs.justified) ? scope.$parent.$eval(attrs.justified) : false;
    }
  };
})

/**
 * @ngdoc directive
 * @name ui.bootstrap.tabs.directive:tab
 * @restrict EA
 *
 * @param {string=} heading The visible heading, or title, of the tab. Set HTML headings with {@link ui.bootstrap.tabs.directive:tabHeading tabHeading}.
 * @param {string=} select An expression to evaluate when the tab is selected.
 * @param {boolean=} active A binding, telling whether or not this tab is selected.
 * @param {boolean=} disabled A binding, telling whether or not this tab is disabled.
 *
 * @description
 * Creates a tab with a heading and content. Must be placed within a {@link ui.bootstrap.tabs.directive:tabset tabset}.
 *
 * @example
<example module="ui.bootstrap">
  <file name="index.html">
    <div ng-controller="TabsDemoCtrl">
      <button class="btn btn-small" ng-click="items[0].active = true">
        Select item 1, using active binding
      </button>
      <button class="btn btn-small" ng-click="items[1].disabled = !items[1].disabled">
        Enable/disable item 2, using disabled binding
      </button>
      <br />
      <tabset>
        <tab heading="Tab 1">First Tab</tab>
        <tab select="alertMe()">
          <tab-heading><i class="icon-bell"></i> Alert me!</tab-heading>
          Second Tab, with alert callback and html heading!
        </tab>
        <tab ng-repeat="item in items"
          heading="{{item.title}}"
          disabled="item.disabled"
          active="item.active">
          {{item.content}}
        </tab>
      </tabset>
    </div>
  </file>
  <file name="script.js">
    function TabsDemoCtrl($scope) {
      $scope.items = [
        { title:"Dynamic Title 1", content:"Dynamic Item 0" },
        { title:"Dynamic Title 2", content:"Dynamic Item 1", disabled: true }
      ];

      $scope.alertMe = function() {
        setTimeout(function() {
          alert("You've selected the alert tab!");
        });
      };
    };
  </file>
</example>
 */

/**
 * @ngdoc directive
 * @name ui.bootstrap.tabs.directive:tabHeading
 * @restrict EA
 *
 * @description
 * Creates an HTML heading for a {@link ui.bootstrap.tabs.directive:tab tab}. Must be placed as a child of a tab element.
 *
 * @example
<example module="ui.bootstrap">
  <file name="index.html">
    <tabset>
      <tab>
        <tab-heading><b>HTML</b> in my titles?!</tab-heading>
        And some content, too!
      </tab>
      <tab>
        <tab-heading><i class="icon-heart"></i> Icon heading?!?</tab-heading>
        That's right.
      </tab>
    </tabset>
  </file>
</example>
 */
.directive('tab', ['$parse', function($parse) {
  return {
    require: '^tabset',
    restrict: 'EA',
    replace: true,
    templateUrl: 'template/tabs/tab.html',
    transclude: true,
    scope: {
      active: '=?',
      heading: '@',
      onSelect: '&select', //This callback is called in contentHeadingTransclude
                          //once it inserts the tab's content into the dom
      onDeselect: '&deselect'
    },
    controller: function() {
      //Empty controller so other directives can require being 'under' a tab
    },
    compile: function(elm, attrs, transclude) {
      return function postLink(scope, elm, attrs, tabsetCtrl) {
        scope.$watch('active', function(active) {
          if (active) {
            tabsetCtrl.select(scope);
          }
        });

        scope.disabled = false;
        if ( attrs.disabled ) {
          scope.$parent.$watch($parse(attrs.disabled), function(value) {
            scope.disabled = !! value;
          });
        }

        scope.select = function() {
          if ( !scope.disabled ) {
            scope.active = true;
          }
        };

        tabsetCtrl.addTab(scope);
        scope.$on('$destroy', function() {
          tabsetCtrl.removeTab(scope);
        });

        //We need to transclude later, once the content container is ready.
        //when this link happens, we're inside a tab heading.
        scope.$transcludeFn = transclude;
      };
    }
  };
}])

.directive('tabHeadingTransclude', [function() {
  return {
    restrict: 'A',
    require: '^tab',
    link: function(scope, elm, attrs, tabCtrl) {
      scope.$watch('headingElement', function updateHeadingElement(heading) {
        if (heading) {
          elm.html('');
          elm.append(heading);
        }
      });
    }
  };
}])

.directive('tabContentTransclude', function() {
  return {
    restrict: 'A',
    require: '^tabset',
    link: function(scope, elm, attrs) {
      var tab = scope.$eval(attrs.tabContentTransclude);

      //Now our tab is ready to be transcluded: both the tab heading area
      //and the tab content area are loaded.  Transclude 'em both.
      tab.$transcludeFn(tab.$parent, function(contents) {
        angular.forEach(contents, function(node) {
          if (isTabHeading(node)) {
            //Let tabHeadingTransclude know.
            tab.headingElement = node;
          } else {
            elm.append(node);
          }
        });
      });
    }
  };
  function isTabHeading(node) {
    return node.tagName &&  (
      node.hasAttribute('tab-heading') ||
      node.hasAttribute('data-tab-heading') ||
      node.tagName.toLowerCase() === 'tab-heading' ||
      node.tagName.toLowerCase() === 'data-tab-heading'
    );
  }
})

;

angular.module('ui.bootstrap.timepicker', [])

.constant('timepickerConfig', {
  hourStep: 1,
  minuteStep: 1,
  showMeridian: true,
  meridians: null,
  readonlyInput: false,
  mousewheel: true
})

.controller('TimepickerController', ['$scope', '$attrs', '$parse', '$log', '$locale', 'timepickerConfig', function($scope, $attrs, $parse, $log, $locale, timepickerConfig) {
  var selected = new Date(),
      ngModelCtrl = { $setViewValue: angular.noop }, // nullModelCtrl
      meridians = angular.isDefined($attrs.meridians) ? $scope.$parent.$eval($attrs.meridians) : timepickerConfig.meridians || $locale.DATETIME_FORMATS.AMPMS;

  this.init = function( ngModelCtrl_, inputs ) {
    ngModelCtrl = ngModelCtrl_;
    ngModelCtrl.$render = this.render;

    var hoursInputEl = inputs.eq(0),
        minutesInputEl = inputs.eq(1);

    var mousewheel = angular.isDefined($attrs.mousewheel) ? $scope.$parent.$eval($attrs.mousewheel) : timepickerConfig.mousewheel;
    if ( mousewheel ) {
      this.setupMousewheelEvents( hoursInputEl, minutesInputEl );
    }

    $scope.readonlyInput = angular.isDefined($attrs.readonlyInput) ? $scope.$parent.$eval($attrs.readonlyInput) : timepickerConfig.readonlyInput;
    this.setupInputEvents( hoursInputEl, minutesInputEl );
  };

  var hourStep = timepickerConfig.hourStep;
  if ($attrs.hourStep) {
    $scope.$parent.$watch($parse($attrs.hourStep), function(value) {
      hourStep = parseInt(value, 10);
    });
  }

  var minuteStep = timepickerConfig.minuteStep;
  if ($attrs.minuteStep) {
    $scope.$parent.$watch($parse($attrs.minuteStep), function(value) {
      minuteStep = parseInt(value, 10);
    });
  }

  // 12H / 24H mode
  $scope.showMeridian = timepickerConfig.showMeridian;
  if ($attrs.showMeridian) {
    $scope.$parent.$watch($parse($attrs.showMeridian), function(value) {
      $scope.showMeridian = !!value;

      if ( ngModelCtrl.$error.time ) {
        // Evaluate from template
        var hours = getHoursFromTemplate(), minutes = getMinutesFromTemplate();
        if (angular.isDefined( hours ) && angular.isDefined( minutes )) {
          selected.setHours( hours );
          refresh();
        }
      } else {
        updateTemplate();
      }
    });
  }

  // Get $scope.hours in 24H mode if valid
  function getHoursFromTemplate ( ) {
    var hours = parseInt( $scope.hours, 10 );
    var valid = ( $scope.showMeridian ) ? (hours > 0 && hours < 13) : (hours >= 0 && hours < 24);
    if ( !valid ) {
      return undefined;
    }

    if ( $scope.showMeridian ) {
      if ( hours === 12 ) {
        hours = 0;
      }
      if ( $scope.meridian === meridians[1] ) {
        hours = hours + 12;
      }
    }
    return hours;
  }

  function getMinutesFromTemplate() {
    var minutes = parseInt($scope.minutes, 10);
    return ( minutes >= 0 && minutes < 60 ) ? minutes : undefined;
  }

  function pad( value ) {
    return ( angular.isDefined(value) && value.toString().length < 2 ) ? '0' + value : value;
  }

  // Respond on mousewheel spin
  this.setupMousewheelEvents = function( hoursInputEl, minutesInputEl ) {
    var isScrollingUp = function(e) {
      if (e.originalEvent) {
        e = e.originalEvent;
      }
      //pick correct delta variable depending on event
      var delta = (e.wheelDelta) ? e.wheelDelta : -e.deltaY;
      return (e.detail || delta > 0);
    };

    hoursInputEl.bind('mousewheel wheel', function(e) {
      $scope.$apply( (isScrollingUp(e)) ? $scope.incrementHours() : $scope.decrementHours() );
      e.preventDefault();
    });

    minutesInputEl.bind('mousewheel wheel', function(e) {
      $scope.$apply( (isScrollingUp(e)) ? $scope.incrementMinutes() : $scope.decrementMinutes() );
      e.preventDefault();
    });

  };

  this.setupInputEvents = function( hoursInputEl, minutesInputEl ) {
    if ( $scope.readonlyInput ) {
      $scope.updateHours = angular.noop;
      $scope.updateMinutes = angular.noop;
      return;
    }

    var invalidate = function(invalidHours, invalidMinutes) {
      ngModelCtrl.$setViewValue( null );
      ngModelCtrl.$setValidity('time', false);
      if (angular.isDefined(invalidHours)) {
        $scope.invalidHours = invalidHours;
      }
      if (angular.isDefined(invalidMinutes)) {
        $scope.invalidMinutes = invalidMinutes;
      }
    };

    $scope.updateHours = function() {
      var hours = getHoursFromTemplate();

      if ( angular.isDefined(hours) ) {
        selected.setHours( hours );
        refresh( 'h' );
      } else {
        invalidate(true);
      }
    };

    hoursInputEl.bind('blur', function(e) {
      if ( !$scope.invalidHours && $scope.hours < 10) {
        $scope.$apply( function() {
          $scope.hours = pad( $scope.hours );
        });
      }
    });

    $scope.updateMinutes = function() {
      var minutes = getMinutesFromTemplate();

      if ( angular.isDefined(minutes) ) {
        selected.setMinutes( minutes );
        refresh( 'm' );
      } else {
        invalidate(undefined, true);
      }
    };

    minutesInputEl.bind('blur', function(e) {
      if ( !$scope.invalidMinutes && $scope.minutes < 10 ) {
        $scope.$apply( function() {
          $scope.minutes = pad( $scope.minutes );
        });
      }
    });

  };

  this.render = function() {
    var date = ngModelCtrl.$modelValue ? new Date( ngModelCtrl.$modelValue ) : null;

    if ( isNaN(date) ) {
      ngModelCtrl.$setValidity('time', false);
      $log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');
    } else {
      if ( date ) {
        selected = date;
      }
      makeValid();
      updateTemplate();
    }
  };

  // Call internally when we know that model is valid.
  function refresh( keyboardChange ) {
    makeValid();
    ngModelCtrl.$setViewValue( new Date(selected) );
    updateTemplate( keyboardChange );
  }

  function makeValid() {
    ngModelCtrl.$setValidity('time', true);
    $scope.invalidHours = false;
    $scope.invalidMinutes = false;
  }

  function updateTemplate( keyboardChange ) {
    var hours = selected.getHours(), minutes = selected.getMinutes();

    if ( $scope.showMeridian ) {
      hours = ( hours === 0 || hours === 12 ) ? 12 : hours % 12; // Convert 24 to 12 hour system
    }

    $scope.hours = keyboardChange === 'h' ? hours : pad(hours);
    $scope.minutes = keyboardChange === 'm' ? minutes : pad(minutes);
    $scope.meridian = selected.getHours() < 12 ? meridians[0] : meridians[1];
  }

  function addMinutes( minutes ) {
    var dt = new Date( selected.getTime() + minutes * 60000 );
    selected.setHours( dt.getHours(), dt.getMinutes() );
    refresh();
  }

  $scope.incrementHours = function() {
    addMinutes( hourStep * 60 );
  };
  $scope.decrementHours = function() {
    addMinutes( - hourStep * 60 );
  };
  $scope.incrementMinutes = function() {
    addMinutes( minuteStep );
  };
  $scope.decrementMinutes = function() {
    addMinutes( - minuteStep );
  };
  $scope.toggleMeridian = function() {
    addMinutes( 12 * 60 * (( selected.getHours() < 12 ) ? 1 : -1) );
  };
}])

.directive('timepicker', function () {
  return {
    restrict: 'EA',
    require: ['timepicker', '?^ngModel'],
    controller:'TimepickerController',
    replace: true,
    scope: {},
    templateUrl: 'template/timepicker/timepicker.html',
    link: function(scope, element, attrs, ctrls) {
      var timepickerCtrl = ctrls[0], ngModelCtrl = ctrls[1];

      if ( ngModelCtrl ) {
        timepickerCtrl.init( ngModelCtrl, element.find('input') );
      }
    }
  };
});

angular.module('ui.bootstrap.typeahead', ['ui.bootstrap.position', 'ui.bootstrap.bindHtml'])

/**
 * A helper service that can parse typeahead's syntax (string provided by users)
 * Extracted to a separate service for ease of unit testing
 */
  .factory('typeaheadParser', ['$parse', function ($parse) {

  //                      00000111000000000000022200000000000000003333333333333330000000000044000
  var TYPEAHEAD_REGEXP = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;

  return {
    parse:function (input) {

      var match = input.match(TYPEAHEAD_REGEXP);
      if (!match) {
        throw new Error(
          'Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_"' +
            ' but got "' + input + '".');
      }

      return {
        itemName:match[3],
        source:$parse(match[4]),
        viewMapper:$parse(match[2] || match[1]),
        modelMapper:$parse(match[1])
      };
    }
  };
}])

  .directive('typeahead', ['$compile', '$parse', '$q', '$timeout', '$document', '$position', 'typeaheadParser',
    function ($compile, $parse, $q, $timeout, $document, $position, typeaheadParser) {

  var HOT_KEYS = [9, 13, 27, 38, 40];

  return {
    require:'ngModel',
    link:function (originalScope, element, attrs, modelCtrl) {

      //SUPPORTED ATTRIBUTES (OPTIONS)

      //minimal no of characters that needs to be entered before typeahead kicks-in
      var minSearch = originalScope.$eval(attrs.typeaheadMinLength) || 1;

      //minimal wait time after last character typed before typehead kicks-in
      var waitTime = originalScope.$eval(attrs.typeaheadWaitMs) || 0;

      //should it restrict model values to the ones selected from the popup only?
      var isEditable = originalScope.$eval(attrs.typeaheadEditable) !== false;

      //binding to a variable that indicates if matches are being retrieved asynchronously
      var isLoadingSetter = $parse(attrs.typeaheadLoading).assign || angular.noop;

      //a callback executed when a match is selected
      var onSelectCallback = $parse(attrs.typeaheadOnSelect);

      var inputFormatter = attrs.typeaheadInputFormatter ? $parse(attrs.typeaheadInputFormatter) : undefined;

      var appendToBody =  attrs.typeaheadAppendToBody ? originalScope.$eval(attrs.typeaheadAppendToBody) : false;

      //INTERNAL VARIABLES

      //model setter executed upon match selection
      var $setModelValue = $parse(attrs.ngModel).assign;

      //expressions used by typeahead
      var parserResult = typeaheadParser.parse(attrs.typeahead);

      var hasFocus;

      //create a child scope for the typeahead directive so we are not polluting original scope
      //with typeahead-specific data (matches, query etc.)
      var scope = originalScope.$new();
      originalScope.$on('$destroy', function(){
        scope.$destroy();
      });

      // WAI-ARIA
      var popupId = 'typeahead-' + scope.$id + '-' + Math.floor(Math.random() * 10000);
      element.attr({
        'aria-autocomplete': 'list',
        'aria-expanded': false,
        'aria-owns': popupId
      });

      //pop-up element used to display matches
      var popUpEl = angular.element('<div typeahead-popup></div>');
      popUpEl.attr({
        id: popupId,
        matches: 'matches',
        active: 'activeIdx',
        select: 'select(activeIdx)',
        query: 'query',
        position: 'position'
      });
      //custom item template
      if (angular.isDefined(attrs.typeaheadTemplateUrl)) {
        popUpEl.attr('template-url', attrs.typeaheadTemplateUrl);
      }

      var resetMatches = function() {
        scope.matches = [];
        scope.activeIdx = -1;
        element.attr('aria-expanded', false);
      };

      var getMatchId = function(index) {
        return popupId + '-option-' + index;
      };

      // Indicate that the specified match is the active (pre-selected) item in the list owned by this typeahead.
      // This attribute is added or removed automatically when the `activeIdx` changes.
      scope.$watch('activeIdx', function(index) {
        if (index < 0) {
          element.removeAttr('aria-activedescendant');
        } else {
          element.attr('aria-activedescendant', getMatchId(index));
        }
      });

      var getMatchesAsync = function(inputValue) {

        var locals = {$viewValue: inputValue};
        isLoadingSetter(originalScope, true);
        $q.when(parserResult.source(originalScope, locals)).then(function(matches) {

          //it might happen that several async queries were in progress if a user were typing fast
          //but we are interested only in responses that correspond to the current view value
          var onCurrentRequest = (inputValue === modelCtrl.$viewValue);
          if (onCurrentRequest && hasFocus) {
            if (matches.length > 0) {

              scope.activeIdx = 0;
              scope.matches.length = 0;

              //transform labels
              for(var i=0; i<matches.length; i++) {
                locals[parserResult.itemName] = matches[i];
                scope.matches.push({
                  id: getMatchId(i),
                  label: parserResult.viewMapper(scope, locals),
                  model: matches[i]
                });
              }

              scope.query = inputValue;
              //position pop-up with matches - we need to re-calculate its position each time we are opening a window
              //with matches as a pop-up might be absolute-positioned and position of an input might have changed on a page
              //due to other elements being rendered
              scope.position = appendToBody ? $position.offset(element) : $position.position(element);
              scope.position.top = scope.position.top + element.prop('offsetHeight');

              element.attr('aria-expanded', true);
            } else {
              resetMatches();
            }
          }
          if (onCurrentRequest) {
            isLoadingSetter(originalScope, false);
          }
        }, function(){
          resetMatches();
          isLoadingSetter(originalScope, false);
        });
      };

      resetMatches();

      //we need to propagate user's query so we can higlight matches
      scope.query = undefined;

      //Declare the timeout promise var outside the function scope so that stacked calls can be cancelled later 
      var timeoutPromise;

      var scheduleSearchWithTimeout = function(inputValue) {
        timeoutPromise = $timeout(function () {
          getMatchesAsync(inputValue);
        }, waitTime);
      };

      var cancelPreviousTimeout = function() {
        if (timeoutPromise) {
          $timeout.cancel(timeoutPromise);
        }
      };

      //plug into $parsers pipeline to open a typeahead on view changes initiated from DOM
      //$parsers kick-in on all the changes coming from the view as well as manually triggered by $setViewValue
      modelCtrl.$parsers.unshift(function (inputValue) {

        hasFocus = true;

        if (inputValue && inputValue.length >= minSearch) {
          if (waitTime > 0) {
            cancelPreviousTimeout();
            scheduleSearchWithTimeout(inputValue);
          } else {
            getMatchesAsync(inputValue);
          }
        } else {
          isLoadingSetter(originalScope, false);
          cancelPreviousTimeout();
          resetMatches();
        }

        if (isEditable) {
          return inputValue;
        } else {
          if (!inputValue) {
            // Reset in case user had typed something previously.
            modelCtrl.$setValidity('editable', true);
            return inputValue;
          } else {
            modelCtrl.$setValidity('editable', false);
            return undefined;
          }
        }
      });

      modelCtrl.$formatters.push(function (modelValue) {

        var candidateViewValue, emptyViewValue;
        var locals = {};

        if (inputFormatter) {

          locals['$model'] = modelValue;
          return inputFormatter(originalScope, locals);

        } else {

          //it might happen that we don't have enough info to properly render input value
          //we need to check for this situation and simply return model value if we can't apply custom formatting
          locals[parserResult.itemName] = modelValue;
          candidateViewValue = parserResult.viewMapper(originalScope, locals);
          locals[parserResult.itemName] = undefined;
          emptyViewValue = parserResult.viewMapper(originalScope, locals);

          return candidateViewValue!== emptyViewValue ? candidateViewValue : modelValue;
        }
      });

      scope.select = function (activeIdx) {
        //called from within the $digest() cycle
        var locals = {};
        var model, item;

        locals[parserResult.itemName] = item = scope.matches[activeIdx].model;
        model = parserResult.modelMapper(originalScope, locals);
        $setModelValue(originalScope, model);
        modelCtrl.$setValidity('editable', true);

        onSelectCallback(originalScope, {
          $item: item,
          $model: model,
          $label: parserResult.viewMapper(originalScope, locals)
        });

        resetMatches();

        //return focus to the input element if a match was selected via a mouse click event
        // use timeout to avoid $rootScope:inprog error
        $timeout(function() { element[0].focus(); }, 0, false);
      };

      //bind keyboard events: arrows up(38) / down(40), enter(13) and tab(9), esc(27)
      element.bind('keydown', function (evt) {

        //typeahead is open and an "interesting" key was pressed
        if (scope.matches.length === 0 || HOT_KEYS.indexOf(evt.which) === -1) {
          return;
        }

        evt.preventDefault();

        if (evt.which === 40) {
          scope.activeIdx = (scope.activeIdx + 1) % scope.matches.length;
          scope.$digest();

        } else if (evt.which === 38) {
          scope.activeIdx = (scope.activeIdx ? scope.activeIdx : scope.matches.length) - 1;
          scope.$digest();

        } else if (evt.which === 13 || evt.which === 9) {
          scope.$apply(function () {
            scope.select(scope.activeIdx);
          });

        } else if (evt.which === 27) {
          evt.stopPropagation();

          resetMatches();
          scope.$digest();
        }
      });

      element.bind('blur', function (evt) {
        hasFocus = false;
      });

      // Keep reference to click handler to unbind it.
      var dismissClickHandler = function (evt) {
        if (element[0] !== evt.target) {
          resetMatches();
          scope.$digest();
        }
      };

      $document.bind('click', dismissClickHandler);

      originalScope.$on('$destroy', function(){
        $document.unbind('click', dismissClickHandler);
      });

      var $popup = $compile(popUpEl)(scope);
      if ( appendToBody ) {
        $document.find('body').append($popup);
      } else {
        element.after($popup);
      }
    }
  };

}])

  .directive('typeaheadPopup', function () {
    return {
      restrict:'EA',
      scope:{
        matches:'=',
        query:'=',
        active:'=',
        position:'=',
        select:'&'
      },
      replace:true,
      templateUrl:'template/typeahead/typeahead-popup.html',
      link:function (scope, element, attrs) {

        scope.templateUrl = attrs.templateUrl;

        scope.isOpen = function () {
          return scope.matches.length > 0;
        };

        scope.isActive = function (matchIdx) {
          return scope.active == matchIdx;
        };

        scope.selectActive = function (matchIdx) {
          scope.active = matchIdx;
        };

        scope.selectMatch = function (activeIdx) {
          scope.select({activeIdx:activeIdx});
        };
      }
    };
  })

  .directive('typeaheadMatch', ['$http', '$templateCache', '$compile', '$parse', function ($http, $templateCache, $compile, $parse) {
    return {
      restrict:'EA',
      scope:{
        index:'=',
        match:'=',
        query:'='
      },
      link:function (scope, element, attrs) {
        var tplUrl = $parse(attrs.templateUrl)(scope.$parent) || 'template/typeahead/typeahead-match.html';
        $http.get(tplUrl, {cache: $templateCache}).success(function(tplContent){
           element.replaceWith($compile(tplContent.trim())(scope));
        });
      }
    };
  }])

  .filter('typeaheadHighlight', function() {

    function escapeRegexp(queryToEscape) {
      return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g, '\\$1');
    }

    return function(matchItem, query) {
      return query ? ('' + matchItem).replace(new RegExp(escapeRegexp(query), 'gi'), '<strong>$&</strong>') : matchItem;
    };
  });

angular.module("template/accordion/accordion-group.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/accordion/accordion-group.html",
    "<div class=\"panel panel-default\">\n" +
    "  <div class=\"panel-heading\">\n" +
    "    <h4 class=\"panel-title\">\n" +
    "      <a class=\"accordion-toggle\" ng-click=\"toggleOpen()\" accordion-transclude=\"heading\"><span ng-class=\"{'text-muted': isDisabled}\">{{heading}}</span></a>\n" +
    "    </h4>\n" +
    "  </div>\n" +
    "  <div class=\"panel-collapse\" collapse=\"!isOpen\">\n" +
    "	  <div class=\"panel-body\" ng-transclude></div>\n" +
    "  </div>\n" +
    "</div>");
}]);

angular.module("template/accordion/accordion.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/accordion/accordion.html",
    "<div class=\"panel-group\" ng-transclude></div>");
}]);

angular.module("template/alert/alert.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/alert/alert.html",
    "<div class=\"alert\" ng-class=\"['alert-' + (type || 'warning'), closeable ? 'alert-dismissable' : null]\" role=\"alert\">\n" +
    "    <button ng-show=\"closeable\" type=\"button\" class=\"close\" ng-click=\"close()\">\n" +
    "        <span aria-hidden=\"true\">&times;</span>\n" +
    "        <span class=\"sr-only\">Close</span>\n" +
    "    </button>\n" +
    "    <div ng-transclude></div>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/carousel/carousel.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/carousel/carousel.html",
    "<div ng-mouseenter=\"pause()\" ng-mouseleave=\"play()\" class=\"carousel\" ng-swipe-right=\"prev()\" ng-swipe-left=\"next()\">\n" +
    "    <ol class=\"carousel-indicators\" ng-show=\"slides.length > 1\">\n" +
    "        <li ng-repeat=\"slide in slides track by $index\" ng-class=\"{active: isActive(slide)}\" ng-click=\"select(slide)\"></li>\n" +
    "    </ol>\n" +
    "    <div class=\"carousel-inner\" ng-transclude></div>\n" +
    "    <a class=\"left carousel-control\" ng-click=\"prev()\" ng-show=\"slides.length > 1\"><span class=\"glyphicon glyphicon-chevron-left\"></span></a>\n" +
    "    <a class=\"right carousel-control\" ng-click=\"next()\" ng-show=\"slides.length > 1\"><span class=\"glyphicon glyphicon-chevron-right\"></span></a>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/carousel/slide.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/carousel/slide.html",
    "<div ng-class=\"{\n" +
    "    'active': leaving || (active && !entering),\n" +
    "    'prev': (next || active) && direction=='prev',\n" +
    "    'next': (next || active) && direction=='next',\n" +
    "    'right': direction=='prev',\n" +
    "    'left': direction=='next'\n" +
    "  }\" class=\"item text-center\" ng-transclude></div>\n" +
    "");
}]);

angular.module("template/datepicker/datepicker.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/datepicker/datepicker.html",
    "<div ng-switch=\"datepickerMode\" role=\"application\" ng-keydown=\"keydown($event)\">\n" +
    "  <daypicker ng-switch-when=\"day\" tabindex=\"0\"></daypicker>\n" +
    "  <monthpicker ng-switch-when=\"month\" tabindex=\"0\"></monthpicker>\n" +
    "  <yearpicker ng-switch-when=\"year\" tabindex=\"0\"></yearpicker>\n" +
    "</div>");
}]);

angular.module("template/datepicker/day.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/datepicker/day.html",
    "<table role=\"grid\" aria-labelledby=\"{{uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\n" +
    "  <thead>\n" +
    "    <tr>\n" +
    "      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\n" +
    "      <th colspan=\"{{5 + showWeeks}}\"><button id=\"{{uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\n" +
    "      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\n" +
    "    </tr>\n" +
    "    <tr>\n" +
    "      <th ng-show=\"showWeeks\" class=\"text-center\"></th>\n" +
    "      <th ng-repeat=\"label in labels track by $index\" class=\"text-center\"><small aria-label=\"{{label.full}}\">{{label.abbr}}</small></th>\n" +
    "    </tr>\n" +
    "  </thead>\n" +
    "  <tbody>\n" +
    "    <tr ng-repeat=\"row in rows track by $index\">\n" +
    "      <td ng-show=\"showWeeks\" class=\"text-center h6\"><em>{{ weekNumbers[$index] }}</em></td>\n" +
    "      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{dt.uid}}\" aria-disabled=\"{{!!dt.disabled}}\">\n" +
    "        <button type=\"button\" style=\"width:100%;\" class=\"btn btn-default btn-sm\" ng-class=\"{'btn-info': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"{'text-muted': dt.secondary, 'text-info': dt.current}\">{{dt.label}}</span></button>\n" +
    "      </td>\n" +
    "    </tr>\n" +
    "  </tbody>\n" +
    "</table>\n" +
    "");
}]);

angular.module("template/datepicker/month.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/datepicker/month.html",
    "<table role=\"grid\" aria-labelledby=\"{{uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\n" +
    "  <thead>\n" +
    "    <tr>\n" +
    "      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\n" +
    "      <th><button id=\"{{uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\n" +
    "      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\n" +
    "    </tr>\n" +
    "  </thead>\n" +
    "  <tbody>\n" +
    "    <tr ng-repeat=\"row in rows track by $index\">\n" +
    "      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{dt.uid}}\" aria-disabled=\"{{!!dt.disabled}}\">\n" +
    "        <button type=\"button\" style=\"width:100%;\" class=\"btn btn-default\" ng-class=\"{'btn-info': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"{'text-info': dt.current}\">{{dt.label}}</span></button>\n" +
    "      </td>\n" +
    "    </tr>\n" +
    "  </tbody>\n" +
    "</table>\n" +
    "");
}]);

angular.module("template/datepicker/popup.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/datepicker/popup.html",
    "<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\" ng-keydown=\"keydown($event)\">\n" +
    "	<li ng-transclude></li>\n" +
    "	<li ng-if=\"showButtonBar\" style=\"padding:10px 9px 2px\">\n" +
    "		<span class=\"btn-group\">\n" +
    "			<button type=\"button\" class=\"btn btn-sm btn-info\" ng-click=\"select('today')\">{{ getText('current') }}</button>\n" +
    "			<button type=\"button\" class=\"btn btn-sm btn-danger\" ng-click=\"select(null)\">{{ getText('clear') }}</button>\n" +
    "		</span>\n" +
    "		<button type=\"button\" class=\"btn btn-sm btn-success pull-right\" ng-click=\"close()\">{{ getText('close') }}</button>\n" +
    "	</li>\n" +
    "</ul>\n" +
    "");
}]);

angular.module("template/datepicker/year.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/datepicker/year.html",
    "<table role=\"grid\" aria-labelledby=\"{{uniqueId}}-title\" aria-activedescendant=\"{{activeDateId}}\">\n" +
    "  <thead>\n" +
    "    <tr>\n" +
    "      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-left\" ng-click=\"move(-1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-left\"></i></button></th>\n" +
    "      <th colspan=\"3\"><button id=\"{{uniqueId}}-title\" role=\"heading\" aria-live=\"assertive\" aria-atomic=\"true\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"toggleMode()\" tabindex=\"-1\" style=\"width:100%;\"><strong>{{title}}</strong></button></th>\n" +
    "      <th><button type=\"button\" class=\"btn btn-default btn-sm pull-right\" ng-click=\"move(1)\" tabindex=\"-1\"><i class=\"glyphicon glyphicon-chevron-right\"></i></button></th>\n" +
    "    </tr>\n" +
    "  </thead>\n" +
    "  <tbody>\n" +
    "    <tr ng-repeat=\"row in rows track by $index\">\n" +
    "      <td ng-repeat=\"dt in row track by dt.date\" class=\"text-center\" role=\"gridcell\" id=\"{{dt.uid}}\" aria-disabled=\"{{!!dt.disabled}}\">\n" +
    "        <button type=\"button\" style=\"width:100%;\" class=\"btn btn-default\" ng-class=\"{'btn-info': dt.selected, active: isActive(dt)}\" ng-click=\"select(dt.date)\" ng-disabled=\"dt.disabled\" tabindex=\"-1\"><span ng-class=\"{'text-info': dt.current}\">{{dt.label}}</span></button>\n" +
    "      </td>\n" +
    "    </tr>\n" +
    "  </tbody>\n" +
    "</table>\n" +
    "");
}]);

angular.module("template/modal/backdrop.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/modal/backdrop.html",
    "<div class=\"modal-backdrop fade {{ backdropClass }}\"\n" +
    "     ng-class=\"{in: animate}\"\n" +
    "     ng-style=\"{'z-index': 1040 + (index && 1 || 0) + index*10}\"\n" +
    "></div>\n" +
    "");
}]);

angular.module("template/modal/window.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/modal/window.html",
    "<div tabindex=\"-1\" role=\"dialog\" class=\"modal fade\" ng-class=\"{in: animate}\" ng-style=\"{'z-index': 1050 + index*10, display: 'block'}\" ng-click=\"close($event)\">\n" +
    "    <div class=\"modal-dialog\" ng-class=\"{'modal-sm': size == 'sm', 'modal-lg': size == 'lg'}\"><div class=\"modal-content\" modal-transclude></div></div>\n" +
    "</div>");
}]);

angular.module("template/pagination/pager.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/pagination/pager.html",
    "<ul class=\"pager\">\n" +
    "  <li ng-class=\"{disabled: noPrevious(), previous: align}\"><a href ng-click=\"selectPage(page - 1)\">{{getText('previous')}}</a></li>\n" +
    "  <li ng-class=\"{disabled: noNext(), next: align}\"><a href ng-click=\"selectPage(page + 1)\">{{getText('next')}}</a></li>\n" +
    "</ul>");
}]);

angular.module("template/pagination/pagination.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/pagination/pagination.html",
    "<ul class=\"pagination\">\n" +
    "  <li ng-if=\"boundaryLinks\" ng-class=\"{disabled: noPrevious()}\"><a href ng-click=\"selectPage(1)\">{{getText('first')}}</a></li>\n" +
    "  <li ng-if=\"directionLinks\" ng-class=\"{disabled: noPrevious()}\"><a href ng-click=\"selectPage(page - 1)\">{{getText('previous')}}</a></li>\n" +
    "  <li ng-repeat=\"page in pages track by $index\" ng-class=\"{active: page.active}\"><a href ng-click=\"selectPage(page.number)\">{{page.text}}</a></li>\n" +
    "  <li ng-if=\"directionLinks\" ng-class=\"{disabled: noNext()}\"><a href ng-click=\"selectPage(page + 1)\">{{getText('next')}}</a></li>\n" +
    "  <li ng-if=\"boundaryLinks\" ng-class=\"{disabled: noNext()}\"><a href ng-click=\"selectPage(totalPages)\">{{getText('last')}}</a></li>\n" +
    "</ul>");
}]);

angular.module("template/tooltip/tooltip-html-unsafe-popup.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",
    "<div class=\"tooltip {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n" +
    "  <div class=\"tooltip-arrow\"></div>\n" +
    "  <div class=\"tooltip-inner\" bind-html-unsafe=\"content\"></div>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/tooltip/tooltip-popup.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/tooltip/tooltip-popup.html",
    "<div class=\"tooltip {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n" +
    "  <div class=\"tooltip-arrow\"></div>\n" +
    "  <div class=\"tooltip-inner\" ng-bind=\"content\"></div>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/popover/popover.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/popover/popover.html",
    "<div class=\"popover {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n" +
    "  <div class=\"arrow\"></div>\n" +
    "\n" +
    "  <div class=\"popover-inner\">\n" +
    "      <h3 class=\"popover-title\" ng-bind=\"title\" ng-show=\"title\"></h3>\n" +
    "      <div class=\"popover-content\" ng-bind=\"content\"></div>\n" +
    "  </div>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/progressbar/bar.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/progressbar/bar.html",
    "<div class=\"progress-bar\" ng-class=\"type && 'progress-bar-' + type\" role=\"progressbar\" aria-valuenow=\"{{value}}\" aria-valuemin=\"0\" aria-valuemax=\"{{max}}\" ng-style=\"{width: percent + '%'}\" aria-valuetext=\"{{percent | number:0}}%\" ng-transclude></div>");
}]);

angular.module("template/progressbar/progress.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/progressbar/progress.html",
    "<div class=\"progress\" ng-transclude></div>");
}]);

angular.module("template/progressbar/progressbar.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/progressbar/progressbar.html",
    "<div class=\"progress\">\n" +
    "  <div class=\"progress-bar\" ng-class=\"type && 'progress-bar-' + type\" role=\"progressbar\" aria-valuenow=\"{{value}}\" aria-valuemin=\"0\" aria-valuemax=\"{{max}}\" ng-style=\"{width: percent + '%'}\" aria-valuetext=\"{{percent | number:0}}%\" ng-transclude></div>\n" +
    "</div>");
}]);

angular.module("template/rating/rating.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/rating/rating.html",
    "<span ng-mouseleave=\"reset()\" ng-keydown=\"onKeydown($event)\" tabindex=\"0\" role=\"slider\" aria-valuemin=\"0\" aria-valuemax=\"{{range.length}}\" aria-valuenow=\"{{value}}\">\n" +
    "    <i ng-repeat=\"r in range track by $index\" ng-mouseenter=\"enter($index + 1)\" ng-click=\"rate($index + 1)\" class=\"glyphicon\" ng-class=\"$index < value && (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')\">\n" +
    "        <span class=\"sr-only\">({{ $index < value ? '*' : ' ' }})</span>\n" +
    "    </i>\n" +
    "</span>");
}]);

angular.module("template/tabs/tab.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/tabs/tab.html",
    "<li ng-class=\"{active: active, disabled: disabled}\">\n" +
    "  <a ng-click=\"select()\" tab-heading-transclude>{{heading}}</a>\n" +
    "</li>\n" +
    "");
}]);

angular.module("template/tabs/tabset.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/tabs/tabset.html",
    "<div>\n" +
    "  <ul class=\"nav nav-{{type || 'tabs'}}\" ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\" ng-transclude></ul>\n" +
    "  <div class=\"tab-content\">\n" +
    "    <div class=\"tab-pane\" \n" +
    "         ng-repeat=\"tab in tabs\" \n" +
    "         ng-class=\"{active: tab.active}\"\n" +
    "         tab-content-transclude=\"tab\">\n" +
    "    </div>\n" +
    "  </div>\n" +
    "</div>\n" +
    "");
}]);

angular.module("template/timepicker/timepicker.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/timepicker/timepicker.html",
    "<table>\n" +
    "	<tbody>\n" +
    "		<tr class=\"text-center\">\n" +
    "			<td><a ng-click=\"incrementHours()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-up\"></span></a></td>\n" +
    "			<td>&nbsp;</td>\n" +
    "			<td><a ng-click=\"incrementMinutes()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-up\"></span></a></td>\n" +
    "			<td ng-show=\"showMeridian\"></td>\n" +
    "		</tr>\n" +
    "		<tr>\n" +
    "			<td style=\"width:50px;\" class=\"form-group\" ng-class=\"{'has-error': invalidHours}\">\n" +
    "				<input type=\"text\" ng-model=\"hours\" ng-change=\"updateHours()\" class=\"form-control text-center\" ng-mousewheel=\"incrementHours()\" ng-readonly=\"readonlyInput\" maxlength=\"2\">\n" +
    "			</td>\n" +
    "			<td>:</td>\n" +
    "			<td style=\"width:50px;\" class=\"form-group\" ng-class=\"{'has-error': invalidMinutes}\">\n" +
    "				<input type=\"text\" ng-model=\"minutes\" ng-change=\"updateMinutes()\" class=\"form-control text-center\" ng-readonly=\"readonlyInput\" maxlength=\"2\">\n" +
    "			</td>\n" +
    "			<td ng-show=\"showMeridian\"><button type=\"button\" class=\"btn btn-default text-center\" ng-click=\"toggleMeridian()\">{{meridian}}</button></td>\n" +
    "		</tr>\n" +
    "		<tr class=\"text-center\">\n" +
    "			<td><a ng-click=\"decrementHours()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-down\"></span></a></td>\n" +
    "			<td>&nbsp;</td>\n" +
    "			<td><a ng-click=\"decrementMinutes()\" class=\"btn btn-link\"><span class=\"glyphicon glyphicon-chevron-down\"></span></a></td>\n" +
    "			<td ng-show=\"showMeridian\"></td>\n" +
    "		</tr>\n" +
    "	</tbody>\n" +
    "</table>\n" +
    "");
}]);

angular.module("template/typeahead/typeahead-match.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/typeahead/typeahead-match.html",
    "<a tabindex=\"-1\" bind-html-unsafe=\"match.label | typeaheadHighlight:query\"></a>");
}]);

angular.module("template/typeahead/typeahead-popup.html", []).run(["$templateCache", function($templateCache) {
  $templateCache.put("template/typeahead/typeahead-popup.html",
    "<ul class=\"dropdown-menu\" ng-show=\"isOpen()\" ng-style=\"{top: position.top+'px', left: position.left+'px'}\" style=\"display: block;\" role=\"listbox\" aria-hidden=\"{{!isOpen()}}\">\n" +
    "    <li ng-repeat=\"match in matches track by $index\" ng-class=\"{active: isActive($index) }\" ng-mouseenter=\"selectActive($index)\" ng-click=\"selectMatch($index)\" role=\"option\" id=\"{{match.id}}\">\n" +
    "        <div typeahead-match index=\"$index\" match=\"match\" query=\"query\" template-url=\"templateUrl\"></div>\n" +
    "    </li>\n" +
    "</ul>\n" +
    "");
}]);

},{}],4:[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(p,f,n){'use strict';f.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,b){var c={},g={},h,k=!1,l=f.copy,m=f.isUndefined;b.addPollFn(function(){var a=b.cookies();h!=a&&(h=a,l(a,g),l(a,c),k&&e.$apply())})();k=!0;e.$watch(function(){var a,d,e;for(a in g)m(c[a])&&b.cookies(a,n);for(a in c)d=c[a],f.isString(d)||(d=""+d,c[a]=d),d!==g[a]&&(b.cookies(a,d),e=!0);if(e)for(a in d=b.cookies(),c)c[a]!==d[a]&&(m(d[a])?delete c[a]:c[a]=d[a])});return c}]).factory("$cookieStore",
["$cookies",function(e){return{get:function(b){return(b=e[b])?f.fromJson(b):b},put:function(b,c){e[b]=f.toJson(c)},remove:function(b){delete e[b]}}}])})(window,window.angular);
//# sourceMappingURL=angular-cookies.min.js.map

},{}],5:[function(require,module,exports){
angular.module("formly.render",[]),angular.module("formly",["formly.render"]),angular.module("formly.render").directive("formlyField",["$http","$compile","$templateCache","formlyTemplate",function(a,b,c,d){return{restrict:"AE",transclude:!0,scope:{optionsData:"&options",formId:"=formId",index:"=index",value:"=formValue",result:"=formResult"},link:function(e,f){function g(a){f.html(a),b(f.contents())(e)}var h=e.options.template;if(h)g(h);else{var i=e.options.templateUrl||d.getTemplateUrl(e.options.type);i?a.get(i,{cache:c}).then(function(a){g(a.data)},function(a){console.log("Formly Error: Problem loading template for "+i,a)}):console.log("Formly Error: template type '"+e.options.type+"' not supported.")}},controller:["$scope",function(a){a.options=a.optionsData(),"undefined"!=typeof a.options.default&&(a.value=a.options.default);var b=a.options.type;!b&&a.options.template?b="template":!b&&a.options.templateUrl&&(b="templateUrl"),a.id=a.formId+b+a.index}]}}]),angular.module("formly.render").directive("formlyForm",["formlyOptions","$compile",function(a,b){var c='ng-hide="field.hide"',d=['<formly-field ng-repeat="field in fields"','options="field"','form-result="result"','form-value="result[field.key||$index]"','form-id="options.uniqueFormId"','ng-hide="field.hide"','index="$index">',"</formly-field>"].join(" ");return{restrict:"AE",template:function(){a.getOptions().useNgIfToHide;return['<form class="formly" role="form">','<div class="ng-hide">fields</div>','<button type="submit"','ng-show="!options.hideSubmit">','{{options.submitCopy || "Submit"}}',"</button>","</form>"].join(" ")},replace:!0,scope:{fields:"=",options:"=?",result:"=",formOnParentScope:"=name"},compile:function(){return{post:function(e,f,g){e.options=angular.extend(a.getOptions(),e.options),e.options.submitButtonTemplate&&f.find("button").replaceWith(b(e.options.submitButtonTemplate)(e));var h=d;e.options.useNgIfToHide&&(h=h.replace(c,'ng-if="!field.hide"')),f.find("div").replaceWith(b(h)(e)),e.formOnParentScope=e[g.name]}}},controller:["$scope","$element","$parse",function(a,b,c){angular.forEach(a.fields,function(b){if(angular.isDefined(b.watch)&&angular.isDefined(b.watch.expression)&&angular.isDefined(b.watch.listener)){var c=b.watch.expression;angular.isFunction(c)&&(c=function(){var a=Array.prototype.slice.call(arguments,0);return a.unshift(b),b.watch.expression.apply(this,a)}),a.$watch(c,function(){var a=Array.prototype.slice.call(arguments,0);return a.unshift(b),b.watch.listener.apply(this,a)})}}),a.$watch("result",function(){angular.forEach(a.fields,function(b){b.hideExpression&&(b.hide=c(b.hideExpression)(a.result)),b.requiredExpression&&(b.required=c(b.requiredExpression)(a.result))})},!0)}]}}]),angular.module("formly.render").provider("formlyOptions",function(){function a(b,d){"string"==typeof b?c[b]=d:angular.forEach(b,function(b,c){a(c,b)})}function b(){return angular.copy(c)}var c={uniqueFormId:null,submitCopy:"Submit",hideSubmit:!1,submitButtonTemplate:null,useNgIfToHide:!1};this.setOption=a,this.getOptions=b,this.$get=function(){return this}}),angular.module("formly.render").provider("formlyTemplate",function(){function a(b,d){"string"==typeof b?c[b]=d:angular.forEach(b,function(b,c){a(c,b)})}function b(a){return c[a]}var c={textarea:"directives/formly-field-textarea.html",radio:"directives/formly-field-radio.html",select:"directives/formly-field-select.html",number:"directives/formly-field-number.html",checkbox:"directives/formly-field-checkbox.html",password:"directives/formly-field-password.html",hidden:"directives/formly-field-hidden.html",email:"directives/formly-field-email.html",text:"directives/formly-field-text.html"};this.setTemplateUrl=a,this.getTemplateUrl=b,this.$get=function(){return this}}),angular.module("formly.render").run(["$templateCache",function(a){"use strict";a.put("directives/formly-field-checkbox.html","<div class=checkbox><label><input type=checkbox aria-describedby={{id}}_description ng-required=options.required ng-disabled=options.disabled ng-model=value> {{options.label || 'Checkbox'}} {{options.required ? '*' : ''}}</label><p id={{id}}_description class=help-block ng-if=options.description>{{options.description}}</p></div>"),a.put("directives/formly-field-email.html","<div class=form-group><label for={{id}}>{{options.label || 'Email'}} {{options.required ? '*' : ''}}</label><input type=email class=form-control id={{id}} placeholder={{options.placeholder}} aria-describedby={{id}}_description ng-required=options.required ng-disabled=options.disabled ng-model=value><p id={{id}}_description class=help-block ng-if=options.description>{{options.description}}</p></div>"),a.put("directives/formly-field-hidden.html","<input type=hidden ng-model=value>"),a.put("directives/formly-field-number.html","<div class=form-group><label for={{id}}>{{options.label || 'Number'}} {{options.required ? '*' : ''}}</label><input type=number class=form-control id={{id}} placeholder={{options.placeholder}} aria-describedby={{id}}_description ng-required=options.required ng-disabled=options.disabled min={{options.min}} max={{options.max}} ng-minlength={{options.minlength}} ng-maxlength={{options.maxlength}} ng-model=value><p id={{id}}_description class=help-block ng-if=options.description>{{options.description}}</p></div>"),a.put("directives/formly-field-password.html","<div class=form-group><label for={{id}}>{{options.label || 'Password'}} {{options.required ? '*' : ''}}</label><input type=password class=form-control id={{id}} aria-describedby={{id}}_description ng-required=options.required ng-disabled=options.disabled ng-trim=\"{{options.trimWhitespace || false}}\" ng-model=value><p id={{id}}_description class=help-block ng-if=options.description>{{options.description}}</p></div>"),a.put("directives/formly-field-radio.html","<div class=radio-group><label class=control-label>{{options.label}} {{options.required ? '*' : ''}}</label><div class=radio ng-repeat=\"(key, option) in options.options\"><label><input type=radio name={{id}} id=\"{{id + '_'+ $index}}\" aria-describedby={{id}}_description ng-value=option.value ng-required=options.required ng-model=$parent.value> {{option.name}}</label><p id={{id}}_description class=help-block ng-if=option.description>{{option.description}}</p></div></div>"),a.put("directives/formly-field-select.html","<div class=form-group><label for={{id}}>{{options.label || 'Select'}} {{options.required ? '*' : ''}}</label><select class=form-control id={{id}} aria-describedby={{id}}_description ng-model=value ng-required=options.required ng-disabled=options.disabled ng-init=\"value = options.default\" ng-options=\"option.name as option.name group by option.group for option in options.options\"></select><p id={{id}}_description class=help-block ng-if=options.description>{{options.description}}</p></div>"),a.put("directives/formly-field-text.html","<div class=form-group><label for={{id}}>{{options.label || 'Text'}} {{options.required ? '*' : ''}}</label><input type=text class=form-control id={{id}} placeholder={{options.placeholder}} aria-describedby={{id}}_description ng-required=options.required ng-disabled=options.disabled ng-model=value><p id={{id}}_description class=help-block ng-if=options.description>{{options.description}}</p></div>"),a.put("directives/formly-field-textarea.html","<div class=form-group><label for={{id}}>{{options.label || 'Text'}} {{options.required ? '*' : ''}}</label><textarea type=text class=form-control id={{id}} rows={{options.lines}} placeholder={{options.placeholder}} aria-describedby={{id}}_description ng-required=options.required ng-disabled=options.disabled ng-model=value>\n	</textarea><p id={{id}}_description class=help-block ng-if=options.description>{{options.description}}</p></div>"),a.put("directives/formly-field.html",""),a.put("directives/formly-form.html",'<form class=formly role=form><formly-field ng-repeat="field in fields" options=field form-value=result[field.key||$index] class=formly-field form-id=options.uniqueFormId index=$index ng-hide=field.hide></formly-field><button type=submit class="btn btn-primary" ng-hide=options.hideSubmit>{{options.submitCopy || "Submit"}}</button></form>')}]);
//# sourceMappingURL=formly.bootstrap.min.map
},{}],6:[function(require,module,exports){
/*! 
 * angular-loading-bar v0.6.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2014 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","cfpLoadingBar",function(b,c,d,e,f){function g(){d.cancel(i),f.complete(),k=0,j=0}function h(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var i,j=0,k=0,l=f.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||h(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===j&&(i=d(function(){f.start()},l)),j++,f.set(k/j)),a},response:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url}),k>=j?g():f.set(k/j)),a},responseError:function(a){return a.config.ignoreLoadingBar||h(a.config)||(k++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url}),k>=j?g():f.set(k/j)),b.reject(a)}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,u&&k.enter(o,e),t&&k.enter(q,e),f(v))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,c.cancel(l),l=c(function(){g()},250)}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.includeSpinner,u=this.includeBar,v=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();
},{}],7:[function(require,module,exports){
/**
 * @license AngularJS v1.2.26
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window, angular, undefined) {'use strict';

var $resourceMinErr = angular.$$minErr('$resource');

// Helper functions and regex to lookup a dotted path on an object
// stopping at undefined/null.  The path must be composed of ASCII
// identifiers (just like $parse)
var MEMBER_NAME_REGEX = /^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;

function isValidDottedPath(path) {
  return (path != null && path !== '' && path !== 'hasOwnProperty' &&
      MEMBER_NAME_REGEX.test('.' + path));
}

function lookupDottedPath(obj, path) {
  if (!isValidDottedPath(path)) {
    throw $resourceMinErr('badmember', 'Dotted member path "@{0}" is invalid.', path);
  }
  var keys = path.split('.');
  for (var i = 0, ii = keys.length; i < ii && obj !== undefined; i++) {
    var key = keys[i];
    obj = (obj !== null) ? obj[key] : undefined;
  }
  return obj;
}

/**
 * Create a shallow copy of an object and clear other fields from the destination
 */
function shallowClearAndCopy(src, dst) {
  dst = dst || {};

  angular.forEach(dst, function(value, key){
    delete dst[key];
  });

  for (var key in src) {
    if (src.hasOwnProperty(key) && !(key.charAt(0) === '$' && key.charAt(1) === '$')) {
      dst[key] = src[key];
    }
  }

  return dst;
}

/**
 * @ngdoc module
 * @name ngResource
 * @description
 *
 * # ngResource
 *
 * The `ngResource` module provides interaction support with RESTful services
 * via the $resource service.
 *
 *
 * <div doc-module-components="ngResource"></div>
 *
 * See {@link ngResource.$resource `$resource`} for usage.
 */

/**
 * @ngdoc service
 * @name $resource
 * @requires $http
 *
 * @description
 * A factory which creates a resource object that lets you interact with
 * [RESTful](http://en.wikipedia.org/wiki/Representational_State_Transfer) server-side data sources.
 *
 * The returned resource object has action methods which provide high-level behaviors without
 * the need to interact with the low level {@link ng.$http $http} service.
 *
 * Requires the {@link ngResource `ngResource`} module to be installed.
 *
 * @param {string} url A parametrized URL template with parameters prefixed by `:` as in
 *   `/user/:username`. If you are using a URL with a port number (e.g.
 *   `http://example.com:8080/api`), it will be respected.
 *
 *   If you are using a url with a suffix, just add the suffix, like this:
 *   `$resource('http://example.com/resource.json')` or `$resource('http://example.com/:id.json')`
 *   or even `$resource('http://example.com/resource/:resource_id.:format')`
 *   If the parameter before the suffix is empty, :resource_id in this case, then the `/.` will be
 *   collapsed down to a single `.`.  If you need this sequence to appear and not collapse then you
 *   can escape it with `/\.`.
 *
 * @param {Object=} paramDefaults Default values for `url` parameters. These can be overridden in
 *   `actions` methods. If any of the parameter value is a function, it will be executed every time
 *   when a param value needs to be obtained for a request (unless the param was overridden).
 *
 *   Each key value in the parameter object is first bound to url template if present and then any
 *   excess keys are appended to the url search query after the `?`.
 *
 *   Given a template `/path/:verb` and parameter `{verb:'greet', salutation:'Hello'}` results in
 *   URL `/path/greet?salutation=Hello`.
 *
 *   If the parameter value is prefixed with `@` then the value for that parameter will be extracted
 *   from the corresponding property on the `data` object (provided when calling an action method).  For
 *   example, if the `defaultParam` object is `{someParam: '@someProp'}` then the value of `someParam`
 *   will be `data.someProp`.
 *
 * @param {Object.<Object>=} actions Hash with declaration of custom action that should extend
 *   the default set of resource actions. The declaration should be created in the format of {@link
 *   ng.$http#usage_parameters $http.config}:
 *
 *       {action1: {method:?, params:?, isArray:?, headers:?, ...},
 *        action2: {method:?, params:?, isArray:?, headers:?, ...},
 *        ...}
 *
 *   Where:
 *
 *   - **`action`** – {string} – The name of action. This name becomes the name of the method on
 *     your resource object.
 *   - **`method`** – {string} – Case insensitive HTTP method (e.g. `GET`, `POST`, `PUT`,
 *     `DELETE`, `JSONP`, etc).
 *   - **`params`** – {Object=} – Optional set of pre-bound parameters for this action. If any of
 *     the parameter value is a function, it will be executed every time when a param value needs to
 *     be obtained for a request (unless the param was overridden).
 *   - **`url`** – {string} – action specific `url` override. The url templating is supported just
 *     like for the resource-level urls.
 *   - **`isArray`** – {boolean=} – If true then the returned object for this action is an array,
 *     see `returns` section.
 *   - **`transformRequest`** –
 *     `{function(data, headersGetter)|Array.<function(data, headersGetter)>}` –
 *     transform function or an array of such functions. The transform function takes the http
 *     request body and headers and returns its transformed (typically serialized) version.
 *     By default, transformRequest will contain one function that checks if the request data is
 *     an object and serializes to using `angular.toJson`. To prevent this behavior, set
 *     `transformRequest` to an empty array: `transformRequest: []`
 *   - **`transformResponse`** –
 *     `{function(data, headersGetter)|Array.<function(data, headersGetter)>}` –
 *     transform function or an array of such functions. The transform function takes the http
 *     response body and headers and returns its transformed (typically deserialized) version.
 *     By default, transformResponse will contain one function that checks if the response looks like
 *     a JSON string and deserializes it using `angular.fromJson`. To prevent this behavior, set
 *     `transformResponse` to an empty array: `transformResponse: []`
 *   - **`cache`** – `{boolean|Cache}` – If true, a default $http cache will be used to cache the
 *     GET request, otherwise if a cache instance built with
 *     {@link ng.$cacheFactory $cacheFactory}, this cache will be used for
 *     caching.
 *   - **`timeout`** – `{number|Promise}` – timeout in milliseconds, or {@link ng.$q promise} that
 *     should abort the request when resolved.
 *   - **`withCredentials`** - `{boolean}` - whether to set the `withCredentials` flag on the
 *     XHR object. See
 *     [requests with credentials](https://developer.mozilla.org/en/http_access_control#section_5)
 *     for more information.
 *   - **`responseType`** - `{string}` - see
 *     [requestType](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#responseType).
 *   - **`interceptor`** - `{Object=}` - The interceptor object has two optional methods -
 *     `response` and `responseError`. Both `response` and `responseError` interceptors get called
 *     with `http response` object. See {@link ng.$http $http interceptors}.
 *
 * @returns {Object} A resource "class" object with methods for the default set of resource actions
 *   optionally extended with custom `actions`. The default set contains these actions:
 *   ```js
 *   { 'get':    {method:'GET'},
 *     'save':   {method:'POST'},
 *     'query':  {method:'GET', isArray:true},
 *     'remove': {method:'DELETE'},
 *     'delete': {method:'DELETE'} };
 *   ```
 *
 *   Calling these methods invoke an {@link ng.$http} with the specified http method,
 *   destination and parameters. When the data is returned from the server then the object is an
 *   instance of the resource class. The actions `save`, `remove` and `delete` are available on it
 *   as  methods with the `$` prefix. This allows you to easily perform CRUD operations (create,
 *   read, update, delete) on server-side data like this:
 *   ```js
 *   var User = $resource('/user/:userId', {userId:'@id'});
 *   var user = User.get({userId:123}, function() {
 *     user.abc = true;
 *     user.$save();
 *   });
 *   ```
 *
 *   It is important to realize that invoking a $resource object method immediately returns an
 *   empty reference (object or array depending on `isArray`). Once the data is returned from the
 *   server the existing reference is populated with the actual data. This is a useful trick since
 *   usually the resource is assigned to a model which is then rendered by the view. Having an empty
 *   object results in no rendering, once the data arrives from the server then the object is
 *   populated with the data and the view automatically re-renders itself showing the new data. This
 *   means that in most cases one never has to write a callback function for the action methods.
 *
 *   The action methods on the class object or instance object can be invoked with the following
 *   parameters:
 *
 *   - HTTP GET "class" actions: `Resource.action([parameters], [success], [error])`
 *   - non-GET "class" actions: `Resource.action([parameters], postData, [success], [error])`
 *   - non-GET instance actions:  `instance.$action([parameters], [success], [error])`
 *
 *   Success callback is called with (value, responseHeaders) arguments. Error callback is called
 *   with (httpResponse) argument.
 *
 *   Class actions return empty instance (with additional properties below).
 *   Instance actions return promise of the action.
 *
 *   The Resource instances and collection have these additional properties:
 *
 *   - `$promise`: the {@link ng.$q promise} of the original server interaction that created this
 *     instance or collection.
 *
 *     On success, the promise is resolved with the same resource instance or collection object,
 *     updated with data from server. This makes it easy to use in
 *     {@link ngRoute.$routeProvider resolve section of $routeProvider.when()} to defer view
 *     rendering until the resource(s) are loaded.
 *
 *     On failure, the promise is resolved with the {@link ng.$http http response} object, without
 *     the `resource` property.
 *
 *     If an interceptor object was provided, the promise will instead be resolved with the value
 *     returned by the interceptor.
 *
 *   - `$resolved`: `true` after first server interaction is completed (either with success or
 *      rejection), `false` before that. Knowing if the Resource has been resolved is useful in
 *      data-binding.
 *
 * @example
 *
 * # Credit card resource
 *
 * ```js
     // Define CreditCard class
     var CreditCard = $resource('/user/:userId/card/:cardId',
      {userId:123, cardId:'@id'}, {
       charge: {method:'POST', params:{charge:true}}
      });

     // We can retrieve a collection from the server
     var cards = CreditCard.query(function() {
       // GET: /user/123/card
       // server returns: [ {id:456, number:'1234', name:'Smith'} ];

       var card = cards[0];
       // each item is an instance of CreditCard
       expect(card instanceof CreditCard).toEqual(true);
       card.name = "J. Smith";
       // non GET methods are mapped onto the instances
       card.$save();
       // POST: /user/123/card/456 {id:456, number:'1234', name:'J. Smith'}
       // server returns: {id:456, number:'1234', name: 'J. Smith'};

       // our custom method is mapped as well.
       card.$charge({amount:9.99});
       // POST: /user/123/card/456?amount=9.99&charge=true {id:456, number:'1234', name:'J. Smith'}
     });

     // we can create an instance as well
     var newCard = new CreditCard({number:'0123'});
     newCard.name = "Mike Smith";
     newCard.$save();
     // POST: /user/123/card {number:'0123', name:'Mike Smith'}
     // server returns: {id:789, number:'0123', name: 'Mike Smith'};
     expect(newCard.id).toEqual(789);
 * ```
 *
 * The object returned from this function execution is a resource "class" which has "static" method
 * for each action in the definition.
 *
 * Calling these methods invoke `$http` on the `url` template with the given `method`, `params` and
 * `headers`.
 * When the data is returned from the server then the object is an instance of the resource type and
 * all of the non-GET methods are available with `$` prefix. This allows you to easily support CRUD
 * operations (create, read, update, delete) on server-side data.

   ```js
     var User = $resource('/user/:userId', {userId:'@id'});
     User.get({userId:123}, function(user) {
       user.abc = true;
       user.$save();
     });
   ```
 *
 * It's worth noting that the success callback for `get`, `query` and other methods gets passed
 * in the response that came from the server as well as $http header getter function, so one
 * could rewrite the above example and get access to http headers as:
 *
   ```js
     var User = $resource('/user/:userId', {userId:'@id'});
     User.get({userId:123}, function(u, getResponseHeaders){
       u.abc = true;
       u.$save(function(u, putResponseHeaders) {
         //u => saved user object
         //putResponseHeaders => $http header getter
       });
     });
   ```
 *
 * You can also access the raw `$http` promise via the `$promise` property on the object returned
 *
   ```
     var User = $resource('/user/:userId', {userId:'@id'});
     User.get({userId:123})
         .$promise.then(function(user) {
           $scope.user = user;
         });
   ```

 * # Creating a custom 'PUT' request
 * In this example we create a custom method on our resource to make a PUT request
 * ```js
 *    var app = angular.module('app', ['ngResource', 'ngRoute']);
 *
 *    // Some APIs expect a PUT request in the format URL/object/ID
 *    // Here we are creating an 'update' method
 *    app.factory('Notes', ['$resource', function($resource) {
 *    return $resource('/notes/:id', null,
 *        {
 *            'update': { method:'PUT' }
 *        });
 *    }]);
 *
 *    // In our controller we get the ID from the URL using ngRoute and $routeParams
 *    // We pass in $routeParams and our Notes factory along with $scope
 *    app.controller('NotesCtrl', ['$scope', '$routeParams', 'Notes',
                                      function($scope, $routeParams, Notes) {
 *    // First get a note object from the factory
 *    var note = Notes.get({ id:$routeParams.id });
 *    $id = note.id;
 *
 *    // Now call update passing in the ID first then the object you are updating
 *    Notes.update({ id:$id }, note);
 *
 *    // This will PUT /notes/ID with the note object in the request payload
 *    }]);
 * ```
 */
angular.module('ngResource', ['ng']).
  factory('$resource', ['$http', '$q', function($http, $q) {

    var DEFAULT_ACTIONS = {
      'get':    {method:'GET'},
      'save':   {method:'POST'},
      'query':  {method:'GET', isArray:true},
      'remove': {method:'DELETE'},
      'delete': {method:'DELETE'}
    };
    var noop = angular.noop,
        forEach = angular.forEach,
        extend = angular.extend,
        copy = angular.copy,
        isFunction = angular.isFunction;

    /**
     * We need our custom method because encodeURIComponent is too aggressive and doesn't follow
     * http://www.ietf.org/rfc/rfc3986.txt with regards to the character set (pchar) allowed in path
     * segments:
     *    segment       = *pchar
     *    pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
     *    pct-encoded   = "%" HEXDIG HEXDIG
     *    unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
     *    sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
     *                     / "*" / "+" / "," / ";" / "="
     */
    function encodeUriSegment(val) {
      return encodeUriQuery(val, true).
        replace(/%26/gi, '&').
        replace(/%3D/gi, '=').
        replace(/%2B/gi, '+');
    }


    /**
     * This method is intended for encoding *key* or *value* parts of query component. We need a
     * custom method because encodeURIComponent is too aggressive and encodes stuff that doesn't
     * have to be encoded per http://tools.ietf.org/html/rfc3986:
     *    query       = *( pchar / "/" / "?" )
     *    pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
     *    unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
     *    pct-encoded   = "%" HEXDIG HEXDIG
     *    sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
     *                     / "*" / "+" / "," / ";" / "="
     */
    function encodeUriQuery(val, pctEncodeSpaces) {
      return encodeURIComponent(val).
        replace(/%40/gi, '@').
        replace(/%3A/gi, ':').
        replace(/%24/g, '$').
        replace(/%2C/gi, ',').
        replace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));
    }

    function Route(template, defaults) {
      this.template = template;
      this.defaults = defaults || {};
      this.urlParams = {};
    }

    Route.prototype = {
      setUrlParams: function(config, params, actionUrl) {
        var self = this,
            url = actionUrl || self.template,
            val,
            encodedVal;

        var urlParams = self.urlParams = {};
        forEach(url.split(/\W/), function(param){
          if (param === 'hasOwnProperty') {
            throw $resourceMinErr('badname', "hasOwnProperty is not a valid parameter name.");
          }
          if (!(new RegExp("^\\d+$").test(param)) && param &&
               (new RegExp("(^|[^\\\\]):" + param + "(\\W|$)").test(url))) {
            urlParams[param] = true;
          }
        });
        url = url.replace(/\\:/g, ':');

        params = params || {};
        forEach(self.urlParams, function(_, urlParam){
          val = params.hasOwnProperty(urlParam) ? params[urlParam] : self.defaults[urlParam];
          if (angular.isDefined(val) && val !== null) {
            encodedVal = encodeUriSegment(val);
            url = url.replace(new RegExp(":" + urlParam + "(\\W|$)", "g"), function(match, p1) {
              return encodedVal + p1;
            });
          } else {
            url = url.replace(new RegExp("(\/?):" + urlParam + "(\\W|$)", "g"), function(match,
                leadingSlashes, tail) {
              if (tail.charAt(0) == '/') {
                return tail;
              } else {
                return leadingSlashes + tail;
              }
            });
          }
        });

        // strip trailing slashes and set the url
        url = url.replace(/\/+$/, '') || '/';
        // then replace collapse `/.` if found in the last URL path segment before the query
        // E.g. `http://url.com/id./format?q=x` becomes `http://url.com/id.format?q=x`
        url = url.replace(/\/\.(?=\w+($|\?))/, '.');
        // replace escaped `/\.` with `/.`
        config.url = url.replace(/\/\\\./, '/.');


        // set params - delegate param encoding to $http
        forEach(params, function(value, key){
          if (!self.urlParams[key]) {
            config.params = config.params || {};
            config.params[key] = value;
          }
        });
      }
    };


    function resourceFactory(url, paramDefaults, actions) {
      var route = new Route(url);

      actions = extend({}, DEFAULT_ACTIONS, actions);

      function extractParams(data, actionParams){
        var ids = {};
        actionParams = extend({}, paramDefaults, actionParams);
        forEach(actionParams, function(value, key){
          if (isFunction(value)) { value = value(); }
          ids[key] = value && value.charAt && value.charAt(0) == '@' ?
            lookupDottedPath(data, value.substr(1)) : value;
        });
        return ids;
      }

      function defaultResponseInterceptor(response) {
        return response.resource;
      }

      function Resource(value){
        shallowClearAndCopy(value || {}, this);
      }

      forEach(actions, function(action, name) {
        var hasBody = /^(POST|PUT|PATCH)$/i.test(action.method);

        Resource[name] = function(a1, a2, a3, a4) {
          var params = {}, data, success, error;

          /* jshint -W086 */ /* (purposefully fall through case statements) */
          switch(arguments.length) {
          case 4:
            error = a4;
            success = a3;
            //fallthrough
          case 3:
          case 2:
            if (isFunction(a2)) {
              if (isFunction(a1)) {
                success = a1;
                error = a2;
                break;
              }

              success = a2;
              error = a3;
              //fallthrough
            } else {
              params = a1;
              data = a2;
              success = a3;
              break;
            }
          case 1:
            if (isFunction(a1)) success = a1;
            else if (hasBody) data = a1;
            else params = a1;
            break;
          case 0: break;
          default:
            throw $resourceMinErr('badargs',
              "Expected up to 4 arguments [params, data, success, error], got {0} arguments",
              arguments.length);
          }
          /* jshint +W086 */ /* (purposefully fall through case statements) */

          var isInstanceCall = this instanceof Resource;
          var value = isInstanceCall ? data : (action.isArray ? [] : new Resource(data));
          var httpConfig = {};
          var responseInterceptor = action.interceptor && action.interceptor.response ||
                                    defaultResponseInterceptor;
          var responseErrorInterceptor = action.interceptor && action.interceptor.responseError ||
                                    undefined;

          forEach(action, function(value, key) {
            if (key != 'params' && key != 'isArray' && key != 'interceptor') {
              httpConfig[key] = copy(value);
            }
          });

          if (hasBody) httpConfig.data = data;
          route.setUrlParams(httpConfig,
                             extend({}, extractParams(data, action.params || {}), params),
                             action.url);

          var promise = $http(httpConfig).then(function (response) {
            var data = response.data,
              promise = value.$promise;

            if (data) {
              // Need to convert action.isArray to boolean in case it is undefined
              // jshint -W018
              if (angular.isArray(data) !== (!!action.isArray)) {
                throw $resourceMinErr('badcfg',
                    'Error in resource configuration. Expected ' +
                    'response to contain an {0} but got an {1}',
                  action.isArray ? 'array' : 'object',
                  angular.isArray(data) ? 'array' : 'object');
              }
              // jshint +W018
              if (action.isArray) {
                value.length = 0;
                forEach(data, function (item) {
                  if (typeof item === "object") {
                    value.push(new Resource(item));
                  } else {
                    // Valid JSON values may be string literals, and these should not be converted
                    // into objects. These items will not have access to the Resource prototype
                    // methods, but unfortunately there
                    value.push(item);
                  }
                });
              } else {
                shallowClearAndCopy(data, value);
                value.$promise = promise;
              }
            }

            value.$resolved = true;

            response.resource = value;

            return response;
          }, function(response) {
            value.$resolved = true;

            (error||noop)(response);

            return $q.reject(response);
          });

          promise = promise.then(
              function(response) {
                var value = responseInterceptor(response);
                (success||noop)(value, response.headers);
                return value;
              },
              responseErrorInterceptor);

          if (!isInstanceCall) {
            // we are creating instance / collection
            // - set the initial promise
            // - return the instance / collection
            value.$promise = promise;
            value.$resolved = false;

            return value;
          }

          // instance call
          return promise;
        };


        Resource.prototype['$' + name] = function(params, success, error) {
          if (isFunction(params)) {
            error = success; success = params; params = {};
          }
          var result = Resource[name].call(this, params, this, success, error);
          return result.$promise || result;
        };
      });

      Resource.bind = function(additionalParamDefaults){
        return resourceFactory(url, extend({}, paramDefaults, additionalParamDefaults), actions);
      };

      return Resource;
    }

    return resourceFactory;
  }]);


})(window, window.angular);

},{}],8:[function(require,module,exports){
/**
 * State-based routing for AngularJS
 * @version v0.2.11
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return J(new(J(function(){},{prototype:a})),b)}function e(a){return I(arguments,function(b){b!==a&&I(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var c=[];return b.forEach(a,function(a,b){c.push(b)}),c}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return J({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return I(a,function(a){c[a]=b[a]}),c}function l(a,b){var d=1,f=2,g={},h=[],i=g,j=J(a.when(g),{$$promises:g,$$values:g});this.study=function(g){function k(a,c){if(o[c]!==f){if(n.push(c),o[c]===d)throw n.splice(0,n.indexOf(c)),new Error("Cyclic dependency: "+n.join(" -> "));if(o[c]=d,F(a))m.push(c,[function(){return b.get(a)}],h);else{var e=b.annotate(a);I(e,function(a){a!==c&&g.hasOwnProperty(a)&&k(g[a],a)}),m.push(c,a,e)}n.pop(),o[c]=f}}function l(a){return G(a)&&a.then&&a.$$promises}if(!G(g))throw new Error("'invocables' must be an object");var m=[],n=[],o={};return I(g,k),g=n=o=null,function(d,f,g){function h(){--s||(t||e(r,f.$$values),p.$$values=r,p.$$promises=!0,delete p.$$inheritedValues,o.resolve(r))}function k(a){p.$$failure=a,o.reject(a)}function n(c,e,f){function i(a){l.reject(a),k(a)}function j(){if(!D(p.$$failure))try{l.resolve(b.invoke(e,g,r)),l.promise.then(function(a){r[c]=a,h()},i)}catch(a){i(a)}}var l=a.defer(),m=0;I(f,function(a){q.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,q[a].then(function(b){r[a]=b,--m||j()},i))}),m||j(),q[c]=l.promise}if(l(d)&&g===c&&(g=f,f=d,d=null),d){if(!G(d))throw new Error("'locals' must be an object")}else d=i;if(f){if(!l(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=j;var o=a.defer(),p=o.promise,q=p.$$promises={},r=J({},d),s=1+m.length/3,t=!1;if(D(f.$$failure))return k(f.$$failure),p;f.$$inheritedValues&&e(r,f.$$inheritedValues),f.$$values?(t=e(r,f.$$values),p.$$inheritedValues=f.$$values,h()):(f.$$inheritedValues&&(p.$$inheritedValues=f.$$inheritedValues),J(q,f.$$promises),f.then(h,k));for(var u=0,v=m.length;v>u;u+=3)d.hasOwnProperty(m[u])?h():n(m[u],m[u+1],m[u+2]);return p}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function m(a,b,c){this.fromConfig=function(a,b,c){return D(a.template)?this.fromString(a.template,b):D(a.templateUrl)?this.fromUrl(a.templateUrl,b):D(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return E(a)?a(b):a},this.fromUrl=function(c,d){return E(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function n(a,d){function e(a){return D(a)?this.type.decode(a):p.$$getDefaultValue(this)}function f(b,c,d){if(!/^\w+(-+\w+)*$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(n[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");n[b]=J({type:c||new o,$value:e},d)}function g(a,b,c){var d=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return d;var e=c?"?":"";return d+e+"("+b+")"+e}function h(a){if(!d.params||!d.params[a])return{};var b=d.params[a];return G(b)?b:{value:b}}d=b.isObject(d)?d:{};var i,j=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k="^",l=0,m=this.segments=[],n=this.params={};this.source=a;for(var q,r,s,t,u;(i=j.exec(a))&&(q=i[2]||i[3],r=i[4]||("*"==i[1]?".*":"[^/]*"),s=a.substring(l,i.index),t=this.$types[r]||new o({pattern:new RegExp(r)}),u=h(q),!(s.indexOf("?")>=0));)k+=g(s,t.$subPattern(),D(u.value)),f(q,t,u),m.push(s),l=j.lastIndex;s=a.substring(l);var v=s.indexOf("?");if(v>=0){var w=this.sourceSearch=s.substring(v);s=s.substring(0,v),this.sourcePath=a.substring(0,l+v),I(w.substring(1).split(/[&?]/),function(a){f(a,null,h(a))})}else this.sourcePath=a,this.sourceSearch="";k+=g(s)+(d.strict===!1?"/?":"")+"$",m.push(s),this.regexp=new RegExp(k,d.caseInsensitive?"i":c),this.prefix=m[0]}function o(a){J(this,a)}function p(){function a(){return{strict:f,caseInsensitive:e}}function b(a){return E(a)||H(a)&&E(a[a.length-1])}function c(){I(h,function(a){if(n.prototype.$types[a.name])throw new Error("A type named '"+a.name+"' has already been defined.");var c=new o(b(a.def)?d.invoke(a.def):a.def);n.prototype.$types[a.name]=c})}var d,e=!1,f=!0,g=!0,h=[],i={"int":{decode:function(a){return parseInt(a,10)},is:function(a){return D(a)?this.decode(a.toString())===a:!1},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0===parseInt(a,10)?!1:!0},is:function(a){return a===!0||a===!1},pattern:/0|1/},string:{pattern:/[^\/]*/},date:{equals:function(a,b){return a.toISOString()===b.toISOString()},decode:function(a){return new Date(a)},encode:function(a){return[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-")},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/}};p.$$getDefaultValue=function(a){if(!b(a.value))return a.value;if(!d)throw new Error("Injectable functions cannot be called at configuration time");return d.invoke(a.value)},this.caseInsensitive=function(a){e=a},this.strictMode=function(a){f=a},this.compile=function(b,c){return new n(b,J(a(),c))},this.isMatcher=function(a){if(!G(a))return!1;var b=!0;return I(n.prototype,function(c,d){E(c)&&(b=b&&D(a[d])&&E(a[d]))}),b},this.type=function(a,b){return D(b)?(h.push({name:a,def:b}),g||c(),this):n.prototype.$types[a]},this.$get=["$injector",function(a){return d=a,g=!1,n.prototype.$types={},c(),I(i,function(a,b){n.prototype.$types[b]||(n.prototype.$types[b]=new o(a))}),this}]}function q(a,b){function d(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function e(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function f(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return D(d)?d:!0}function g(b,c,d,e){function f(a,b,c){return"/"===m?a:b?m.slice(0,-1)+a:c?m.slice(1)+a:a}function g(a){function c(a){var c=a(d,b);return c?(F(c)&&b.replace().url(c),!0):!1}if(!a||!a.defaultPrevented){var e,f=i.length;for(e=0;f>e;e++)if(c(i[e]))return;j&&c(j)}}function l(){return h=h||c.$on("$locationChangeSuccess",g)}var m=e.baseHref(),n=b.url();return k||l(),{sync:function(){g()},listen:function(){return l()},update:function(a){return a?void(n=b.url()):void(b.url()!==n&&(b.url(n),b.replace()))},push:function(a,c,d){b.url(a.format(c||{})),d&&d.replace&&b.replace()},href:function(c,d,e){if(!c.validates(d))return null;var g=a.html5Mode(),h=c.format(d);if(e=e||{},g||null===h||(h="#"+a.hashPrefix()+h),h=f(h,g,e.absolute),!e.absolute||!h)return h;var i=!g&&h?"/":"",j=b.port();return j=80===j||443===j?"":":"+j,[b.protocol(),"://",b.host(),j,i,h].join("")}}}var h,i=[],j=null,k=!1;this.rule=function(a){if(!E(a))throw new Error("'rule' must be a function");return i.push(a),this},this.otherwise=function(a){if(F(a)){var b=a;a=function(){return b}}else if(!E(a))throw new Error("'rule' must be a function");return j=a,this},this.when=function(a,c){var g,h=F(c);if(F(a)&&(a=b.compile(a)),!h&&!E(c)&&!H(c))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,c){return h&&(g=b.compile(c),c=["$match",function(a){return g.format(a)}]),J(function(b,d){return f(b,c,a.exec(d.path(),d.search()))},{prefix:F(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=b,b=["$match",function(a){return e(g,a)}]),J(function(c,d){return f(c,b,a.exec(d.path()))},{prefix:d(a)})}},j={matcher:b.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,c));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),k=a},this.$get=g,g.$inject=["$location","$rootScope","$injector","$browser"]}function r(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function h(a,b){if(!a)return c;var d=F(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=v[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function l(a,b){w[a]||(w[a]=[]),w[a].push(b)}function m(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!F(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(v.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):F(b.parent)?b.parent:"";if(e&&!v[e])return l(e,b.self);for(var f in y)E(y[f])&&(b[f]=y[f](b,y.$delegates[f]));if(v[c]=b,!b[x]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){u.$current.navigable==b&&j(a,c)||u.transitionTo(b,a,{location:!1})}]),w[c])for(var g=0;g<w[c].length;g++)m(w[c][g]);return b}function n(a){return a.indexOf("*")>-1}function o(a){var b=a.split("."),c=u.$current.name.split(".");if("**"===b[0]&&(c=c.slice(c.indexOf(b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(c.indexOf(b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length)return!1;for(var d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return c.join("")===b.join("")}function p(a,b){return F(a)&&!D(b)?y[a]:E(b)&&F(a)?(y[a]&&!y.$delegates[a]&&(y.$delegates[a]=y[a]),y[a]=b,this):this}function q(a,b){return G(a)?b=a:b.name=a,m(b),this}function r(a,e,f,l,m,p,q){function r(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return q.update(),A;if(!g.retry)return null;if(f.$retry)return q.update(),B;var h=u.transition=e.when(g.retry);return h.then(function(){return h!==u.transition?y:(b.options.$retry=!0,u.transitionTo(b.to,b.toParams,b.options))},function(){return A}),q.update(),h}function w(a,c,d,h,i){var j=d?c:k(g(a.params),c),n={$stateParams:j};i.resolve=m.resolve(a.resolve,n,i.resolve,a);var o=[i.resolve.then(function(a){i.globals=a})];return h&&o.push(h),I(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return f.load(d,{view:c,locals:n,params:j})||""}],o.push(m.resolve(e,n,i.resolve,a).then(function(f){if(E(c.controllerProvider)||H(c.controllerProvider)){var g=b.extend({},e,n);f.$$controller=l.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,f.$$controllerAs=c.controllerAs,i[d]=f}))}),e.all(o).then(function(){return i})}var y=e.reject(new Error("transition superseded")),z=e.reject(new Error("transition prevented")),A=e.reject(new Error("transition aborted")),B=e.reject(new Error("transition failed"));return t.locals={resolve:null,globals:{$stateParams:{}}},u={params:{},current:t.self,$current:t,transition:null},u.reload=function(){u.transitionTo(u.current,p,{reload:!0,inherit:!1,notify:!1})},u.go=function(a,b,c){return u.transitionTo(a,b,J({inherit:!0,relative:u.$current},c))},u.transitionTo=function(b,c,f){c=c||{},f=J({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var m,n=u.$current,o=u.params,v=n.path,A=h(b,f.relative);if(!D(A)){var B={to:b,toParams:c,options:f},C=r(B,n.self,o,f);if(C)return C;if(b=B.to,c=B.toParams,f=B.options,A=h(b,f.relative),!D(A)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(A[x])throw new Error("Cannot transition to abstract state '"+b+"'");f.inherit&&(c=i(p,c||{},u.$current,A)),b=A;var E=b.path,F=0,G=E[F],H=t.locals,I=[];if(!f.reload)for(;G&&G===v[F]&&j(c,o,G.ownParams);)H=I[F]=G.locals,F++,G=E[F];if(s(b,n,H,f))return b.self.reloadOnSearch!==!1&&q.update(),u.transition=null,e.when(u.current);if(c=k(g(b.params),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,n.self,o).defaultPrevented)return q.update(),z;for(var L=e.when(H),M=F;M<E.length;M++,G=E[M])H=I[M]=d(H),L=w(G,c,G===b,L,H);var N=u.transition=L.then(function(){var d,e,g;if(u.transition!==N)return y;for(d=v.length-1;d>=F;d--)g=v[d],g.self.onExit&&l.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=F;d<E.length;d++)e=E[d],e.locals=I[d],e.self.onEnter&&l.invoke(e.self.onEnter,e.self,e.locals.globals);return u.transition!==N?y:(u.$current=b,u.current=b.self,u.params=c,K(u.params,p),u.transition=null,f.location&&b.navigable&&q.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,n.self,o),q.update(!0),u.current)},function(d){return u.transition!==N?y:(u.transition=null,m=a.$broadcast("$stateChangeError",b.self,c,n.self,o,d),m.defaultPrevented||q.update(),e.reject(d))});return N},u.is=function(a,d){var e=h(a);return D(e)?u.$current!==e?!1:D(d)&&null!==d?b.equals(p,d):!0:c},u.includes=function(a,b){if(F(a)&&n(a)){if(!o(a))return!1;a=u.$current.name}var d=h(a);return D(d)?D(u.$current.includes[d.name])?j(b,p):!1:c},u.href=function(a,b,c){c=J({lossy:!0,inherit:!0,absolute:!1,relative:u.$current},c||{});var d=h(a,c.relative);if(!D(d))return null;c.inherit&&(b=i(p,b||{},u.$current,d));var e=d&&c.lossy?d.navigable:d;return e&&e.url?q.href(e.url,k(g(d.params),b||{}),{absolute:c.absolute}):null},u.get=function(a,b){if(0===arguments.length)return g(v).map(function(a){return v[a].self});var c=h(a,b);return c&&c.self?c.self:null},u}function s(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var t,u,v={},w={},x="abstract",y={parent:function(a){if(D(a.parent)&&a.parent)return h(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?h(b[1]):t},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=J({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(F(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||t).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){return a.params?a.params:a.url?a.url.params:a.parent.params},views:function(a){var b={};return I(D(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(a.params=a.params||{},!a.parent)return g(a.params);var b={};I(a.params,function(a,c){b[c]=!0}),I(a.parent.params,function(c,d){if(!b[d])throw new Error("Missing required parameter '"+d+"' in state '"+a.name+"'");b[d]=!1});var c=[];return I(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?J({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};t=m({name:"",url:"^",views:null,"abstract":!0}),t.navigable=null,this.decorator=p,this.state=q,this.$get=r,r.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter"]}function s(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=J(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function t(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function u(a,c,d){function e(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function f(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(i)return{enter:function(a,b,c){i.enter(a,null,b,c)},leave:function(a,b){i.leave(a,b)}};if(h){var d=h&&h(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var g=e(),h=g("$animator"),i=g("$animate"),j={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,e,g){return function(c,e,h){function i(){k&&(k.remove(),k=null),m&&(m.$destroy(),m=null),l&&(q.leave(l,function(){k=null}),k=l,l=null)}function j(f){var j,k=w(h,e.inheritedData("$uiView")),r=k&&a.$current&&a.$current.locals[k];if(f||r!==n){j=c.$new(),n=a.$current.locals[k];var s=g(j,function(a){q.enter(a,e,function(){(b.isDefined(p)&&!p||c.$eval(p))&&d(a)}),i()});l=s,m=j,m.$emit("$viewContentLoaded"),m.$eval(o)}}var k,l,m,n,o=h.onload||"",p=h.autoscroll,q=f(h,c);c.$on("$stateChangeSuccess",function(){j(!1)}),c.$on("$viewContentLoading",function(){j(!1)}),j(!0)}}};return j}function v(a,b,c){return{restrict:"ECA",priority:-400,compile:function(d){var e=d.html();return function(d,f,g){var h=c.$current,i=w(g,f.inheritedData("$uiView")),j=h&&h.locals[i];if(j){f.data("$uiView",{name:i,state:j.$$state}),f.html(j.$template?j.$template:e);var k=a(f.contents());if(j.$$controller){j.$scope=d;var l=b(j.$$controller,j);j.$$controllerAs&&(d[j.$$controllerAs]=l),f.data("$ngControllerController",l),f.children().data("$ngControllerController",l)}k(d)}}}}}function w(a,b){var c=a.uiView||a.name||"";return c.indexOf("@")>=0?c:c+"@"+(b?b.state.name:"")}function x(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function y(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function z(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=x(g.uiSref,a.current.name),j=null,k=y(f)||a.$current,l="FORM"===f[0].nodeName,m=l?"action":"href",n=!0,o={relative:k,inherit:!0},p=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in p&&(o[a]=p[a])});var q=function(b){if(b&&(j=b),n){var c=a.href(i.state,j,o),d=h[1]||h[0];return d&&d.$$setStateInfo(i.state,j),null===c?(n=!1,!1):void(f[0][m]=c)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&q(a)},!0),j=e.$eval(i.paramExpr)),q(),l||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,o)});b.preventDefault(),b.preventDefault=function(){c.cancel(e)}}})}}}function A(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(d,e,f){function g(){h()?e.addClass(m):e.removeClass(m)}function h(){return"undefined"!=typeof f.uiSrefActiveEq?a.$current.self===k&&i():a.includes(k.name)&&i()}function i(){return!l||j(l,b)}var k,l,m;m=c(f.uiSrefActiveEq||f.uiSrefActive||"",!1)(d),this.$$setStateInfo=function(b,c){k=a.get(b,y(e)),l=c,g()},d.$on("$stateChangeSuccess",g)}]}}function B(a){return function(b){return a.is(b)}}function C(a){return function(b){return a.includes(b)}}var D=b.isDefined,E=b.isFunction,F=b.isString,G=b.isObject,H=b.isArray,I=b.forEach,J=b.extend,K=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),l.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",l),m.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",m),n.prototype.concat=function(a,b){return new n(this.sourcePath+a+this.sourceSearch,b)},n.prototype.toString=function(){return this.source},n.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;b=b||{};var d,e,f,g=this.parameters(),h=g.length,i=this.segments.length-1,j={};if(i!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;i>d;d++)f=g[d],e=this.params[f],j[f]=e.$value(c[d+1]);for(;h>d;d++)f=g[d],e=this.params[f],j[f]=e.$value(b[f]);return j},n.prototype.parameters=function(a){return D(a)?this.params[a]||null:g(this.params)},n.prototype.validates=function(a){var b,c,d=!0,e=this;return I(a,function(a,f){e.params[f]&&(c=e.params[f],b=!a&&D(c.value),d=d&&(b||c.type.is(a)))}),d},n.prototype.format=function(a){var b=this.segments,c=this.parameters();if(!a)return b.join("").replace("//","/");var d,e,f,g,h,i,j=b.length-1,k=c.length,l=b[0];if(!this.validates(a))return null;for(d=0;j>d;d++)g=c[d],f=a[g],h=this.params[g],(D(f)||"/"!==b[d]&&"/"!==b[d+1])&&(null!=f&&(l+=encodeURIComponent(h.type.encode(f))),l+=b[d+1]);for(;k>d;d++)g=c[d],f=a[g],null!=f&&(i=H(f),i&&(f=f.map(encodeURIComponent).join("&"+g+"=")),l+=(e?"&":"?")+g+"="+(i?f:encodeURIComponent(f)),e=!0);return l},n.prototype.$types={},o.prototype.is=function(){return!0},o.prototype.encode=function(a){return a},o.prototype.decode=function(a){return a},o.prototype.equals=function(a,b){return a==b},o.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},o.prototype.pattern=/.*/,b.module("ui.router.util").provider("$urlMatcherFactory",p),q.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",q),r.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",r),s.$inject=[],b.module("ui.router.state").provider("$view",s),b.module("ui.router.state").provider("$uiViewScroll",t),u.$inject=["$state","$injector","$uiViewScroll"],v.$inject=["$compile","$controller","$state"],b.module("ui.router.state").directive("uiView",u),b.module("ui.router.state").directive("uiView",v),z.$inject=["$state","$timeout"],A.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",z).directive("uiSrefActive",A).directive("uiSrefActiveEq",A),B.$inject=["$state"],C.$inject=["$state"],b.module("ui.router.state").filter("isState",B).filter("includedByState",C)}(window,window.angular);

},{}],9:[function(require,module,exports){
/**
 * @license Angular UI Tree v2.1.5
 * (c) 2010-2014. https://github.com/JimLiu/angular-ui-tree
 * License: MIT
 */
!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeHolderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").factory("$uiTreeHelper",["$document","$window",function($document,$window){return{nodesData:{},setNodeAttribute:function(scope,attrName,val){var data=this.nodesData[scope.$modelValue.$$hashKey];data||(data={},this.nodesData[scope.$modelValue.$$hashKey]=data),data[attrName]=val},getNodeAttribute:function(scope,attrName){var data=this.nodesData[scope.$modelValue.$$hashKey];return data?data[attrName]:null},nodrag:function(targetElm){return"undefined"!=typeof targetElm.attr("data-nodrag")},eventObj:function(e){var obj=e;return void 0!==e.targetTouches?obj=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(obj=e.originalEvent.targetTouches.item(0)),obj},dragInfo:function(node){return{source:node,sourceInfo:{nodeScope:node,index:node.index(),nodesScope:node.$parentNodesScope},index:node.index(),siblings:node.siblings().slice(0),parent:node.$parentNodesScope,moveTo:function(parent,siblings,index){this.parent=parent,this.siblings=siblings.slice(0);var i=this.siblings.indexOf(this.source);i>-1&&(this.siblings.splice(i,1),this.source.index()<index&&index--),this.siblings.splice(index,0,this.source),this.index=index},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},eventArgs:function(elements,pos){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:elements,pos:pos}},apply:function(){var nodeData=this.source.$modelValue;this.source.remove(),this.parent.insertNode(this.index,nodeData)}}},height:function(element){return element.prop("scrollHeight")},width:function(element){return element.prop("scrollWidth")},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:element.prop("offsetWidth"),height:element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].body.scrollTop||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].body.scrollLeft||$document[0].documentElement.scrollLeft)}},positionStarted:function(e,target){var pos={};return pos.offsetX=e.pageX-this.offset(target).left,pos.offsetY=e.pageY-this.offset(target).top,pos.startX=pos.lastX=e.pageX,pos.startY=pos.lastY=e.pageY,pos.nowX=pos.nowY=pos.distX=pos.distY=pos.dirAx=0,pos.dirX=pos.dirY=pos.lastDirX=pos.lastDirY=pos.distAxX=pos.distAxY=0,pos},positionMoved:function(e,pos,firstMoving){pos.lastX=pos.nowX,pos.lastY=pos.nowY,pos.nowX=e.pageX,pos.nowY=e.pageY,pos.distX=pos.nowX-pos.lastX,pos.distY=pos.nowY-pos.lastY,pos.lastDirX=pos.dirX,pos.lastDirY=pos.dirY,pos.dirX=0===pos.distX?0:pos.distX>0?1:-1,pos.dirY=0===pos.distY?0:pos.distY>0?1:-1;var newAx=Math.abs(pos.distX)>Math.abs(pos.distY)?1:0;return firstMoving?(pos.dirAx=newAx,void(pos.moving=!0)):(pos.dirAx!==newAx?(pos.distAxX=0,pos.distAxY=0):(pos.distAxX+=Math.abs(pos.distX),0!==pos.dirX&&pos.dirX!==pos.lastDirX&&(pos.distAxX=0),pos.distAxY+=Math.abs(pos.distY),0!==pos.dirY&&pos.dirY!==pos.lastDirY&&(pos.distAxY=0)),void(pos.dirAx=newAx))}}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element","$attrs","treeConfig",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$nodesScope=null,$scope.$type="uiTree",$scope.$emptyElm=null,$scope.$callbacks=null,$scope.dragEnabled=!0,$scope.emptyPlaceHolderEnabled=!0,$scope.maxDepth=0,$scope.dragDelay=0,$scope.isEmpty=function(){return $scope.$nodesScope&&$scope.$nodesScope.$modelValue&&0===$scope.$nodesScope.$modelValue.length},$scope.place=function(placeElm){$scope.$nodesScope.$element.append(placeElm),$scope.$emptyElm.remove()},$scope.resetEmptyElement=function(){0===$scope.$nodesScope.$modelValue.length&&$scope.emptyPlaceHolderEnabled?$element.append($scope.$emptyElm):$scope.$emptyElm.remove()};var collapseOrExpand=function(scope,collapsed){for(var nodes=scope.childNodes(),i=0;i<nodes.length;i++){collapsed?nodes[i].collapse():nodes[i].expand();var subScope=nodes[i].$childNodesScope;subScope&&collapseOrExpand(subScope,collapsed)}};$scope.collapseAll=function(){collapseOrExpand($scope.$nodesScope,!0)},$scope.expandAll=function(){collapseOrExpand($scope.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element","treeConfig",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$modelValue=null,$scope.$nodeScope=null,$scope.$treeScope=null,$scope.$type="uiTreeNodes",$scope.$nodesMap={},$scope.nodrop=!1,$scope.maxDepth=0,$scope.initSubNode=function(subNode){$scope.$nodesMap[subNode.$modelValue.$$hashKey]=subNode},$scope.destroySubNode=function(subNode){$scope.$nodesMap[subNode.$modelValue.$$hashKey]=null},$scope.accept=function(sourceNode,destIndex){return $scope.$treeScope.$callbacks.accept(sourceNode,$scope,destIndex)},$scope.beforeDrag=function(sourceNode){return $scope.$treeScope.$callbacks.beforeDrag(sourceNode)},$scope.isParent=function(node){return node.$parentNodesScope==$scope},$scope.hasChild=function(){return $scope.$modelValue.length>0},$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)},$scope.removeNode=function(node){var index=$scope.$modelValue.indexOf(node.$modelValue);return index>-1?($scope.safeApply(function(){$scope.$modelValue.splice(index,1)[0]}),node):null},$scope.insertNode=function(index,nodeData){$scope.safeApply(function(){$scope.$modelValue.splice(index,0,nodeData)})},$scope.childNodes=function(){var nodes=[];if($scope.$modelValue)for(var i=0;i<$scope.$modelValue.length;i++)nodes.push($scope.$nodesMap[$scope.$modelValue[i].$$hashKey]);return nodes},$scope.depth=function(){return $scope.$nodeScope?$scope.$nodeScope.depth():0},$scope.outOfDepth=function(sourceNode){var maxDepth=$scope.maxDepth||$scope.$treeScope.maxDepth;return maxDepth>0?$scope.depth()+sourceNode.maxSubDepth()+1>maxDepth:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element","$attrs","treeConfig",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$modelValue=null,$scope.$parentNodeScope=null,$scope.$childNodesScope=null,$scope.$parentNodesScope=null,$scope.$treeScope=null,$scope.$handleScope=null,$scope.$type="uiTreeNode",$scope.$$apply=!1,$scope.collapsed=!1,$scope.init=function(controllersArr){var treeNodesCtrl=controllersArr[0];$scope.$treeScope=controllersArr[1]?controllersArr[1].scope:null,$scope.$parentNodeScope=treeNodesCtrl.scope.$nodeScope,$scope.$modelValue=treeNodesCtrl.scope.$modelValue[$scope.$index],$scope.$parentNodesScope=treeNodesCtrl.scope,treeNodesCtrl.scope.initSubNode($scope),$element.on("$destroy",function(){treeNodesCtrl.scope.destroySubNode($scope)})},$scope.index=function(){return $scope.$parentNodesScope.$modelValue.indexOf($scope.$modelValue)},$scope.dragEnabled=function(){return!($scope.$treeScope&&!$scope.$treeScope.dragEnabled)},$scope.isSibling=function(targetNode){return $scope.$parentNodesScope==targetNode.$parentNodesScope},$scope.isChild=function(targetNode){var nodes=$scope.childNodes();return nodes&&nodes.indexOf(targetNode)>-1},$scope.prev=function(){var index=$scope.index();return index>0?$scope.siblings()[index-1]:null},$scope.siblings=function(){return $scope.$parentNodesScope.childNodes()},$scope.childNodesCount=function(){return $scope.childNodes()?$scope.childNodes().length:0},$scope.hasChild=function(){return $scope.childNodesCount()>0},$scope.childNodes=function(){return $scope.$childNodesScope&&$scope.$childNodesScope.$modelValue?$scope.$childNodesScope.childNodes():null},$scope.accept=function(sourceNode,destIndex){return $scope.$childNodesScope&&$scope.$childNodesScope.$modelValue&&$scope.$childNodesScope.accept(sourceNode,destIndex)},$scope.removeNode=function(){var node=$scope.remove();return $scope.$callbacks.removed(node),node},$scope.remove=function(){return $scope.$parentNodesScope.removeNode($scope)},$scope.toggle=function(){$scope.collapsed=!$scope.collapsed},$scope.collapse=function(){$scope.collapsed=!0},$scope.expand=function(){$scope.collapsed=!1},$scope.depth=function(){var parentNode=$scope.$parentNodeScope;return parentNode?parentNode.depth()+1:1};var subDepth=0,countSubDepth=function(scope){for(var count=0,nodes=scope.childNodes(),i=0;i<nodes.length;i++){var childNodes=nodes[i].$childNodesScope;childNodes&&(count=1,countSubDepth(childNodes))}subDepth+=count};$scope.maxSubDepth=function(){return subDepth=0,$scope.$childNodesScope&&countSubDepth($scope.$childNodesScope),subDepth}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element","$attrs","treeConfig",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$nodeScope=null,$scope.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(treeConfig,$window){return{restrict:"A",scope:!0,controller:"TreeController",link:function(scope,element,attrs){var callbacks={accept:null,beforeDrag:null},config={};angular.extend(config,treeConfig),config.treeClass&&element.addClass(config.treeClass),scope.$emptyElm=angular.element($window.document.createElement("div")),config.emptyTreeClass&&scope.$emptyElm.addClass(config.emptyTreeClass),scope.$watch("$nodesScope.$modelValue.length",function(){scope.$nodesScope.$modelValue&&scope.resetEmptyElement()},!0),scope.$watch(attrs.dragEnabled,function(val){"boolean"==typeof val&&(scope.dragEnabled=val)}),scope.$watch(attrs.emptyPlaceHolderEnabled,function(val){"boolean"==typeof val&&(scope.emptyPlaceHolderEnabled=val)}),scope.$watch(attrs.maxDepth,function(val){"number"==typeof val&&(scope.maxDepth=val)}),scope.$watch(attrs.dragDelay,function(val){"number"==typeof val&&(scope.dragDelay=val)}),callbacks.accept=function(sourceNodeScope,destNodesScope){return destNodesScope.nodrop||destNodesScope.outOfDepth(sourceNodeScope)?!1:!0},callbacks.beforeDrag=function(){return!0},callbacks.removed=function(){},callbacks.dropped=function(){},callbacks.dragStart=function(){},callbacks.dragMove=function(){},callbacks.dragStop=function(){},callbacks.beforeDrop=function(){},scope.$watch(attrs.uiTree,function(newVal){angular.forEach(newVal,function(value,key){callbacks[key]&&"function"==typeof value&&(callbacks[key]=value)}),scope.$callbacks=callbacks},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(treeConfig){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(scope,element,attrs,controllersArr){var config={};angular.extend(config,treeConfig),config.nodesClass&&element.addClass(config.nodesClass);var ngModel=controllersArr[0],treeNodeCtrl=controllersArr[1],treeCtrl=controllersArr[2];treeNodeCtrl?(treeNodeCtrl.scope.$childNodesScope=scope,scope.$nodeScope=treeNodeCtrl.scope):treeCtrl.scope.$nodesScope=scope,scope.$treeScope=treeCtrl.scope,ngModel&&(ngModel.$render=function(){ngModel.$modelValue&&angular.isArray(ngModel.$modelValue)||(scope.$modelValue=[]),scope.$modelValue=ngModel.$modelValue}),scope.$watch(attrs.maxDepth,function(val){"number"==typeof val&&(scope.maxDepth=val)}),attrs.$observe("nodrop",function(val){scope.nodrop="undefined"!=typeof val}),attrs.$observe("horizontal",function(val){scope.horizontal="undefined"!=typeof val})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout",function(treeConfig,$uiTreeHelper,$window,$document,$timeout){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(scope,element,attrs,controllersArr){var config={};angular.extend(config,treeConfig),config.nodeClass&&element.addClass(config.nodeClass),scope.init(controllersArr),scope.collapsed=!!$uiTreeHelper.getNodeAttribute(scope,"collapsed"),scope.$watch(attrs.collapsed,function(val){"boolean"==typeof val&&(scope.collapsed=val)}),scope.$watch("collapsed",function(val){$uiTreeHelper.setNodeAttribute(scope,"collapsed",val),attrs.$set("collapsed",val)});var firstMoving,dragInfo,pos,placeElm,hiddenPlaceElm,dragElm,elements,document_height,document_width,hasTouch="ontouchstart"in window,treeScope=null,dragDelaying=!0,dragStarted=!1,dragTimer=null,body=document.body,html=document.documentElement,dragStart=function(e){if((hasTouch||2!=e.button&&3!=e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var eventElm=angular.element(e.target),eventScope=eventElm.scope();if(eventScope&&eventScope.$type&&!("uiTreeNode"!=eventScope.$type&&"uiTreeHandle"!=eventScope.$type||"uiTreeNode"==eventScope.$type&&eventScope.$handleScope)){var eventElmTagName=eventElm.prop("tagName").toLowerCase();if("input"!=eventElmTagName&&"textarea"!=eventElmTagName&&"button"!=eventElmTagName&&"select"!=eventElmTagName){for(;eventElm&&eventElm[0]&&eventElm[0]!=element;){if($uiTreeHelper.nodrag(eventElm))return;eventElm=eventElm.parent()}if(scope.beforeDrag(scope)){e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault();var eventObj=$uiTreeHelper.eventObj(e);firstMoving=!0,dragInfo=$uiTreeHelper.dragInfo(scope);var tagName=scope.$element.prop("tagName");if("tr"===tagName.toLowerCase()){placeElm=angular.element($window.document.createElement(tagName));var tdElm=angular.element($window.document.createElement("td")).addClass(config.placeHolderClass);placeElm.append(tdElm)}else placeElm=angular.element($window.document.createElement(tagName)).addClass(config.placeHolderClass);hiddenPlaceElm=angular.element($window.document.createElement(tagName)),config.hiddenClass&&hiddenPlaceElm.addClass(config.hiddenClass),pos=$uiTreeHelper.positionStarted(eventObj,scope.$element),placeElm.css("height",$uiTreeHelper.height(scope.$element)+"px"),placeElm.css("width",$uiTreeHelper.width(scope.$element)+"px"),dragElm=angular.element($window.document.createElement(scope.$parentNodesScope.$element.prop("tagName"))).addClass(scope.$parentNodesScope.$element.attr("class")).addClass(config.dragClass),dragElm.css("width",$uiTreeHelper.width(scope.$element)+"px"),dragElm.css("z-index",9999);var hStyle=(scope.$element[0].querySelector(".angular-ui-tree-handle")||scope.$element[0]).currentStyle;hStyle&&(document.body.setAttribute("ui-tree-cursor",$document.find("body").css("cursor")||""),$document.find("body").css({cursor:hStyle.cursor+"!important"})),scope.$element.after(placeElm),scope.$element.after(hiddenPlaceElm),dragElm.append(scope.$element),$document.find("body").append(dragElm),dragElm.css({left:eventObj.pageX-pos.offsetX+"px",top:eventObj.pageY-pos.offsetY+"px"}),elements={placeholder:placeElm,dragging:dragElm},angular.element($document).bind("touchend",dragEndEvent),angular.element($document).bind("touchcancel",dragEndEvent),angular.element($document).bind("touchmove",dragMoveEvent),angular.element($document).bind("mouseup",dragEndEvent),angular.element($document).bind("mousemove",dragMoveEvent),angular.element($document).bind("mouseleave",dragCancelEvent),document_height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight),document_width=Math.max(body.scrollWidth,body.offsetWidth,html.clientWidth,html.scrollWidth,html.offsetWidth)}}}}},dragMove=function(e){if(!dragStarted)return void(dragDelaying||(dragStarted=!0,scope.$apply(function(){scope.$callbacks.dragStart(dragInfo.eventArgs(elements,pos))})));var prev,leftElmPos,topElmPos,eventObj=$uiTreeHelper.eventObj(e);if(dragElm){e.preventDefault(),$window.getSelection?$window.getSelection().removeAllRanges():$window.document.selection&&$window.document.selection.empty(),leftElmPos=eventObj.pageX-pos.offsetX,topElmPos=eventObj.pageY-pos.offsetY,0>leftElmPos&&(leftElmPos=0),0>topElmPos&&(topElmPos=0),topElmPos+10>document_height&&(topElmPos=document_height-10),leftElmPos+10>document_width&&(leftElmPos=document_width-10),dragElm.css({left:leftElmPos+"px",top:topElmPos+"px"});var top_scroll=window.pageYOffset||$window.document.documentElement.scrollTop,bottom_scroll=top_scroll+(window.innerHeight||$window.document.clientHeight||$window.document.clientHeight);if(bottom_scroll<eventObj.pageY&&document_height>=bottom_scroll&&window.scrollBy(0,10),top_scroll>eventObj.pageY&&window.scrollBy(0,-10),$uiTreeHelper.positionMoved(e,pos,firstMoving),firstMoving)return void(firstMoving=!1);if(pos.dirAx&&pos.distAxX>=config.levelThreshold&&(pos.distAxX=0,pos.distX>0&&(prev=dragInfo.prev(),prev&&!prev.collapsed&&prev.accept(scope,prev.childNodesCount())&&(prev.$childNodesScope.$element.append(placeElm),dragInfo.moveTo(prev.$childNodesScope,prev.childNodes(),prev.childNodesCount()))),pos.distX<0)){var next=dragInfo.next();if(!next){var target=dragInfo.parentNode();target&&target.$parentNodesScope.accept(scope,target.index()+1)&&(target.$element.after(placeElm),dragInfo.moveTo(target.$parentNodesScope,target.siblings(),target.index()+1))}}var displayElm,targetX=($uiTreeHelper.offset(dragElm).left-$uiTreeHelper.offset(placeElm).left>=config.threshold,eventObj.pageX-$window.document.body.scrollLeft),targetY=eventObj.pageY-(window.pageYOffset||$window.document.documentElement.scrollTop);angular.isFunction(dragElm.hide)?dragElm.hide():(displayElm=dragElm[0].style.display,dragElm[0].style.display="none"),$window.document.elementFromPoint(targetX,targetY);var targetElm=angular.element($window.document.elementFromPoint(targetX,targetY));if(angular.isFunction(dragElm.show)?dragElm.show():dragElm[0].style.display=displayElm,!pos.dirAx){var targetBefore,targetNode;targetNode=targetElm.scope();var isEmpty=!1;if(!targetNode)return;if("uiTree"==targetNode.$type&&targetNode.dragEnabled&&(isEmpty=targetNode.isEmpty()),"uiTreeHandle"==targetNode.$type&&(targetNode=targetNode.$nodeScope),"uiTreeNode"!=targetNode.$type&&!isEmpty)return;if(treeScope&&placeElm.parent()[0]!=treeScope.$element[0]&&(treeScope.resetEmptyElement(),treeScope=null),isEmpty)treeScope=targetNode,targetNode.$nodesScope.accept(scope,0)&&(targetNode.place(placeElm),dragInfo.moveTo(targetNode.$nodesScope,targetNode.$nodesScope.childNodes(),0));else if(targetNode.dragEnabled()){targetElm=targetNode.$element;var targetOffset=$uiTreeHelper.offset(targetElm);targetBefore=targetNode.horizontal?eventObj.pageX<targetOffset.left+$uiTreeHelper.width(targetElm)/2:eventObj.pageY<targetOffset.top+$uiTreeHelper.height(targetElm)/2,targetNode.$parentNodesScope.accept(scope,targetNode.index())?targetBefore?(targetElm[0].parentNode.insertBefore(placeElm[0],targetElm[0]),dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index())):(targetElm.after(placeElm),dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index()+1)):!targetBefore&&targetNode.accept(scope,targetNode.childNodesCount())&&(targetNode.$childNodesScope.$element.append(placeElm),dragInfo.moveTo(targetNode.$childNodesScope,targetNode.childNodes(),targetNode.childNodesCount()))}}scope.$apply(function(){scope.$callbacks.dragMove(dragInfo.eventArgs(elements,pos))})}},dragEnd=function(e){e.preventDefault(),dragElm&&(scope.$treeScope.$apply(function(){scope.$callbacks.beforeDrop(dragInfo.eventArgs(elements,pos))}),hiddenPlaceElm.replaceWith(scope.$element),placeElm.remove(),dragElm.remove(),dragElm=null,scope.$$apply?(dragInfo.apply(),scope.$treeScope.$apply(function(){scope.$callbacks.dropped(dragInfo.eventArgs(elements,pos))})):bindDrag(),scope.$treeScope.$apply(function(){scope.$callbacks.dragStop(dragInfo.eventArgs(elements,pos))}),scope.$$apply=!1,dragInfo=null);var oldCur=document.body.getAttribute("ui-tree-cursor");null!==oldCur&&($document.find("body").css({cursor:oldCur}),document.body.removeAttribute("ui-tree-cursor")),angular.element($document).unbind("touchend",dragEndEvent),angular.element($document).unbind("touchcancel",dragEndEvent),angular.element($document).unbind("touchmove",dragMoveEvent),angular.element($document).unbind("mouseup",dragEndEvent),angular.element($document).unbind("mousemove",dragMoveEvent),angular.element($window.document.body).unbind("mouseleave",dragCancelEvent)},dragStartEvent=function(e){scope.dragEnabled()&&dragStart(e)},dragMoveEvent=function(e){dragMove(e)},dragEndEvent=function(e){scope.$$apply=!0,dragEnd(e)},dragCancelEvent=function(e){dragEnd(e)},bindDrag=function(){element.bind("touchstart mousedown",function(e){dragDelaying=!0,dragStarted=!1,dragStartEvent(e),dragTimer=$timeout(function(){dragDelaying=!1},scope.dragDelay)}),element.bind("touchend touchcancel mouseup",function(){$timeout.cancel(dragTimer)})};bindDrag(),angular.element($window.document.body).bind("keydown",function(e){27==e.keyCode&&(scope.$$apply=!1,dragEnd(e))})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig","$window",function(treeConfig){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(scope,element,attrs,treeNodeCtrl){var config={};angular.extend(config,treeConfig),config.handleClass&&element.addClass(config.handleClass),scope!=treeNodeCtrl.scope&&(scope.$nodeScope=treeNodeCtrl.scope,treeNodeCtrl.scope.$handleScope=scope)}}}])}();
},{}],10:[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W,X,t){'use strict';function C(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.2.26/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function Pa(b){if(null==b||Ga(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:v(b)||J(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function r(b,a,c){var d;if(b)if(P(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(J(b)||Pa(b))for(d=0;d<b.length;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==r)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Zb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function Tc(b,
a,c){for(var d=Zb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function $b(b){return function(a,c){b(c,a)}}function hb(){for(var b=ma.length,a;b;){b--;a=ma[b].charCodeAt(0);if(57==a)return ma[b]="A",ma.join("");if(90==a)ma[b]="0";else return ma[b]=String.fromCharCode(a+1),ma.join("")}ma.unshift("0");return ma.join("")}function ac(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function D(b){var a=b.$$hashKey;r(arguments,function(a){a!==b&&r(a,function(a,c){b[c]=a})});ac(b,a);return b}function U(b){return parseInt(b,
10)}function bc(b,a){return D(new (D(function(){},{prototype:b})),a)}function E(){}function Qa(b){return b}function ba(b){return function(){return b}}function x(b){return"undefined"===typeof b}function y(b){return"undefined"!==typeof b}function T(b){return null!=b&&"object"===typeof b}function v(b){return"string"===typeof b}function ib(b){return"number"===typeof b}function ta(b){return"[object Date]"===za.call(b)}function P(b){return"function"===typeof b}function jb(b){return"[object RegExp]"===za.call(b)}
function Ga(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function Uc(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function Vc(b,a,c){var d=[];r(b,function(b,f,g){d.push(a.call(c,b,f,g))});return d}function Ra(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Sa(b,a){var c=Ra(b,a);0<=c&&b.splice(c,1);return a}function Ha(b,a,c,d){if(Ga(b)||b&&b.$evalAsync&&b.$watch)throw Ta("cpws");if(a){if(b===a)throw Ta("cpi");c=c||[];
d=d||[];if(T(b)){var e=Ra(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(J(b))for(var f=a.length=0;f<b.length;f++)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;J(a)?a.length=0:r(a,function(b,c){delete a[c]});for(f in b)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e;ac(a,g)}}else if(a=b)J(b)?a=Ha(b,[],c,d):ta(b)?a=new Date(b.getTime()):jb(b)?(a=RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):T(b)&&(a=Ha(b,{},c,d));
return a}function ha(b,a){if(J(b)){a=a||[];for(var c=0;c<b.length;c++)a[c]=b[c]}else if(T(b))for(c in a=a||{},b)!kb.call(b,c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(a[c]=b[c]);return a||b}function Aa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(J(b)){if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!Aa(b[d],a[d]))return!1;return!0}}else{if(ta(b))return ta(a)?isNaN(b.getTime())&&isNaN(a.getTime())||b.getTime()===
a.getTime():!1;if(jb(b)&&jb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Ga(b)||Ga(a)||J(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!P(b[d])){if(!Aa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!P(a[d]))return!1;return!0}return!1}function Bb(b,a){var c=2<arguments.length?Ba.call(arguments,2):[];return!P(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(Ba.call(arguments,
0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Wc(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)?c=t:Ga(a)?c="$WINDOW":a&&X===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function na(b,a){return"undefined"===typeof b?t:JSON.stringify(b,Wc,a?"  ":null)}function cc(b){return v(b)?JSON.parse(b):b}function Ua(b){"function"===typeof b?b=!0:b&&0!==b.length?(b=K(""+b),b=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)):b=!1;
return b}function ia(b){b=w(b).clone();try{b.empty()}catch(a){}var c=w("<div>").append(b).html();try{return 3===b[0].nodeType?K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function dc(b){try{return decodeURIComponent(b)}catch(a){}}function ec(b){var a={},c,d;r((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=dc(c[0]),y(d)&&(b=y(c[1])?dc(c[1]):!0,kb.call(a,d)?J(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Cb(b){var a=
[];r(b,function(b,d){J(b)?r(b,function(b){a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))}):a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))});return a.length?a.join("&"):""}function lb(b){return Ca(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ca(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function Xc(b,a){function c(a){a&&d.push(a)}var d=[b],e,f,g=["ng:app","ng-app","x-ng-app",
"data-ng-app"],k=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(g,function(a){g[a]=!0;c(X.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(r(b.querySelectorAll("."+a),c),r(b.querySelectorAll("."+a+"\\:"),c),r(b.querySelectorAll("["+a+"]"),c))});r(d,function(a){if(!e){var b=k.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):r(a.attributes,function(b){!e&&g[b.name]&&(e=a,f=b.value)})}});e&&a(e,f?[f]:[])}function fc(b,a){var c=function(){b=w(b);if(b.injector()){var c=b[0]===X?
"document":ia(b);throw Ta("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");c=gc(a);c.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(W&&!d.test(W.name))return c();W.name=W.name.replace(d,"");Va.resumeBootstrap=function(b){r(b,function(b){a.push(b)});c()}}function mb(b,a){a=
a||"_";return b.replace(Yc,function(b,d){return(d?a:"")+b.toLowerCase()})}function Db(b,a,c){if(!b)throw Ta("areq",a||"?",c||"required");return b}function Wa(b,a,c){c&&J(b)&&(b=b[b.length-1]);Db(P(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Da(b,a){if("hasOwnProperty"===b)throw Ta("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&P(b)?Bb(e,b):b}function Eb(b){var a=
b[0];b=b[b.length-1];if(a===b)return w(a);var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return w(c)}function Zc(b){var a=C("$injector"),c=C("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||C;return b.module||(b.module=function(){var b={};return function(e,f,g){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e){return function(){c[e||"push"]([a,d,arguments]);return n}}if(!f)throw a("nomod",
e);var c=[],d=[],l=b("$injector","invoke"),n={_invokeQueue:c,_runBlocks:d,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:l,run:function(a){d.push(a);return this}};g&&l(g);return n}())}}())}
function $c(b){D(b,{bootstrap:fc,copy:Ha,extend:D,equals:Aa,element:w,forEach:r,injector:gc,noop:E,bind:Bb,toJson:na,fromJson:cc,identity:Qa,isUndefined:x,isDefined:y,isString:v,isFunction:P,isObject:T,isNumber:ib,isElement:Uc,isArray:J,version:ad,isDate:ta,lowercase:K,uppercase:Ia,callbacks:{counter:0},$$minErr:C,$$csp:Xa});Ya=Zc(W);try{Ya("ngLocale")}catch(a){Ya("ngLocale",[]).provider("$locale",bd)}Ya("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:cd});a.provider("$compile",
ic).directive({a:dd,input:jc,textarea:jc,form:ed,script:fd,select:gd,style:hd,option:id,ngBind:jd,ngBindHtml:kd,ngBindTemplate:ld,ngClass:md,ngClassEven:nd,ngClassOdd:od,ngCloak:pd,ngController:qd,ngForm:rd,ngHide:sd,ngIf:td,ngInclude:ud,ngInit:vd,ngNonBindable:wd,ngPluralize:xd,ngRepeat:yd,ngShow:zd,ngStyle:Ad,ngSwitch:Bd,ngSwitchWhen:Cd,ngSwitchDefault:Dd,ngOptions:Ed,ngTransclude:Fd,ngModel:Gd,ngList:Hd,ngChange:Id,required:kc,ngRequired:kc,ngValue:Jd}).directive({ngInclude:Kd}).directive(Fb).directive(lc);
a.provider({$anchorScroll:Ld,$animate:Md,$browser:Nd,$cacheFactory:Od,$controller:Pd,$document:Qd,$exceptionHandler:Rd,$filter:mc,$interpolate:Sd,$interval:Td,$http:Ud,$httpBackend:Vd,$location:Wd,$log:Xd,$parse:Yd,$rootScope:Zd,$q:$d,$sce:ae,$sceDelegate:be,$sniffer:ce,$templateCache:de,$timeout:ee,$window:fe,$$rAF:ge,$$asyncCallback:he})}])}function Za(b){return b.replace(ie,function(a,b,d,e){return e?d.toUpperCase():d}).replace(je,"Moz$1")}function Gb(b,a,c,d){function e(b){var e=c&&b?[this.filter(b)]:
[this],m=a,h,l,n,p,q,s;if(!d||null!=b)for(;e.length;)for(h=e.shift(),l=0,n=h.length;l<n;l++)for(p=w(h[l]),m?p.triggerHandler("$destroy"):m=!m,q=0,p=(s=p.children()).length;q<p;q++)e.push(Ea(s[q]));return f.apply(this,arguments)}var f=Ea.fn[b],f=f.$original||f;e.$original=f;Ea.fn[b]=e}function S(b){if(b instanceof S)return b;v(b)&&(b=aa(b));if(!(this instanceof S)){if(v(b)&&"<"!=b.charAt(0))throw Hb("nosel");return new S(b)}if(v(b)){var a=b;b=X;var c;if(c=ke.exec(a))b=[b.createElement(c[1])];else{var d=
b,e;b=d.createDocumentFragment();c=[];if(Ib.test(a)){d=b.appendChild(d.createElement("div"));e=(le.exec(a)||["",""])[1].toLowerCase();e=ea[e]||ea._default;d.innerHTML="<div>&#160;</div>"+e[1]+a.replace(me,"<$1></$2>")+e[2];d.removeChild(d.firstChild);for(a=e[0];a--;)d=d.lastChild;a=0;for(e=d.childNodes.length;a<e;++a)c.push(d.childNodes[a]);d=b.firstChild;d.textContent=""}else c.push(d.createTextNode(a));b.textContent="";b.innerHTML="";b=c}Jb(this,b);w(X.createDocumentFragment()).append(this)}else Jb(this,
b)}function Kb(b){return b.cloneNode(!0)}function Ja(b){Lb(b);var a=0;for(b=b.childNodes||[];a<b.length;a++)Ja(b[a])}function nc(b,a,c,d){if(y(d))throw Hb("offargs");var e=oa(b,"events");oa(b,"handle")&&(x(a)?r(e,function(a,c){$a(b,c,a);delete e[c]}):r(a.split(" "),function(a){x(c)?($a(b,a,e[a]),delete e[a]):Sa(e[a]||[],c)}))}function Lb(b,a){var c=b.ng339,d=ab[c];d&&(a?delete ab[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),nc(b)),delete ab[c],b.ng339=t))}function oa(b,a,c){var d=
b.ng339,d=ab[d||-1];if(y(c))d||(b.ng339=d=++ne,d=ab[d]={}),d[a]=c;else return d&&d[a]}function Mb(b,a,c){var d=oa(b,"data"),e=y(c),f=!e&&y(a),g=f&&!T(a);d||g||oa(b,"data",d={});if(e)d[a]=c;else if(f){if(g)return d&&d[a];D(d,a)}else return d}function Nb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function nb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").replace(" "+aa(a)+" "," ")))})}function ob(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(a.split(" "),function(a){a=aa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",aa(c))}}function Jb(b,a){if(a){a=a.nodeName||!y(a.length)||Ga(a)?[a]:a;for(var c=0;c<a.length;c++)b.push(a[c])}}function oc(b,a){return pb(b,"$"+(a||"ngController")+"Controller")}function pb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=J(a)?a:[a];b;){for(var d=
0,e=a.length;d<e;d++)if((c=w.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function pc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ja(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function qc(b,a){var c=qb[a.toLowerCase()];return c&&rc[b.nodeName]&&c}function oe(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||X);if(x(c.defaultPrevented)){var f=
c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var g=ha(a[e||c.type]||[]);r(g,function(a){a.call(b,c)});8>=Q?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ka(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=
b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||hb)()):d=b;return c+":"+d}function bb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}r(b,this.put,this)}function sc(b){var a,c;"function"===typeof b?(a=b.$inject)||(a=[],b.length&&(c=b.toString().replace(pe,""),c=c.match(qe),r(c[1].split(re),function(b){b.replace(se,function(b,c,d){a.push(d)})})),b.$inject=a):J(b)?(c=b.length-1,Wa(b[c],"fn"),a=b.slice(0,c)):Wa(b,"fn",!0);return a}function gc(b){function a(a){return function(b,c){if(T(b))r(b,
$b(a));else return a(b,c)}}function c(a,b){Da(a,"service");if(P(b)||J(b))b=n.instantiate(b);if(!b.$get)throw cb("pget",a);return l[a+k]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[],c,d,f,k;r(a,function(a){if(!h.get(a)){h.put(a,!0);try{if(v(a))for(c=Ya(a),b=b.concat(e(c.requires)).concat(c._runBlocks),d=c._invokeQueue,f=0,k=d.length;f<k;f++){var g=d[f],m=n.get(g[0]);m[g[1]].apply(m,g[2])}else P(a)?b.push(n.invoke(a)):J(a)?b.push(n.invoke(a)):Wa(a,"module")}catch(l){throw J(a)&&(a=
a[a.length-1]),l.message&&(l.stack&&-1==l.stack.indexOf(l.message))&&(l=l.message+"\n"+l.stack),cb("modulerr",a,l.stack||l.message||l);}}});return b}function f(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===g)throw cb("cdep",d+" <- "+m.join(" <- "));return a[d]}try{return m.unshift(d),a[d]=g,a[d]=b(d)}catch(e){throw a[d]===g&&delete a[d],e;}finally{m.shift()}}function d(a,b,e){var f=[],k=sc(a),g,m,h;m=0;for(g=k.length;m<g;m++){h=k[m];if("string"!==typeof h)throw cb("itkn",h);f.push(e&&e.hasOwnProperty(h)?
e[h]:c(h))}J(a)&&(a=a[g]);return a.apply(b,f)}return{invoke:d,instantiate:function(a,b){var c=function(){},e;c.prototype=(J(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return T(e)||P(e)?e:c},get:c,annotate:sc,has:function(b){return l.hasOwnProperty(b+k)||a.hasOwnProperty(b)}}}var g={},k="Provider",m=[],h=new bb([],!0),l={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,ba(b))}),constant:a(function(a,
b){Da(a,"constant");l[a]=b;p[a]=b}),decorator:function(a,b){var c=n.get(a+k),d=c.$get;c.$get=function(){var a=q.invoke(d,c);return q.invoke(b,null,{$delegate:a})}}}},n=l.$injector=f(l,function(){throw cb("unpr",m.join(" <- "));}),p={},q=p.$injector=f(p,function(a){a=n.get(a+k);return q.invoke(a.$get,a)});r(e(b),function(a){q.invoke(a||E)});return q}function Ld(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;
r(a,function(a){b||"a"!==K(a.nodeName)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=g.getElementById(b))?d.scrollIntoView():(d=e(g.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var g=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function he(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function te(b,a,c,d){function e(a){try{a.apply(null,
Ba.call(arguments,1))}finally{if(s--,0===s)for(;F.length;)try{F.pop()()}catch(b){c.error(b)}}}function f(a,b){(function fa(){r(u,function(a){a()});A=b(fa,a)})()}function g(){z=null;N!=k.url()&&(N=k.url(),r(ca,function(a){a(k.url())}))}var k=this,m=a[0],h=b.location,l=b.history,n=b.setTimeout,p=b.clearTimeout,q={};k.isMock=!1;var s=0,F=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){s++};k.notifyWhenNoOutstandingRequests=function(a){r(u,function(a){a()});0===s?a():F.push(a)};
var u=[],A;k.addPollFn=function(a){x(A)&&f(100,n);u.push(a);return a};var N=h.href,R=a.find("base"),z=null;k.url=function(a,c){h!==b.location&&(h=b.location);l!==b.history&&(l=b.history);if(a){if(N!=a)return N=a,d.history?c?l.replaceState(null,"",a):(l.pushState(null,"",a),R.attr("href",R.attr("href"))):(z=a,c?h.replace(a):h.href=a),k}else return z||h.href.replace(/%27/g,"'")};var ca=[],L=!1;k.onUrlChange=function(a){if(!L){if(d.history)w(b).on("popstate",g);if(d.hashchange)w(b).on("hashchange",g);
else k.addPollFn(g);L=!0}ca.push(a);return a};k.$$checkUrlChange=g;k.baseHref=function(){var a=R.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},da="",B=k.baseHref();k.cookies=function(a,b){var d,e,f,k;if(a)b===t?m.cookie=escape(a)+"=;path="+B+";expires=Thu, 01 Jan 1970 00:00:00 GMT":v(b)&&(d=(m.cookie=escape(a)+"="+escape(b)+";path="+B).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(m.cookie!==
da)for(da=m.cookie,d=da.split("; "),O={},f=0;f<d.length;f++)e=d[f],k=e.indexOf("="),0<k&&(a=unescape(e.substring(0,k)),O[a]===t&&(O[a]=unescape(e.substring(k+1))));return O}};k.defer=function(a,b){var c;s++;c=n(function(){delete q[c];e(a)},b||0);q[c]=!0;return c};k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),e(E),!0):!1}}function Nd(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new te(b,d,a,c)}]}function Od(){this.$get=function(){function b(b,d){function e(a){a!=
n&&(p?p==a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw C("$cacheFactory")("iid",b);var g=0,k=D({},d,{id:b}),m={},h=d&&d.capacity||Number.MAX_VALUE,l={},n=null,p=null;return a[b]={put:function(a,b){if(h<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}if(!x(b))return a in m||g++,m[a]=b,g>h&&this.remove(p.key),b},get:function(a){if(h<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return m[a]},remove:function(a){if(h<Number.MAX_VALUE){var b=
l[a];if(!b)return;b==n&&(n=b.p);b==p&&(p=b.n);f(b.n,b.p);delete l[a]}delete m[a];g--},removeAll:function(){m={};g=0;l={};n=p=null},destroy:function(){l=k=m=null;delete a[b]},info:function(){return D({},k,{size:g})}}}var a={};b.info=function(){var b={};r(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function de(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
g=/^(on[a-z]+|formaction)$/;this.directive=function m(a,e){Da(a,"directive");v(a)?(Db(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];r(c[a],function(c,f){try{var g=b.invoke(c);P(g)?g={compile:ba(g)}:!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(m){d(m)}});return e}])),c[a].push(e)):r(a,$b(m));
return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,l,n,p,q,s,F,u,A,N,R){function z(a,b,c,d,e){a instanceof
w||(a=w(a));r(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});var f=L(a,b,a,c,d,e);ca(a,"ng-scope");return function(b,c,d,e){Db(b,"scope");var g=c?La.clone.call(a):a;r(d,function(a,b){g.data("$"+b+"Controller",a)});d=0;for(var m=g.length;d<m;d++){var h=g[d].nodeType;1!==h&&9!==h||g.eq(d).data("$scope",b)}c&&c(g,b);f&&f(b,g,g,e);return g}}function ca(a,b){try{a.addClass(b)}catch(c){}}function L(a,b,c,d,e,f){function g(a,c,d,e){var f,h,l,q,n,
p,s;f=c.length;var M=Array(f);for(q=0;q<f;q++)M[q]=c[q];p=q=0;for(n=m.length;q<n;p++)h=M[p],c=m[q++],f=m[q++],c?(c.scope?(l=a.$new(),w.data(h,"$scope",l)):l=a,s=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?O(a,b):null,c(f,l,h,d,s)):f&&f(a,h.childNodes,t,e)}for(var m=[],h,l,q,n,p=0;p<a.length;p++)h=new Ob,l=da(a[p],[],h,0===p?d:t,e),(f=l.length?H(l,a[p],h,b,c,null,[],[],f):null)&&f.scope&&ca(h.$$element,"ng-scope"),h=f&&f.terminal||!(q=a[p].childNodes)||!q.length?
null:L(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),m.push(f,h),n=n||f||h,f=null;return n?g:null}function O(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function da(a,b,c,d,g){var m=c.$attr,h;switch(a.nodeType){case 1:fa(b,pa(Ma(a).toLowerCase()),"E",d,g);for(var l,q,n,p=a.attributes,s=0,F=p&&p.length;s<F;s++){var A=!1,N=!1;l=p[s];if(!Q||8<=Q||l.specified){h=l.name;q=
aa(l.value);l=pa(h);if(n=U.test(l))h=mb(l.substr(6),"-");var u=l.replace(/(Start|End)$/,"");l===u+"Start"&&(A=h,N=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6));l=pa(h.toLowerCase());m[l]=h;if(n||!c.hasOwnProperty(l))c[l]=q,qc(a,l)&&(c[l]=!0);S(a,b,q,l);fa(b,l,"A",d,g,A,N)}}a=a.className;if(v(a)&&""!==a)for(;h=f.exec(a);)l=pa(h[2]),fa(b,l,"C",d,g)&&(c[l]=aa(h[3])),a=a.substr(h.index+h[0].length);break;case 3:K(b,a.nodeValue);break;case 8:try{if(h=e.exec(a.nodeValue))l=pa(h[1]),fa(b,l,"M",
d,g)&&(c[l]=aa(h[2]))}catch(z){}}b.sort(x);return b}function B(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return w(d)}function I(a,b,c){return function(d,e,f,g,h){e=B(e[0],b,c);return a(d,e,f,g,h)}}function H(a,c,d,e,f,g,m,n,p){function F(a,b,c,d){if(a){c&&(a=I(a,c,d));a.require=G.require;a.directiveName=C;if(L===G||G.$$isolateScope)a=
tc(a,{isolateScope:!0});m.push(a)}if(b){c&&(b=I(b,c,d));b.require=G.require;b.directiveName=C;if(L===G||G.$$isolateScope)b=tc(b,{isolateScope:!0});n.push(b)}}function A(a,b,c,d){var e,f="data",g=!1;if(v(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);}else J(b)&&(e=[],r(b,function(b){e.push(A(a,b,c,d))}));return e}function N(a,e,f,g,p){function F(a,b){var c;2>arguments.length&&
(b=a,a=t);K&&(c=da);return p(a,b,c)}var u,M,z,O,I,B,da={},rb;u=c===f?d:ha(d,new Ob(w(f),d.$attr));M=u.$$element;if(L){var Na=/^\s*([@=&])(\??)\s*(\w*)\s*$/;B=e.$new(!0);!H||H!==L&&H!==L.$$originalDirective?M.data("$isolateScopeNoTemplate",B):M.data("$isolateScope",B);ca(M,"ng-isolate-scope");r(L.scope,function(a,c){var d=a.match(Na)||[],f=d[3]||c,g="?"==d[2],d=d[1],m,l,n,p;B.$$isolateBindings[c]=d+f;switch(d){case "@":u.$observe(f,function(a){B[c]=a});u.$$observers[f].$$scope=e;u[f]&&(B[c]=b(u[f])(e));
break;case "=":if(g&&!u[f])break;l=q(u[f]);p=l.literal?Aa:function(a,b){return a===b||a!==a&&b!==b};n=l.assign||function(){m=B[c]=l(e);throw ja("nonassign",u[f],L.name);};m=B[c]=l(e);B.$watch(function(){var a=l(e);p(a,B[c])||(p(a,m)?n(e,a=B[c]):B[c]=a);return m=a},null,l.literal);break;case "&":l=q(u[f]);B[c]=function(a){return l(e,a)};break;default:throw ja("iscp",L.name,c,a);}})}rb=p&&F;R&&r(R,function(a){var b={$scope:a===L||a.$$isolateScope?B:e,$element:M,$attrs:u,$transclude:rb},c;I=a.controller;
"@"==I&&(I=u[a.name]);c=s(I,b);da[a.name]=c;K||M.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(z=m.length;g<z;g++)try{O=m[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(G){l(G,ia(M))}g=e;L&&(L.template||null===L.templateUrl)&&(g=B);a&&a(g,f.childNodes,t,p);for(g=n.length-1;0<=g;g--)try{O=n[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(y){l(y,ia(M))}}p=p||{};for(var u=-Number.MAX_VALUE,
O,R=p.controllerDirectives,L=p.newIsolateScopeDirective,H=p.templateDirective,fa=p.nonTlbTranscludeDirective,x=!1,D=!1,K=p.hasElementTranscludeDirective,Z=d.$$element=w(c),G,C,V,S=e,Q,Fa=0,qa=a.length;Fa<qa;Fa++){G=a[Fa];var U=G.$$start,Y=G.$$end;U&&(Z=B(c,U,Y));V=t;if(u>G.priority)break;if(V=G.scope)O=O||G,G.templateUrl||(db("new/isolated scope",L,G,Z),T(V)&&(L=G));C=G.name;!G.templateUrl&&G.controller&&(V=G.controller,R=R||{},db("'"+C+"' controller",R[C],G,Z),R[C]=G);if(V=G.transclude)x=!0,G.$$tlb||
(db("transclusion",fa,G,Z),fa=G),"element"==V?(K=!0,u=G.priority,V=Z,Z=d.$$element=w(X.createComment(" "+C+": "+d[C]+" ")),c=Z[0],Na(f,Ba.call(V,0),c),S=z(V,e,u,g&&g.name,{nonTlbTranscludeDirective:fa})):(V=w(Kb(c)).contents(),Z.empty(),S=z(V,e));if(G.template)if(D=!0,db("template",H,G,Z),H=G,V=P(G.template)?G.template(Z,d):G.template,V=W(V),G.replace){g=G;V=Ib.test(V)?w(aa(V)):[];c=V[0];if(1!=V.length||1!==c.nodeType)throw ja("tplrt",C,"");Na(f,Z,c);qa={$attr:{}};V=da(c,[],qa);var $=a.splice(Fa+
1,a.length-(Fa+1));L&&y(V);a=a.concat(V).concat($);E(d,qa);qa=a.length}else Z.html(V);if(G.templateUrl)D=!0,db("template",H,G,Z),H=G,G.replace&&(g=G),N=ue(a.splice(Fa,a.length-Fa),Z,d,f,x&&S,m,n,{controllerDirectives:R,newIsolateScopeDirective:L,templateDirective:H,nonTlbTranscludeDirective:fa}),qa=a.length;else if(G.compile)try{Q=G.compile(Z,d,S),P(Q)?F(null,Q,U,Y):Q&&F(Q.pre,Q.post,U,Y)}catch(ve){l(ve,ia(Z))}G.terminal&&(N.terminal=!0,u=Math.max(u,G.priority))}N.scope=O&&!0===O.scope;N.transcludeOnThisElement=
x;N.templateOnThisElement=D;N.transclude=S;p.hasElementTranscludeDirective=K;return N}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=bc(a[b],{$$isolateScope:!0})}function fa(b,e,f,g,h,q,n){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var p;e=a.get(e+d);for(var s=0,u=e.length;s<u;s++)try{p=e[s],(g===t||g>p.priority)&&-1!=p.restrict.indexOf(f)&&(q&&(p=bc(p,{$$start:q,$$end:n})),b.push(p),h=p)}catch(F){l(F)}}return h}function E(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=
e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,f){"class"==f?(ca(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function ue(a,b,c,d,e,f,g,h){var m=[],l,q,s=b[0],u=a.shift(),F=D({},u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),N=P(u.templateUrl)?u.templateUrl(b,c):u.templateUrl;
b.empty();n.get(A.getTrustedResourceUrl(N),{cache:p}).success(function(n){var p,A;n=W(n);if(u.replace){n=Ib.test(n)?w(aa(n)):[];p=n[0];if(1!=n.length||1!==p.nodeType)throw ja("tplrt",u.name,N);n={$attr:{}};Na(d,b,p);var z=da(p,[],n);T(u.scope)&&y(z);a=z.concat(a);E(c,n)}else p=s,b.html(n);a.unshift(F);l=H(a,p,c,e,b,u,f,g,h);r(d,function(a,c){a==p&&(d[c]=b[0])});for(q=L(b[0].childNodes,e);m.length;){n=m.shift();A=m.shift();var R=m.shift(),I=m.shift(),z=b[0];if(A!==s){var B=A.className;h.hasElementTranscludeDirective&&
u.replace||(z=Kb(p));Na(R,w(A),z);ca(w(z),B)}A=l.transcludeOnThisElement?O(n,l.transclude,I):I;l(q,n,z,d,A)}m=null}).error(function(a,b,c,d){throw ja("tpload",d.url);});return function(a,b,c,d,e){a=e;m?(m.push(b),m.push(c),m.push(d),m.push(a)):(l.transcludeOnThisElement&&(a=O(b,l.transclude,e)),l(q,b,c,d,a))}}function x(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function db(a,b,c,d){if(b)throw ja("multidir",b.name,c.name,a,ia(d));}function K(a,
c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&ca(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||[];f.push(d);e.data("$binding",f);b||ca(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function C(a,b){if("srcdoc"==b)return A.HTML;var c=Ma(a);if("xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b))return A.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"SELECT"===
Ma(a))throw ja("selmulti",ia(a));c.push({priority:100,compile:function(){return{pre:function(c,d,m){d=m.$$observers||(m.$$observers={});if(g.test(e))throw ja("nodomevents");if(f=b(m[e],!0,C(a,e)))m[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(m.$$observers&&m.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?m.$updateClass(a,b):m.$set(e,a)})}}}})}}function Na(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,m;if(a)for(g=0,m=a.length;g<m;g++)if(a[g]==d){a[g++]=c;m=g+e-1;for(var h=a.length;g<
h;g++,m++)m<h?a[g]=a[m]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=X.createDocumentFragment();a.appendChild(d);c[w.expando]=d[w.expando];d=1;for(e=b.length;d<e;d++)f=b[d],w(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function tc(a,b){return D(function(){return a.apply(null,arguments)},a,b)}var Ob=function(a,b){this.$$element=a;this.$attr=b||{}};Ob.prototype={$normalize:pa,$addClass:function(a){a&&0<a.length&&N.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&N.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=uc(a,b),d=uc(b,a);0===c.length?N.removeClass(this.$$element,d):0===d.length?N.addClass(this.$$element,c):N.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=qc(this.$$element[0],a);e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=mb(a,"-"));e=Ma(this.$$element);if("A"===e&&"href"===a||"IMG"===e&&"src"===a)this[a]=b=R(b,"src"===a);!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):
this.$$element.attr(d,b));(c=this.$$observers)&&r(c[a],function(a){try{a(b)}catch(c){l(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);F.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var qa=b.startSymbol(),Z=b.endSymbol(),W="{{"==qa||"}}"==Z?Qa:function(a){return a.replace(/\{\{/g,qa).replace(/}}/g,Z)},U=/^ngAttr[A-Z]/;return z}]}function pa(b){return Za(b.replace(we,""))}function uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=
0;a:for(;f<d.length;f++){for(var g=d[f],k=0;k<e.length;k++)if(g==e[k])continue a;c+=(0<c.length?" ":"")+g}return c}function Pd(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){Da(a,"controller");T(a)?D(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,f){var g,k,m;v(e)&&(g=e.match(a),k=g[1],m=g[3],e=b.hasOwnProperty(k)?b[k]:hc(f.$scope,k,!0)||hc(d,k,!0),Wa(e,k,!0));g=c.instantiate(e,f);if(m){if(!f||"object"!==typeof f.$scope)throw C("$controller")("noscp",
k||e.name,m);f.$scope[m]=g}return g}}]}function Qd(){this.$get=["$window",function(b){return w(b.document)}]}function Rd(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function vc(b){var a={},c,d,e;if(!b)return a;r(b.split("\n"),function(b){e=b.indexOf(":");c=K(aa(b.substr(0,e)));d=aa(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function wc(b){var a=T(b)?b:t;return function(c){a||(a=vc(b));return c?a[K(c)]||null:a}}function xc(b,a,c){if(P(c))return c(b,
a);r(c,function(c){b=c(b,a)});return b}function Ud(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){v(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=cc(d)));return d}],transformRequest:[function(a){return T(a)&&"[object File]"!==za.call(a)&&"[object Blob]"!==za.call(a)?na(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ha(d),put:ha(d),patch:ha(d)},xsrfCookieName:"XSRF-TOKEN",
xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[],g=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,n,p){function q(a){function b(a){var d=D({},a,{data:xc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:n.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=D({},a.headers),d,f,b=D({},b.common,b[K(a.method)]);
a:for(d in b){a=K(d);for(f in c)if(K(f)===a)continue a;c[d]=b[d]}(function(a){var b;r(a,function(c,d){P(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);D(c,a);c.headers=d;c.method=Ia(c.method);var f=[function(a){d=a.headers;var c=xc(a.data,wc(d),a.transformRequest);x(c)&&r(d,function(a,b){"content-type"===K(b)&&delete d[b]});x(a.withCredentials)&&!x(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=n.when(c);for(r(A,function(a){(a.request||a.requestError)&&
f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var m=f.shift(),g=g.then(a,m)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,g){function h(a,b,c,e){I&&(200<=a&&300>a?I.put(w,[a,b,vc(c),e]):I.remove(w));p(b,a,c,e);d.$$phase||d.$apply()}function p(a,b,d,e){b=Math.max(b,0);(200<=
b&&300>b?A.resolve:A.reject)({data:a,status:b,headers:wc(d),config:c,statusText:e})}function s(){var a=Ra(q.pendingRequests,c);-1!==a&&q.pendingRequests.splice(a,1)}var A=n.defer(),r=A.promise,I,H,w=F(c.url,c.params);q.pendingRequests.push(c);r.then(s,s);!c.cache&&!e.cache||(!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method)||(I=T(c.cache)?c.cache:T(e.cache)?e.cache:u);if(I)if(H=I.get(w),y(H)){if(H&&P(H.then))return H.then(s,s),H;J(H)?p(H[1],H[0],ha(H[2]),H[3]):p(H,200,{},"OK")}else I.put(w,r);x(H)&&
((H=Pb(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(g[c.xsrfHeaderName||e.xsrfHeaderName]=H),a(c.method,w,f,h,g,c.timeout,c.withCredentials,c.responseType));return r}function F(a,b){if(!b)return a;var c=[];Tc(b,function(a,b){null===a||x(a)||(J(a)||(a=[a]),r(a,function(a){T(a)&&(a=ta(a)?a.toISOString():na(a));c.push(Ca(b)+"="+Ca(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var u=c("$http"),A=[];r(f,function(a){A.unshift(v(a)?p.get(a):p.invoke(a))});r(g,
function(a,b){var c=v(a)?p.get(a):p.invoke(a);A.splice(b,0,{response:function(a){return c(n.when(a))},responseError:function(a){return c(n.reject(a))}})});q.pendingRequests=[];(function(a){r(arguments,function(a){q[a]=function(b,c){return q(D(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){q[a]=function(b,c,d){return q(D(d||{},{method:a,url:b,data:c}))}})})("post","put");q.defaults=e;return q}]}function xe(b){if(8>=Q&&(!b.match(/^(get|post|head|put|delete|options)$/i)||
!W.XMLHttpRequest))return new W.ActiveXObject("Microsoft.XMLHTTP");if(W.XMLHttpRequest)return new W.XMLHttpRequest;throw C("$httpBackend")("noxhr");}function Vd(){this.$get=["$browser","$window","$document",function(b,a,c){return ye(b,xe,b.defer,a.angular.callbacks,c[0])}]}function ye(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),g=null;f.type="text/javascript";f.src=a;f.async=!0;g=function(a){$a(f,"load",g);$a(f,"error",g);e.body.removeChild(f);f=null;var k=-1,s="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),s=a.type,k="error"===a.type?404:200);c&&c(k,s)};sb(f,"load",g);sb(f,"error",g);8>=Q&&(f.onreadystatechange=function(){v(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))});e.body.appendChild(f);return g}var g=-1;return function(e,m,h,l,n,p,q,s){function F(){A=g;R&&R();z&&z.abort()}function u(a,d,e,f,g){L&&c.cancel(L);R=z=null;0===d&&(d=e?200:"file"==ua(m).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(E)}
var A;b.$$incOutstandingRequestCount();m=m||b.url();if("jsonp"==K(e)){var N="_"+(d.counter++).toString(36);d[N]=function(a){d[N].data=a;d[N].called=!0};var R=f(m.replace("JSON_CALLBACK","angular.callbacks."+N),N,function(a,b){u(l,a,d[N].data,"",b);d[N]=E})}else{var z=a(e);z.open(e,m,!0);r(n,function(a,b){y(a)&&z.setRequestHeader(b,a)});z.onreadystatechange=function(){if(z&&4==z.readyState){var a=null,b=null,c="";A!==g&&(a=z.getAllResponseHeaders(),b="response"in z?z.response:z.responseText);A===g&&
10>Q||(c=z.statusText);u(l,A||z.status,b,a,c)}};q&&(z.withCredentials=!0);if(s)try{z.responseType=s}catch(ca){if("json"!==s)throw ca;}z.send(h||null)}if(0<p)var L=c(F,p);else p&&P(p.then)&&p.then(F)}}function Sd(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,h,l){for(var n,p,q=0,s=[],F=f.length,u=!1,A=[];q<F;)-1!=(n=f.indexOf(b,q))&&-1!=(p=f.indexOf(a,
n+g))?(q!=n&&s.push(f.substring(q,n)),s.push(q=c(u=f.substring(n+g,p))),q.exp=u,q=p+k,u=!0):(q!=F&&s.push(f.substring(q)),q=F);(F=s.length)||(s.push(""),F=1);if(l&&1<s.length)throw yc("noconcat",f);if(!h||u)return A.length=F,q=function(a){try{for(var b=0,c=F,g;b<c;b++){if("function"==typeof(g=s[b]))if(g=g(a),g=l?e.getTrusted(l,g):e.valueOf(g),null==g)g="";else switch(typeof g){case "string":break;case "number":g=""+g;break;default:g=na(g)}A[b]=g}return A.join("")}catch(k){a=yc("interr",f,k.toString()),
d(a)}},q.exp=f,q.parts=s,q}var g=b.length,k=a.length;f.startSymbol=function(){return b};f.endSymbol=function(){return a};return f}]}function Td(){this.$get=["$rootScope","$window","$q",function(b,a,c){function d(d,g,k,m){var h=a.setInterval,l=a.clearInterval,n=c.defer(),p=n.promise,q=0,s=y(m)&&!m;k=y(k)?k:0;p.then(null,null,d);p.$$intervalId=h(function(){n.notify(q++);0<k&&q>=k&&(n.resolve(q),l(p.$$intervalId),delete e[p.$$intervalId]);s||b.$apply()},g);e[p.$$intervalId]=n;return p}var e={};d.cancel=
function(b){return b&&b.$$intervalId in e?(e[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete e[b.$$intervalId],!0):!1};return d}]}function bd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),
SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=
lb(b[a]);return b.join("/")}function zc(b,a,c){b=ua(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||ze[b.protocol]||null}function Ac(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=ua(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=ec(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ra(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function eb(b){var a=
b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,eb(b).lastIndexOf("/")+1)}function Bc(b,a){this.$$html5=!0;a=a||"";var c=Rb(b);zc(b,this,b);this.$$parse=function(a){var e=ra(c,a);if(!v(e))throw Sb("ipthprfx",a,c);Ac(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Cb(this.$$search),b=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;
if((e=ra(b,d))!==t)return d=e,(e=ra(a,e))!==t?c+(ra("/",e)||e):b+d;if((e=ra(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=Rb(b);zc(b,this,b);this.$$parse=function(d){var e=ra(b,d)||ra(c,d),e="#"==e.charAt(0)?ra(a,e):this.$$html5?e:"";if(!v(e))throw Sb("ihshprfx",d,a);Ac(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?
"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(eb(b)==eb(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==eb(d))return d;if(e=ra(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}
function Cc(b,a){return function(c){if(x(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Wd(){var b="",a=!1;this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return y(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a){c.$broadcast("$locationChangeSuccess",k.absUrl(),a)}var k,m,h=d.baseHref(),l=d.url(),n;a?(n=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(h||"/"),m=e.history?Bc:Ub):(n=
eb(l),m=Tb);k=new m(n,"#"+b);k.$$parse(k.$$rewrite(l));var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=w(a.target);"a"!==K(e[0].nodeName);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href");T(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=ua(g.animVal).href);if(!p.test(g)){if(m===Ub){var h=e.attr("href")||e.attr("xlink:href");if(h&&0>h.indexOf("://"))if(g="#"+b,"/"==h[0])g=n+g+h;else if("#"==h[0])g=n+g+(k.path()||"/")+h;
else{var l=k.path().split("/"),h=h.split("/");2!==l.length||l[1]||(l.length=1);for(var q=0;q<h.length;q++)"."!=h[q]&&(".."==h[q]?l.pop():h[q].length&&l.push(h[q]));g=n+g+l.join("/")}}l=k.$$rewrite(g);g&&(!e.attr("target")&&l&&!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(k.$$parse(l),c.$apply(),W.angular["ff-684208-preventDefault"]=!0))}}});k.absUrl()!=l&&d.url(k.absUrl(),!0);d.onUrlChange(function(a){k.absUrl()!=a&&(c.$evalAsync(function(){var b=k.absUrl();k.$$parse(a);c.$broadcast("$locationChangeStart",
a,b).defaultPrevented?(k.$$parse(b),d.url(b)):g(b)}),c.$$phase||c.$digest())});var q=0;c.$watch(function(){var a=d.url(),b=k.$$replace;q&&a==k.absUrl()||(q++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",k.absUrl(),a).defaultPrevented?k.$$parse(a):(d.url(k.absUrl(),b),g(a))}));k.$$replace=!1;return q});return k}]}function Xd(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&
-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||E;a=!1;try{a=!!e.apply}catch(m){}return a?function(){var a=[];r(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ka(b,
a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function va(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.document&&b.location&&b.alert&&b.setInterval)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function ub(b,a,c,d,e){va(b,d);e=e||{};a=a.split(".");for(var f,g=0;1<a.length;g++){f=ka(a.shift(),
d);var k=va(b[f],d);k||(k={},b[f]=k);b=k;b.then&&e.unwrapPromises&&(wa(d),"$$v"in b||function(a){a.then(function(b){a.$$v=b})}(b),b.$$v===t&&(b.$$v={}),b=b.$$v)}f=ka(a.shift(),d);va(b[f],d);return b[f]=c}function Dc(b,a,c,d,e,f,g){ka(b,f);ka(a,f);ka(c,f);ka(d,f);ka(e,f);return g.unwrapPromises?function(g,m){var h=m&&m.hasOwnProperty(b)?m:g,l;if(null==h)return h;(h=h[b])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!a)return h;if(null==h)return t;(h=h[a])&&h.then&&
(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!c)return h;if(null==h)return t;(h=h[c])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!d)return h;if(null==h)return t;(h=h[d])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!e)return h;if(null==h)return t;(h=h[e])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);return h}:function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==
h)return h;h=h[b];if(!a)return h;if(null==h)return t;h=h[a];if(!c)return h;if(null==h)return t;h=h[c];if(!d)return h;if(null==h)return t;h=h[d];return e?null==h?t:h=h[e]:h}}function Ec(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length,f;if(a.csp)f=6>e?Dc(d[0],d[1],d[2],d[3],d[4],c,a):function(b,f){var g=0,k;do k=Dc(d[g++],d[g++],d[g++],d[g++],d[g++],c,a)(b,f),f=t,b=k;while(g<e);return k};else{var g="var p;\n";r(d,function(b,d){ka(b,c);g+="if(s == null) return undefined;\ns="+
(d?"s":'((k&&k.hasOwnProperty("'+b+'"))?k:s)')+'["'+b+'"];\n'+(a.unwrapPromises?'if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var g=g+"return s;",k=new Function("s","k","pw",g);k.toString=ba(g);f=a.unwrapPromises?function(a,b){return k(a,b,wa)}:k}"hasOwnProperty"!==b&&(Vb[b]=f);return f}function Yd(){var b={},a={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=
function(b){return y(b)?(a.unwrapPromises=!!b,this):a.unwrapPromises};this.logPromiseWarnings=function(b){return y(b)?(a.logPromiseWarnings=b,this):a.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(c,d,e){a.csp=d.csp;wa=function(b){a.logPromiseWarnings&&!Fc.hasOwnProperty(b)&&(Fc[b]=!0,e.warn("[$parse] Promise found in the expression `"+b+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(d){var e;switch(typeof d){case "string":if(b.hasOwnProperty(d))return b[d];
e=new Wb(a);e=(new fb(e,c,a)).parse(d);"hasOwnProperty"!==d&&(b[d]=e);return e;case "function":return d;default:return E}}}]}function $d(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Ae(function(a){b.$evalAsync(a)},a)}]}function Ae(b,a){function c(a){return a}function d(a){return g(a)}var e=function(){var g=[],h,l;return l={resolve:function(a){if(g){var c=g;g=t;h=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1],a[2])})}},reject:function(a){l.resolve(k(a))},
notify:function(a){if(g){var c=g;g.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,k){var l=e(),F=function(d){try{l.resolve((P(b)?b:c)(d))}catch(e){l.reject(e),a(e)}},u=function(b){try{l.resolve((P(f)?f:d)(b))}catch(c){l.reject(c),a(c)}},A=function(b){try{l.notify((P(k)?k:c)(b))}catch(d){a(d)}};g?g.push([F,u,A]):h.then(F,u,A);return l.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):
d.reject(a);return d.promise}function d(e,f){var g=null;try{g=(a||c)()}catch(k){return b(k,!1)}return g&&P(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&P(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},g=function(a){var b=e();b.reject(a);return b.promise},k=function(c){return{then:function(f,g){var k=e();b(function(){try{k.resolve((P(g)?
g:d)(c))}catch(b){k.reject(b),a(b)}});return k.promise}}};return{defer:e,reject:g,when:function(k,h,l,n){var p=e(),q,s=function(b){try{return(P(h)?h:c)(b)}catch(d){return a(d),g(d)}},F=function(b){try{return(P(l)?l:d)(b)}catch(c){return a(c),g(c)}},u=function(b){try{return(P(n)?n:c)(b)}catch(d){a(d)}};b(function(){f(k).then(function(a){q||(q=!0,p.resolve(f(a).then(s,F,u)))},function(a){q||(q=!0,p.resolve(F(a)))},function(a){q||p.notify(u(a))})});return p.promise},all:function(a){var b=e(),c=0,d=J(a)?
[]:{};r(a,function(a,e){c++;f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function ge(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:
function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Zd(){var b=10,a=C("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,g){function k(){this.$id=hb();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=
[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function m(b){if(p.$$phase)throw a("inprog",p.$$phase);p.$$phase=b}function h(a,b){var c=f(a);Wa(c,b);return c}function l(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}k.prototype={constructor:k,$new:function(a){a?(a=new k,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=hb();this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d){var e=h(a,"watch"),f=this.$$watchers,g={fn:b,last:n,get:e,exp:a,
eq:!!d};c=null;if(!P(b)){var k=h(b||E,"listener");g.fn=function(a,b,c){k(c)}}if("string"==typeof a&&e.constant){var l=g.fn;g.fn=function(a,b,c){l.call(this,a,b,c);Sa(f,g)}}f||(f=this.$$watchers=[]);f.unshift(g);return function(){Sa(f,g);c=null}},$watchCollection:function(a,b){var c=this,d,e,g,k=1<b.length,h=0,l=f(a),m=[],p={},n=!0,r=0;return this.$watch(function(){d=l(c);var a,b,f;if(T(d))if(Pa(d))for(e!==m&&(e=m,r=e.length=0,h++),a=d.length,r!==a&&(h++,e.length=r=a),b=0;b<a;b++)f=e[b]!==e[b]&&d[b]!==
d[b],f||e[b]===d[b]||(h++,e[b]=d[b]);else{e!==p&&(e=p={},r=0,h++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(f=e[b]!==e[b]&&d[b]!==d[b],f||e[b]===d[b]||(h++,e[b]=d[b])):(r++,e[b]=d[b],h++));if(r>a)for(b in h++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(r--,delete e[b])}else e!==d&&(e=d,h++);return h},function(){n?(n=!1,b(d,d,c)):b(d,g,c);if(k)if(T(d))if(Pa(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)kb.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,
f,k,h,l=this.$$asyncQueue,r=this.$$postDigestQueue,R,z,t=b,L,O=[],w,B,I;m("$digest");g.$$checkUrlChange();c=null;do{z=!1;for(L=this;l.length;){try{I=l.shift(),I.scope.$eval(I.expression)}catch(H){p.$$phase=null,e(H)}c=null}a:do{if(h=L.$$watchers)for(R=h.length;R--;)try{if(d=h[R])if((f=d.get(L))!==(k=d.last)&&!(d.eq?Aa(f,k):"number"===typeof f&&"number"===typeof k&&isNaN(f)&&isNaN(k)))z=!0,c=d,d.last=d.eq?Ha(f,null):f,d.fn(f,k===n?f:k,L),5>t&&(w=4-t,O[w]||(O[w]=[]),B=P(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):
d.exp,B+="; newVal: "+na(f)+"; oldVal: "+na(k),O[w].push(B));else if(d===c){z=!1;break a}}catch(y){p.$$phase=null,e(y)}if(!(h=L.$$childHead||L!==this&&L.$$nextSibling))for(;L!==this&&!(h=L.$$nextSibling);)L=L.$parent}while(L=h);if((z||l.length)&&!t--)throw p.$$phase=null,a("infdig",b,na(O));}while(z||l.length);for(p.$$phase=null;r.length;)try{r.shift()()}catch(v){e(v)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==p&&(r(this.$$listenerCount,
Bb(null,l,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=E,this.$on=
this.$watch=function(){return E})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){p.$$phase||p.$$asyncQueue.length||g.defer(function(){p.$$asyncQueue.length&&p.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){e(b)}finally{p.$$phase=null;try{p.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=
c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ra(c,b)]=null;l(e,1,a)}},$emit:function(a,b){var c=[],d,f=this,g=!1,k={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){k.defaultPrevented=!0},defaultPrevented:!1},h=[k].concat(Ba.call(arguments,1)),l,m;do{d=f.$$listeners[a]||c;k.currentScope=f;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,h)}catch(p){e(p)}else d.splice(l,
1),l--,m--;if(g)break;f=f.$parent}while(f);return k},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(Ba.call(arguments,1)),k,h;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];k=0;for(h=d.length;k<h;k++)if(d[k])try{d[k].apply(null,g)}catch(l){e(l)}else d.splice(k,1),k--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};
var p=new k;return p}]}function cd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!Q||8<=Q)if(f=ua(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Be(b){if("self"===b)return b;if(v(b)){if(-1<b.indexOf("***"))throw xa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(jb(b))return RegExp("^"+b.source+"$");throw xa("imatcher");}function Gc(b){var a=[];y(b)&&r(b,function(b){a.push(Be(b))});return a}function be(){this.SCE_CONTEXTS=ga;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Gc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Gc(b));return a};this.$get=["$injector",function(c){function d(a){var b=
function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw xa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),g={};g[ga.HTML]=d(f);g[ga.CSS]=d(f);g[ga.URL]=d(f);g[ga.JS]=d(f);g[ga.RESOURCE_URL]=d(g[ga.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw xa("icontext",
a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw xa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===t||""===d)return d;var f=g.hasOwnProperty(c)?g[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ga.RESOURCE_URL){var f=ua(d.toString()),l,n,p=!1;l=0;for(n=b.length;l<n;l++)if("self"===b[l]?Pb(f):b[l].exec(f.href)){p=!0;break}if(p)for(l=0,n=a.length;l<n;l++)if("self"===a[l]?Pb(f):a[l].exec(f.href)){p=!1;break}if(p)return d;throw xa("insecurl",
d.toString());}if(c===ga.HTML)return e(d);throw xa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function ae(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw xa("iequirks");var e=ha(ga);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},
e.valueOf=Qa);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:function(a,c){return e.getTrusted(b,d(a,c))}};var f=e.parseAs,g=e.getTrusted,k=e.trustAs;r(ga,function(a,b){var c=K(b);e[Za("parse_as_"+c)]=function(b){return f(a,b)};e[Za("get_trusted_"+c)]=function(b){return g(a,b)};e[Za("trust_as_"+c)]=function(b){return k(a,b)}});return e}]}function ce(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||
{}).userAgent),f=a[0]||{},g=f.documentMode,k,m=/^(Moz|webkit|O|ms)(?=[A-Z])/,h=f.body&&f.body.style,l=!1,n=!1;if(h){for(var p in h)if(l=m.exec(p)){k=l[0];k=k.substr(0,1).toUpperCase()+k.substr(1);break}k||(k="WebkitOpacity"in h&&"webkit");l=!!("transition"in h||k+"Transition"in h);n=!!("animation"in h||k+"Animation"in h);!d||l&&n||(l=v(f.body.style.webkitTransition),n=v(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!g||7<
g),hasEvent:function(a){if("input"==a&&9==Q)return!1;if(x(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Xa(),vendorPrefix:k,transitions:l,animations:n,android:d,msie:Q,msieDocumentMode:g}}]}function ee(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,k,m){var h=c.defer(),l=h.promise,n=y(m)&&!m;k=a.defer(function(){try{h.resolve(e())}catch(a){h.reject(a),d(a)}finally{delete f[l.$$timeoutId]}n||b.$apply()},k);l.$$timeoutId=k;f[k]=h;
return l}var f={};e.cancel=function(b){return b&&b.$$timeoutId in f?(f[b.$$timeoutId].reject("canceled"),delete f[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return e}]}function ua(b,a){var c=b;Q&&(Y.setAttribute("href",c),c=Y.href);Y.setAttribute("href",c);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:
"/"+Y.pathname}}function Pb(b){b=v(b)?ua(b):b;return b.protocol===Hc.protocol&&b.host===Hc.host}function fe(){this.$get=ba(W)}function mc(b){function a(d,e){if(T(d)){var f={};r(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Ic);a("date",Jc);a("filter",Ce);a("json",De);a("limitTo",Ee);a("lowercase",Fe);a("number",Kc);a("orderBy",Lc);a("uppercase",Ge)}function Ce(){return function(b,
a,c){if(!J(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return Va.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&kb.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,
b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(g);break;case "function":e.push(a);break;default:return b}d=[];for(g=0;g<b.length;g++){var k=
b[g];e.check(k)&&d.push(k)}return d}}function Ic(b){var a=b.NUMBER_FORMATS;return function(b,d){x(d)&&(d=a.CURRENCY_SYM);return Mc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Kc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Mc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Mc(b,a,c,d,e){if(null==b||!isFinite(b)||T(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",k="",m=[],h=!1;if(-1!==g.indexOf("e")){var l=g.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&
l[3]>e+1?(g="0",b=0):(k=g,h=!0)}if(h)0<e&&(-1<b&&1>b)&&(k=b.toFixed(e));else{g=(g.split(Nc)[1]||"").length;x(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);0===b&&(f=!1);b=(""+b).split(Nc);g=b[0];b=b[1]||"";var l=0,n=a.lgSize,p=a.gSize;if(g.length>=n+p)for(l=g.length-n,h=0;h<l;h++)0===(l-h)%p&&0!==h&&(k+=c),k+=g.charAt(h);for(h=l;h<g.length;h++)0===(g.length-h)%n&&0!==h&&(k+=c),k+=g.charAt(h);for(;b.length<e;)b+="0";e&&"0"!==e&&(k+=d+b.substr(0,
e))}m.push(f?a.negPre:a.posPre);m.push(k);m.push(f?a.negSuf:a.posSuf);return m.join("")}function Xb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Xb(e,a,d)}}function vb(b,a){return function(c,d){var e=c["get"+b](),f=Ia(a?"SHORT"+b:b);return d[f][e]}}function Jc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,k=b[8]?
a.setUTCFullYear:a.setFullYear,m=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),g=U(b[9]+b[11]));k.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;g=U(b[5]||0)-g;k=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));m.call(a,f,g,k,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var f="",g=[],k,m;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;v(c)&&(c=He.test(c)?U(c):a(c));ib(c)&&(c=new Date(c));
if(!ta(c))return c;for(;e;)(m=Ie.exec(e))?(g=g.concat(Ba.call(m,1)),e=g.pop()):(g.push(e),e=null);r(g,function(a){k=Je[a];f+=k?k(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function De(){return function(b){return na(b,!0)}}function Ee(){return function(b,a){if(!J(b)&&!v(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);if(v(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=
b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Lc(b){return function(a,c,d){function e(a,b){return Ua(b)?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(ta(a)&&ta(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Pa(a)||!c)return a;c=J(c)?c:[c];c=Vc(c,function(a){var c=!1,d=a||Qa;if(v(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=
d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var g=[],k=0;k<a.length;k++)g.push(a[k]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function ya(b){P(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Oc(b,a,c,d){function e(a,c){c=c?"-"+mb(c,"-"):"";d.setClass(b,(a?wb:xb)+c,(a?xb:wb)+c)}var f=this,g=b.parent().controller("form")||yb,k=0,m=f.$error={},h=[];f.$name=
a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;g.$addControl(f);b.addClass(Oa);e(!0);f.$addControl=function(a){Da(a.$name,"input");h.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];r(m,function(b,c){f.$setValidity(c,!0,a)});Sa(h,a)};f.$setValidity=function(a,b,c){var d=m[a];if(b)d&&(Sa(d,c),d.length||(k--,k||(e(b),f.$valid=!0,f.$invalid=!1),m[a]=!1,e(!0,a),g.$setValidity(a,!0,f)));else{k||e(b);if(d){if(-1!=Ra(d,c))return}else m[a]=
d=[],k++,e(!1,a),g.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Oa);d.addClass(b,zb);f.$dirty=!0;f.$pristine=!1;g.$setDirty()};f.$setPristine=function(){d.removeClass(b,zb);d.addClass(b,Oa);f.$dirty=!1;f.$pristine=!0;r(h,function(a){a.$setPristine()})}}function sa(b,a,c,d){b.$setValidity(a,c);return c?d:t}function Pc(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function Ke(b,a,c,d,e){T(e)&&(b.$$hasNativeValidators=!0,
b.$parsers.push(function(f){if(b.$error[a]||Pc(e,d)||!Pc(e,c))return f;b.$setValidity(a,!1)}))}function Ab(b,a,c,d,e,f){var g=a.prop(Le),k=a[0].placeholder,m={},h=K(a[0].type);d.$$validityState=g;if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;n()})}var n=function(e){if(!l){var f=a.val();if(Q&&"input"===(e||m).type&&a[0].placeholder!==k)k=a[0].placeholder;else if("password"!==h&&Ua(c.ngTrim||"T")&&(f=aa(f)),e=g&&d.$$hasNativeValidators,d.$viewValue!==
f||""===f&&e)b.$root.$$phase?d.$setViewValue(f):b.$apply(function(){d.$setViewValue(f)})}};if(e.hasEvent("input"))a.on("input",n);else{var p,q=function(){p||(p=f.defer(function(){n();p=null}))};a.on("keydown",function(a){a=a.keyCode;91===a||(15<a&&19>a||37<=a&&40>=a)||q()});if(e.hasEvent("paste"))a.on("paste cut",q)}a.on("change",n);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)};var s=c.ngPattern;s&&((e=s.match(/^\/(.*)\/([gim]*)$/))?(s=RegExp(e[1],e[2]),e=function(a){return sa(d,
"pattern",d.$isEmpty(a)||s.test(a),a)}):e=function(c){var e=b.$eval(s);if(!e||!e.test)throw C("ngPattern")("noregexp",s,e,ia(a));return sa(d,"pattern",d.$isEmpty(c)||e.test(c),c)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var r=U(c.ngMinlength);e=function(a){return sa(d,"minlength",d.$isEmpty(a)||a.length>=r,a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var u=U(c.ngMaxlength);e=function(a){return sa(d,"maxlength",d.$isEmpty(a)||a.length<=u,a)};d.$parsers.push(e);
d.$formatters.push(e)}}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],l=0;l<b.length;l++)if(e==b[l])continue a;c.push(e)}return c}function e(a){if(!J(a)){if(v(a))return a.split(" ");if(T(a)){var b=[];r(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,k){function m(a,b){var c=g.data("$classCounts")||{},d=[];r(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<
b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function h(b){if(!0===a||f.$index%2===a){var h=e(b||[]);if(!l){var q=m(h,1);k.$addClass(q)}else if(!Aa(b,l)){var s=e(l),q=d(h,s),h=d(s,h),h=m(h,-1),q=m(q,1);0===q.length?c.removeClass(g,h):0===h.length?c.addClass(g,q):c.setClass(g,q,h)}}l=ha(b)}var l;f.$watch(k[b],h,!0);k.$observe("class",function(a){h(f.$eval(k[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var h=e(f.$eval(k[b]));g===a?(g=m(h,1),k.$addClass(g)):
(g=m(h,-1),k.$removeClass(g))}})}}}]}var Le="validity",K=function(b){return v(b)?b.toLowerCase():b},kb=Object.prototype.hasOwnProperty,Ia=function(b){return v(b)?b.toUpperCase():b},Q,w,Ea,Ba=[].slice,Me=[].push,za=Object.prototype.toString,Ta=C("ng"),Va=W.angular||(W.angular={}),Ya,Ma,ma=["0","0","0"];Q=U((/msie (\d+)/.exec(K(navigator.userAgent))||[])[1]);isNaN(Q)&&(Q=U((/trident\/.*; rv:(\d+)/.exec(K(navigator.userAgent))||[])[1]));E.$inject=[];Qa.$inject=[];var J=function(){return P(Array.isArray)?
Array.isArray:function(b){return"[object Array]"===za.call(b)}}(),aa=function(){return String.prototype.trim?function(b){return v(b)?b.trim():b}:function(b){return v(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();Ma=9>Q?function(b){b=b.nodeName?b:b[0];return b.scopeName&&"HTML"!=b.scopeName?Ia(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var Xa=function(){if(y(Xa.isActive_))return Xa.isActive_;var b=!(!X.querySelector("[ng-csp]")&&!X.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return Xa.isActive_=b},Yc=/[A-Z]/g,ad={full:"1.2.26",major:1,minor:2,dot:26,codeName:"captivating-disinterest"};S.expando="ng339";var ab=S.cache={},ne=1,sb=W.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},$a=W.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};S._data=function(b){return this.cache[b[this.expando]]||{}};var ie=/([\:\-\_]+(.))/g,
je=/^moz([A-Z])/,Hb=C("jqLite"),ke=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ib=/<|&#?\w+;/,le=/<([\w:]+)/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=
ea.td;var La=S.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===X.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),S(W).on("load",a))},toString:function(){var b=[];r(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?w(this[b]):w(this[this.length+b])},length:0,push:Me,sort:[].sort,splice:[].splice},qb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){qb[K(b)]=b});var rc={};r("input select option textarea button form details".split(" "),
function(b){rc[Ia(b)]=!0});r({data:Mb,removeData:Lb},function(b,a){S[a]=b});r({data:Mb,inheritedData:pb,scope:function(b){return w.data(b,"$scope")||pb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return w.data(b,"$isolateScope")||w.data(b,"$isolateScopeNoTemplate")},controller:oc,injector:function(b){return pb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Nb,css:function(b,a,c){a=Za(a);if(y(c))b.style[a]=c;else{var d;8>=Q&&(d=b.currentStyle&&b.currentStyle[a],
""===d&&(d="auto"));d=d||b.style[a];8>=Q&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=K(a);if(qb[d])if(y(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||E).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(b,d){var e=a[b.nodeType];if(x(d))return e?b[e]:"";b[e]=d}var a=[];9>Q?(a[1]=
"innerText",a[3]="nodeValue"):a[1]=a[3]="textContent";b.$dv="";return b}(),val:function(b,a){if(x(a)){if("SELECT"===Ma(b)&&b.multiple){var c=[];r(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(x(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ja(d[c]);b.innerHTML=a},empty:pc},function(b,a){S.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==pc&&(2==b.length&&b!==Nb&&b!==oc?a:d)===t){if(T(a)){for(e=
0;e<g;e++)if(b===Mb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var k=b(this[f],a,d);e=e?e+k:k}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});r({removeData:Lb,dealoc:Ja,on:function a(c,d,e,f){if(y(f))throw Hb("onargs");var g=oa(c,"events"),k=oa(c,"handle");g||oa(c,"events",g={});k||oa(c,"handle",k=oe(c,g));r(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var l=X.body.contains||X.body.compareDocumentPosition?
function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||l(this,c))||k(a,d)})}else sb(c,d,k),g[d]=[];f=g[d]}f.push(e)})},off:nc,one:function(a,c,d){a=w(a);a.on(c,function f(){a.off(c,
d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ja(a);r(new S(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];r(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){r(new S(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;r(new S(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=w(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){Ja(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;r(new S(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:ob,removeClass:nb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;x(f)&&(f=!Nb(a,c));(f?ob:nb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;
for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Kb,triggerHandler:function(a,c,d){var e,f;e=c.type||c;var g=(oa(a,"events")||{})[e];g&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:E,type:e,target:a},c.type&&(e=D(e,c)),c=ha(g),f=d?[e].concat(d):[e],r(c,function(c){c.apply(a,f)}))}},function(a,c){S.prototype[c]=
function(c,e,f){for(var g,k=0;k<this.length;k++)x(g)?(g=a(this[k],c,e,f),y(g)&&(g=w(g))):Jb(g,a(this[k],c,e,f));return y(g)?g:this};S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off});bb.prototype={put:function(a,c){this[Ka(a,this.nextUid)]=c},get:function(a){return this[Ka(a,this.nextUid)]},remove:function(a){var c=this[a=Ka(a,this.nextUid)];delete this[a];return c}};var qe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,re=/,/,se=/^\s*(_?)(\S+?)\1\s*$/,pe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
cb=C("$injector"),Ne=C("$animate"),Md=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Ne("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,g,k){g?g.after(a):(c&&c[0]||(c=g.parent()),c.append(a));k&&
d(k)},leave:function(a,c){a.remove();c&&d(c)},move:function(a,c,d,k){this.enter(a,c,d,k)},addClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){ob(a,c)});g&&d(g)},removeClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){nb(a,c)});g&&d(g)},setClass:function(a,c,g,k){r(a,function(a){ob(a,c);nb(a,g)});k&&d(k)},enabled:E}}]}],ja=C("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var we=/^(x[\:\-_]|data[\:\-_])/i,yc=C("$interpolate"),Oe=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
ze={http:80,https:443,ftp:21},Sb=C("$location");Ub.prototype=Tb.prototype=Bc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a){if(x(a))return this.$$url;a=Oe.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));(a[2]||a[1])&&this.search(a[3]||"");this.hash(a[5]||"");return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Cc("$$path",function(a){a=a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;
case 1:if(v(a)||ib(a))a=a.toString(),this.$$search=ec(a);else if(T(a))r(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:x(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Cc("$$hash",function(a){return a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};var la=C("$parse"),Fc={},wa,Pe=Function.prototype.call,Qe=Function.prototype.apply,Qc=Function.prototype.bind,gb={"null":function(){return null},
"true":function(){return!0},"false":function(){return!1},undefined:E,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":E,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,
c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Re={n:"\n",f:"\f",r:"\r",
t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;this.lastCh=":";for(this.tokens=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),
this.index++;else if(this.isWhitespace(this.ch)){this.index++;continue}else{a=this.ch+this.peek();var c=a+this.peek(2),d=gb[this.ch],e=gb[a],f=gb[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},
was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+
this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,g,k;this.index<this.text.length;){k=this.text.charAt(this.index);if("."===k||this.isIdent(k)||this.isNumber(k))"."===k&&(e=this.index),c+=k;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){k=this.text.charAt(f);if("("===k){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(k))f++;else break}d={index:d,text:c};if(gb.hasOwnProperty(c))d.fn=
gb[c],d.literal=!0,d.constant=!0;else{var m=Ec(c,this.options,this.text);d.fn=D(function(a,c){return m(a,c)},{assign:function(d,e){return ub(d,c,e,a.text,a.options)}})}this.tokens.push(d);g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||
this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Re[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,literal:!0,constant:!0,fn:function(){return d}});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var fb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};fb.ZERO=D(function(){return 0},{constant:!0});fb.prototype={constructor:fb,parse:function(a){this.text=
a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);a.literal=!!c.literal;a.constant=!!c.constant}for(var d;c=
this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===
e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return D(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return D(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return D(function(e,f){return c(e,f,a,d)},{constant:a.constant&&
d.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var g=a[f];g&&(e=g(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];;)if(a=this.expect(":"))d.push(this.expression());
else{var e=function(a,e,k){k=[k];for(var m=0;m<d.length;m++)k.push(d[m](a,e));return c.apply(a,k)};return function(){return e}}},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.assignment();
if(d=this.expect(":"))return this.ternaryFn(a,c,this.assignment());this.throwError("expected :",d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},
relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(fb.ZERO,a.fn,
this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=Ec(d,this.options,this.text);return D(function(c,d,k){return e(k||a(c,d))},{assign:function(e,g,k){(k=a(e,k))||a.assign(e,k={});return ub(k,d,g,c.text,c.options)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return D(function(e,f){var g=a(e,f),k=d(e,f),m;ka(k,c.text);if(!g)return t;(g=va(g[k],c.text))&&(g.then&&c.options.unwrapPromises)&&
(m=g,"$$v"in g||(m.$$v=t,m.then(function(a){m.$$v=a})),g=g.$$v);return g},{assign:function(e,f,g){var k=ka(d(e,g),c.text);(g=va(a(e,g),c.text))||a.assign(e,g={});return g[k]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))}this.consume(")");var e=this;return function(f,g){for(var k=[],m=c?c(f,g):f,h=0;h<d.length;h++)k.push(va(d[h](f,g),e.text));h=a(f,g,m)||E;va(m,e.text);var l=e.text;if(h){if(h.constructor===h)throw la("isecfn",
l);if(h===Pe||h===Qe||Qc&&h===Qc)throw la("isecff",l);}k=h.apply?h.apply(m,k):h(k[0],k[1],k[2],k[3],k[4]);return va(k,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");return D(function(c,d){for(var g=[],k=0;k<a.length;k++)g.push(a[k](c,d));return g},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return D(function(c,d){for(var e={},m=0;m<a.length;m++){var h=a[m];e[h.key]=h.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},xa=C("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Y=X.createElement("a"),Hc=ua(W.location.href,!0);mc.$inject=["$provide"];Ic.$inject=["$locale"];Kc.$inject=["$locale"];
var Nc=".",Je={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:vb("Month"),MMM:vb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:vb("Day"),EEE:vb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Xb(Math[0<
a?"floor":"ceil"](a/60),2)+Xb(Math.abs(a%60),2))}},Ie=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,He=/^\-?\d+$/;Jc.$inject=["$locale"];var Fe=ba(K),Ge=ba(Ia);Lc.$inject=["$parse"];var dd=ba({restrict:"E",compile:function(a,c){8>=Q&&(c.href||c.name||c.$set("href",""),a.append(X.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===za.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||
a.preventDefault()})}}}),Fb={};r(qb,function(a,c){if("multiple"!=a){var d=pa("ng-"+c);Fb[d]=function(){return{priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}});r(["src","srcset","href"],function(a){var c=pa("ng-"+a);Fb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===za.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$observe(c,function(c){c?(f.$set(k,c),Q&&g&&e.prop(g,f[k])):"href"===
a&&f.$set(k,null)})}}}});var yb={$addControl:E,$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E};Oc.$inject=["$element","$attrs","$scope","$animate"];var Rc=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Oc,compile:function(){return{pre:function(a,e,f,g){if(!f.action){var k=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};sb(e[0],"submit",k);e.on("$destroy",function(){c(function(){$a(e[0],"submit",k)},0,!1)})}var m=e.parent().controller("form"),
h=f.name||f.ngForm;h&&ub(a,h,g,h);if(m)e.on("$destroy",function(){m.$removeControl(g);h&&ub(a,h,t,h);D(g,yb)})}}}}}]},ed=Rc(),rd=Rc(!0),Se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Te=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ue=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Sc={text:Ab,number:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||Ue.test(a))return e.$setValidity("number",
!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});Ke(e,"number",Ve,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return sa(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return sa(e,"max",e.$isEmpty(a)||a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return sa(e,"number",e.$isEmpty(a)||
ib(a),a)})},url:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"url",e.$isEmpty(a)||Se.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"email",e.$isEmpty(a)||Te.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){x(d.name)&&c.attr("name",hb());c.on("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};
d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,g=d.ngFalseValue;v(f)||(f=!0);v(g)||(g=!1);c.on("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==f};e.$formatters.push(function(a){return a===f});e.$parsers.push(function(a){return a?f:g})},hidden:E,button:E,submit:E,reset:E,file:E},Ve=["badInput"],jc=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",
link:function(d,e,f,g){g&&(Sc[K(f.type)]||Sc.text)(d,e,f,g,c,a)}}}],wb="ng-valid",xb="ng-invalid",Oa="ng-pristine",zb="ng-dirty",We=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,c,d,e,f,g){function k(a,c){c=c?"-"+mb(c,"-"):"";g.removeClass(e,(a?xb:wb)+c);g.addClass(e,(a?wb:xb)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=
d.name;var m=f(d.ngModel),h=m.assign;if(!h)throw C("ngModel")("nonassign",d.ngModel,ia(e));this.$render=E;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||yb,n=0,p=this.$error={};e.addClass(Oa);k(!0);this.$setValidity=function(a,c){p[a]!==!c&&(c?(p[a]&&n--,n||(k(!0),this.$valid=!0,this.$invalid=!1)):(k(!1),this.$invalid=!0,this.$valid=!1,n++),p[a]=!c,k(c,a),l.$setValidity(a,c,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=
!0;g.removeClass(e,zb);g.addClass(e,Oa)};this.$setViewValue=function(d){this.$viewValue=d;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,g.removeClass(e,Oa),g.addClass(e,zb),l.$setDirty());r(this.$parsers,function(a){d=a(d)});this.$modelValue!==d&&(this.$modelValue=d,h(a,d),r(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))};var q=this;a.$watch(function(){var c=m(a);if(q.$modelValue!==c){var d=q.$formatters,e=d.length;for(q.$modelValue=c;e--;)c=d[e](c);q.$viewValue!==c&&(q.$viewValue=
c,q.$render())}return c})}],Gd=function(){return{require:["ngModel","^?form"],controller:We,link:function(a,c,d,e){var f=e[0],g=e[1]||yb;g.$addControl(f);a.$on("$destroy",function(){g.$removeControl(f)})}}},Id=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=!0;var f=function(a){if(d.required&&e.$isEmpty(a))e.$setValidity("required",!1);else return e.$setValidity("required",
!0),a};e.$formatters.push(f);e.$parsers.unshift(f);d.$observe("required",function(){f(e.$viewValue)})}}}},Hd=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!x(a)){var c=[];a&&r(a.split(f),function(a){a&&c.push(aa(a))});return c}});e.$formatters.push(function(a){return J(a)?a.join(", "):t});e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Jd=function(){return{priority:100,
compile:function(a,c){return Xe.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},jd=ya({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),ld=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],
kd=["$sce","$parse",function(a,c){return{compile:function(d){d.addClass("ng-binding");return function(d,f,g){f.data("$binding",g.ngBindHtml);var k=c(g.ngBindHtml);d.$watch(function(){return(k(d)||"").toString()},function(c){f.html(a.getTrustedHtml(k(d))||"")})}}}}],md=Yb("",!0),od=Yb("Odd",0),nd=Yb("Even",1),pd=ya({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),qd=[function(){return{scope:!0,controller:"@",priority:500}}],lc={},Ye={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var c=pa("ng-"+a);lc[c]=["$parse","$rootScope",function(d,e){return{compile:function(f,g){var k=d(g[c]);return function(c,d){d.on(a,function(d){var f=function(){k(c,{$event:d})};Ye[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var td=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var k,m,h;c.$watch(e.ngIf,function(f){Ua(f)?m||(m=c.$new(),g(m,function(c){c[c.length++]=X.createComment(" end ngIf: "+e.ngIf+
" ");k={clone:c};a.enter(c,d.parent(),d)})):(h&&(h.remove(),h=null),m&&(m.$destroy(),m=null),k&&(h=Eb(k.clone),a.leave(h,function(){h=null}),k=null))})}}}],ud=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Va.noop,compile:function(g,k){var m=k.ngInclude||k.src,h=k.onload||"",l=k.autoscroll;return function(g,k,q,r,F){var u=0,t,w,R,z=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);
R&&(e.leave(R,function(){w=null}),w=R,R=null)};g.$watch(f.parseAsResourceUrl(m),function(f){var m=function(){!y(l)||l&&!g.$eval(l)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=F(c,function(a){z();e.enter(a,null,k,m)});t=c;R=a;t.$emit("$includeContentLoaded");g.$eval(h)}}).error(function(){q===u&&z()}),g.$emit("$includeContentRequested")):(z(),r.template=null)})}}}}],Kd=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],vd=ya({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),wd=ya({terminal:!0,priority:1E3}),xd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var k=g.count,m=g.$attr.when&&f.attr(g.$attr.when),h=g.offset||0,l=e.$eval(m)||{},n={},p=c.startSymbol(),q=c.endSymbol(),s=/^when(Minus)?(.+)$/;r(g,function(a,c){s.test(c)&&(l[K(c.replace("when","").replace("Minus","-"))]=
f.attr(g.$attr[c]))});r(l,function(a,e){n[e]=c(a.replace(d,p+k+"-"+h+q))});e.$watch(function(){var c=parseFloat(e.$eval(k));if(isNaN(c))return"";c in l||(c=a.pluralCat(c-h));return n[c](e,f,!0)},function(a){f.text(a)})}}}],yd=["$parse","$animate",function(a,c){var d=C("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,g,k,m){var h=g.ngRepeat,l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n,p,q,s,t,u,A={$id:Ka};if(!l)throw d("iexp",
h);g=l[1];k=l[2];(l=l[3])?(n=a(l),p=function(a,c,d){u&&(A[u]=a);A[t]=c;A.$index=d;return n(e,A)}):(q=function(a,c){return Ka(c)},s=function(a){return a});l=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!l)throw d("iidexp",g);t=l[3]||l[1];u=l[2];var y={};e.$watchCollection(k,function(a){var g,k,l=f[0],n,A={},B,I,H,v,E,C,x,J=[];if(Pa(a))C=a,E=p||q;else{E=p||s;C=[];for(H in a)a.hasOwnProperty(H)&&"$"!=H.charAt(0)&&C.push(H);C.sort()}B=C.length;k=J.length=C.length;for(g=0;g<k;g++)if(H=a===
C?g:C[g],v=a[H],n=E(H,v,g),Da(n,"`track by` id"),y.hasOwnProperty(n))x=y[n],delete y[n],A[n]=x,J[g]=x;else{if(A.hasOwnProperty(n))throw r(J,function(a){a&&a.scope&&(y[a.id]=a)}),d("dupes",h,n,na(v));J[g]={id:n};A[n]=!1}for(H in y)y.hasOwnProperty(H)&&(x=y[H],g=Eb(x.clone),c.leave(g),r(g,function(a){a.$$NG_REMOVED=!0}),x.scope.$destroy());g=0;for(k=C.length;g<k;g++){H=a===C?g:C[g];v=a[H];x=J[g];J[g-1]&&(l=J[g-1].clone[J[g-1].clone.length-1]);if(x.scope){I=x.scope;n=l;do n=n.nextSibling;while(n&&n.$$NG_REMOVED);
x.clone[0]!=n&&c.move(Eb(x.clone),null,w(l));l=x.clone[x.clone.length-1]}else I=e.$new();I[t]=v;u&&(I[u]=H);I.$index=g;I.$first=0===g;I.$last=g===B-1;I.$middle=!(I.$first||I.$last);I.$odd=!(I.$even=0===(g&1));x.scope||m(I,function(a){a[a.length++]=X.createComment(" end ngRepeat: "+h+" ");c.enter(a,null,w(l));l=a;x.scope=I;x.clone=a;A[x.id]=x})}y=A})}}}],zd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[Ua(c)?"removeClass":"addClass"](d,"ng-hide")})}}],sd=["$animate",
function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[Ua(c)?"addClass":"removeClass"](d,"ng-hide")})}}],Ad=ya(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Bd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],k=[],m=[],h=[];c.$watch(e.ngSwitch||e.on,function(d){var n,p;n=0;for(p=m.length;n<p;++n)m[n].remove();n=m.length=0;for(p=
h.length;n<p;++n){var q=k[n];h[n].$destroy();m[n]=q;a.leave(q,function(){m.splice(n,1)})}k.length=0;h.length=0;if(g=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),r(g,function(d){var e=c.$new();h.push(e);d.transclude(e,function(c){var e=d.element;k.push(c);a.enter(c,e.parent(),e)})})})}}}],Cd=ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Dd=
ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Fd=ya({link:function(a,c,d,e,f){if(!f)throw C("ngTransclude")("orphan",ia(c));f(function(a){c.empty();c.append(a)})}}),fd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Ze=C("ngOptions"),Ed=ba({terminal:!0}),gd=["$compile","$parse",function(a,c){var d=
/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:E};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var m=this,h={},l=e,n;m.databound=d.ngModel;m.init=function(a,c,d){l=a;n=d};m.addOption=function(c){Da(c,'"option value"');h[c]=!0;l.$viewValue==c&&(a.val(c),n.parent()&&n.remove())};
m.removeOption=function(a){this.hasOption(a)&&(delete h[a],l.$viewValue==a&&this.renderUnknownOption(a))};m.renderUnknownOption=function(c){c="? "+Ka(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};m.hasOption=function(a){return h.hasOwnProperty(a)};c.$on("$destroy",function(){m.renderUnknownOption=E})}],link:function(e,g,k,m){function h(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(v.parent()&&v.remove(),c.val(a),""===a&&u.prop("selected",!0)):x(a)&&u?c.val(""):e.renderUnknownOption(a)};
c.on("change",function(){a.$apply(function(){v.parent()&&v.remove();d.$setViewValue(c.val())})})}function l(a,c,d){var e;d.$render=function(){var a=new bb(d.$viewValue);r(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){Aa(e,d.$viewValue)||(e=ha(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function k(){var a={"":[]},c=[""],d,h,
s,t,v;s=g.$modelValue;t=w(e)||[];var E=n?Zb(t):t,I,M,B;M={};B=!1;if(q)if(h=g.$modelValue,x&&J(h))for(B=new bb([]),d={},v=0;v<h.length;v++)d[m]=h[v],B.put(x(e,d),h[v]);else B=new bb(h);v=B;var D,K;for(B=0;I=E.length,B<I;B++){h=B;if(n){h=E[B];if("$"===h.charAt(0))continue;M[n]=h}M[m]=t[h];d=r(e,M)||"";(h=a[d])||(h=a[d]=[],c.push(d));q?d=y(v.remove(x?x(e,M):u(e,M))):(x?(d={},d[m]=s,d=x(e,d)===x(e,M)):d=s===u(e,M),v=v||d);D=l(e,M);D=y(D)?D:"";h.push({id:x?x(e,M):n?E[B]:B,label:D,selected:d})}q||(F||null===
s?a[""].unshift({id:"",label:"",selected:!v}):v||a[""].unshift({id:"?",label:"",selected:!0}));M=0;for(E=c.length;M<E;M++){d=c[M];h=a[d];z.length<=M?(s={element:C.clone().attr("label",d),label:h.label},t=[s],z.push(t),f.append(s.element)):(t=z[M],s=t[0],s.label!=d&&s.element.attr("label",s.label=d));D=null;B=0;for(I=h.length;B<I;B++)d=h[B],(v=t[B+1])?(D=v.element,v.label!==d.label&&D.text(v.label=d.label),v.id!==d.id&&D.val(v.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",v.selected=d.selected),
Q&&D.prop("selected",v.selected))):(""===d.id&&F?K=F:(K=A.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),t.push({element:K,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,K),D?D.after(K):s.element.append(K),D=K);for(B++;t.length>B;)d=t.pop(),p.removeOption(d.label),d.element.remove()}for(;z.length>M;)z.pop()[0].element.remove()}var h;if(!(h=s.match(d)))throw Ze("iexp",s,ia(f));var l=c(h[2]||h[1]),m=h[4]||h[6],n=h[5],r=c(h[3]||""),u=c(h[2]?
h[1]:m),w=c(h[7]),x=h[8]?c(h[8]):null,z=[[{element:f,label:""}]];F&&(a(F)(e),F.removeClass("ng-scope"),F.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=w(e)||[],d={},h,l,p,r,s,v,y;if(q)for(l=[],r=0,v=z.length;r<v;r++)for(a=z[r],p=1,s=a.length;p<s;p++){if((h=a[p].element)[0].selected){h=h.val();n&&(d[n]=h);if(x)for(y=0;y<c.length&&(d[m]=c[y],x(e,d)!=h);y++);else d[m]=c[h];l.push(u(e,d))}}else if(h=f.val(),"?"==h)l=t;else if(""===h)l=null;else if(x)for(y=0;y<c.length;y++){if(d[m]=
c[y],x(e,d)==h){l=u(e,d);break}}else d[m]=c[h],n&&(d[n]=h),l=u(e,d);g.$setViewValue(l);k()})});g.$render=k;e.$watchCollection(w,k);e.$watchCollection(function(){var a={},c=w(e);if(c){for(var d=Array(c.length),f=0,g=c.length;f<g;f++)a[m]=c[f],d[f]=l(e,a);return d}},k);q&&e.$watchCollection(function(){return g.$modelValue},k)}if(m[1]){var p=m[0];m=m[1];var q=k.multiple,s=k.ngOptions,F=!1,u,A=w(X.createElement("option")),C=w(X.createElement("optgroup")),v=A.clone();k=0;for(var z=g.children(),E=z.length;k<
E;k++)if(""===z[k].value){u=F=z.eq(k);break}p.init(m,F,v);q&&(m.$isEmpty=function(a){return!a||0===a.length});s?n(e,g,m):q?l(e,g,m):h(e,g,m,p)}}}}],id=["$interpolate",function(a){var c={addOption:E,removeOption:E};return{restrict:"E",priority:100,compile:function(d,e){if(x(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var h=d.parent(),l=h.data("$selectController")||h.parent().data("$selectController");l&&l.databound?d.prop("selected",!1):l=c;f?a.$watch(f,function(a,
c){e.$set("value",a);a!==c&&l.removeOption(c);l.addOption(a)}):l.addOption(e.value);d.on("$destroy",function(){l.removeOption(e.value)})}}}}],hd=ba({restrict:"E",terminal:!0});W.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((Ea=W.jQuery)&&Ea.fn.on?(w=Ea,D(Ea.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),Gb("remove",!0,!0,!1),Gb("empty",!1,!1,!1),Gb("html",!1,!1,!0)):w=S,Va.element=w,
$c(Va),w(X).ready(function(){Xc(X,fc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
//# sourceMappingURL=angular.min.js.map

},{}],11:[function(require,module,exports){
/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)
},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map
},{}],12:[function(require,module,exports){
(function (global){
/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./dist/lodash.js`
 */
;(function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:m+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=true;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:m+n,t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=true
}}function r(n){return n.charCodeAt(0)}function u(n,t){for(var e=n.m,r=t.m,u=-1,o=e.length;++u<o;){var i=e[u],a=r[u];if(i!==a){if(i>a||typeof i=="undefined")return 1;if(i<a||typeof a=="undefined")return-1}}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],i=n[r-1];if(u&&typeof u=="object"&&o&&typeof o=="object"&&i&&typeof i=="object")return false;for(u=f(),u["false"]=u["null"]=u["true"]=u.undefined=false,o=f(),o.k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function i(n){return"\\"+U[n]
}function a(){return h.pop()||[]}function f(){return g.pop()||{k:null,l:null,m:null,"false":false,n:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,o:null}}function l(n){n.length=0,h.length<_&&h.push(n)}function c(n){var t=n.l;t&&c(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,g.length<_&&g.push(n)}function p(n,t,e){t||(t=0),typeof e=="undefined"&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(0>e?0:e);++r<e;)u[r]=n[t+r];return u}function s(e){function h(n,t,e){if(!n||!V[typeof n])return n;
t=t&&typeof e=="undefined"?t:tt(t,e,3);for(var r=-1,u=V[typeof n]&&Fe(n),o=u?u.length:0;++r<o&&(e=u[r],false!==t(n[e],e,n)););return n}function g(n,t,e){var r;if(!n||!V[typeof n])return n;t=t&&typeof e=="undefined"?t:tt(t,e,3);for(r in n)if(false===t(n[r],r,n))break;return n}function _(n,t,e){var r,u=n,o=u;if(!u)return o;for(var i=arguments,a=0,f=typeof e=="number"?2:i.length;++a<f;)if((u=i[a])&&V[typeof u])for(var l=-1,c=V[typeof u]&&Fe(u),p=c?c.length:0;++l<p;)r=c[l],"undefined"==typeof o[r]&&(o[r]=u[r]);
return o}function U(n,t,e){var r,u=n,o=u;if(!u)return o;var i=arguments,a=0,f=typeof e=="number"?2:i.length;if(3<f&&"function"==typeof i[f-2])var l=tt(i[--f-1],i[f--],2);else 2<f&&"function"==typeof i[f-1]&&(l=i[--f]);for(;++a<f;)if((u=i[a])&&V[typeof u])for(var c=-1,p=V[typeof u]&&Fe(u),s=p?p.length:0;++c<s;)r=p[c],o[r]=l?l(o[r],u[r]):u[r];return o}function H(n){var t,e=[];if(!n||!V[typeof n])return e;for(t in n)me.call(n,t)&&e.push(t);return e}function J(n){return n&&typeof n=="object"&&!Te(n)&&me.call(n,"__wrapped__")?n:new Q(n)
}function Q(n,t){this.__chain__=!!t,this.__wrapped__=n}function X(n){function t(){if(r){var n=p(r);be.apply(n,arguments)}if(this instanceof t){var o=nt(e.prototype),n=e.apply(o,n||arguments);return wt(n)?n:o}return e.apply(u,n||arguments)}var e=n[0],r=n[2],u=n[4];return $e(t,n),t}function Z(n,t,e,r,u){if(e){var o=e(n);if(typeof o!="undefined")return o}if(!wt(n))return n;var i=ce.call(n);if(!K[i])return n;var f=Ae[i];switch(i){case T:case F:return new f(+n);case W:case P:return new f(n);case z:return o=f(n.source,C.exec(n)),o.lastIndex=n.lastIndex,o
}if(i=Te(n),t){var c=!r;r||(r=a()),u||(u=a());for(var s=r.length;s--;)if(r[s]==n)return u[s];o=i?f(n.length):{}}else o=i?p(n):U({},n);return i&&(me.call(n,"index")&&(o.index=n.index),me.call(n,"input")&&(o.input=n.input)),t?(r.push(n),u.push(o),(i?St:h)(n,function(n,i){o[i]=Z(n,t,e,r,u)}),c&&(l(r),l(u)),o):o}function nt(n){return wt(n)?ke(n):{}}function tt(n,t,e){if(typeof n!="function")return Ut;if(typeof t=="undefined"||!("prototype"in n))return n;var r=n.__bindData__;if(typeof r=="undefined"&&(De.funcNames&&(r=!n.name),r=r||!De.funcDecomp,!r)){var u=ge.call(n);
De.funcNames||(r=!O.test(u)),r||(r=E.test(u),$e(n,r))}if(false===r||true!==r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function et(n){function t(){var n=f?i:this;if(u){var h=p(u);be.apply(h,arguments)}return(o||c)&&(h||(h=p(arguments)),o&&be.apply(h,o),c&&h.length<a)?(r|=16,et([e,s?r:-4&r,h,null,i,a])):(h||(h=arguments),l&&(e=n[v]),this instanceof t?(n=nt(e.prototype),h=e.apply(n,h),wt(h)?h:n):e.apply(n,h))
}var e=n[0],r=n[1],u=n[2],o=n[3],i=n[4],a=n[5],f=1&r,l=2&r,c=4&r,s=8&r,v=e;return $e(t,n),t}function rt(e,r){var u=-1,i=st(),a=e?e.length:0,f=a>=b&&i===n,l=[];if(f){var p=o(r);p?(i=t,r=p):f=false}for(;++u<a;)p=e[u],0>i(r,p)&&l.push(p);return f&&c(r),l}function ut(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var i=n[r];if(i&&typeof i=="object"&&typeof i.length=="number"&&(Te(i)||yt(i))){t||(i=ut(i,t,e));var a=-1,f=i.length,l=o.length;for(o.length+=f;++a<f;)o[l++]=i[a]}else e||o.push(i)}return o
}function ot(n,t,e,r,u,o){if(e){var i=e(n,t);if(typeof i!="undefined")return!!i}if(n===t)return 0!==n||1/n==1/t;if(n===n&&!(n&&V[typeof n]||t&&V[typeof t]))return false;if(null==n||null==t)return n===t;var f=ce.call(n),c=ce.call(t);if(f==D&&(f=q),c==D&&(c=q),f!=c)return false;switch(f){case T:case F:return+n==+t;case W:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case z:case P:return n==oe(t)}if(c=f==$,!c){var p=me.call(n,"__wrapped__"),s=me.call(t,"__wrapped__");if(p||s)return ot(p?n.__wrapped__:n,s?t.__wrapped__:t,e,r,u,o);
if(f!=q)return false;if(f=n.constructor,p=t.constructor,f!=p&&!(dt(f)&&f instanceof f&&dt(p)&&p instanceof p)&&"constructor"in n&&"constructor"in t)return false}for(f=!u,u||(u=a()),o||(o=a()),p=u.length;p--;)if(u[p]==n)return o[p]==t;var v=0,i=true;if(u.push(n),o.push(t),c){if(p=n.length,v=t.length,(i=v==p)||r)for(;v--;)if(c=p,s=t[v],r)for(;c--&&!(i=ot(n[c],s,e,r,u,o)););else if(!(i=ot(n[v],s,e,r,u,o)))break}else g(t,function(t,a,f){return me.call(f,a)?(v++,i=me.call(n,a)&&ot(n[a],t,e,r,u,o)):void 0}),i&&!r&&g(n,function(n,t,e){return me.call(e,t)?i=-1<--v:void 0
});return u.pop(),o.pop(),f&&(l(u),l(o)),i}function it(n,t,e,r,u){(Te(t)?St:h)(t,function(t,o){var i,a,f=t,l=n[o];if(t&&((a=Te(t))||Pe(t))){for(f=r.length;f--;)if(i=r[f]==t){l=u[f];break}if(!i){var c;e&&(f=e(l,t),c=typeof f!="undefined")&&(l=f),c||(l=a?Te(l)?l:[]:Pe(l)?l:{}),r.push(t),u.push(l),c||it(l,t,e,r,u)}}else e&&(f=e(l,t),typeof f=="undefined"&&(f=t)),typeof f!="undefined"&&(l=f);n[o]=l})}function at(n,t){return n+he(Re()*(t-n+1))}function ft(e,r,u){var i=-1,f=st(),p=e?e.length:0,s=[],v=!r&&p>=b&&f===n,h=u||v?a():s;
for(v&&(h=o(h),f=t);++i<p;){var g=e[i],y=u?u(g,i,e):g;(r?!i||h[h.length-1]!==y:0>f(h,y))&&((u||v)&&h.push(y),s.push(g))}return v?(l(h.k),c(h)):u&&l(h),s}function lt(n){return function(t,e,r){var u={};e=J.createCallback(e,r,3),r=-1;var o=t?t.length:0;if(typeof o=="number")for(;++r<o;){var i=t[r];n(u,i,e(i,r,t),t)}else h(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function ct(n,t,e,r,u,o){var i=1&t,a=4&t,f=16&t,l=32&t;if(!(2&t||dt(n)))throw new ie;f&&!e.length&&(t&=-17,f=e=false),l&&!r.length&&(t&=-33,l=r=false);
var c=n&&n.__bindData__;return c&&true!==c?(c=p(c),c[2]&&(c[2]=p(c[2])),c[3]&&(c[3]=p(c[3])),!i||1&c[1]||(c[4]=u),!i&&1&c[1]&&(t|=8),!a||4&c[1]||(c[5]=o),f&&be.apply(c[2]||(c[2]=[]),e),l&&we.apply(c[3]||(c[3]=[]),r),c[1]|=t,ct.apply(null,c)):(1==t||17===t?X:et)([n,t,e,r,u,o])}function pt(n){return Be[n]}function st(){var t=(t=J.indexOf)===Wt?n:t;return t}function vt(n){return typeof n=="function"&&pe.test(n)}function ht(n){var t,e;return n&&ce.call(n)==q&&(t=n.constructor,!dt(t)||t instanceof t)?(g(n,function(n,t){e=t
}),typeof e=="undefined"||me.call(n,e)):false}function gt(n){return We[n]}function yt(n){return n&&typeof n=="object"&&typeof n.length=="number"&&ce.call(n)==D||false}function mt(n,t,e){var r=Fe(n),u=r.length;for(t=tt(t,e,3);u--&&(e=r[u],false!==t(n[e],e,n)););return n}function bt(n){var t=[];return g(n,function(n,e){dt(n)&&t.push(e)}),t.sort()}function _t(n){for(var t=-1,e=Fe(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function dt(n){return typeof n=="function"}function wt(n){return!(!n||!V[typeof n])
}function jt(n){return typeof n=="number"||n&&typeof n=="object"&&ce.call(n)==W||false}function kt(n){return typeof n=="string"||n&&typeof n=="object"&&ce.call(n)==P||false}function xt(n){for(var t=-1,e=Fe(n),r=e.length,u=Xt(r);++t<r;)u[t]=n[e[t]];return u}function Ct(n,t,e){var r=-1,u=st(),o=n?n.length:0,i=false;return e=(0>e?Ie(0,o+e):e)||0,Te(n)?i=-1<u(n,t,e):typeof o=="number"?i=-1<(kt(n)?n.indexOf(t,e):u(n,t,e)):h(n,function(n){return++r<e?void 0:!(i=n===t)}),i}function Ot(n,t,e){var r=true;t=J.createCallback(t,e,3),e=-1;
var u=n?n.length:0;if(typeof u=="number")for(;++e<u&&(r=!!t(n[e],e,n)););else h(n,function(n,e,u){return r=!!t(n,e,u)});return r}function Nt(n,t,e){var r=[];t=J.createCallback(t,e,3),e=-1;var u=n?n.length:0;if(typeof u=="number")for(;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}else h(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function It(n,t,e){t=J.createCallback(t,e,3),e=-1;var r=n?n.length:0;if(typeof r!="number"){var u;return h(n,function(n,e,r){return t(n,e,r)?(u=n,false):void 0}),u}for(;++e<r;){var o=n[e];
if(t(o,e,n))return o}}function St(n,t,e){var r=-1,u=n?n.length:0;if(t=t&&typeof e=="undefined"?t:tt(t,e,3),typeof u=="number")for(;++r<u&&false!==t(n[r],r,n););else h(n,t);return n}function Et(n,t,e){var r=n?n.length:0;if(t=t&&typeof e=="undefined"?t:tt(t,e,3),typeof r=="number")for(;r--&&false!==t(n[r],r,n););else{var u=Fe(n),r=u.length;h(n,function(n,e,o){return e=u?u[--r]:--r,t(o[e],e,o)})}return n}function Rt(n,t,e){var r=-1,u=n?n.length:0;if(t=J.createCallback(t,e,3),typeof u=="number")for(var o=Xt(u);++r<u;)o[r]=t(n[r],r,n);
else o=[],h(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function At(n,t,e){var u=-1/0,o=u;if(typeof t!="function"&&e&&e[t]===n&&(t=null),null==t&&Te(n)){e=-1;for(var i=n.length;++e<i;){var a=n[e];a>o&&(o=a)}}else t=null==t&&kt(n)?r:J.createCallback(t,e,3),St(n,function(n,e,r){e=t(n,e,r),e>u&&(u=e,o=n)});return o}function Dt(n,t,e,r){if(!n)return e;var u=3>arguments.length;t=J.createCallback(t,r,4);var o=-1,i=n.length;if(typeof i=="number")for(u&&(e=n[++o]);++o<i;)e=t(e,n[o],o,n);else h(n,function(n,r,o){e=u?(u=false,n):t(e,n,r,o)
});return e}function $t(n,t,e,r){var u=3>arguments.length;return t=J.createCallback(t,r,4),Et(n,function(n,r,o){e=u?(u=false,n):t(e,n,r,o)}),e}function Tt(n){var t=-1,e=n?n.length:0,r=Xt(typeof e=="number"?e:0);return St(n,function(n){var e=at(0,++t);r[t]=r[e],r[e]=n}),r}function Ft(n,t,e){var r;t=J.createCallback(t,e,3),e=-1;var u=n?n.length:0;if(typeof u=="number")for(;++e<u&&!(r=t(n[e],e,n)););else h(n,function(n,e,u){return!(r=t(n,e,u))});return!!r}function Bt(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=-1;
for(t=J.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[0]:v;return p(n,0,Se(Ie(0,r),u))}function Wt(t,e,r){if(typeof r=="number"){var u=t?t.length:0;r=0>r?Ie(0,u+r):r||0}else if(r)return r=zt(t,e),t[r]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if(typeof t!="number"&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=J.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++}else r=null==t||e?1:Ie(0,t);return p(n,r)}function zt(n,t,e,r){var u=0,o=n?n.length:u;for(e=e?J.createCallback(e,r,1):Ut,t=e(t);u<o;)r=u+o>>>1,e(n[r])<t?u=r+1:o=r;
return u}function Pt(n,t,e,r){return typeof t!="boolean"&&null!=t&&(r=e,e=typeof t!="function"&&r&&r[t]===n?null:t,t=false),null!=e&&(e=J.createCallback(e,r,3)),ft(n,t,e)}function Kt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?At(Ve(n,"length")):0,r=Xt(0>e?0:e);++t<e;)r[t]=Ve(n,t);return r}function Lt(n,t){var e=-1,r=n?n.length:0,u={};for(t||!r||Te(n[0])||(t=[]);++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?ct(n,17,p(arguments,2),null,t):ct(n,1,null,null,t)
}function Vt(n,t,e){function r(){c&&ve(c),i=c=p=v,(g||h!==t)&&(s=Ue(),a=n.apply(l,o),c||i||(o=l=null))}function u(){var e=t-(Ue()-f);0<e?c=_e(u,e):(i&&ve(i),e=p,i=c=p=v,e&&(s=Ue(),a=n.apply(l,o),c||i||(o=l=null)))}var o,i,a,f,l,c,p,s=0,h=false,g=true;if(!dt(n))throw new ie;if(t=Ie(0,t)||0,true===e)var y=true,g=false;else wt(e)&&(y=e.leading,h="maxWait"in e&&(Ie(t,e.maxWait)||0),g="trailing"in e?e.trailing:g);return function(){if(o=arguments,f=Ue(),l=this,p=g&&(c||!y),false===h)var e=y&&!c;else{i||y||(s=f);var v=h-(f-s),m=0>=v;
m?(i&&(i=ve(i)),s=f,a=n.apply(l,o)):i||(i=_e(r,v))}return m&&c?c=ve(c):c||t===h||(c=_e(u,t)),e&&(m=true,a=n.apply(l,o)),!m||c||i||(o=l=null),a}}function Ut(n){return n}function Gt(n,t,e){var r=true,u=t&&bt(t);t&&(e||u.length)||(null==e&&(e=t),o=Q,t=n,n=J,u=bt(t)),false===e?r=false:wt(e)&&"chain"in e&&(r=e.chain);var o=n,i=dt(o);St(u,function(e){var u=n[e]=t[e];i&&(o.prototype[e]=function(){var t=this.__chain__,e=this.__wrapped__,i=[e];if(be.apply(i,arguments),i=u.apply(n,i),r||t){if(e===i&&wt(i))return this;
i=new o(i),i.__chain__=t}return i})})}function Ht(){}function Jt(n){return function(t){return t[n]}}function Qt(){return this.__wrapped__}e=e?Y.defaults(G.Object(),e,Y.pick(G,A)):G;var Xt=e.Array,Yt=e.Boolean,Zt=e.Date,ne=e.Function,te=e.Math,ee=e.Number,re=e.Object,ue=e.RegExp,oe=e.String,ie=e.TypeError,ae=[],fe=re.prototype,le=e._,ce=fe.toString,pe=ue("^"+oe(ce).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),se=te.ceil,ve=e.clearTimeout,he=te.floor,ge=ne.prototype.toString,ye=vt(ye=re.getPrototypeOf)&&ye,me=fe.hasOwnProperty,be=ae.push,_e=e.setTimeout,de=ae.splice,we=ae.unshift,je=function(){try{var n={},t=vt(t=re.defineProperty)&&t,e=t(n,n,n)&&t
}catch(r){}return e}(),ke=vt(ke=re.create)&&ke,xe=vt(xe=Xt.isArray)&&xe,Ce=e.isFinite,Oe=e.isNaN,Ne=vt(Ne=re.keys)&&Ne,Ie=te.max,Se=te.min,Ee=e.parseInt,Re=te.random,Ae={};Ae[$]=Xt,Ae[T]=Yt,Ae[F]=Zt,Ae[B]=ne,Ae[q]=re,Ae[W]=ee,Ae[z]=ue,Ae[P]=oe,Q.prototype=J.prototype;var De=J.support={};De.funcDecomp=!vt(e.a)&&E.test(s),De.funcNames=typeof ne.name=="string",J.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:J}},ke||(nt=function(){function n(){}return function(t){if(wt(t)){n.prototype=t;
var r=new n;n.prototype=null}return r||e.Object()}}());var $e=je?function(n,t){M.value=t,je(n,"__bindData__",M)}:Ht,Te=xe||function(n){return n&&typeof n=="object"&&typeof n.length=="number"&&ce.call(n)==$||false},Fe=Ne?function(n){return wt(n)?Ne(n):[]}:H,Be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},We=_t(Be),qe=ue("("+Fe(We).join("|")+")","g"),ze=ue("["+Fe(Be).join("")+"]","g"),Pe=ye?function(n){if(!n||ce.call(n)!=q)return false;var t=n.valueOf,e=vt(t)&&(e=ye(t))&&ye(e);return e?n==e||ye(n)==e:ht(n)
}:ht,Ke=lt(function(n,t,e){me.call(n,e)?n[e]++:n[e]=1}),Le=lt(function(n,t,e){(me.call(n,e)?n[e]:n[e]=[]).push(t)}),Me=lt(function(n,t,e){n[e]=t}),Ve=Rt,Ue=vt(Ue=Zt.now)&&Ue||function(){return(new Zt).getTime()},Ge=8==Ee(d+"08")?Ee:function(n,t){return Ee(kt(n)?n.replace(I,""):n,t||0)};return J.after=function(n,t){if(!dt(t))throw new ie;return function(){return 1>--n?t.apply(this,arguments):void 0}},J.assign=U,J.at=function(n){for(var t=arguments,e=-1,r=ut(t,true,false,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Xt(t);++e<t;)u[e]=n[r[e]];
return u},J.bind=Mt,J.bindAll=function(n){for(var t=1<arguments.length?ut(arguments,true,false,1):bt(n),e=-1,r=t.length;++e<r;){var u=t[e];n[u]=ct(n[u],1,null,null,n)}return n},J.bindKey=function(n,t){return 2<arguments.length?ct(t,19,p(arguments,2),null,n):ct(t,3,null,null,n)},J.chain=function(n){return n=new Q(n),n.__chain__=true,n},J.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},J.compose=function(){for(var n=arguments,t=n.length;t--;)if(!dt(n[t]))throw new ie;
return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},J.constant=function(n){return function(){return n}},J.countBy=Ke,J.create=function(n,t){var e=nt(n);return t?U(e,t):e},J.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return tt(n,t,e);if("object"!=r)return Jt(n);var u=Fe(n),o=u[0],i=n[o];return 1!=u.length||i!==i||wt(i)?function(t){for(var e=u.length,r=false;e--&&(r=ot(t[u[e]],n[u[e]],null,true)););return r}:function(n){return n=n[o],i===n&&(0!==i||1/i==1/n)
}},J.curry=function(n,t){return t=typeof t=="number"?t:+t||n.length,ct(n,4,null,null,null,t)},J.debounce=Vt,J.defaults=_,J.defer=function(n){if(!dt(n))throw new ie;var t=p(arguments,1);return _e(function(){n.apply(v,t)},1)},J.delay=function(n,t){if(!dt(n))throw new ie;var e=p(arguments,2);return _e(function(){n.apply(v,e)},t)},J.difference=function(n){return rt(n,ut(arguments,true,true,1))},J.filter=Nt,J.flatten=function(n,t,e,r){return typeof t!="boolean"&&null!=t&&(r=e,e=typeof t!="function"&&r&&r[t]===n?null:t,t=false),null!=e&&(n=Rt(n,e,r)),ut(n,t)
},J.forEach=St,J.forEachRight=Et,J.forIn=g,J.forInRight=function(n,t,e){var r=[];g(n,function(n,t){r.push(t,n)});var u=r.length;for(t=tt(t,e,3);u--&&false!==t(r[u--],r[u],n););return n},J.forOwn=h,J.forOwnRight=mt,J.functions=bt,J.groupBy=Le,J.indexBy=Me,J.initial=function(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=u;for(t=J.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;return p(n,0,Se(Ie(0,u-r),u))},J.intersection=function(){for(var e=[],r=-1,u=arguments.length,i=a(),f=st(),p=f===n,s=a();++r<u;){var v=arguments[r];
(Te(v)||yt(v))&&(e.push(v),i.push(p&&v.length>=b&&o(r?e[r]:s)))}var p=e[0],h=-1,g=p?p.length:0,y=[];n:for(;++h<g;){var m=i[0],v=p[h];if(0>(m?t(m,v):f(s,v))){for(r=u,(m||s).push(v);--r;)if(m=i[r],0>(m?t(m,v):f(e[r],v)))continue n;y.push(v)}}for(;u--;)(m=i[u])&&c(m);return l(i),l(s),y},J.invert=_t,J.invoke=function(n,t){var e=p(arguments,2),r=-1,u=typeof t=="function",o=n?n.length:0,i=Xt(typeof o=="number"?o:0);return St(n,function(n){i[++r]=(u?t:n[t]).apply(n,e)}),i},J.keys=Fe,J.map=Rt,J.mapValues=function(n,t,e){var r={};
return t=J.createCallback(t,e,3),h(n,function(n,e,u){r[e]=t(n,e,u)}),r},J.max=At,J.memoize=function(n,t){function e(){var r=e.cache,u=t?t.apply(this,arguments):m+arguments[0];return me.call(r,u)?r[u]:r[u]=n.apply(this,arguments)}if(!dt(n))throw new ie;return e.cache={},e},J.merge=function(n){var t=arguments,e=2;if(!wt(n))return n;if("number"!=typeof t[2]&&(e=t.length),3<e&&"function"==typeof t[e-2])var r=tt(t[--e-1],t[e--],2);else 2<e&&"function"==typeof t[e-1]&&(r=t[--e]);for(var t=p(arguments,1,e),u=-1,o=a(),i=a();++u<e;)it(n,t[u],r,o,i);
return l(o),l(i),n},J.min=function(n,t,e){var u=1/0,o=u;if(typeof t!="function"&&e&&e[t]===n&&(t=null),null==t&&Te(n)){e=-1;for(var i=n.length;++e<i;){var a=n[e];a<o&&(o=a)}}else t=null==t&&kt(n)?r:J.createCallback(t,e,3),St(n,function(n,e,r){e=t(n,e,r),e<u&&(u=e,o=n)});return o},J.omit=function(n,t,e){var r={};if(typeof t!="function"){var u=[];g(n,function(n,t){u.push(t)});for(var u=rt(u,ut(arguments,true,false,1)),o=-1,i=u.length;++o<i;){var a=u[o];r[a]=n[a]}}else t=J.createCallback(t,e,3),g(n,function(n,e,u){t(n,e,u)||(r[e]=n)
});return r},J.once=function(n){var t,e;if(!dt(n))throw new ie;return function(){return t?e:(t=true,e=n.apply(this,arguments),n=null,e)}},J.pairs=function(n){for(var t=-1,e=Fe(n),r=e.length,u=Xt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u},J.partial=function(n){return ct(n,16,p(arguments,1))},J.partialRight=function(n){return ct(n,32,null,p(arguments,1))},J.pick=function(n,t,e){var r={};if(typeof t!="function")for(var u=-1,o=ut(arguments,true,false,1),i=wt(n)?o.length:0;++u<i;){var a=o[u];a in n&&(r[a]=n[a])
}else t=J.createCallback(t,e,3),g(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},J.pluck=Ve,J.property=Jt,J.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,i=t[e];++o<u;)n[o]===i&&(de.call(n,o--,1),u--);return n},J.range=function(n,t,e){n=+n||0,e=typeof e=="number"?e:+e||1,null==t&&(t=n,n=0);var r=-1;t=Ie(0,se((t-n)/(e||1)));for(var u=Xt(t);++r<t;)u[r]=n,n+=e;return u},J.reject=function(n,t,e){return t=J.createCallback(t,e,3),Nt(n,function(n,e,r){return!t(n,e,r)
})},J.remove=function(n,t,e){var r=-1,u=n?n.length:0,o=[];for(t=J.createCallback(t,e,3);++r<u;)e=n[r],t(e,r,n)&&(o.push(e),de.call(n,r--,1),u--);return o},J.rest=qt,J.shuffle=Tt,J.sortBy=function(n,t,e){var r=-1,o=Te(t),i=n?n.length:0,p=Xt(typeof i=="number"?i:0);for(o||(t=J.createCallback(t,e,3)),St(n,function(n,e,u){var i=p[++r]=f();o?i.m=Rt(t,function(t){return n[t]}):(i.m=a())[0]=t(n,e,u),i.n=r,i.o=n}),i=p.length,p.sort(u);i--;)n=p[i],p[i]=n.o,o||l(n.m),c(n);return p},J.tap=function(n,t){return t(n),n
},J.throttle=function(n,t,e){var r=true,u=true;if(!dt(n))throw new ie;return false===e?r=false:wt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),L.leading=r,L.maxWait=t,L.trailing=u,Vt(n,t,L)},J.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Xt(n);for(t=tt(t,e,1);++r<n;)u[r]=t(r);return u},J.toArray=function(n){return n&&typeof n.length=="number"?p(n):xt(n)},J.transform=function(n,t,e,r){var u=Te(n);if(null==e)if(u)e=[];else{var o=n&&n.constructor;e=nt(o&&o.prototype)}return t&&(t=J.createCallback(t,r,4),(u?St:h)(n,function(n,r,u){return t(e,n,r,u)
})),e},J.union=function(){return ft(ut(arguments,true,true))},J.uniq=Pt,J.values=xt,J.where=Nt,J.without=function(n){return rt(n,p(arguments,1))},J.wrap=function(n,t){return ct(t,16,[n])},J.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var e=arguments[n];if(Te(e)||yt(e))var r=r?ft(rt(r,e).concat(rt(e,r))):e}return r||[]},J.zip=Kt,J.zipObject=Lt,J.collect=Rt,J.drop=qt,J.each=St,J.eachRight=Et,J.extend=U,J.methods=bt,J.object=Lt,J.select=Nt,J.tail=qt,J.unique=Pt,J.unzip=Kt,Gt(J),J.clone=function(n,t,e,r){return typeof t!="boolean"&&null!=t&&(r=e,e=t,t=false),Z(n,t,typeof e=="function"&&tt(e,r,1))
},J.cloneDeep=function(n,t,e){return Z(n,true,typeof t=="function"&&tt(t,e,1))},J.contains=Ct,J.escape=function(n){return null==n?"":oe(n).replace(ze,pt)},J.every=Ot,J.find=It,J.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=J.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},J.findKey=function(n,t,e){var r;return t=J.createCallback(t,e,3),h(n,function(n,e,u){return t(n,e,u)?(r=e,false):void 0}),r},J.findLast=function(n,t,e){var r;return t=J.createCallback(t,e,3),Et(n,function(n,e,u){return t(n,e,u)?(r=n,false):void 0
}),r},J.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=J.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},J.findLastKey=function(n,t,e){var r;return t=J.createCallback(t,e,3),mt(n,function(n,e,u){return t(n,e,u)?(r=e,false):void 0}),r},J.has=function(n,t){return n?me.call(n,t):false},J.identity=Ut,J.indexOf=Wt,J.isArguments=yt,J.isArray=Te,J.isBoolean=function(n){return true===n||false===n||n&&typeof n=="object"&&ce.call(n)==T||false},J.isDate=function(n){return n&&typeof n=="object"&&ce.call(n)==F||false
},J.isElement=function(n){return n&&1===n.nodeType||false},J.isEmpty=function(n){var t=true;if(!n)return t;var e=ce.call(n),r=n.length;return e==$||e==P||e==D||e==q&&typeof r=="number"&&dt(n.splice)?!r:(h(n,function(){return t=false}),t)},J.isEqual=function(n,t,e,r){return ot(n,t,typeof e=="function"&&tt(e,r,2))},J.isFinite=function(n){return Ce(n)&&!Oe(parseFloat(n))},J.isFunction=dt,J.isNaN=function(n){return jt(n)&&n!=+n},J.isNull=function(n){return null===n},J.isNumber=jt,J.isObject=wt,J.isPlainObject=Pe,J.isRegExp=function(n){return n&&typeof n=="object"&&ce.call(n)==z||false
},J.isString=kt,J.isUndefined=function(n){return typeof n=="undefined"},J.lastIndexOf=function(n,t,e){var r=n?n.length:0;for(typeof e=="number"&&(r=(0>e?Ie(0,r+e):Se(e,r-1))+1);r--;)if(n[r]===t)return r;return-1},J.mixin=Gt,J.noConflict=function(){return e._=le,this},J.noop=Ht,J.now=Ue,J.parseInt=Ge,J.random=function(n,t,e){var r=null==n,u=null==t;return null==e&&(typeof n=="boolean"&&u?(e=n,n=1):u||typeof t!="boolean"||(e=t,u=true)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,e||n%1||t%1?(e=Re(),Se(n+e*(t-n+parseFloat("1e-"+((e+"").length-1))),t)):at(n,t)
},J.reduce=Dt,J.reduceRight=$t,J.result=function(n,t){if(n){var e=n[t];return dt(e)?n[t]():e}},J.runInContext=s,J.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:Fe(n).length},J.some=Ft,J.sortedIndex=zt,J.template=function(n,t,e){var r=J.templateSettings;n=oe(n||""),e=_({},e,r);var u,o=_({},e.imports,r.imports),r=Fe(o),o=xt(o),a=0,f=e.interpolate||S,l="__p+='",f=ue((e.escape||S).source+"|"+f.source+"|"+(f===N?x:S).source+"|"+(e.evaluate||S).source+"|$","g");n.replace(f,function(t,e,r,o,f,c){return r||(r=o),l+=n.slice(a,c).replace(R,i),e&&(l+="'+__e("+e+")+'"),f&&(u=true,l+="';"+f+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),a=c+t.length,t
}),l+="';",f=e=e.variable,f||(e="obj",l="with("+e+"){"+l+"}"),l=(u?l.replace(w,""):l).replace(j,"$1").replace(k,"$1;"),l="function("+e+"){"+(f?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}";try{var c=ne(r,"return "+l).apply(v,o)}catch(p){throw p.source=l,p}return t?c(t):(c.source=l,c)},J.unescape=function(n){return null==n?"":oe(n).replace(qe,gt)},J.uniqueId=function(n){var t=++y;return oe(null==n?"":n)+t
},J.all=Ot,J.any=Ft,J.detect=It,J.findWhere=It,J.foldl=Dt,J.foldr=$t,J.include=Ct,J.inject=Dt,Gt(function(){var n={};return h(J,function(t,e){J.prototype[e]||(n[e]=t)}),n}(),false),J.first=Bt,J.last=function(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=u;for(t=J.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[u-1]:v;return p(n,Ie(0,u-r))},J.sample=function(n,t,e){return n&&typeof n.length!="number"&&(n=xt(n)),null==t||e?n?n[at(0,n.length-1)]:v:(n=Tt(n),n.length=Se(Ie(0,t),n.length),n)
},J.take=Bt,J.head=Bt,h(J,function(n,t){var e="sample"!==t;J.prototype[t]||(J.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r);return u||null!=t&&(!r||e&&typeof t=="function")?new Q(o,u):o})}),J.VERSION="2.4.1",J.prototype.chain=function(){return this.__chain__=true,this},J.prototype.toString=function(){return oe(this.__wrapped__)},J.prototype.value=Qt,J.prototype.valueOf=Qt,St(["join","pop","shift"],function(n){var t=ae[n];J.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);
return n?new Q(e,n):e}}),St(["push","reverse","sort","unshift"],function(n){var t=ae[n];J.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),St(["concat","slice","splice"],function(n){var t=ae[n];J.prototype[n]=function(){return new Q(t.apply(this.__wrapped__,arguments),this.__chain__)}}),J}var v,h=[],g=[],y=0,m=+new Date+"",b=75,_=40,d=" \t\x0B\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",w=/\b__p\+='';/g,j=/\b(__p\+=)''\+/g,k=/(__e\(.*?\)|\b__t\))\+'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,O=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,I=RegExp("^["+d+"]*0+(?=.$)"),S=/($^)/,E=/\bthis\b/,R=/['\n\r\t\u2028\u2029\\]/g,A="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),D="[object Arguments]",$="[object Array]",T="[object Boolean]",F="[object Date]",B="[object Function]",W="[object Number]",q="[object Object]",z="[object RegExp]",P="[object String]",K={};
K[B]=false,K[D]=K[$]=K[T]=K[F]=K[W]=K[q]=K[z]=K[P]=true;var L={leading:false,maxWait:0,trailing:false},M={configurable:false,enumerable:false,value:null,writable:false},V={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false},U={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},G=V[typeof window]&&window||this,H=V[typeof exports]&&exports&&!exports.nodeType&&exports,J=V[typeof module]&&module&&!module.nodeType&&module,Q=J&&J.exports===H&&H,X=V[typeof global]&&global;!X||X.global!==X&&X.window!==X||(G=X);
var Y=s();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(G._=Y, define(function(){return Y})):H&&J?Q?(J.exports=Y)._=Y:H._=Y:G._=Y}).call(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],13:[function(require,module,exports){
/*! 1.6.12 */
!function(){var a=function(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1},b=function(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])};if(window.XMLHttpRequest){if(!window.FormData||window.FileAPI&&FileAPI.forceLoad){var c=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};b("open",function(a){return function(b,d,e){c(this),this.__url=d;try{a.apply(this,[b,d,e])}catch(f){f.message.indexOf("Access is denied")>-1&&a.apply(this,[b,"_fix_for_ie_crossdomain__",e])}}}),b("getResponseHeader",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),b("getAllResponseHeaders",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),b("abort",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),b("setRequestHeader",function(a){return function(b,d){if("__setXHR_"===b){c(this);var e=d(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=d,a.apply(this,arguments)}}),b("send",function(b){return function(){var c=this;if(arguments[0]&&arguments[0].__isShim){var d=arguments[0],e={url:c.__url,jsonp:!1,cache:!0,complete:function(a,b){c.__completed=!0,!a&&c.__listeners.load&&c.__listeners.load({type:"load",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),!a&&c.__listeners.loadend&&c.__listeners.loadend({type:"loadend",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),"abort"===a&&c.__listeners.abort&&c.__listeners.abort({type:"abort",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),void 0!==b.status&&Object.defineProperty(c,"status",{get:function(){return 0==b.status&&a&&"abort"!==a?500:b.status}}),void 0!==b.statusText&&Object.defineProperty(c,"statusText",{get:function(){return b.statusText}}),Object.defineProperty(c,"readyState",{get:function(){return 4}}),void 0!==b.response&&Object.defineProperty(c,"response",{get:function(){return b.response}});var d=b.responseText||(a&&0==b.status&&"abort"!==a?a:void 0);Object.defineProperty(c,"responseText",{get:function(){return d}}),Object.defineProperty(c,"response",{get:function(){return d}}),a&&Object.defineProperty(c,"err",{get:function(){return a}}),c.__fileApiXHR=b,c.onreadystatechange&&c.onreadystatechange()},fileprogress:function(a){if(a.target=c,c.__listeners.progress&&c.__listeners.progress(a),c.__total=a.total,c.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){c.__completed||(c.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},1e4)}},headers:c.__requestHeaders};e.data={},e.files={};for(var f=0;f<d.data.length;f++){var g=d.data[f];null!=g.val&&null!=g.val.name&&null!=g.val.size&&null!=g.val.type?e.files[g.key]=g.val:e.data[g.key]=g.val}setTimeout(function(){if(!a())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';c.__fileApiXHR=FileAPI.upload(e)},1)}else b.apply(c,arguments)}})}else b("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}});window.XMLHttpRequest.__isShim=!0}if(!window.FormData||window.FileAPI&&FileAPI.forceLoad){var d=function(b){if(!a())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var c=angular.element(b);if(!(c.attr("disabled")||c.hasClass("js-fileapi-wrapper")||null==b.getAttribute("ng-file-select")&&null==b.getAttribute("data-ng-file-select")))if(FileAPI.wrapInsideDiv){var d=document.createElement("div");d.innerHTML='<div class="js-fileapi-wrapper" style="position:relative; overflow:hidden"></div>',d=d.firstChild;var e=b.parentNode;e.insertBefore(d,b),e.removeChild(b),d.appendChild(b)}else c.addClass("js-fileapi-wrapper"),c.parent()[0].__file_click_fn_delegate_&&((""===c.parent().css("position")||"static"===c.parent().css("position"))&&c.parent().css("position","relative"),c.css("top",0).css("bottom",0).css("left",0).css("right",0).css("width","100%").css("height","100%").css("padding",0).css("margin",0),c.parent().unbind("click",c.parent()[0].__file_click_fn_delegate_))},e=function(a){return function(b){for(var c=FileAPI.getFiles(b),d=0;d<c.length;d++)void 0===c[d].size&&(c[d].size=0),void 0===c[d].name&&(c[d].name="file"),void 0===c[d].type&&(c[d].type="undefined");b.target||(b.target={}),b.target.files=c,b.target.files!=c&&(b.__files_=c),(b.__files_||b.target.files).item=function(a){return(b.__files_||b.target.files)[a]||null},a&&a.apply(this,[b])}},f=function(a,b){return("change"===b.toLowerCase()||"onchange"===b.toLowerCase())&&"file"==a.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=function(a){return function(b,c,g,h){f(this,b)?(d(this),a.apply(this,[b,e(c),g,h])):a.apply(this,[b,c,g,h])}}(HTMLInputElement.prototype.addEventListener)),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=function(a){return function(b,c){f(this,b)?(d(this),window.jQuery?angular.element(this).bind("change",e(null)):a.apply(this,[b,e(c)])):a.apply(this,[b,c])}}(HTMLInputElement.prototype.attachEvent)),window.FormData=FormData=function(){return{append:function(a,b,c){this.data.push({key:a,val:b,name:c})},data:[],__isShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var b,c,d,e,f,g=document.createElement("script"),h=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)b=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)c=window.FileAPI.jsPath;else for(d=0;d<h.length;d++)if(f=h[d].src,e=f.indexOf("angular-file-upload-shim.js"),-1==e&&(e=f.indexOf("angular-file-upload-shim.min.js")),e>-1){c=f.substring(0,e);break}null==FileAPI.staticPath&&(FileAPI.staticPath=c),g.setAttribute("src",b||c+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(g),FileAPI.hasFlash=a()}}(),FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){if(b||(b=!0,a.onloadstart&&this.onloadstart(c("loadstart",d))),"load"===d.type){a.onloadend&&a.onloadend(c("loadend",d));var e=c("load",d);a.onload&&a.onload(e),a.dispatchEvent(e)}else if("progress"===d.type){var e=c("progress",d);a.onprogress&&a.onprogress(e),a.dispatchEvent(e)}else{var e=c("error",d);a.onerror&&a.onerror(e),a.dispatchEvent(e)}};this.readAsArrayBuffer=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsBinaryString=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}})}();
},{}],14:[function(require,module,exports){
/*! 1.6.12 */
!function(){var a=angular.module("angularFileUpload",[]);a.service("$upload",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{},d.transformRequest=d.transformRequest||function(b,c){return window.ArrayBuffer&&b instanceof window.ArrayBuffer?b:a.defaults.transformRequest[0](b,c)};var e=b.defer();window.XMLHttpRequest.__isShim&&(d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){e.notify(a)},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&e.notify(a)},!1))}}),a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)});var f=e.promise;return f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(b){b.headers=b.headers||{},b.headers["Content-Type"]=void 0,b.transformRequest=b.transformRequest||a.defaults.transformRequest;var c=new FormData,e=b.transformRequest,f=b.data;return b.transformRequest=function(a,c){if(f)if(b.formDataAppender)for(var d in f){var g=f[d];b.formDataAppender(a,d,g)}else for(var d in f){var g=f[d];if("function"==typeof e)g=e(g,c);else for(var h=0;h<e.length;h++){var i=e[h];"function"==typeof i&&(g=i(g,c))}a.append(d,g)}if(null!=b.file){var j=b.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(b.file))for(var k="[object String]"===Object.prototype.toString.call(j),h=0;h<b.file.length;h++)a.append(k?j:j[h],b.file[h],b.fileName&&b.fileName[h]||b.file[h].name);else a.append(j,b.file,b.fileName||b.file.name)}return a},b.data=c,d(b)},this.http=function(a){return d(a)}}]),a.directive("ngFileSelect",["$parse","$timeout",function(a,b){return function(c,d,e){var f=a(e.ngFileSelect);if("input"!==d[0].tagName.toLowerCase()||"file"!==(d.attr("type")&&d.attr("type").toLowerCase())){for(var g=angular.element('<input type="file">'),h=d[0].attributes,i=0;i<h.length;i++)"type"!==h[i].name.toLowerCase()&&g.attr(h[i].name,h[i].value);e.multiple&&g.attr("multiple","true"),g.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",0).css("overflow","hidden"),g.attr("__wrapper_for_parent_",!0),d.append(g),d[0].__file_click_fn_delegate_=function(){g[0].click()},d.bind("click",d[0].__file_click_fn_delegate_),d.css("overflow","hidden"),d=g}d.bind("change",function(a){var d,e,g=[];if(d=a.__files_||a.target.files,null!=d)for(e=0;e<d.length;e++)g.push(d.item(e));b(function(){f(c,{$files:g,$event:a})})})}}]),a.directive("ngFileDropAvailable",["$parse","$timeout",function(a,b){return function(c,d,e){if("draggable"in document.createElement("span")){var f=a(e.ngFileDropAvailable);b(function(){f(c)})}}}]),a.directive("ngFileDrop",["$parse","$timeout","$location",function(a,b,c){return function(d,e,f){function g(a){return/^[\000-\177]*$/.test(a)}function h(a,d){var e=[],f=a.dataTransfer.items;if(f&&f.length>0&&f[0].webkitGetAsEntry&&"file"!=c.protocol()&&f[0].webkitGetAsEntry().isDirectory)for(var h=0;h<f.length;h++){var j=f[h].webkitGetAsEntry();null!=j&&(g(j.name)?i(e,j):f[h].webkitGetAsEntry().isDirectory||e.push(f[h].getAsFile()))}else{var k=a.dataTransfer.files;if(null!=k)for(var h=0;h<k.length;h++)e.push(k.item(h))}!function m(a){b(function(){l?m(10):d(e)},a||0)}()}function i(a,b,c){if(null!=b)if(b.isDirectory){var d=b.createReader();l++,d.readEntries(function(d){for(var e=0;e<d.length;e++)i(a,d[e],(c?c:"")+b.name+"/");l--})}else l++,b.file(function(b){l--,b._relativePath=(c?c:"")+b.name,a.push(b)})}if("draggable"in document.createElement("span")){var j=null;e[0].addEventListener("dragover",function(c){if(c.preventDefault(),b.cancel(j),!e[0].__drag_over_class_)if(f.ngFileDragOverClass&&f.ngFileDragOverClass.search(/\) *$/)>-1){var g=a(f.ngFileDragOverClass)(d,{$event:c});e[0].__drag_over_class_=g}else e[0].__drag_over_class_=f.ngFileDragOverClass||"dragover";e.addClass(e[0].__drag_over_class_)},!1),e[0].addEventListener("dragenter",function(a){a.preventDefault()},!1),e[0].addEventListener("dragleave",function(){j=b(function(){e.removeClass(e[0].__drag_over_class_),e[0].__drag_over_class_=null},f.ngFileDragOverDelay||1)},!1);var k=a(f.ngFileDrop);e[0].addEventListener("drop",function(a){a.preventDefault(),e.removeClass(e[0].__drag_over_class_),e[0].__drag_over_class_=null,h(a,function(b){k(d,{$files:b,$event:a})})},!1);var l=0}}}])}();
},{}],15:[function(require,module,exports){
(function (global){

; require("/home/victor/workspace/kontapp/app/scripts/angular-index.js");
_ = global._ = require("/home/victor/workspace/kontapp/app/scripts/bower_components/lodash/dist/lodash.min.js");
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/**
 * Restful Resources service for AngularJS apps
 * @version v1.4.0 - 2014-04-25 * @link https://github.com/mgonto/restangular
 * @author Martin Gontovnikas <martin@gon.to>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(){var a=angular.module("restangular",[]);a.provider("Restangular",function(){var a={};a.init=function(a,b){function c(a,b,c,d){var e={};return _.each(_.keys(d),function(f){var g=d[f];g.params=_.extend({},g.params,a.defaultRequestParams[g.method.toLowerCase()]),_.isEmpty(g.params)&&delete g.params,e[f]=a.isSafe(g.method)?function(){return b(_.extend(g,{url:c}))}:function(a){return b(_.extend(g,{url:c,data:a}))}}),e}a.configuration=b;var d=["get","head","options","trace","getlist"];b.isSafe=function(a){return _.contains(d,a.toLowerCase())};var e=/^https?:\/\//i;b.isAbsoluteUrl=function(a){return _.isUndefined(b.absoluteUrl)||_.isNull(b.absoluteUrl)?a&&e.test(a):b.absoluteUrl},b.absoluteUrl=_.isUndefined(b.absoluteUrl)?!0:b.absoluteUrl,a.setSelfLinkAbsoluteUrl=function(a){b.absoluteUrl=a},b.baseUrl=_.isUndefined(b.baseUrl)?"":b.baseUrl,a.setBaseUrl=function(a){return b.baseUrl=/\/$/.test(a)?a.substring(0,a.length-1):a,this},b.extraFields=b.extraFields||[],a.setExtraFields=function(a){return b.extraFields=a,this},b.defaultHttpFields=b.defaultHttpFields||{},a.setDefaultHttpFields=function(a){return b.defaultHttpFields=a,this},b.withHttpValues=function(a,c){return _.defaults(c,a,b.defaultHttpFields)},b.encodeIds=_.isUndefined(b.encodeIds)?!0:b.encodeIds,a.setEncodeIds=function(a){b.encodeIds=a},b.defaultRequestParams=b.defaultRequestParams||{get:{},post:{},put:{},remove:{},common:{}},a.setDefaultRequestParams=function(a,c){var d=[],e=c||a;return _.isUndefined(c)?d.push("common"):_.isArray(a)?d=a:d.push(a),_.each(d,function(a){b.defaultRequestParams[a]=e}),this},a.requestParams=b.defaultRequestParams,b.defaultHeaders=b.defaultHeaders||{},a.setDefaultHeaders=function(c){return b.defaultHeaders=c,a.defaultHeaders=b.defaultHeaders,this},a.defaultHeaders=b.defaultHeaders,b.methodOverriders=b.methodOverriders||[],a.setMethodOverriders=function(a){var c=_.extend([],a);return b.isOverridenMethod("delete",c)&&c.push("remove"),b.methodOverriders=c,this},b.jsonp=_.isUndefined(b.jsonp)?!1:b.jsonp,a.setJsonp=function(a){b.jsonp=a},b.isOverridenMethod=function(a,c){var d=c||b.methodOverriders;return!_.isUndefined(_.find(d,function(b){return b.toLowerCase()===a.toLowerCase()}))},b.urlCreator=b.urlCreator||"path",a.setUrlCreator=function(a){if(!_.has(b.urlCreatorFactory,a))throw new Error("URL Path selected isn't valid");return b.urlCreator=a,this},b.restangularFields=b.restangularFields||{id:"id",route:"route",parentResource:"parentResource",restangularCollection:"restangularCollection",cannonicalId:"__cannonicalId",etag:"restangularEtag",selfLink:"href",get:"get",getList:"getList",put:"put",post:"post",remove:"remove",head:"head",trace:"trace",options:"options",patch:"patch",getRestangularUrl:"getRestangularUrl",getRequestedUrl:"getRequestedUrl",putElement:"putElement",addRestangularMethod:"addRestangularMethod",getParentList:"getParentList",clone:"clone",ids:"ids",httpConfig:"_$httpConfig",reqParams:"reqParams",one:"one",all:"all",several:"several",oneUrl:"oneUrl",allUrl:"allUrl",customPUT:"customPUT",customPOST:"customPOST",customDELETE:"customDELETE",customGET:"customGET",customGETLIST:"customGETLIST",customOperation:"customOperation",doPUT:"doPUT",doPOST:"doPOST",doDELETE:"doDELETE",doGET:"doGET",doGETLIST:"doGETLIST",fromServer:"fromServer",withConfig:"withConfig",withHttpConfig:"withHttpConfig",singleOne:"singleOne",plain:"plain",save:"save"},a.setRestangularFields=function(a){return b.restangularFields=_.extend(b.restangularFields,a),this},b.isRestangularized=function(a){return!!a[b.restangularFields.one]||!!a[b.restangularFields.all]},b.setFieldToElem=function(a,b,c){var d=a.split("."),e=b;return _.each(_.initial(d),function(a){e[a]={},e=e[a]}),e[_.last(d)]=c,this},b.getFieldFromElem=function(a,b){var c=a.split("."),d=b;return _.each(c,function(a){d&&(d=d[a])}),angular.copy(d)},b.setIdToElem=function(a,c){return b.setFieldToElem(b.restangularFields.id,a,c),this},b.getIdFromElem=function(a){return b.getFieldFromElem(b.restangularFields.id,a)},b.isValidId=function(a){return""!==a&&!_.isUndefined(a)&&!_.isNull(a)},b.setUrlToElem=function(a,c){return b.setFieldToElem(b.restangularFields.selfLink,a,c),this},b.getUrlFromElem=function(a){return b.getFieldFromElem(b.restangularFields.selfLink,a)},b.useCannonicalId=_.isUndefined(b.useCannonicalId)?!1:b.useCannonicalId,a.setUseCannonicalId=function(a){return b.useCannonicalId=a,this},b.getCannonicalIdFromElem=function(a){var c=a[b.restangularFields.cannonicalId],d=b.isValidId(c)?c:b.getIdFromElem(a);return d},b.responseInterceptors=b.responseInterceptors||[],b.defaultResponseInterceptor=function(a){return a},b.responseExtractor=function(a,c,d,e,f,g){var h=angular.copy(b.responseInterceptors);h.push(b.defaultResponseInterceptor);var i=a;return _.each(h,function(a){i=a(i,c,d,e,f,g)}),i},a.addResponseInterceptor=function(a){return b.responseInterceptors.push(a),this},a.setResponseInterceptor=a.addResponseInterceptor,a.setResponseExtractor=a.addResponseInterceptor,b.requestInterceptors=b.requestInterceptors||[],b.defaultInterceptor=function(a,b,c,d,e,f,g){return{element:a,headers:e,params:f,httpConfig:g}},b.fullRequestInterceptor=function(a,c,d,e,f,g,h){var i=angular.copy(b.requestInterceptors),j=b.defaultInterceptor(a,c,d,e,f,g,h);return _.reduce(i,function(a,b){return _.extend(a,b(a.element,c,d,e,a.headers,a.params,a.httpConfig))},j)},a.addRequestInterceptor=function(a){return b.requestInterceptors.push(function(b,c,d,e,f,g,h){return{headers:f,params:g,element:a(b,c,d,e),httpConfig:h}}),this},a.setRequestInterceptor=a.addRequestInterceptor,a.addFullRequestInterceptor=function(a){return b.requestInterceptors.push(a),this},a.setFullRequestInterceptor=a.addFullRequestInterceptor,b.errorInterceptor=b.errorInterceptor||function(){},a.setErrorInterceptor=function(a){return b.errorInterceptor=a,this},b.onBeforeElemRestangularized=b.onBeforeElemRestangularized||function(a){return a},a.setOnBeforeElemRestangularized=function(a){return b.onBeforeElemRestangularized=a,this},b.onElemRestangularized=b.onElemRestangularized||function(a){return a},a.setOnElemRestangularized=function(a){return b.onElemRestangularized=a,this},b.shouldSaveParent=b.shouldSaveParent||function(){return!0},a.setParentless=function(a){return _.isArray(a)?b.shouldSaveParent=function(b){return!_.contains(a,b)}:_.isBoolean(a)&&(b.shouldSaveParent=function(){return!a}),this},b.suffix=_.isUndefined(b.suffix)?null:b.suffix,a.setRequestSuffix=function(a){return b.suffix=a,this},b.transformers=b.transformers||{},a.addElementTransformer=function(c,d,e){var f=null,g=null;2===arguments.length?g=d:(g=e,f=d);var h=b.transformers[c];return h||(h=b.transformers[c]=[]),h.push(function(a,b){return _.isNull(f)||a==f?g(b):b}),a},a.extendCollection=function(b,c){return a.addElementTransformer(b,!0,c)},a.extendModel=function(b,c){return a.addElementTransformer(b,!1,c)},b.transformElem=function(a,c,d,e,f){if(!f&&!b.transformLocalElements&&!a[b.restangularFields.fromServer])return a;var g=b.transformers[d],h=a;return g&&_.each(g,function(a){h=a(c,h)}),b.onElemRestangularized(h,c,d,e)},b.transformLocalElements=_.isUndefined(b.transformLocalElements)?!1:b.transformLocalElements,a.setTransformOnlyServerElements=function(a){b.transformLocalElements=!a},b.fullResponse=_.isUndefined(b.fullResponse)?!1:b.fullResponse,a.setFullResponse=function(a){return b.fullResponse=a,this},b.urlCreatorFactory={};var f=function(){};f.prototype.setConfig=function(a){return this.config=a,this},f.prototype.parentsArray=function(a){for(var b=[];a;)b.push(a),a=a[this.config.restangularFields.parentResource];return b.reverse()},f.prototype.resource=function(a,d,e,f,g,h,i,j){var k=_.defaults(g||{},this.config.defaultRequestParams.common),l=_.defaults(f||{},this.config.defaultHeaders);i&&(b.isSafe(j)?l["If-None-Match"]=i:l["If-Match"]=i);var m=this.base(a);if(h){var n="";/\/$/.test(m)||(n+="/"),n+=h,m+=n}return this.config.suffix&&-1===m.indexOf(this.config.suffix,m.length-this.config.suffix.length)&&!this.config.getUrlFromElem(a)&&(m+=this.config.suffix),a[this.config.restangularFields.httpConfig]=void 0,c(this.config,d,m,{getList:this.config.withHttpValues(e,{method:"GET",params:k,headers:l}),get:this.config.withHttpValues(e,{method:"GET",params:k,headers:l}),jsonp:this.config.withHttpValues(e,{method:"jsonp",params:k,headers:l}),put:this.config.withHttpValues(e,{method:"PUT",params:k,headers:l}),post:this.config.withHttpValues(e,{method:"POST",params:k,headers:l}),remove:this.config.withHttpValues(e,{method:"DELETE",params:k,headers:l}),head:this.config.withHttpValues(e,{method:"HEAD",params:k,headers:l}),trace:this.config.withHttpValues(e,{method:"TRACE",params:k,headers:l}),options:this.config.withHttpValues(e,{method:"OPTIONS",params:k,headers:l}),patch:this.config.withHttpValues(e,{method:"PATCH",params:k,headers:l})})};var g=function(){};g.prototype=new f,g.prototype.base=function(a){var c=this;return _.reduce(this.parentsArray(a),function(a,d){var e,f=c.config.getUrlFromElem(d);if(f){if(c.config.isAbsoluteUrl(f))return f;e=f}else if(e=d[c.config.restangularFields.route],d[c.config.restangularFields.restangularCollection]){var g=d[c.config.restangularFields.ids];g&&(e+="/"+g.join(","))}else{var h;h=c.config.useCannonicalId?c.config.getCannonicalIdFromElem(d):c.config.getIdFromElem(d),b.isValidId(h)&&!d.singleOne&&(e+="/"+(c.config.encodeIds?encodeURIComponent(h):h))}return a.replace(/\/$/,"")+"/"+e},this.config.baseUrl)},g.prototype.fetchUrl=function(a,b){var c=this.base(a);return b&&(c+="/"+b),c},g.prototype.fetchRequestedUrl=function(a,c){function d(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function e(a,b,c){for(var e=d(a),f=0;f<e.length;f++)b.call(c,a[e[f]],e[f]);return e}function f(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}var g=this.fetchUrl(a,c),h=a[b.restangularFields.reqParams];if(!h)return g;var i=[];return e(h,function(a,b){null!=a&&void 0!=a&&(angular.isArray(a)||(a=[a]),angular.forEach(a,function(a){angular.isObject(a)&&(a=angular.toJson(a)),i.push(f(b)+"="+f(a))}))}),g+(this.config.suffix||"")+(-1===g.indexOf("?")?"?":"&")+i.join("&")},b.urlCreatorFactory.path=g};var b={};a.init(this,b),this.$get=["$http","$q",function(c,d){function e(b){function f(a,c,d,e,f){if(c[b.restangularFields.route]=d,c[b.restangularFields.getRestangularUrl]=_.bind(P.fetchUrl,P,c),c[b.restangularFields.getRequestedUrl]=_.bind(P.fetchRequestedUrl,P,c),c[b.restangularFields.addRestangularMethod]=_.bind(L,c),c[b.restangularFields.clone]=_.bind(r,c,c),c[b.restangularFields.reqParams]=_.isEmpty(e)?null:e,c[b.restangularFields.withHttpConfig]=_.bind(z,c),c[b.restangularFields.plain]=_.bind(p,c,c),c[b.restangularFields.one]=_.bind(g,c,c),c[b.restangularFields.all]=_.bind(h,c,c),c[b.restangularFields.several]=_.bind(i,c,c),c[b.restangularFields.oneUrl]=_.bind(j,c,c),c[b.restangularFields.allUrl]=_.bind(k,c,c),c[b.restangularFields.fromServer]=!!f,a&&b.shouldSaveParent(d)){var l=b.getIdFromElem(a),m=b.getUrlFromElem(a),n=_.union(_.values(_.pick(b.restangularFields,["route","singleOne","parentResource"])),b.extraFields),o=_.pick(a,n);b.isValidId(l)&&b.setIdToElem(o,l),b.isValidId(m)&&b.setUrlToElem(o,m),c[b.restangularFields.parentResource]=o}else c[b.restangularFields.parentResource]=null;return c}function g(a,c,d,e){if(_.isNumber(c)||_.isNumber(a)){var f="You're creating a Restangular entity with the number ";throw f+="instead of the route or the parent. You can't call .one(12)",new Error(f)}var g={};return b.setIdToElem(g,d),b.setFieldToElem(b.restangularFields.singleOne,g,e),s(a,g,c,!1)}function h(a,b){return t(a,[],b,!1)}function i(a,c){var d=[];return d[b.restangularFields.ids]=Array.prototype.splice.call(arguments,2),t(a,d,c,!1)}function j(a,c,d){if(!c)throw new Error("Route is mandatory when creating new Restangular objects.");var e={};return b.setUrlToElem(e,d,c),s(a,e,c,!1)}function k(a,c,d){if(!c)throw new Error("Route is mandatory when creating new Restangular objects.");var e={};return b.setUrlToElem(e,d,c),t(a,e,c,!1)}function l(a,c,d){return a.call=_.bind(m,a),a.get=_.bind(n,a),a[b.restangularFields.restangularCollection]=c,c&&(a.push=_.bind(m,a,"push")),a.$object=d,a}function m(a){var c=d.defer(),e=arguments,f={};return this.then(function(b){var d=Array.prototype.slice.call(e,1),g=b[a];g.apply(b,d),f=b,c.resolve(b)}),l(c.promise,this[b.restangularFields.restangularCollection],f)}function n(a){var c=d.defer(),e={};return this.then(function(b){e=b[a],c.resolve(e)}),l(c.promise,this[b.restangularFields.restangularCollection],e)}function o(a,c,d,e){return _.extend(e,d),b.fullResponse?a.resolve(_.extend(c,{data:d})):(a.resolve(d),void 0)}function p(a){if(_.isArray(a)){var c=[];return _.each(a,function(a){c.push(p(a))}),c}return _.omit(a,_.values(_.omit(b.restangularFields,"id")))}function q(a){a[b.restangularFields.customOperation]=_.bind(K,a),_.each(["put","post","get","delete"],function(b){_.each(["do","custom"],function(c){var d,e="delete"===b?"remove":b,f=c+b.toUpperCase();d="put"!==e&&"post"!==e?K:function(a,b,c,d,e){return _.bind(K,this)(a,c,d,e,b)},a[f]=_.bind(d,a,e)})}),a[b.restangularFields.customGETLIST]=_.bind(y,a),a[b.restangularFields.doGETLIST]=a[b.restangularFields.customGETLIST]}function r(a,c){var d=angular.copy(a,c);return s(d[b.restangularFields.parentResource],d,d[b.restangularFields.route],!0)}function s(a,c,d,e,g,h){var i=b.onBeforeElemRestangularized(c,!1,d),j=f(a,i,d,h,e);return b.useCannonicalId&&(j[b.restangularFields.cannonicalId]=b.getIdFromElem(j)),g&&(j[b.restangularFields.getParentList]=function(){return g}),j[b.restangularFields.restangularCollection]=!1,j[b.restangularFields.get]=_.bind(C,j),j[b.restangularFields.getList]=_.bind(y,j),j[b.restangularFields.put]=_.bind(E,j),j[b.restangularFields.post]=_.bind(F,j),j[b.restangularFields.remove]=_.bind(D,j),j[b.restangularFields.head]=_.bind(G,j),j[b.restangularFields.trace]=_.bind(H,j),j[b.restangularFields.options]=_.bind(I,j),j[b.restangularFields.patch]=_.bind(J,j),j[b.restangularFields.save]=_.bind(A,j),q(j),b.transformElem(j,!1,d,O,!0)}function t(a,c,d,e,g){var h=b.onBeforeElemRestangularized(c,!0,d),i=f(a,h,d,g,e);return i[b.restangularFields.restangularCollection]=!0,i[b.restangularFields.post]=_.bind(F,i,null),i[b.restangularFields.remove]=_.bind(D,i),i[b.restangularFields.head]=_.bind(G,i),i[b.restangularFields.trace]=_.bind(H,i),i[b.restangularFields.putElement]=_.bind(w,i),i[b.restangularFields.options]=_.bind(I,i),i[b.restangularFields.patch]=_.bind(J,i),i[b.restangularFields.get]=_.bind(v,i),i[b.restangularFields.getList]=_.bind(y,i,null),q(i),b.transformElem(i,!0,d,O,!0)}function u(a,b,c){var d=t(a,b,c,!1);return _.each(d,function(b){s(a,b,c,!1)}),d}function v(a,b,c){return this.customGET(a.toString(),b,c)}function w(a,c,e){var f=this,g=this[a],h=d.defer(),i=[];return i=b.transformElem(i,!0,g[b.restangularFields.route],O),g.put(c,e).then(function(b){var c=r(f);c[a]=b,i=c,h.resolve(c)},function(a){h.reject(a)}),l(h.promise,!0,i)}function x(a,c,d,e,f,g){var h=b.responseExtractor(a,c,d,e,f,g),i=f.headers("ETag");return h&&i&&(h[b.restangularFields.etag]=i),h}function y(a,e,f){var g=this,h=d.defer(),i="getList",j=P.fetchUrl(this,a),k=a||g[b.restangularFields.route],m=b.fullRequestInterceptor(null,i,k,j,f||{},e||{},this[b.restangularFields.httpConfig]||{}),n=[];n=b.transformElem(n,!0,k,O);var p="getList";return b.jsonp&&(p="jsonp"),P.resource(this,c,m.httpConfig,m.headers,m.params,a,this[b.restangularFields.etag],i)[p]().then(function(c){var d=c.data,e=c.config.params,f=x(d,i,k,j,c,h);if((_.isUndefined(f)||""===f)&&(f=[]),!_.isArray(f))throw new Error("Response for getList SHOULD be an array and not an object or something else");var l=_.map(f,function(c){return g[b.restangularFields.restangularCollection]?s(g[b.restangularFields.parentResource],c,g[b.restangularFields.route],!0,f):s(g,c,a,!0,f)});l=_.extend(f,l),g[b.restangularFields.restangularCollection]?o(h,c,t(g[b.restangularFields.parentResource],l,g[b.restangularFields.route],!0,e),n):o(h,c,t(g,l,a,!0,e),n)},function(a){304===a.status&&g[b.restangularFields.restangularCollection]?o(h,a,g,n):b.errorInterceptor(a,h)!==!1&&h.reject(a)}),l(h.promise,!0,n)}function z(a){return this[b.restangularFields.httpConfig]=a,this}function A(a,c){return this[b.restangularFields.fromServer]?this[b.restangularFields.put](a,c):_.bind(B,this)("post",void 0,a,void 0,c)}function B(a,e,f,g,h){var i=this,j=d.defer(),k=f||{},m=e||this[b.restangularFields.route],n=P.fetchUrl(this,e),q=g||this,r=q[b.restangularFields.etag]||("post"!=a?this[b.restangularFields.etag]:null);_.isObject(q)&&b.isRestangularized(q)&&(q=p(q));var t=b.fullRequestInterceptor(q,a,m,n,h||{},k||{},this[b.restangularFields.httpConfig]||{}),u={};u=b.transformElem(u,!1,m,O);var v=function(c){var d=c.data,f=c.config.params,g=x(d,a,m,n,c,j);g?"post"!==a||i[b.restangularFields.restangularCollection]?(data=s(i[b.restangularFields.parentResource],g,i[b.restangularFields.route],!0,null,f),data[b.restangularFields.singleOne]=i[b.restangularFields.singleOne],o(j,c,data,u)):o(j,c,s(i,g,e,!0,null,f),u):o(j,c,void 0,u)},w=function(c){304===c.status&&b.isSafe(a)?o(j,c,i,u):b.errorInterceptor(c,j)!==!1&&j.reject(c)},y=a,z=_.extend({},t.headers),A=b.isOverridenMethod(a);return A?(y="post",z=_.extend(z,{"X-HTTP-Method-Override":"remove"===a?"DELETE":a})):b.jsonp&&"get"===y&&(y="jsonp"),b.isSafe(a)?A?P.resource(this,c,t.httpConfig,z,t.params,e,r,y)[y]({}).then(v,w):P.resource(this,c,t.httpConfig,z,t.params,e,r,y)[y]().then(v,w):P.resource(this,c,t.httpConfig,z,t.params,e,r,y)[y](t.element).then(v,w),l(j.promise,!1,u)}function C(a,b){return _.bind(B,this)("get",void 0,a,void 0,b)}function D(a,b){return _.bind(B,this)("remove",void 0,a,void 0,b)}function E(a,b){return _.bind(B,this)("put",void 0,a,void 0,b)}function F(a,b,c,d){return _.bind(B,this)("post",a,c,b,d)}function G(a,b){return _.bind(B,this)("head",void 0,a,void 0,b)}function H(a,b){return _.bind(B,this)("trace",void 0,a,void 0,b)}function I(a,b){return _.bind(B,this)("options",void 0,a,void 0,b)}function J(a,b,c){return _.bind(B,this)("patch",void 0,b,a,c)}function K(a,b,c,d,e){return _.bind(B,this)(a,b,c,e,d)}function L(a,c,d,e,f,g){var h;h="getList"===c?_.bind(y,this,d):_.bind(K,this,c,d);var i=function(a,b,c){var d=_.defaults({params:a,headers:b,elem:c},{params:e,headers:f,elem:g});return h(d.params,d.headers,d.elem)};this[a]=b.isSafe(c)?i:function(a,b,c){return i(b,c,a)}}function M(c){var d=angular.copy(_.omit(b,"configuration"));return a.init(d,d),c(d),e(d)}function N(a,b){var c={},d=(b||O).all(a);return c.one=_.bind(g,b||O,b,a),c.post=_.bind(d.post,d),c.getList=_.bind(d.getList,d),c}var O={},P=new b.urlCreatorFactory[b.urlCreator];return P.setConfig(b),a.init(O,b),O.copy=_.bind(r,O),O.service=_.bind(N,O),O.withConfig=_.bind(M,O),O.one=_.bind(g,O,null),O.all=_.bind(h,O,null),O.several=_.bind(i,O,null),O.oneUrl=_.bind(j,O,null),O.allUrl=_.bind(k,O,null),O.stripRestangular=_.bind(p,O),O.restangularizeElement=_.bind(s,O),O.restangularizeCollection=_.bind(u,O),O}return e(b)}]})}();
; browserify_shim__define__module__export__(typeof null != "undefined" ? null : window.null);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"/home/victor/workspace/kontapp/app/scripts/angular-index.js":2,"/home/victor/workspace/kontapp/app/scripts/bower_components/lodash/dist/lodash.min.js":12}],16:[function(require,module,exports){
!function(a,b){b["true"]=a,function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,k(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=k(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),A[d])for(;j.last()&&B[j.last()];)e("",j.last());z[d]&&j.last()==d&&e("",d),h=w[d]||!!h,h||j.push(d);var i={};f.replace(o,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=j.length-1;f>=0&&j[f]!=d;f--);if(f>=0){for(e=j.length-1;e>=f;e--)c.end&&c.end(j[e]);j.length=f}}var f,h,i,j=[],k=a;for(j.last=function(){return j[j.length-1]};a;){if(h=!0,j.last()&&C[j.last()])a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+j.last()+"[^>]*>","i"),function(a,b){return b=b.replace(r,"$1").replace(t,"$1"),c.chars&&c.chars(g(b)),""}),e("",j.last());else if(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):s.test(a)?(i=a.match(s),i&&(a=a.replace(i[0],""),h=!1)):q.test(a)?(i=a.match(n),i&&(a=a.substring(i[0].length),i[0].replace(n,e),h=!1)):p.test(a)&&(i=a.match(m),i&&(a=a.substring(i[0].length),i[0].replace(m,d),h=!1)),h){f=a.indexOf("<");var u=0>f?a:a.substring(0,f);a=0>f?"":a.substring(f),c.chars&&c.chars(g(u))}if(a==k)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",a);k=a}e()}function g(a){if(!a)return"";var b=H.exec(a),c=b[1],d=b[3],e=b[2];return e&&(G.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in G?G.textContent:G.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(u,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(v,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=I(b.lowercase(d[0])),a=I(b.lowercase(d[1]));("color"===e&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/))&&(c+=e+": "+a+";")}}),c}function j(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditble"===c&&"false"===d)?!0:!1}function k(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&C[a]&&(d=a),d||D[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var k=b.lowercase(g),l="img"===a&&"src"===k||"background"===k;("style"===k&&""!==(d=i(d))||j(a,f,k,d)||F[k]===!0&&(E[k]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||D[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var l=b.$$minErr("$sanitize"),m=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,n=/^<\s*\/\s*([\w:-]+)[^>]*>/,o=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,q=/^<\s*\//,r=/<!--(.*?)-->/g,s=/<!DOCTYPE([^>]*?)>/i,t=/<!\[CDATA\[(.*?)]]>/g,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v=/([^\#-~| |!])/g,w=e("area,br,col,hr,img,wbr"),x=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=e("rp,rt"),z=b.extend({},y,x),A=b.extend({},x,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),B=b.extend({},y,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=e("script,style"),D=b.extend({},w,A,B,z),E=e("background,cite,href,longdesc,src,usemap"),F=b.extend({},E,e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),G=document.createElement("pre"),H=/^(\s*)([\s\S]*?)(\s*)$/,I=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="'),n.push(a),n.push('">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}({},function(){return this}());
},{}],17:[function(require,module,exports){
!function(a,b){b["true"]=a,angular.module("textAngularSetup",[]).value("taOptions",{toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","insertVideo"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).constant("taTranslations",{html:{buttontext:"Toggle HTML",tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unqoute selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"}}).run(["taRegisterTool","$window","taTranslations","taSelection",function(a,b,c,d){a("html",{buttontext:c.html.buttontext,tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var e=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},f=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:f,activeState:e(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1}}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){this.$editor().wrapSelection("removeFormat",null);var c=angular.element(d.getSelectionElement()),e=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};angular.forEach(c.find("ul"),e),angular.forEach(c.find("ol"),e);var f=this.$editor(),g=function(a){a=angular.element(a),a[0]!==f.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),g)};angular.forEach(c,g),"li"!==c[0].tagName.toLowerCase()&&"ol"!==c[0].tagName.toLowerCase()&&"ul"!==c[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","<p>"),b()}});var g=function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)};a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:g}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a){var d=a.match(/(\?|&)v=[^&]*/);if(d.length>0){var e="http://www.youtube.com/embed/"+d[0].substring(3),f='<img class="ta-insert-video" ta-insert-video="'+e+'" contenteditable="false" src="" allowfullscreen="true" width="300" frameborder="0" height="250"/>';return this.$editor().wrapSelection("insertHTML",f,!0)}}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:g}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:function(a,d,e){a.preventDefault(),e.displayElements.popover.css("width","435px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(a){a.preventDefault();var f=b.prompt(c.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">Open in New Window</button>');"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)}}})}]),function(){"Use Strict";function a(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function b(a,c){var d=[],e=a.children();return e.length&&angular.forEach(e,function(a){d=d.concat(b(angular.element(a),c))}),void 0!==a.attr(c)&&d.push(a),d}function c(b,c){if(!b||""===b||n.hasOwnProperty(b))throw"textAngular Error: A unique name is required for a Tool Definition";if(c.display&&(""===c.display||!a(c.display))||!c.display&&!c.buttontext&&!c.iconclass)throw'textAngular Error: Tool Definition for "'+b+'" does not have a valid display/iconclass/buttontext value';n[b]=c}var d=!1;/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent)&&(document.addEventListener("click",function(){var a=window.event.target;if(d&&null!==a){for(var b=!1,c=a;null!==c&&"html"!==c.tagName.toLowerCase()&&!b;)b="true"===c.contentEditable,c=c.parentNode;b||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),a.focus())}d=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" style="width:1px;height:1px;border:none;margin:0;padding:0;position:absolute; top: -10000; left: -10000;" unselectable="on" tabIndex="-1">'))}));var e=function(){var a,b=-1,c=window.navigator.userAgent,d=c.indexOf("MSIE "),e=c.indexOf("Trident/");if(d>0)b=parseInt(c.substring(d+5,c.indexOf(".",d)),10);else if(e>0){var f=c.indexOf("rv:");b=parseInt(c.substring(f+3,c.indexOf(".",f)),10)}return b>-1?b:a}();"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var f,g,h,i,j;if(e>8||void 0===e){var k=function(){var a=document.createElement("style");return/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent)&&a.appendChild(document.createTextNode("")),document.head.insertBefore(a,document.head.firstChild),a.sheet}();f=function(){var a=document.createElement("style");return/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent)&&a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}(),g=function(a,b){i(f,a,b)},i=function(a,b,c){var d;return a.rules?d=Math.max(a.rules.length-1,0):a.cssRules&&(d=Math.max(a.cssRules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),d},h=function(a){j(f,a)},j=function(a,b){a.removeRule?a.removeRule(b):a.deleteRule(b)},i(k,".ta-scroll-window.form-control","height: auto; min-height: 300px; overflow: auto; font-family: inherit; font-size: 100%; position: relative; padding: 0;"),i(k,".ta-root.focussed .ta-scroll-window.form-control","border-color: #66afe9; outline: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);"),i(k,".ta-editor.ta-html","min-height: 300px; height: auto; overflow: auto; font-family: inherit; font-size: 100%;"),i(k,".ta-scroll-window > .ta-bind","height: auto; min-height: 300px; padding: 6px 12px;"),i(k,".ta-root .ta-resizer-handle-overlay","z-index: 100; position: absolute; display: none;"),i(k,".ta-root .ta-resizer-handle-overlay > .ta-resizer-handle-info","position: absolute; bottom: 16px; right: 16px; border: 1px solid black; background-color: #FFF; padding: 0 4px; opacity: 0.7;"),i(k,".ta-root .ta-resizer-handle-overlay > .ta-resizer-handle-background","position: absolute; bottom: 5px; right: 5px; left: 5px; top: 5px; border: 1px solid black; background-color: rgba(0, 0, 0, 0.2);"),i(k,".ta-root .ta-resizer-handle-overlay > .ta-resizer-handle-corner","width: 10px; height: 10px; position: absolute;"),i(k,".ta-root .ta-resizer-handle-overlay > .ta-resizer-handle-corner-tl","top: 0; left: 0; border-left: 1px solid black; border-top: 1px solid black;"),i(k,".ta-root .ta-resizer-handle-overlay > .ta-resizer-handle-corner-tr","top: 0; right: 0; border-right: 1px solid black; border-top: 1px solid black;"),i(k,".ta-root .ta-resizer-handle-overlay > .ta-resizer-handle-corner-bl","bottom: 0; left: 0; border-left: 1px solid black; border-bottom: 1px solid black;"),i(k,".ta-root .ta-resizer-handle-overlay > .ta-resizer-handle-corner-br","bottom: 0; right: 0; border: 1px solid black; cursor: se-resize; background-color: white;")}var l=!1,m=angular.module("textAngular",["ngSanitize","textAngularSetup"]),n={};m.constant("taRegisterTool",c),m.value("taTools",n),m.config([function(){angular.forEach(n,function(a,b){delete n[b]})}]),m.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log",function(a,b,c,d,e,f,g,h,i,j){return{require:"?ngModel",scope:{},restrict:"EA",link:function(k,l,m,n){var o,p,q,r,s,t,u,v,w,x=m.serial?m.serial:Math.floor(1e16*Math.random()),y=m.name?m.name:"textAngularEditor"+x,z=function(a,c,d){b(function(){var b=function(){a.off(c,b),d()};a.on(c,b)},100)};w=e(m.taDefaultWrap),angular.extend(k,angular.copy(c),{wrapSelection:function(a,b,c){w(a,!1,b),c&&k["reApplyOnSelectorHandlerstaTextElement"+x](),k.displayElements.text[0].focus()},showHtml:!1}),m.taFocussedClass&&(k.classes.focussed=m.taFocussedClass),m.taTextEditorClass&&(k.classes.textEditor=m.taTextEditorClass),m.taHtmlEditorClass&&(k.classes.htmlEditor=m.taHtmlEditorClass),m.taTextEditorSetup&&(k.setup.textEditorSetup=k.$parent.$eval(m.taTextEditorSetup)),m.taHtmlEditorSetup&&(k.setup.htmlEditorSetup=k.$parent.$eval(m.taHtmlEditorSetup)),k.fileDropHandler=m.taFileDrop?k.$parent.$eval(m.taFileDrop):k.defaultFileDropHandler,u=l[0].innerHTML,l[0].innerHTML="",k.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},k.displayElements.popover.append(k.displayElements.popoverArrow),k.displayElements.popover.append(k.displayElements.popoverContainer),k.displayElements.scrollWindow.append(k.displayElements.popover),k.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),k.showPopover=function(a){k.displayElements.popover.css("display","block"),k.reflowPopover(a),i.addClass(k.displayElements.popover,"in"),z(l,"click keyup",function(){k.hidePopover()})},k.reflowPopover=function(a){k.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(k.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+"px"),k.displayElements.popover.removeClass("top").addClass("bottom")):(k.displayElements.popover.css("top",a[0].offsetTop-54+"px"),k.displayElements.popover.removeClass("bottom").addClass("top"));var b=k.displayElements.text[0].offsetWidth-k.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-k.displayElements.popover[0].offsetWidth/2;k.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),k.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},k.hidePopover=function(){i.removeClass(k.displayElements.popover,"in",function(){k.displayElements.popover.css("display",""),k.displayElements.popoverContainer.attr("style",""),k.displayElements.popoverContainer.attr("class","popover-content")})},k.displayElements.resize.overlay.append(k.displayElements.resize.background),angular.forEach(k.displayElements.resize.anchors,function(a){k.displayElements.resize.overlay.append(a)}),k.displayElements.resize.overlay.append(k.displayElements.resize.info),k.displayElements.scrollWindow.append(k.displayElements.resize.overlay),k.reflowResizeOverlay=function(a){a=angular.element(a)[0],k.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),k.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},k.showResizeOverlay=function(a){var b=function(b){var c={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:b.clientX,y:b.clientY};void 0===c.width&&(c.width=a[0].offsetWidth),void 0===c.height&&(c.height=a[0].offsetHeight),k.hidePopover();var d=c.height/c.width,e=function(b){var e={x:Math.max(0,c.width+(b.clientX-c.x)),y:Math.max(0,c.height+(b.clientY-c.y))},f=function(a,b){a=angular.element(a),"img"===a[0].tagName.toLowerCase()&&(b.height&&(a.attr("height",b.height),delete b.height),b.width&&(a.attr("width",b.width),delete b.width)),a.css(b)};if(b.shiftKey){var g=e.y/e.x;f(a,{width:d>g?e.x:e.y/d,height:d>g?e.x*d:e.y})}else f(a,{width:e.x,height:e.y});k.reflowResizeOverlay(a)};h.find("body").on("mousemove",e),z(k.displayElements.resize.overlay,"mouseup",function(){h.find("body").off("mousemove",e),k.showPopover(a)}),b.stopPropagation(),b.preventDefault()};k.displayElements.resize.anchors[3].on("mousedown",b),k.reflowResizeOverlay(a),z(l,"click",function(){k.hideResizeOverlay()})},k.hideResizeOverlay=function(){k.displayElements.resize.overlay.css("display","")},k.setup.htmlEditorSetup(k.displayElements.html),k.setup.textEditorSetup(k.displayElements.text),k.displayElements.html.attr({id:"taHtmlElement"+x,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html"}),k.displayElements.text.attr({id:"taTextElement"+x,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html"}),k.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),m.taDefaultWrap&&k.displayElements.text.attr("ta-default-wrap",m.taDefaultWrap),m.taUnsafeSanitizer&&(k.displayElements.text.attr("ta-unsafe-sanitizer",m.taUnsafeSanitizer),k.displayElements.html.attr("ta-unsafe-sanitizer",m.taUnsafeSanitizer)),k.displayElements.scrollWindow.append(k.displayElements.text),l.append(k.displayElements.scrollWindow),l.append(k.displayElements.html),k.displayElements.forminput.attr("name",y),l.append(k.displayElements.forminput),m.tabindex&&(l.removeAttr("tabindex"),k.displayElements.text.attr("tabindex",m.tabindex),k.displayElements.html.attr("tabindex",m.tabindex)),m.placeholder&&(k.displayElements.text.attr("placeholder",m.placeholder),k.displayElements.html.attr("placeholder",m.placeholder)),m.taDisabled&&(k.displayElements.text.attr("ta-readonly","disabled"),k.displayElements.html.attr("ta-readonly","disabled"),k.disabled=k.$parent.$eval(m.taDisabled),k.$parent.$watch(m.taDisabled,function(a){k.disabled=a,k.disabled?l.addClass(k.classes.disabled):l.removeClass(k.classes.disabled)})),a(k.displayElements.scrollWindow)(k),a(k.displayElements.html)(k),k.updateTaBindtaTextElement=k["updateTaBindtaTextElement"+x],k.updateTaBindtaHtmlElement=k["updateTaBindtaHtmlElement"+x],l.addClass("ta-root"),k.displayElements.scrollWindow.addClass("ta-text ta-editor "+k.classes.textEditor),k.displayElements.html.addClass("ta-html ta-editor "+k.classes.htmlEditor),k._actionRunning=!1;var A=!1;if(k.startAction=function(){return k._actionRunning=!0,g.rangy&&g.rangy.saveSelection?(A=g.rangy.saveSelection(),function(){A&&g.rangy.restoreSelection(A)}):void 0},k.endAction=function(){k._actionRunning=!1,A&&g.rangy.removeMarkers(A),A=!1,k.updateSelectedStyles(),k.showHtml||k["updateTaBindtaTextElement"+x]()},s=function(){l.addClass(k.classes.focussed),v.focus()},k.displayElements.html.on("focus",s),k.displayElements.text.on("focus",s),t=function(a){return k._actionRunning||h[0].activeElement===k.displayElements.html[0]||h[0].activeElement===k.displayElements.text[0]||(l.removeClass(k.classes.focussed),v.unfocus(),b(function(){l.triggerHandler("blur")},0)),a.preventDefault(),!1},k.displayElements.html.on("blur",t),k.displayElements.text.on("blur",t),k.queryFormatBlockState=function(a){return!k.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},k.queryCommandState=function(a){return k.showHtml?"":h[0].queryCommandState(a)},k.switchView=function(){k.showHtml=!k.showHtml,k.showHtml?b(function(){return k.displayElements.html[0].focus()},100):b(function(){return k.displayElements.text[0].focus()},100)},m.ngModel){var B=!0;n.$render=function(){if(B){B=!1;var a=k.$parent.$eval(m.ngModel);void 0!==a&&null!==a||!u||""===u||n.$setViewValue(u)}k.displayElements.forminput.val(n.$viewValue),k._elementSelectTriggered||h[0].activeElement===k.displayElements.html[0]||h[0].activeElement===k.displayElements.text[0]||(k.html=n.$viewValue||"")};var C=function(a){return m.required&&n.$setValidity("required",!(!a||""===a.trim())),a};n.$parsers.push(C),n.$formatters.push(C)}else k.displayElements.forminput.val(u),k.html=u;if(k.$watch("html",function(a,b){a!==b&&(m.ngModel&&n.$viewValue!==a&&n.$setViewValue(a),k.displayElements.forminput.val(a))}),m.taTargetToolbars)v=f.registerEditor(y,k,m.taTargetToolbars.split(","));else{var D=angular.element('<div text-angular-toolbar name="textAngularToolbar'+x+'">');m.taToolbar&&D.attr("ta-toolbar",m.taToolbar),m.taToolbarClass&&D.attr("ta-toolbar-class",m.taToolbarClass),m.taToolbarGroupClass&&D.attr("ta-toolbar-group-class",m.taToolbarGroupClass),m.taToolbarButtonClass&&D.attr("ta-toolbar-button-class",m.taToolbarButtonClass),m.taToolbarActiveButtonClass&&D.attr("ta-toolbar-active-button-class",m.taToolbarActiveButtonClass),m.taFocussedClass&&D.attr("ta-focussed-class",m.taFocussedClass),l.prepend(D),a(D)(k.$parent),v=f.registerEditor(y,k,["textAngularToolbar"+x])}k.$on("$destroy",function(){f.unregisterEditor(y)}),k.$on("ta-element-select",function(a,b){v.triggerElementSelect(a,b)}),k.$on("ta-drop-event",function(a,b,c,d){k.displayElements.text[0].focus(),d&&d.files&&d.files.length>0&&(angular.forEach(d.files,function(a){try{return k.fileDropHandler(a,k.wrapSelection)||k.fileDropHandler!==k.defaultFileDropHandler&&k.defaultFileDropHandler(a,k.wrapSelection)}catch(b){j.error(b)}}),c.preventDefault(),c.stopPropagation())}),k._bUpdateSelectedStyles=!1,k.updateSelectedStyles=function(){var a;void 0!==(a=d.getSelectionElement())&&a.parentNode!==k.displayElements.text[0]?v.updateSelectedStyles(angular.element(a)):v.updateSelectedStyles(),k._bUpdateSelectedStyles&&b(k.updateSelectedStyles,200)},o=function(){k._bUpdateSelectedStyles||(k._bUpdateSelectedStyles=!0,k.$apply(function(){k.updateSelectedStyles()}))},k.displayElements.html.on("keydown",o),k.displayElements.text.on("keydown",o),p=function(){k._bUpdateSelectedStyles=!1},k.displayElements.html.on("keyup",p),k.displayElements.text.on("keyup",p),q=function(a,b){b&&angular.extend(a,b),k.$apply(function(){return v.sendKeyCommand(a)?(k._bUpdateSelectedStyles||k.updateSelectedStyles(),a.preventDefault(),!1):void 0})},k.displayElements.html.on("keypress",q),k.displayElements.text.on("keypress",q),r=function(){k._bUpdateSelectedStyles=!1,k.$apply(function(){k.updateSelectedStyles()})},k.displayElements.html.on("mouseup",r),k.displayElements.text.on("mouseup",r)}}}]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===e?"div":8>=e?"P":"p":8>=e?a.toUpperCase():a:8>=e?"P":"p"}}]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var d=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/gi,e=/^(ul|li|ol)$/gi,f=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b,c){var d=angular.element("<"+c+">"+b[0].innerHTML+"</"+c+">");b.after(d),b.remove(),a.setSelectionToElementEnd(d.find("li")[0])},h=function(c,d,e){for(var f="",g=0;g<c.length;g++)f+="<"+b("li")+">"+c[g].innerHTML+"</"+b("li")+">";var h=angular.element("<"+e+">"+f+"</"+e+">");d.after(h),d.remove(),a.setSelectionToElementEnd(h.find("li")[0])};return function(i){return i=b(i),function(j,k,l){var m,n,o,p,q,r=angular.element("<"+i+">"),s=a.getSelectionElement(),t=angular.element(s);if(void 0!==s){var u=s.tagName.toLowerCase();if("insertorderedlist"===j.toLowerCase()||"insertunorderedlist"===j.toLowerCase()){var v=b("insertorderedlist"===j.toLowerCase()?"ol":"ul");if(u===v)return f(t,i);if("li"===u&&t.parent()[0].tagName.toLowerCase()===v&&1===t.parent().children().length)return f(t.parent(),i);if("li"===u&&t.parent()[0].tagName.toLowerCase()!==v&&1===t.parent().children().length)return g(t.parent(),v);if(u.match(d)&&!t.hasClass("ta-bind")){if("ol"===u||"ul"===u)return g(t,v);var w=!1;return angular.forEach(t.children(),function(a){a.tagName.match(d)&&(w=!0)}),w?h(t.children(),t,v):h([angular.element("<div>"+s.innerHTML+"</div>")[0]],t,v)}if(u.match(d)){if(p=a.getOnlySelectedElements(),1===p.length&&("ol"===p[0].tagName.toLowerCase()||"ul"===p[0].tagName.toLowerCase()))return p[0].tagName.toLowerCase()===v?f(angular.element(p[0]),i):g(angular.element(p[0]),v);o="";var x=[];for(m=0;m<p.length;m++)if(3!==p[m].nodeType){var y=angular.element(p[m]);o+="<"+b("li")+">"+y[0].innerHTML+"</"+b("li")+">",x.unshift(y)}return n=angular.element("<"+v+">"+o+"</"+v+">"),x.pop().replaceWith(n),angular.forEach(x,function(a){a.remove()}),void a.setSelectionToElementEnd(n[0])}}else if("formatblock"===j.toLowerCase()){var z=l.toLowerCase().replace(/[<>]/gi,"");for(n="li"===u?t.parent():t;!n[0].tagName.match(d);)n=n.parent(),u=n[0].tagName.toLowerCase();if(u===z){p=n.children();var A=!1;for(m=0;m<p.length;m++)A=A||p[m].tagName.match(d);A?(n.after(p),q=n.next(),n.remove(),n=q):(r.append(n[0].childNodes),n.after(r),n.remove(),n=r)}else if(n.parent()[0].tagName.toLowerCase()!==z||n.parent().hasClass("ta-bind"))if(u.match(e))n.wrap(l);else{p=a.getOnlySelectedElements(),0===p.length&&(p=[n[0]]);var B=!1;if(angular.forEach(p,function(a){3!==a.nodeType&&a.tagName.match(d)||(B=!0)}),B)for(;3===p[0].nodeType||!p[0].tagName.match(d);)p=[p[0].parentNode];if(angular.element(p[0]).hasClass("ta-bind"))n=angular.element(l),n[0].innerHTML=p[0].innerHTML,p[0].innerHTML=n[0].outerHTML;else if("blockquote"===z){for(o="",m=0;m<p.length;m++)o+=p[m].outerHTML;n=angular.element(l),n[0].innerHTML=o,p[0].parentNode.insertBefore(n[0],p[0]),angular.forEach(p,function(a){a.parentNode.removeChild(a)})}else for(m=0;m<p.length;m++)n=angular.element(l),n[0].innerHTML=p[m].innerHTML,p[m].parentNode.insertBefore(n[0],p[m]),p[m].parentNode.removeChild(p[m])}else{var C=n.parent(),D=C.contents();for(m=0;m<D.length;m++)C.parent().hasClass("ta-bind")&&3===D[m].nodeType&&(r=angular.element("<"+i+">"),r[0].innerHTML=D[m].outerHTML,D[m]=r[0]),C.parent()[0].insertBefore(D[m],C[0]);C.remove()}return void a.setSelectionToElementEnd(n[0])}}try{c[0].execCommand(j,k,l)}catch(E){}}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions",function(a,b,c,f,i,j,k,m,n,o){return{require:"ngModel",scope:{},link:function(j,p,q,r){var s,t,u=void 0!==p.attr("contenteditable")&&p.attr("contenteditable"),v=u||"textarea"===p[0].tagName.toLowerCase()||"input"===p[0].tagName.toLowerCase(),w=!1,x=!1,y=q.taUnsafeSanitizer||o.disableSanitizer;void 0===q.taDefaultWrap&&(q.taDefaultWrap="p"),""===q.taDefaultWrap?(s="",t=void 0===e?"<div><br></div>":e>=11?"<p><br></p>":8>=e?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(s=void 0===e||e>=11?"<"+q.taDefaultWrap+"><br></"+q.taDefaultWrap+">":8>=e?"<"+q.taDefaultWrap.toUpperCase()+"></"+q.taDefaultWrap.toUpperCase()+">":"<"+q.taDefaultWrap+"></"+q.taDefaultWrap+">",t=void 0===e||e>=11?"<"+q.taDefaultWrap+"><br></"+q.taDefaultWrap+">":8>=e?"<"+q.taDefaultWrap.toUpperCase()+">&nbsp;</"+q.taDefaultWrap.toUpperCase()+">":"<"+q.taDefaultWrap+">&nbsp;</"+q.taDefaultWrap+">"),p.addClass("ta-bind");
var z=function(){if(u)return p[0].innerHTML;if(v)return p.val();throw"textAngular Error: attempting to update non-editable taBind"},A=function(a){a||(a=z()),a===t?""!==r.$viewValue&&r.$setViewValue(""):r.$viewValue!==a&&r.$setViewValue(a)};if(j.$parent["updateTaBind"+(q.id||"")]=function(){w||A()},v)if(u){if(p.on("cut",function(a){w?a.preventDefault():b(function(){A()},0)}),p.on("paste",function(a,b){b&&angular.extend(a,b);var d;if(a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData?d=(a.originalEvent||a).clipboardData.getData("text/plain"):c.clipboardData&&(d=c.clipboardData.getData("Text")),!d&&!w)return!0;if(a.preventDefault(),!w){var e=angular.element("<div></div>");if(e[0].innerHTML=d,d=e.text(),f[0].selection){var g=f[0].selection.createRange();g.pasteHTML(d)}else f[0].execCommand("insertText",!1,d);A()}}),p.on("keyup",function(a,b){if(b&&angular.extend(a,b),!w){if(""!==s&&13===a.keyCode&&!a.shiftKey){var c=k.getSelectionElement();if(c.tagName.toLowerCase()!==q.taDefaultWrap&&"li"!==c.tagName.toLowerCase()&&(""===c.innerHTML.trim()||"<br>"===c.innerHTML.trim())){var d=angular.element(s);angular.element(c).replaceWith(d),k.setSelectionToElementStart(d[0])}}var e=z();""!==s&&""===e.trim()&&(p[0].innerHTML=s,k.setSelectionToElementStart(p.children()[0])),A(e)}}),p.on("blur",function(){x=!1,w||A(),r.$render()}),q.placeholder&&(e>8||void 0===e)){var B;if(!q.id)throw"textAngular Error: An unique ID is required for placeholders to work";B=g("#"+q.id+".placeholder-text:before",'content: "'+q.placeholder+'"'),j.$on("$destroy",function(){h(B)})}p.on("focus",function(){x=!0,r.$render()}),p.on("mousedown",function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else p.on("paste cut",function(){w||b(function(){r.$setViewValue(z())},0)}),p.on("change blur",function(){w||r.$setViewValue(z())});var C=function(b){return r.$oldViewValue=a(i(b),r.$oldViewValue,y)},D=function(a){return q.required&&r.$setValidity("required",!(!a||a.trim()===t||""===a.trim())),a};r.$parsers.push(C),r.$parsers.push(D),r.$formatters.push(C),r.$formatters.push(D);var E=function(a){return j.$emit("ta-element-select",this),a.preventDefault(),!1},F=function(a,c){if(c&&angular.extend(a,c),!l&&!w){l=!0;var d;d=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,j.$emit("ta-drop-event",this,a,d),b(function(){l=!1},100)}};j.$parent["reApplyOnSelectorHandlers"+(q.id||"")]=function(){w||angular.forEach(m,function(a){p.find(a).off("click",E).on("click",E)})};var G=function(a){p[0].innerHTML=a};r.$render=function(){var a=r.$viewValue||"";f[0].activeElement!==p[0]?u?(q.placeholder?""===a?(x?p.removeClass("placeholder-text"):p.addClass("placeholder-text"),G(s)):(p.removeClass("placeholder-text"),G(a)):G(""===a?s:a),w?p.off("drop",F):(angular.forEach(m,function(a){p.find(a).on("click",E)}),p.on("drop",F))):"textarea"!==p[0].tagName.toLowerCase()&&"input"!==p[0].tagName.toLowerCase()?G(n(a)):p.val(a):u&&p.removeClass("placeholder-text")},q.taReadonly&&(w=j.$parent.$eval(q.taReadonly),w?(p.addClass("ta-readonly"),("textarea"===p[0].tagName.toLowerCase()||"input"===p[0].tagName.toLowerCase())&&p.attr("disabled","disabled"),void 0!==p.attr("contenteditable")&&p.attr("contenteditable")&&p.removeAttr("contenteditable")):(p.removeClass("ta-readonly"),"textarea"===p[0].tagName.toLowerCase()||"input"===p[0].tagName.toLowerCase()?p.removeAttr("disabled"):u&&p.attr("contenteditable","true")),j.$parent.$watch(q.taReadonly,function(a,b){b!==a&&(a?(p.addClass("ta-readonly"),("textarea"===p[0].tagName.toLowerCase()||"input"===p[0].tagName.toLowerCase())&&p.attr("disabled","disabled"),void 0!==p.attr("contenteditable")&&p.attr("contenteditable")&&p.removeAttr("contenteditable"),angular.forEach(m,function(a){p.find(a).on("click",E)}),p.off("drop",F)):(p.removeClass("ta-readonly"),"textarea"===p[0].tagName.toLowerCase()||"input"===p[0].tagName.toLowerCase()?p.removeAttr("disabled"):u&&p.attr("contenteditable","true"),angular.forEach(m,function(a){p.find(a).off("click",E)}),p.on("drop",F)),w=a)})),u&&!w&&(angular.forEach(m,function(a){p.find(a).on("click",E)}),p.on("drop",F),p.on("blur",function(){/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent)&&(d=!0)}))}}}]).factory("taApplyCustomRenderers",["taCustomRenderers",function(a){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return f>=c?(d.$setValidity("taMaxText",!0),a):void d.$setValidity("taMaxText",!1)}var f=parseInt(a.$eval(c.taMaxText));if(isNaN(f))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(f=parseInt(a),isNaN(f))throw"Max text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=angular.element("<div/>");b.html(a);var c=b.text().length;return!c||c>=f?(d.$setValidity("taMinText",!0),a):void d.$setValidity("taMinText",!1)}var f=parseInt(a.$eval(c.taMinText));if(isNaN(f))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(f=parseInt(a),isNaN(f))throw"Min text must be an integer";d.$dirty&&d.$setViewValue(d.$viewValue)}),d.$parsers.unshift(e)}}}).factory("taFixChrome",function(){var a=function(a){for(var b=angular.element("<div>"+a+"</div>"),c=angular.element(b).find("span"),d=0;d<c.length;d++){var e=angular.element(c[d]);e.attr("style")&&e.attr("style").match(/line-height: 1.428571429;|color: inherit; line-height: 1.1;/i)&&(e.attr("style",e.attr("style").replace(/( |)font-family: inherit;|( |)line-height: 1.428571429;|( |)line-height:1.1;|( |)color: inherit;/gi,"")),e.attr("style")&&""!==e.attr("style")||(e.next().length>0&&"BR"===e.next()[0].tagName&&e.next().remove(),e.replaceWith(e[0].innerHTML)))}var f=b[0].innerHTML.replace(/style="[^"]*?(line-height: 1.428571429;|color: inherit; line-height: 1.1;)[^"]*"/gi,"");return f!==b[0].innerHTML&&(b[0].innerHTML=f),b[0].innerHTML};return a}).factory("taSanitize",["$sanitize",function(a){return function(c,d,e){var f=angular.element("<div>"+c+"</div>");angular.forEach(b(f,"align"),function(a){a.css("text-align",a.attr("align")),a.removeAttr("align")});var g;c=f[0].innerHTML;try{g=a(c),e&&(g=c)}catch(h){g=d||""}return g}}]).directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=angular.element(b&&b.display?b.display:"<button type='button'>"),d.addClass(g.classes.toolbarButton),d.attr("name",c.name),d.attr("unselectable","on"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),d.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}]).service("taToolExecuteAction",["$q",function(a){return function(b){void 0!==b&&(this.$editor=function(){return b});var c=a.defer(),d=c.promise,e=this.$editor();d["finally"](function(){e.endAction.call(e)});var f;try{f=this.action(c,e.startAction())}catch(g){}(f||void 0===f)&&c.resolve()}}]).service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1})},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(b){b.activeState&&(b.active=b.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&b.commandKeyCode===c.which)for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()}}}]).service("taSelection",["$window","$document",function(a,b){var c=b[0],d=function(a){if(a.hasChildNodes())return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null},e=function(a){var b=a.startContainer,c=a.endContainer;if(b===c)return[b];for(var e=[];b&&b!==c;)b=d(b),b.parentNode===a.commonAncestorContainer&&e.push(b);for(b=a.startContainer;b&&b!==a.commonAncestorContainer;)b.parentNode===a.commonAncestorContainer&&e.unshift(b),b=b.parentNode;return e};return{getOnlySelectedElements:function(){if(window.getSelection){var b=a.getSelection();if(!b.isCollapsed)return e(b.getRangeAt(0))}return[]},getSelectionElement:function(){var b,d,e;return c.selection&&c.selection.createRange?(b=c.selection.createRange(),b.parentElement()):a.getSelection&&(d=a.getSelection(),d.getRangeAt?d.rangeCount>0&&(b=d.getRangeAt(0)):(b=c.createRange(),b.setStart(d.anchorNode,d.anchorOffset),b.setEnd(d.focusNode,d.focusOffset),b.collapsed!==d.isCollapsed&&(b.setStart(d.focusNode,d.focusOffset),b.setEnd(d.anchorNode,d.anchorOffset))),b)?(e=b.commonAncestorContainer,3===e.nodeType?e.parentNode:e):void 0},setSelectionToElementStart:function(b){if(c.createRange&&a.getSelection){var d=c.createRange();d.selectNodeContents(b),d.setStart(b,0),d.setEnd(b,0);var e=a.getSelection();e.removeAllRanges(),e.addRange(d)}else if(c.selection&&c.body.createTextRange){var f=c.body.createTextRange();f.moveToElementText(b),f.collapse(!0),f.moveEnd("character",0),f.moveStart("character",0),f.select()}},setSelectionToElementEnd:function(b){if(c.createRange&&a.getSelection){var d=c.createRange();d.selectNodeContents(b),d.collapse(!1);var e=a.getSelection();e.removeAllRanges(),e.addRange(d)}else if(c.selection&&c.body.createTextRange){var f=c.body.createTextRange();f.moveToElementText(b),f.collapse(!1),f.select()}}}}])}()}({},function(){return this}());
},{}],18:[function(require,module,exports){
'use strict';

var app = require('angular').module('kontApp');

app.controller('LoginController', require('./login'));
app.controller('PageEditController', require('./pageedit'));
app.controller('PageTreeController', require('./pagetree'));
app.controller('PrerenderController', require('./prerender'));
app.controller('SideNavController', require('./sidenav'));
app.controller('SiteAddController', require('./siteadd'));
app.controller('SiteDetailController', require('./sitedetail'));
app.controller('SiteListController', require('./sitelist'));
app.controller('SitemapController', require('./sitemap'));
app.controller('UserAddNewController', require('./useradd'));
app.controller('UserAuthTokenController', require('./userauthtoken'));
app.controller('UserCredController', require('./usercred'));
app.controller('UserCredPasswordController', require('./usercredpassword'));
app.controller('UserDetailController', require('./userdetail'));
app.controller('UserListController', require('./userlist'));

},{"./login":19,"./pageedit":20,"./pagetree":21,"./prerender":22,"./sidenav":23,"./siteadd":24,"./sitedetail":25,"./sitelist":26,"./sitemap":27,"./useradd":28,"./userauthtoken":29,"./usercred":30,"./usercredpassword":31,"./userdetail":32,"./userlist":33,"angular":2}],19:[function(require,module,exports){
'use strict';

module.exports = function ($scope, $rootScope, $location, $cookieStore, Restangular) {
  $scope.rememberMe = true;
  $scope.responseErrorShow = false;
  $scope.responseError = '';

  $scope.login = function () {

    var credentials = {
      username: $scope.username,
      password: $scope.password
    };

    Restangular.all('user').customPOST(credentials,'authenticate').then( function(tokenContainer) {

      $rootScope.authToken = tokenContainer.token;
      if ($scope.rememberMe) {
        $cookieStore.put('authToken', tokenContainer.token);
      }
      // retrieve current user details
      Restangular.one('user').get().then(function (userData) {
        $rootScope.user = userData;
        $location.path('/');
      });

    }, function (response) {
      if (response.data) {
        if (response.data.message) {
          $scope.responseError = 'Error: ' + response.data.message;
        }
        else {
          $scope.responseError = 'Error: ' + response.data.error;
        }
      }
      else {
        $scope.responseError = 'Error: ' + response.statusText;
      }

      $scope.responseErrorShow = true;

      //console.log('Error with status code: ', response.status);
      //console.log('Error message: ', $scope.responseError);
    });

  };

};

},{}],20:[function(require,module,exports){
'use strict';
var angular = require('angular');
var _ = require('lodash');

module.exports = function ($scope, $state, $stateParams, Restangular, $upload,  $interval) {
  $scope.page = {};
  $scope.images = [];
  $scope.docfiles = [];
  $scope.embedimages = [];

  $scope.master = {};
  $scope.newPropName = '';
  $scope.newPropContent = '';

  $scope.editorOptions = {
    language: 'en'
  };

  Restangular.one('pages', $stateParams.pageId).get().then(function (data) {
    $scope.page = data;
    $scope.master = angular.copy(data);
  });

  $scope.$watch('page.title', function () {
    if ($scope.page.autoName) {
      var txt = $scope.page.title + '';
      var newName = txt.replace(/\W/g, '').toLowerCase();
      $scope.page.name = newName;
    }
  });

  $scope.update = function (page) {
    $scope.master = angular.copy(page);
    page.save();
  };

  $scope.reset = function () {
    $scope.page = angular.copy($scope.master);
  };

  $scope.isUnchanged = function (page) {
    return angular.equals(page, $scope.master);
  };

  $scope.loadImages = function() {
    Restangular.one('pages', $stateParams.pageId).all('images').getList().then(function (list) {
      $scope.images = list;
    });
  };

  $scope.loadImages();

  $scope.removeImage = function(img) {
    Restangular.one('pages', $stateParams.pageId).one('images', img.id).remove().then(function () {
      $scope.loadImages();
    });
  };

  $scope.imageUrl = function(img) {
    var l = '/att/' + $scope.page.siteId + img.directoryPath + '/' + img.name;
    return l;
  };

  $scope.thumbUrl = function(img) {
    if (img.thumb == null) {
      return '/images/282.gif';
    }
    else {
      return '/att/' + $scope.page.siteId + img.thumb.directoryPath + '/' + img.name;
    }
  };

  $scope.imgSetMain = function(img) {
    Restangular.one('pages', $stateParams.pageId).one('images', img.id).all('setmain').customPOST().then(function () {
      $scope.loadImages();
    });
  };

  $scope.imgMoveUp = function(img) {
    Restangular.one('pages', $stateParams.pageId).one('images', img.id).all('moveup').customPOST().then(function () {
      $scope.loadImages();
    });
  };

  $scope.imgMoveDown = function(img) {
    Restangular.one('pages', $stateParams.pageId).one('images', img.id).all('movedown').customPOST().then(function () {
      $scope.loadImages();
    });
  };

  $scope.onImageSelect = function ($files) {
    //$files: an array of files selected, each file has name, size, and type.
    $scope.selectedFiles = [];
    $scope.progress = [];
    if ($scope.upload && $scope.upload.length > 0) {
      for (var i = 0; i < $scope.upload.length; i++) {
        if ($scope.upload[i] != null) {
          $scope.upload[i].abort();
        }
      }
    }
    $scope.upload = [];
    $scope.uploadResult = [];
    $scope.selectedFiles = $files;
    $scope.dataUrls = [];
    for (var it = 0; it < $files.length; it++) {
      var file = $files[it];
      $scope.upload = $upload.upload({
        url: '/api/pages/' + $stateParams.pageId + '/images',
        method: 'POST',
        // method: 'POST' or 'PUT',
        // headers: {'header-key': 'header-value'},
        // withCredentials: true,
        data: { fileNum: it },
        file: file
        // or list of files: $files for html5 only
        /* set the file formData name ('Content-Desposition'). Default is 'file' */
        //fileFormDataName: myFile, //or a list of names for multiple files (html5).
        /* customize how data is added to formData. See #40#issuecomment-28612000 for sample code */
        //formDataAppender: function(formData, key, val){}
      }).progress(function (evt) {
        $scope.progress[it] = Math.min(100, parseInt(100.0 * evt.loaded / evt.total));
        //console.log('percent: ' + parseInt(100.0 * evt.loaded / evt.total));
      }).success(function (data, status, headers, config) {
        // file is uploaded successfully
        //console.log("file uploaded successfully: " + data);
        $scope.uploadResult.push(data);
        $scope.loadUploadedImages();
      })
      .xhr(function(xhr){ xhr.upload.addEventListener('abort', function() {
        // console.log('abort complete')
      }, false)});
    }
    /* alternative way of uploading, send the file binary with the file's content-type.
                 Could be used to upload files to CouchDB, imgur, etc... html5 FileReader is needed.
                 It could also be used to monitor the progress of a normal http post/put request with large data*/
    // $scope.upload = $upload.http({...})  see 88#issuecomment-31366487 for sample code.
  };

  var pollers = {};

  var refreshImgData = function(img) {
    //console.log("Poll for new data for:" + img.id + '/' + img.name);

    Restangular.one('pages', $stateParams.pageId).one('images', img.id).get().then(function (data) {
      if (data.thumb != null) {
        // console.log('Thumb generated for: ' + data.name + '/' + data.id);
        img = data;
        var imgId = data.id;
        var promise = pollers[imgId];
        if (angular.isDefined(promise)) {
          $interval.cancel(promise);
          promise = undefined;
          pollers[imgId] = undefined;
          delete pollers[imgId];
          // console.log('Poller removed for: ' + data.name + '/' + data.id);
        }
      }
    });
  };

  var replaceImg = function(newImg) {
    var pos = _.findIndex($scope.images, { 'id': newImg.id });
    //console.log("Found index: " + pos);
    $scope.images[pos] = newImg;
    //$scope.images.splice(pos, 1);
    //$scope.images.splice(pos, 0, newImg);
  };

  $scope.loadUploadedImages = function() {
    Restangular.one('pages', $stateParams.pageId).all('images').getList().then(function (list) {
      $scope.images = list;
      angular.forEach($scope.images, function(img, idx) {
        //console.log("img.thumb: " + img.thumb);
        if ((img.thumb == null) || (typeof img.thumb == undefined)) {
          if (!angular.isDefined(pollers[img.id])) {
            //console.log("Image uploaded, but thumbnail is not generated yet, set polling for: " + img.id + "/" + img.name);
            // pollers[img.id] = $interval(refreshImgData(img), 500);
            pollers[img.id] = $interval(function() {
              // console.log("Poll for new data for:" + img.id + '/' + img.name);
              Restangular.one('pages', $stateParams.pageId).one('images', img.id).get().then(function (data) {
                if (data.thumb != null) {
                  //console.log("Thumb generated for: " + data.name + "/" + data.id);
                  replaceImg(data);
                  var imgId = data.id;
                  if (angular.isDefined(pollers[imgId])) {
                    $interval.cancel(pollers[imgId]);
                    pollers[imgId] = undefined;
                    delete pollers[imgId];
                    //console.log("Poller removed for: " + data.name + "/" + data.id);
                  }
                }
              });
            }, 1000);
          }
        }
      });
    });
  };

  $scope.$on('$destroy', function() {
    _.forEach(pollers, function(poller) {
      if (angular.isDefined(poller)) {
        $interval.cancel(poller);
        poller = undefined;
      }
    });
    pollers = undefined;
  });

  $scope.onFileSelect = function ($files) {
    //$files: an array of files selected, each file has name, size, and type.
    $scope.selectedFiles = [];
    $scope.progress = [];
    if ($scope.upload && $scope.upload.length > 0) {
      for (var i = 0; i < $scope.upload.length; i++) {
        if ($scope.upload[i] != null) {
          $scope.upload[i].abort();
        }
      }
    }
    $scope.upload = [];
    $scope.uploadResult = [];
    $scope.selectedFiles = $files;
    $scope.dataUrls = [];
    for (var it = 0; it < $files.length; it++) {
      var file = $files[it];
      $scope.upload = $upload.upload({
        url: '/api/pages/' + $stateParams.pageId + '/files',
        method: 'POST',
        // method: 'POST' or 'PUT',
        // headers: {'header-key': 'header-value'},
        // withCredentials: true,
        data: {fileNum: it},
        file: file
        // or list of files: $files for html5 only
        /* set the file formData name ('Content-Desposition'). Default is 'file' */
        //fileFormDataName: myFile, //or a list of names for multiple files (html5).
        /* customize how data is added to formData. See #40#issuecomment-28612000 for sample code */
        //formDataAppender: function(formData, key, val){}
      }).progress(function (evt) {
        $scope.progress[it] = Math.min(100, parseInt(100.0 * evt.loaded / evt.total));
        //console.log('percent: ' + parseInt(100.0 * evt.loaded / evt.total));
      }).success(function (data, status, headers, config) {
        // file is uploaded successfully
        $scope.uploadResult.push(data);
        $scope.loadFiles();
      })
      //.error(...)
      //.then(success, error, progress);
      .xhr(
        function (xhr) {
          xhr.upload.addEventListener('abort', function() {
            //console.log('abort complete');
          }, false)});
    }
    /* alternative way of uploading, send the file binary with the file's content-type.
                 Could be used to upload files to CouchDB, imgur, etc... html5 FileReader is needed.
                 It could also be used to monitor the progress of a normal http post/put request with large data*/
    // $scope.upload = $upload.http({...})  see 88#issuecomment-31366487 for sample code.
  };

  $scope.fileMoveUp = function(img) {
    Restangular.one('pages', $stateParams.pageId).one('files', img.id).all('moveup')
    .customPOST().then(function () {
      $scope.loadFiles();
    });
  };

  $scope.fileMoveDown = function(img) {
    Restangular.one('pages', $stateParams.pageId).one('files', img.id).all('movedown')
    .customPOST().then(function () {
      $scope.loadFiles();
    });
  };

  $scope.saveFile = function(df) {
    df.put();
  };

  $scope.loadFiles = function() {
    Restangular.one('pages', $stateParams.pageId).all('files').getList().then(function (list) {
      $scope.docfiles = list;
    });
  };

  $scope.loadFiles();

  $scope.removeFile = function(df) {
    Restangular.one('pages', $stateParams.pageId).one('files', df.id).remove().then(function () {
      $scope.loadFiles();
    });
  };

  $scope.fileUrl = function(df) {
    var l = '/att/' + $scope.page.siteId + df.directoryPath + '/' + df.name;
    return l;
  };

  // ------------------------------

  $scope.onEmbedImageSelect = function ($files) {
    //$files: an array of files selected, each file has name, size, and type.
    $scope.selectedFiles = [];
    $scope.progress = [];
    if ($scope.upload && $scope.upload.length > 0) {
      for (var i = 0; i < $scope.upload.length; i++) {
        if ($scope.upload[i] != null) {
          $scope.upload[i].abort();
        }
      }
    }
    $scope.upload = [];
    $scope.uploadResult = [];
    $scope.selectedFiles = $files;
    $scope.dataUrls = [];
    for (var it = 0; it < $files.length; it++) {
      var file = $files[it];
      $scope.upload = $upload.upload({
        url: '/api/pages/' + $stateParams.pageId + '/embed',
        method: 'POST',
        data: {fileNum: it},
        file: file
      }).progress(function (evt) {
        $scope.progress[it] = Math.min(100, parseInt(100.0 * evt.loaded / evt.total));
        //console.log('percent: ' + parseInt(100.0 * evt.loaded / evt.total));
      }).success(function (data, status, headers, config) {
        $scope.uploadResult.push(data);
        $scope.loadEmbedImages();
      })
      .xhr(
        function (xhr) {
          xhr.upload.addEventListener('abort', function() {
            //console.log('abort complete');
          }, false)});
    }
  };

  $scope.loadEmbedImages = function() {
    Restangular.one('pages', $stateParams.pageId).all('embed').getList().then(function (list) {
      $scope.embedimages = list;
    });
  };

  $scope.loadEmbedImages();

  $scope.removeEmbedImage = function(emb) {
    Restangular.one('pages', $stateParams.pageId).one('embed', emb.id).remove().then(function () {
      $scope.loadEmbedImages();
    });
  };

  $scope.embedImageUrl = function(emb) {
    var l = '/att/' + $scope.page.siteId + emb.directoryPath + '/' + emb.name;
    return l;
  };

  // ------------------------------


  $scope.addProp = function (localScope) {
    var pageProperty = {
      name: localScope.newPropName,
      content: localScope.newPropContent
    };
    Restangular.one('pages', $stateParams.pageId).all('properties')
      .customPOST(pageProperty).then(function (updatedPage) {
      //console.log("Success - property created");
      $scope.page.properties = updatedPage.properties;
      $scope.page.propertyMap = updatedPage.propertyMap;
      localScope.newPropName = '';
      localScope.newPropContent = '';
      $scope.master.properties = angular.copy(updatedPage.properties);
      //$scope.master.properties = Restangular.copy(updatedPage.properties);
    }, function (response) {
      $scope.responseError = 'Error creating property: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                                                                 );
  };

  $scope.saveProp = function (prop) {
    Restangular.one('pages', $stateParams.pageId).one('properties', prop.id)
      .customPUT(prop).then(function () {
      //console.log("Success - property saved");
    }, function (response) {
      $scope.responseError = 'Error saving property: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                                                                 );
  };

  $scope.deleteProp = function (prop) {
    Restangular.one('pages', $stateParams.pageId).one('properties', prop.id).remove().then(function () {
      var idx = $scope.page.properties.indexOf(prop);
      $scope.page.properties.splice(idx, 1);
      //console.log("Success - property removed");
    }, function (response) {
      $scope.responseError = 'Error removing property: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                                                          );
  };

  $scope.reset();
};

},{"angular":2,"lodash":12}],21:[function(require,module,exports){
'use strict';
var angular = require('angular');

module.exports = function ($scope, $state, $stateParams, Restangular) {
  $scope.data = {};
  Restangular.one('pagetrees', $stateParams.siteId).getList().then(function (list) {
    $scope.data = list;
  });

  $scope.treeOptions = {
    accept: function(sourceNodeScope, destNodesScope, destIndex) {
      return true;
    },
    dropped: function(event) {
      var srcPageId =  event.source.nodeScope.$modelValue.id;
      var srcParentId = 0;
      if (event.source.nodeScope.$parentNodeScope != null) {
        srcParentId = event.source.nodeScope.$parentNodeScope.$modelValue.id;
      }
      var srcIndex = event.source.index;
      var dstParentId = 0;
      if (event.dest.nodesScope.$parent.$modelValue) {
        dstParentId = event.dest.nodesScope.$parent.$modelValue.id;
      }
      var dstIndex = event.dest.index;
      //console.log("dropped event: page #" + srcPageId + " moved from parent #" + srcParentId + " to parent #" + dstParentId);
      //console.log("index changed: " + srcIndex + " to " + dstIndex);
      if ((dstIndex !== srcIndex) || (dstParentId !== srcParentId)) {
        Restangular.one('pages', srcPageId).all('move')
        .customPOST({ srcParentId: srcParentId, dstParentId: dstParentId, srcIndex: srcIndex, dstIndex: dstIndex});
      }
    }
  };

  $scope.reloadTree = function() {
    Restangular.one('pagetrees', $stateParams.siteId).getList().then(function (list) {
      $scope.data = list;
    });
  };

  $scope.editPage = function (scope) {
    var nodeData = scope.$modelValue;
    $state.go('^.pages', {siteId: $stateParams.siteId, pageId: nodeData.id});
  };

  $scope.removePage = function (scope) {
    var nodeData = scope.$modelValue;
    //console.log("remove page: " + nodeData.id + "/" + nodeData.title);
    Restangular.one('pages', nodeData.id).customDELETE().then(function () {
      scope.remove();
      //console.log("Success - page removed");
    }, function (response) {
      $scope.responseError = 'Error removing page: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                             );

  };

  $scope.toggle = function(scope) {
    //console.log("toggle");
    scope.toggle();
  };

  $scope.moveLastToTheBeginning = function () {
    var a = $scope.data.pop();
    $scope.data.splice(0,0, a);
  };

  $scope.newRootPage = function() {
    if ($scope.data == null) { $scope.data = []; }
    var newPage = {
      siteId: $stateParams.siteId,
      parentId: 0,
      title: 'New page.' + ($scope.data.length + 1),
      name: 'newpage' + ($scope.data.length + 1),
      publicPage: false,
      placeholder: false
    };
    Restangular.all('pages').customPOST(newPage).then(function () {
      //console.log("Success - page created");
      $scope.reloadTree();
    }, function (response) {
      $scope.responseError = 'Error creating new root page: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                     );
  };

  $scope.newSubItem = function(scope) {
    var nodeData = scope.$modelValue;
    if (nodeData.nodes == null) { nodeData.nodes = []; }

    var newPage = {
      siteId: $stateParams.siteId,
      parentId: nodeData.id,
      title: nodeData.title + '.' + (nodeData.nodes.length + 1),
      name: nodeData.title + (nodeData.nodes.length + 1),
      publicPage: false,
      placeholder: false
    };
    Restangular.all('pages').customPOST(newPage).then(function (newPage) {
      //console.log("Success - page created");

      nodeData.nodes.push({
        id: newPage.id,
        title: newPage.title,
        nodes: []
      });
    }, function (response) {
      $scope.responseError = 'Error creating new page: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                     );
  };

  var getRootNodesScope = function() {
    return angular.element(document.getElementById('tree-root')).scope();
  };

  $scope.collapseAll = function() {
    var scope = getRootNodesScope();
    scope.collapseAll();
  };

  $scope.expandAll = function() {
    var scope = getRootNodesScope();
    scope.expandAll();
  };
};

},{"angular":2}],22:[function(require,module,exports){
'use strict';

module.exports = function ($scope, $state, $stateParams, Restangular) {
  Restangular.all('prerender').all('submit').doPOST([{}]);
};

},{}],23:[function(require,module,exports){
'use strict';

module.exports = function () {

};

},{}],24:[function(require,module,exports){
'use strict';

module.exports = function ($scope, $state, $stateParams, Restangular) {
  $scope.site = {};

  $scope.createNew = function (site) {
    Restangular.all('sites').post(site).then(function(newSite){
      //console.log("Success: site created");
      $state.go('sites.detail', { siteId: newSite.id}, {reload: true});
    }, function (response) {
      $scope.responseError = 'Error creating site: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    });
  };
};

},{}],25:[function(require,module,exports){
'use strict';
var angular = require('angular');

module.exports = function ($scope, $state, $stateParams, Restangular) {
  $scope.site = {};
  $scope.master = {};
  $scope.selectedSiteIndex = $stateParams.siteId;
  $scope.newPropName = '';
  $scope.newPropContent = '';

  Restangular.one('sites', $stateParams.siteId).get().then(function (data) {
    $scope.site = data;
    $scope.master = angular.copy(data);
  });

  $scope.update = function (site) {
    $scope.master = angular.copy(site);
    site.save();
  };

  $scope.reset = function () {
    $scope.site = angular.copy($scope.master);
  };

  $scope.isUnchanged = function (site) {
    return angular.equals(site, $scope.master);
  };

  $scope.deleteSite = function (site) {
    site.remove()
    .then(function () {
      //console.log("Success");
      $state.go('^', $stateParams, {reload: true});
    }, function (response) {
      $scope.responseError = 'Error: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log('Error with status code: ', response.status);
    });
  };

  $scope.addProp = function () {
    var siteProperty = {
      name: $scope.newPropName,
      content: $scope.newPropContent
    };
    Restangular.one('sites', $stateParams.siteId).customPOST(siteProperty).then(function (updatedSite) {
      // console.log("Success - property created");
      $scope.site.properties = updatedSite.properties;
      $scope.site.propertyMap = updatedSite.propertyMap;
      $scope.newPropName = '';
      $scope.newPropContent = '';
    }, function (response) {
      $scope.responseError = 'Error creating property: ' + response.statusText;
      $scope.responseErrorShow = true;
      // console.log("Error with status code: ", response.status);
    }
                                                                               );
  };

  $scope.saveProp = function (prop) {
    Restangular.one('sites', $stateParams.siteId).all(prop.id).customPUT(prop).then(function () {
      //console.log("Success - property saved");
    }, function (response) {
      $scope.responseError = 'Error saving property: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                                                   );
  };

  $scope.deleteProp = function (prop) {
    Restangular.one('sites', $stateParams.siteId).all(prop.name).remove().then(function () {
      var idx = $scope.site.properties.indexOf(prop);
      $scope.site.properties.splice(idx, 1);
      //console.log("Success - property removed");
    }, function (response) {
      $scope.responseError = 'Error removing property: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    }
                                                                              );
  };
};

},{"angular":2}],26:[function(require,module,exports){
'use strict';

module.exports = function ($scope, Restangular) {
  Restangular.all('sites').getList().then(function (list) {
    $scope.sites = list;
  });
};

},{}],27:[function(require,module,exports){
'use strict';

module.exports = function ($scope, $state, $stateParams, Restangular) {
  Restangular.all('sitemaps').all($stateParams.actionName).doPOST([{}]);
};

},{}],28:[function(require,module,exports){
'use strict';
var angular = require('angular');

module.exports = function ($scope, $state, $stateParams, Restangular) {
  $scope.user = {
    roleMap: {
      admin: false,
      editor: false,
      user: true
    },
    roles: ['user']
  };
  $scope.master = {};

  $scope.responseError = '';
  $scope.responseErrorShow = false;

  $scope.updateRoles = function () {
    if ($scope.user.roleMap) {
      var roles = [];
      var role = '';
      for (role in $scope.user.roleMap) {
        if ($scope.user.roleMap[role]) { roles.push(role); }
      }
      $scope.user.roles = roles;
    }
  };

  $scope.$watch('user.roleMap.editor', function () {
    $scope.updateRoles();
  });
  $scope.$watch('user.roleMap.admin', function () {
    $scope.updateRoles();
  });
  $scope.$watch('user.roleMap.user', function () {
    $scope.updateRoles();
  });

  $scope.update = function (user) {
    $scope.master = angular.copy(user);
    Restangular.all('users').post({
      name: user.name,
      email: user.email,
      password: user.password,
      roles: user.roles
    })
    .then(function () {
      //console.log("Success");
      $state.go('^', $stateParams, {reload: true});
    }, function (response) {
      $scope.responseError = 'Error: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    });
  };

  $scope.reset = function () {
    $scope.user = angular.copy($scope.master);
  };

  $scope.isUnchanged = function (user) {
    return angular.equals(user, $scope.master);
  };

  $scope.reset();

};

},{"angular":2}],29:[function(require,module,exports){
'use strict';

module.exports = function ($scope, $stateParams, Restangular) {
  Restangular.one('users', $stateParams.userId).getList('authtokens').then(function (tokens) {
    $scope.authtokens = tokens;
  });

  $scope.getToken = function (token) {
    //console.log("Token: " + token.uuid);
    Restangular.one('users', $stateParams.userId).one('authtokens', token.uuid).get().then(function (t) {
      $scope.authtoken = t;
    });
  };

  $scope.removeToken = function (token) {
    //console.log("Remove token: " + token.uuid);
    Restangular.one('users', $stateParams.userId).one('authtokens', token.uuid).remove();
    var idx = $scope.authtokens.indexOf(token);
    $scope.authtokens.splice(idx, 1);
  };
};

},{}],30:[function(require,module,exports){
'use strict';

module.exports = function ($scope, $state, $stateParams, Restangular) {
  Restangular.one('users', $stateParams.userId).getList('credentials').then(function (creds) {
    $scope.credentials = creds;
  });

  $scope.removeCredential = function (credential) {

  };
};

},{}],31:[function(require,module,exports){
'use strict';
var angular = require('angular');

module.exports = function ($scope, $state, $stateParams, Restangular) {
  //console.log("stateParams: " + $stateParams);
  Restangular.one('users', $stateParams.userId).one('credentials', $stateParams.credId)
  .customGET('chpassword').then(function (formdata) {
    $scope.passwordData = formdata;
    $scope.master = angular.copy($scope.passwordData);
  });

  $scope.responseError = '';
  $scope.responseErrorShow = false;

  $scope.master = {};

  $scope.update = function (passwordData) {
    $scope.master = angular.copy(passwordData);
    Restangular
    .one('users', $stateParams.userId)
    .one('credentials', $stateParams.credId)
    .all('chpassword')
    .customPUT($scope.passwordData).then(function () {
      //console.log("Success");
      $state.go('^');
    }, function (response) {
      $scope.responseError = 'Error: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    });

    //$scope.passwordData.customPUT("chpassword");
  };

  $scope.reset = function () {
    $scope.passwordData = angular.copy($scope.master);
  };

  $scope.isUnchanged = function (passwordData) {
    return angular.equals(passwordData, $scope.master);
  };

  $scope.reset();
};

},{"angular":2}],32:[function(require,module,exports){
'use strict';
var angular = require('angular');

module.exports = function ($scope, $state, $stateParams, Restangular) {
  $scope.user = {};
  $scope.master = {};

  Restangular.one('users', $stateParams.userId).get().then(function (user) {
    $scope.user = user;
    $scope.master = angular.copy(user);
  });

  $scope.updateRoles = function () {
    if ($scope.user.roleMap) {
      var roles = [];
      var role;
      for (role in $scope.user.roleMap) {
        if ($scope.user.roleMap[role]) { roles.push(role); }
      }
      $scope.user.roles = roles;
    }
  };

  $scope.$watch('user.roleMap.editor', function () {
    $scope.updateRoles();
  });
  $scope.$watch('user.roleMap.admin', function () {
    $scope.updateRoles();
  });
  $scope.$watch('user.roleMap.user', function () {
    $scope.updateRoles();
  });

  $scope.update = function (user) {
    $scope.master = angular.copy(user);
    user.save();

  };

  $scope.deleteUser = function (user) {
    user.remove()
    .then(function () {
      //console.log("Success");
      $state.go('^', $stateParams, {reload: true});
    }, function (response) {
      $scope.responseError = 'Error: ' + response.statusText;
      $scope.responseErrorShow = true;
      //console.log("Error with status code: ", response.status);
    });
  };

  $scope.reset = function () {
    $scope.user = angular.copy($scope.master);
  };

  $scope.isUnchanged = function (user) {
    return angular.equals(user, $scope.master);
  };

  $scope.reset();

};

},{"angular":2}],33:[function(require,module,exports){
'use strict';

module.exports = function ($scope, Restangular) {
  Restangular.all('users').getList().then(function (list) {
    $scope.users = list;
  });
};

},{}],34:[function(require,module,exports){
'use strict';

var app = require('angular').module('kontApp');

app.directive('appVersion', function (version) {
  return function (scope, elm, attrs) {
    elm.text(version);
  };
});

app.directive('passwordValidate', function () {
  return {
    require: 'ngModel',
    link: function (scope, elm, attrs, ctrl) {
      ctrl.$parsers.unshift(function (viewValue) {

        scope.pwdValidLength = (viewValue && viewValue.length >= 8 ? true : false);
        scope.pwdHasLetter = (viewValue && /[A-z]/.test(viewValue)) ? true : false;
        scope.pwdHasNumber = (viewValue && /\d/.test(viewValue)) ? true : false;

        if (scope.pwdValidLength && scope.pwdHasLetter && scope.pwdHasNumber) {
          ctrl.$setValidity('pwd', true);
          return viewValue;
        } else {
          ctrl.$setValidity('pwd', false);
          return undefined;
        }

      });
    }
  };
});

app.directive('ngConfirmClick', function() {
    return {
      priority: -1,
      restrict: 'A',
      link: function(scope, element, attrs){
        element.bind('click', function(e){
          var message = attrs.ngConfirmClick;
          if(message && !confirm(message)){
            e.stopImmediatePropagation();
            e.preventDefault();
          }
        });
      }
    };
  }
);

app.directive('loadingWidget', function (requestNotification) {
  return {
    restrict: 'AC',
    link: function (scope, element) {
      // hide the element initially
      element.hide();

      //subscribe to listen when a request starts
      requestNotification.subscribeOnRequestStarted(function () {
        // show the spinner!
        element.show();
      });

      requestNotification.subscribeOnRequestEnded(function () {
        // hide the spinner if there are no more pending requests
        if (requestNotification.getRequestCount() === 0) { element.hide(); }
      });
    }
  };
});

app.directive('ensureUnique', function(Restangular, $stateParams, $timeout) {
  var checking = null;
  return {
    require: 'ngModel',
    link: function(scope, ele, attrs, c) {
      scope.$watch(attrs.ngModel, function(newVal) {
        if (!checking) {
          checking = $timeout(function() {
            Restangular
            .one('pages', $stateParams.pageId)
            .customGET('namecheck', {name: encodeURIComponent(c.$modelValue)})
            .then(
              function () {
                // console.log('name unique check OK');
                c.$setValidity('unique', true);
                checking = null;
              }, function (response) {
                // console.log('name unique check FAIL');
                c.$setValidity('unique', false);
                checking = null;
              });
          }, 500);
        }
      });
    }
  };
});

app.directive('nxEqualEx', function () {
  return {
    require: 'ngModel',
    link: function (scope, elem, attrs, model) {
      if (!attrs.nxEqualEx) {
        // console.error('nxEqualEx expects a model as an argument!');
        return;
      }
      scope.$watch(attrs.nxEqualEx, function (value) {
        // Only compare values if the second ctrl has a value.
        if (model.$viewValue !== undefined && model.$viewValue !== '') {
          model.$setValidity('nxEqualEx', value === model.$viewValue);
        }
      });
      model.$parsers.push(function (value) {
        // Mute the nxEqual error if the second ctrl is empty.
        if (value === undefined || value === '') {
          model.$setValidity('nxEqualEx', true);
          return value;
        }
        var isValid = value === scope.$eval(attrs.nxEqualEx);
        model.$setValidity('nxEqualEx', isValid);
        return isValid ? value : undefined;
      });
    }
  };
});

},{"angular":2}],35:[function(require,module,exports){
'use strict';

var app = require('angular').module('kontApp');

app.filter('interpolate', function(version) {
  return function(text) {
    return String(text).replace(/\%VERSION\%/mg, version);
  };
});

},{"angular":2}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuL2FwcC9zY3JpcHRzL2FwcC5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9hbmd1bGFyLWluZGV4LmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci1ib290c3RyYXAvdWktYm9vdHN0cmFwLXRwbHMuanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyLWNvb2tpZXMvYW5ndWxhci1jb29raWVzLm1pbi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXItZm9ybWx5L2Rpc3QvZm9ybWx5LmJvb3RzdHJhcC5taW4uanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyLWxvYWRpbmctYmFyL2J1aWxkL2xvYWRpbmctYmFyLm1pbi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXItcmVzb3VyY2UvYW5ndWxhci1yZXNvdXJjZS5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXItdWktcm91dGVyL3JlbGVhc2UvYW5ndWxhci11aS1yb3V0ZXIubWluLmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci11aS10cmVlL2Rpc3QvYW5ndWxhci11aS10cmVlLm1pbi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXIvYW5ndWxhci5taW4uanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvYm93ZXJfY29tcG9uZW50cy9qcXVlcnkvZGlzdC9qcXVlcnkubWluLmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2Jvd2VyX2NvbXBvbmVudHMvbG9kYXNoL2Rpc3QvbG9kYXNoLm1pbi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9ib3dlcl9jb21wb25lbnRzL25nLWZpbGUtdXBsb2FkL2FuZ3VsYXItZmlsZS11cGxvYWQtc2hpbS5taW4uanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvYm93ZXJfY29tcG9uZW50cy9uZy1maWxlLXVwbG9hZC9hbmd1bGFyLWZpbGUtdXBsb2FkLm1pbi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9ib3dlcl9jb21wb25lbnRzL3Jlc3Rhbmd1bGFyL2Rpc3QvcmVzdGFuZ3VsYXIubWluLmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2Jvd2VyX2NvbXBvbmVudHMvdGV4dEFuZ3VsYXIvZGlzdC90ZXh0QW5ndWxhci1zYW5pdGl6ZS5taW4uanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvYm93ZXJfY29tcG9uZW50cy90ZXh0QW5ndWxhci9kaXN0L3RleHRBbmd1bGFyLm1pbi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy9pbmRleC5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy9wYWdlZWRpdC5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy9wYWdldHJlZS5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy9wcmVyZW5kZXIuanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvY29udHJvbGxlcnMvc2lkZW5hdi5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy9zaXRlYWRkLmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2NvbnRyb2xsZXJzL3NpdGVkZXRhaWwuanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvY29udHJvbGxlcnMvc2l0ZWxpc3QuanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvY29udHJvbGxlcnMvc2l0ZW1hcC5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy91c2VyYWRkLmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2NvbnRyb2xsZXJzL3VzZXJhdXRodG9rZW4uanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvY29udHJvbGxlcnMvdXNlcmNyZWQuanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvY29udHJvbGxlcnMvdXNlcmNyZWRwYXNzd29yZC5qcyIsIi9ob21lL3ZpY3Rvci93b3Jrc3BhY2Uva29udGFwcC9hcHAvc2NyaXB0cy9jb250cm9sbGVycy91c2VyZGV0YWlsLmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2NvbnRyb2xsZXJzL3VzZXJsaXN0LmpzIiwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2RpcmVjdGl2ZXMvaW5kZXguanMiLCIvaG9tZS92aWN0b3Ivd29ya3NwYWNlL2tvbnRhcHAvYXBwL3NjcmlwdHMvZmlsdGVycy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoT0E7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZrSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbm5CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBOztBQ0FBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDelpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbi8vcmVxdWlyZSgnZXM1LXNoaW0nKTtcbi8vcmVxdWlyZSgnZXM1LXNoYW0nKTtcblxucmVxdWlyZSgnanF1ZXJ5Jyk7XG5yZXF1aXJlKCduZy1maWxlLXVwbG9hZC1zaGltJyk7XG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcbnJlcXVpcmUoJ25nLWZpbGUtdXBsb2FkJyk7XG5yZXF1aXJlKCdhbmd1bGFyLXJlc291cmNlJyk7XG5yZXF1aXJlKCdhbmd1bGFyLWNvb2tpZXMnKTtcbnJlcXVpcmUoJ2FuZ3VsYXItdWktcm91dGVyJyk7XG5yZXF1aXJlKCdyZXN0YW5ndWxhcicpO1xucmVxdWlyZSgnbG9kYXNoJyk7XG5yZXF1aXJlKCdhbmd1bGFyLXVpLXRyZWUnKTtcbnJlcXVpcmUoJ2FuZ3VsYXItYm9vdHN0cmFwJyk7XG5yZXF1aXJlKCd0ZXh0QW5ndWxhclNhbml0aXplJyk7XG5yZXF1aXJlKCd0ZXh0QW5ndWxhcicpO1xucmVxdWlyZSgnYW5ndWxhci1mb3JtbHknKTtcbnJlcXVpcmUoJ2FuZ3VsYXItbG9hZGluZy1iYXInKTtcblxuLy92YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2tvbnRBcHAnLCBbJ3VpLnJvdXRlciddKTtcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdrb250QXBwJywgWyduZycsICd1aS5yb3V0ZXInLCAnbmdSZXNvdXJjZScsICduZ0Nvb2tpZXMnLFxuICAndWkuYm9vdHN0cmFwJywgJ3VpLnRyZWUnLFxuICAncmVzdGFuZ3VsYXInLCd0ZXh0QW5ndWxhcicsICdmb3JtbHknLCAnYW5ndWxhckZpbGVVcGxvYWQnLCAnYW5ndWxhci1sb2FkaW5nLWJhciddKTtcblxuLy8gYXBwLmNvbnN0YW50KCdWRVJTSU9OJywgcmVxdWlyZSgnLi4vLi4vcGFja2FnZS5qc29uJykudmVyc2lvbik7XG5cbnJlcXVpcmUoJy4vZmlsdGVycycpO1xucmVxdWlyZSgnLi9kaXJlY3RpdmVzJyk7XG5yZXF1aXJlKCcuL2NvbnRyb2xsZXJzJyk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCBSZXN0YW5ndWxhclByb3ZpZGVyKSB7XG5cbiAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKTtcblxuICBSZXN0YW5ndWxhclByb3ZpZGVyLnNldEJhc2VVcmwoJy9hcGknKTtcblxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvc2l0ZXMnKTtcblxuICAkc3RhdGVQcm92aWRlclxuICAuc3RhdGUoJ2xvZ2luJywge1xuICAgIHVybDogJy9sb2dpbicsXG4gICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9sb2dpbi5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJ1xuICB9KVxuXG4gIC5zdGF0ZSgnc2l0ZXMnLCB7XG4gICAgdXJsOiAnL3NpdGVzJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpdGVsaXN0Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdTaXRlTGlzdENvbnRyb2xsZXInXG4gIH0pXG4gIC5zdGF0ZSgnc2l0ZXMuZGV0YWlsJywge1xuICAgIHVybDogJy97c2l0ZUlkOlswLTldezAsOX19JyxcbiAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpdGVkZXRhaWwuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1NpdGVEZXRhaWxDb250cm9sbGVyJ1xuICB9KVxuICAuc3RhdGUoJ3NpdGVzLmNyZWF0ZScsIHtcbiAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpdGVhZGQuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1NpdGVBZGRDb250cm9sbGVyJ1xuICB9KVxuICAuc3RhdGUoJ3NpdGVzLnBhZ2V0cmVlJywge1xuICAgIHVybDogJy97c2l0ZUlkOlswLTldezAsOX19L3BhZ2V0cmVlJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3BhZ2V0cmVlLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQYWdlVHJlZUNvbnRyb2xsZXInXG4gIH0pXG4gIC5zdGF0ZSgnc2l0ZXMucGFnZXMnLCB7XG4gICAgdXJsOiAnL3tzaXRlSWQ6WzAtOV17MCw5fX0vcGFnZXMve3BhZ2VJZDpbMC05XXswLDl9fScsXG4gICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9wYWdlZGV0YWlsLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdQYWdlRWRpdENvbnRyb2xsZXInXG4gIH0pXG5cbiAgLnN0YXRlKCdkYXRhZm9ybXMnLCB7XG4gICAgdXJsOiAnL2RhdGFmb3JtcycsXG4gICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9kYXRhZm9ybXMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ0RhdGFGb3JtTGlzdENvbnRyb2xsZXInXG4gIH0pXG4gIC5zdGF0ZSgnZGF0YWZvcm1zLmRldGFpbCcsIHtcbiAgICB1cmw6ICcve2Zvcm1JZH0nLFxuICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZGF0YWZvcm1kZXRhaWwuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ0RhdGFGb3JtRGV0YWlsc0NvbnRyb2xsZXInXG4gIH0pXG4gIC5zdGF0ZSgnZGF0YWZvcm1zLmNyZWF0ZScsIHtcbiAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2RhdGFmb3JtZGV0YWlsLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdEYXRhRm9ybUFkZENvbnRyb2xsZXInXG4gIH0pXG5cbiAgLnN0YXRlKCd1c2VycycsIHtcbiAgICB1cmw6ICcvdXNlcnMnLFxuICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdXNlcmxpc3QuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1VzZXJMaXN0Q29udHJvbGxlcidcbiAgfSlcbiAgLnN0YXRlKCd1c2Vycy5hZGQnLCB7XG4gICAgdXJsOiAnL2FkZCcsXG4gICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VyYWRkLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdVc2VyQWRkTmV3Q29udHJvbGxlcidcbiAgfSlcbiAgLnN0YXRlKCd1c2Vycy5kZXRhaWwnLCB7XG4gICAgdXJsOiAnL3t1c2VySWQ6WzAtOV17MCw5fX0nLFxuICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdXNlcmRldGFpbC5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnVXNlckRldGFpbENvbnRyb2xsZXInXG4gIH0pXG4gIC5zdGF0ZSgndXNlcnMuZGV0YWlsLmNyZWRlbnRpYWxzJywge1xuICAgIHVybDogJy9jcmVkZW50aWFscycsXG4gICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VyY3JlZGVudGlhbHMuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1VzZXJDcmVkQ29udHJvbGxlcidcbiAgfSlcbiAgLnN0YXRlKCd1c2Vycy5kZXRhaWwuY3JlZGVudGlhbHMuY2hwYXNzd29yZCcsIHtcbiAgICB1cmw6ICcvY2hwYXNzd29yZC97Y3JlZElkfScsXG4gICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy91c2VyY3JlZGNocGFzc3dvcmQuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1VzZXJDcmVkUGFzc3dvcmRDb250cm9sbGVyJ1xuICB9KVxuICAuc3RhdGUoJ3VzZXJzLmRldGFpbC5hdXRodG9rZW5zJywge1xuICAgIHVybDogJy9hdXRodG9rZW5zJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3VzZXJhdXRodG9rZW5zLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdVc2VyQXV0aFRva2VuQ29udHJvbGxlcidcbiAgfSlcblxuICAuc3RhdGUoJ3NpdGVtYXAnLCB7XG4gICAgdXJsOiAnL3NpdGVtYXAve2FjdGlvbk5hbWV9JyxcbiAgICB0ZW1wbGF0ZTogJ09LJyxcbiAgICBjb250cm9sbGVyOiAnU2l0ZW1hcENvbnRyb2xsZXInXG4gIH0pXG4gIC5zdGF0ZSgncHJlcmVuZGVyJywge1xuICAgIHVybDogJy9wcmVyZW5kZXIvZG8nLFxuICAgIHRlbXBsYXRlOiAnT0snLFxuICAgIGNvbnRyb2xsZXI6ICdQcmVyZW5kZXJDb250cm9sbGVyJ1xuICB9KTtcblxuICAvKiBSZWdpc3RlciBlcnJvciBwcm92aWRlciB0aGF0IHNob3dzIG1lc3NhZ2Ugb24gZmFpbGVkIHJlcXVlc3RzIG9yIHJlZGlyZWN0cyB0byBsb2dpbiBwYWdlIG9uXG4gICAgICAgICAgICAqIHVuYXV0aGVudGljYXRlZCByZXF1ZXN0cyAqL1xuICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uICgkcSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdyZXNwb25zZUVycm9yJzogZnVuY3Rpb24gKHJlamVjdGlvbikge1xuICAgICAgICB2YXIgc3RhdHVzID0gcmVqZWN0aW9uLnN0YXR1cztcbiAgICAgICAgdmFyIGNvbmZpZyA9IHJlamVjdGlvbi5jb25maWc7XG4gICAgICAgIHZhciBtZXRob2QgPSBjb25maWcubWV0aG9kO1xuICAgICAgICB2YXIgdXJsID0gY29uZmlnLnVybDtcblxuICAgICAgICBpZiAoc3RhdHVzID09IDQwMSkge1xuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmVycm9yID0gbWV0aG9kICsgJyBvbiAnICsgdXJsICsgJyBmYWlsZWQgd2l0aCBzdGF0dXMgJyArIHN0YXR1cztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gIC8qIFJlZ2lzdGVycyBhdXRoIHRva2VuIGludGVyY2VwdG9yLCBhdXRoIHRva2VuIGlzIGVpdGhlciBwYXNzZWQgYnkgaGVhZGVyIG9yIGJ5IHF1ZXJ5IHBhcmFtZXRlclxuICAgICAgICAgICAgKiBhcyBzb29uIGFzIHRoZXJlIGlzIGFuIGF1dGhlbnRpY2F0ZWQgdXNlciAqL1xuICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uICgkcSwgJHJvb3RTY29wZSkge1xuICAgIHJldHVybiB7XG4gICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uIChjb25maWcpIHtcblxuICAgICAgICB2YXIgdXNlQXV0aFRva2VuSGVhZGVyID0gdHJ1ZTtcblxuICAgICAgICB2YXIgaXNSZXN0Q2FsbCA9IGNvbmZpZy51cmwuaW5kZXhPZignL2FwaScpID09IDA7XG4gICAgICAgIGlmIChpc1Jlc3RDYWxsICYmIGFuZ3VsYXIuaXNEZWZpbmVkKCRyb290U2NvcGUuYXV0aFRva2VuKSkge1xuICAgICAgICAgIHZhciBhdXRoVG9rZW4gPSAkcm9vdFNjb3BlLmF1dGhUb2tlbjtcbiAgICAgICAgICBpZiAodXNlQXV0aFRva2VuSGVhZGVyKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVyc1snWC1BdXRoLVRva2VuJ10gPSBhdXRoVG9rZW47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbmZpZy51cmwgPSBjb25maWcudXJsICsgJz90b2tlbj0nICsgYXV0aFRva2VuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uZmlnIHx8ICRxLndoZW4oY29uZmlnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG59KTtcblxuYXBwLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkY29va2llU3RvcmUsIFJlc3Rhbmd1bGFyKSB7XG5cbiAgLy8gY29uc29sZS5sb2coXCJJbml0aWFsaXplIHJvb3RTY29wZVwiKTtcblxuICAvKiBSZXNldCBlcnJvciB3aGVuIGEgbmV3IHZpZXcgaXMgbG9hZGVkICovXG4gICRyb290U2NvcGUuJG9uKCckdmlld0NvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgZGVsZXRlICRyb290U2NvcGUuZXJyb3I7XG4gIH0pO1xuXG4gIC8vIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6ZSBoYXNSb2xlIGZ1bmN0aW9uXCIpO1xuXG4gICRyb290U2NvcGUuaGFzUm9sZSA9IGZ1bmN0aW9uIChyb2xlKSB7XG5cbiAgICBpZiAoJHJvb3RTY29wZS51c2VyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoJHJvb3RTY29wZS51c2VyLnJvbGVzW3JvbGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gJHJvb3RTY29wZS51c2VyLnJvbGVzW3JvbGVdO1xuICB9O1xuXG4gICRyb290U2NvcGUubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgIGRlbGV0ZSAkcm9vdFNjb3BlLnVzZXI7XG4gICAgZGVsZXRlICRyb290U2NvcGUuYXV0aFRva2VuO1xuICAgICRjb29raWVTdG9yZS5yZW1vdmUoJ2F1dGhUb2tlbicpO1xuICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgfTtcblxuICAvKiBUcnkgZ2V0dGluZyB2YWxpZCB1c2VyIGZyb20gY29va2llIG9yIGdvIHRvIGxvZ2luIHBhZ2UgKi9cbiAgdmFyIG9yaWdpbmFsUGF0aCA9ICRsb2NhdGlvbi5wYXRoKCk7XG4gICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgdmFyIGF1dGhUb2tlbiA9ICRjb29raWVTdG9yZS5nZXQoJ2F1dGhUb2tlbicpO1xuICBpZiAoYXV0aFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAkcm9vdFNjb3BlLmF1dGhUb2tlbiA9IGF1dGhUb2tlbjtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3VzZXInKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChjdXJyZW50VXNlcikge1xuICAgICAgJHJvb3RTY29wZS51c2VyID0gY3VycmVudFVzZXIucGxhaW4oKTtcbiAgICAgICRsb2NhdGlvbi5wYXRoKG9yaWdpbmFsUGF0aCk7XG4gICAgfSk7XG4gIH1cblxuICAkcm9vdFNjb3BlLmluaXRpYWxpemVkID0gdHJ1ZTtcbn0pO1xuIiwicmVxdWlyZSgnLi9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXIvYW5ndWxhci5taW4uanMnKTtcbm1vZHVsZS5leHBvcnRzID0gYW5ndWxhcjtcbiIsIi8qXG4gKiBhbmd1bGFyLXVpLWJvb3RzdHJhcFxuICogaHR0cDovL2FuZ3VsYXItdWkuZ2l0aHViLmlvL2Jvb3RzdHJhcC9cblxuICogVmVyc2lvbjogMC4xMS4yIC0gMjAxNC0wOS0yNlxuICogTGljZW5zZTogTUlUXG4gKi9cbmFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwXCIsIFtcInVpLmJvb3RzdHJhcC50cGxzXCIsIFwidWkuYm9vdHN0cmFwLnRyYW5zaXRpb25cIixcInVpLmJvb3RzdHJhcC5jb2xsYXBzZVwiLFwidWkuYm9vdHN0cmFwLmFjY29yZGlvblwiLFwidWkuYm9vdHN0cmFwLmFsZXJ0XCIsXCJ1aS5ib290c3RyYXAuYmluZEh0bWxcIixcInVpLmJvb3RzdHJhcC5idXR0b25zXCIsXCJ1aS5ib290c3RyYXAuY2Fyb3VzZWxcIixcInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyXCIsXCJ1aS5ib290c3RyYXAucG9zaXRpb25cIixcInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyXCIsXCJ1aS5ib290c3RyYXAuZHJvcGRvd25cIixcInVpLmJvb3RzdHJhcC5tb2RhbFwiLFwidWkuYm9vdHN0cmFwLnBhZ2luYXRpb25cIixcInVpLmJvb3RzdHJhcC50b29sdGlwXCIsXCJ1aS5ib290c3RyYXAucG9wb3ZlclwiLFwidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyXCIsXCJ1aS5ib290c3RyYXAucmF0aW5nXCIsXCJ1aS5ib290c3RyYXAudGFic1wiLFwidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXJcIixcInVpLmJvb3RzdHJhcC50eXBlYWhlYWRcIl0pO1xuYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAudHBsc1wiLCBbXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWxcIixcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwiLFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLFwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIixcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbFwiLFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtcG9wdXAuaHRtbFwiLFwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sXCIsXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sXCIsXCJ0ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWxcIixcInRlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIixcInRlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIixcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCIsXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIixcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtcG9wdXAuaHRtbFwiXSk7XG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnRyYW5zaXRpb24nLCBbXSlcblxuLyoqXG4gKiAkdHJhbnNpdGlvbiBzZXJ2aWNlIHByb3ZpZGVzIGEgY29uc2lzdGVudCBpbnRlcmZhY2UgdG8gdHJpZ2dlciBDU1MgMyB0cmFuc2l0aW9ucyBhbmQgdG8gYmUgaW5mb3JtZWQgd2hlbiB0aGV5IGNvbXBsZXRlLlxuICogQHBhcmFtICB7RE9NRWxlbWVudH0gZWxlbWVudCAgVGhlIERPTUVsZW1lbnQgdGhhdCB3aWxsIGJlIGFuaW1hdGVkLlxuICogQHBhcmFtICB7c3RyaW5nfG9iamVjdHxmdW5jdGlvbn0gdHJpZ2dlciAgVGhlIHRoaW5nIHRoYXQgd2lsbCBjYXVzZSB0aGUgdHJhbnNpdGlvbiB0byBzdGFydDpcbiAqICAgLSBBcyBhIHN0cmluZywgaXQgcmVwcmVzZW50cyB0aGUgY3NzIGNsYXNzIHRvIGJlIGFkZGVkIHRvIHRoZSBlbGVtZW50LlxuICogICAtIEFzIGFuIG9iamVjdCwgaXQgcmVwcmVzZW50cyBhIGhhc2ggb2Ygc3R5bGUgYXR0cmlidXRlcyB0byBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICogICAtIEFzIGEgZnVuY3Rpb24sIGl0IHJlcHJlc2VudHMgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgdGhhdCB3aWxsIGNhdXNlIHRoZSB0cmFuc2l0aW9uIHRvIG9jY3VyLlxuICogQHJldHVybiB7UHJvbWlzZX0gIEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHRyYW5zaXRpb24gZmluaXNoZXMuXG4gKi9cbi5mYWN0b3J5KCckdHJhbnNpdGlvbicsIFsnJHEnLCAnJHRpbWVvdXQnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRxLCAkdGltZW91dCwgJHJvb3RTY29wZSkge1xuXG4gIHZhciAkdHJhbnNpdGlvbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHRyaWdnZXIsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgIHZhciBlbmRFdmVudE5hbWUgPSAkdHJhbnNpdGlvbltvcHRpb25zLmFuaW1hdGlvbiA/ICdhbmltYXRpb25FbmRFdmVudE5hbWUnIDogJ3RyYW5zaXRpb25FbmRFdmVudE5hbWUnXTtcblxuICAgIHZhciB0cmFuc2l0aW9uRW5kSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgZWxlbWVudC51bmJpbmQoZW5kRXZlbnROYW1lLCB0cmFuc2l0aW9uRW5kSGFuZGxlcik7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKGVuZEV2ZW50TmFtZSkge1xuICAgICAgZWxlbWVudC5iaW5kKGVuZEV2ZW50TmFtZSwgdHJhbnNpdGlvbkVuZEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFdyYXAgaW4gYSB0aW1lb3V0IHRvIGFsbG93IHRoZSBicm93c2VyIHRpbWUgdG8gdXBkYXRlIHRoZSBET00gYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGlzIHRvIG9jY3VyXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIGFuZ3VsYXIuaXNTdHJpbmcodHJpZ2dlcikgKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3ModHJpZ2dlcik7XG4gICAgICB9IGVsc2UgaWYgKCBhbmd1bGFyLmlzRnVuY3Rpb24odHJpZ2dlcikgKSB7XG4gICAgICAgIHRyaWdnZXIoZWxlbWVudCk7XG4gICAgICB9IGVsc2UgaWYgKCBhbmd1bGFyLmlzT2JqZWN0KHRyaWdnZXIpICkge1xuICAgICAgICBlbGVtZW50LmNzcyh0cmlnZ2VyKTtcbiAgICAgIH1cbiAgICAgIC8vSWYgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRyYW5zaXRpb25zLCBpbnN0YW50bHkgcmVzb2x2ZVxuICAgICAgaWYgKCAhZW5kRXZlbnROYW1lICkge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQWRkIG91ciBjdXN0b20gY2FuY2VsIGZ1bmN0aW9uIHRvIHRoZSBwcm9taXNlIHRoYXQgaXMgcmV0dXJuZWRcbiAgICAvLyBXZSBjYW4gY2FsbCB0aGlzIGlmIHdlIGFyZSBhYm91dCB0byBydW4gYSBuZXcgdHJhbnNpdGlvbiwgd2hpY2ggd2Uga25vdyB3aWxsIHByZXZlbnQgdGhpcyB0cmFuc2l0aW9uIGZyb20gZW5kaW5nLFxuICAgIC8vIGkuZS4gaXQgd2lsbCB0aGVyZWZvcmUgbmV2ZXIgcmFpc2UgYSB0cmFuc2l0aW9uRW5kIGV2ZW50IGZvciB0aGF0IHRyYW5zaXRpb25cbiAgICBkZWZlcnJlZC5wcm9taXNlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCBlbmRFdmVudE5hbWUgKSB7XG4gICAgICAgIGVsZW1lbnQudW5iaW5kKGVuZEV2ZW50TmFtZSwgdHJhbnNpdGlvbkVuZEhhbmRsZXIpO1xuICAgICAgfVxuICAgICAgZGVmZXJyZWQucmVqZWN0KCdUcmFuc2l0aW9uIGNhbmNlbGxlZCcpO1xuICAgIH07XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfTtcblxuICAvLyBXb3JrIG91dCB0aGUgbmFtZSBvZiB0aGUgdHJhbnNpdGlvbkVuZCBldmVudFxuICB2YXIgdHJhbnNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHJhbnMnKTtcbiAgdmFyIHRyYW5zaXRpb25FbmRFdmVudE5hbWVzID0ge1xuICAgICdXZWJraXRUcmFuc2l0aW9uJzogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxuICAgICdNb3pUcmFuc2l0aW9uJzogJ3RyYW5zaXRpb25lbmQnLFxuICAgICdPVHJhbnNpdGlvbic6ICdvVHJhbnNpdGlvbkVuZCcsXG4gICAgJ3RyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCdcbiAgfTtcbiAgdmFyIGFuaW1hdGlvbkVuZEV2ZW50TmFtZXMgPSB7XG4gICAgJ1dlYmtpdFRyYW5zaXRpb24nOiAnd2Via2l0QW5pbWF0aW9uRW5kJyxcbiAgICAnTW96VHJhbnNpdGlvbic6ICdhbmltYXRpb25lbmQnLFxuICAgICdPVHJhbnNpdGlvbic6ICdvQW5pbWF0aW9uRW5kJyxcbiAgICAndHJhbnNpdGlvbic6ICdhbmltYXRpb25lbmQnXG4gIH07XG4gIGZ1bmN0aW9uIGZpbmRFbmRFdmVudE5hbWUoZW5kRXZlbnROYW1lcykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gZW5kRXZlbnROYW1lcyl7XG4gICAgICBpZiAodHJhbnNFbGVtZW50LnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGVuZEV2ZW50TmFtZXNbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gICR0cmFuc2l0aW9uLnRyYW5zaXRpb25FbmRFdmVudE5hbWUgPSBmaW5kRW5kRXZlbnROYW1lKHRyYW5zaXRpb25FbmRFdmVudE5hbWVzKTtcbiAgJHRyYW5zaXRpb24uYW5pbWF0aW9uRW5kRXZlbnROYW1lID0gZmluZEVuZEV2ZW50TmFtZShhbmltYXRpb25FbmRFdmVudE5hbWVzKTtcbiAgcmV0dXJuICR0cmFuc2l0aW9uO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmNvbGxhcHNlJywgWyd1aS5ib290c3RyYXAudHJhbnNpdGlvbiddKVxuXG4gIC5kaXJlY3RpdmUoJ2NvbGxhcHNlJywgWyckdHJhbnNpdGlvbicsIGZ1bmN0aW9uICgkdHJhbnNpdGlvbikge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblxuICAgICAgICB2YXIgaW5pdGlhbEFuaW1Ta2lwID0gdHJ1ZTtcbiAgICAgICAgdmFyIGN1cnJlbnRUcmFuc2l0aW9uO1xuXG4gICAgICAgIGZ1bmN0aW9uIGRvVHJhbnNpdGlvbihjaGFuZ2UpIHtcbiAgICAgICAgICB2YXIgbmV3VHJhbnNpdGlvbiA9ICR0cmFuc2l0aW9uKGVsZW1lbnQsIGNoYW5nZSk7XG4gICAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5jYW5jZWwoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudFRyYW5zaXRpb24gPSBuZXdUcmFuc2l0aW9uO1xuICAgICAgICAgIG5ld1RyYW5zaXRpb24udGhlbihuZXdUcmFuc2l0aW9uRG9uZSwgbmV3VHJhbnNpdGlvbkRvbmUpO1xuICAgICAgICAgIHJldHVybiBuZXdUcmFuc2l0aW9uO1xuXG4gICAgICAgICAgZnVuY3Rpb24gbmV3VHJhbnNpdGlvbkRvbmUoKSB7XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgaXQncyB0aGlzIHRyYW5zaXRpb24sIG90aGVyd2lzZSwgbGVhdmUgaXQgYWxvbmUuXG4gICAgICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24gPT09IG5ld1RyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgY3VycmVudFRyYW5zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXhwYW5kKCkge1xuICAgICAgICAgIGlmIChpbml0aWFsQW5pbVNraXApIHtcbiAgICAgICAgICAgIGluaXRpYWxBbmltU2tpcCA9IGZhbHNlO1xuICAgICAgICAgICAgZXhwYW5kRG9uZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdjb2xsYXBzZScpLmFkZENsYXNzKCdjb2xsYXBzaW5nJyk7XG4gICAgICAgICAgICBkb1RyYW5zaXRpb24oeyBoZWlnaHQ6IGVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0ICsgJ3B4JyB9KS50aGVuKGV4cGFuZERvbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGV4cGFuZERvbmUoKSB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2luZycpO1xuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2NvbGxhcHNlIGluJyk7XG4gICAgICAgICAgZWxlbWVudC5jc3Moe2hlaWdodDogJ2F1dG8nfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjb2xsYXBzZSgpIHtcbiAgICAgICAgICBpZiAoaW5pdGlhbEFuaW1Ta2lwKSB7XG4gICAgICAgICAgICBpbml0aWFsQW5pbVNraXAgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbGxhcHNlRG9uZSgpO1xuICAgICAgICAgICAgZWxlbWVudC5jc3Moe2hlaWdodDogMH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDU1MgdHJhbnNpdGlvbnMgZG9uJ3Qgd29yayB3aXRoIGhlaWdodDogYXV0bywgc28gd2UgaGF2ZSB0byBtYW51YWxseSBjaGFuZ2UgdGhlIGhlaWdodCB0byBhIHNwZWNpZmljIHZhbHVlXG4gICAgICAgICAgICBlbGVtZW50LmNzcyh7IGhlaWdodDogZWxlbWVudFswXS5zY3JvbGxIZWlnaHQgKyAncHgnIH0pO1xuICAgICAgICAgICAgLy90cmlnZ2VyIHJlZmxvdyBzbyBhIGJyb3dzZXIgcmVhbGl6ZXMgdGhhdCBoZWlnaHQgd2FzIHVwZGF0ZWQgZnJvbSBhdXRvIHRvIGEgc3BlY2lmaWMgdmFsdWVcbiAgICAgICAgICAgIHZhciB4ID0gZWxlbWVudFswXS5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2UgaW4nKS5hZGRDbGFzcygnY29sbGFwc2luZycpO1xuXG4gICAgICAgICAgICBkb1RyYW5zaXRpb24oeyBoZWlnaHQ6IDAgfSkudGhlbihjb2xsYXBzZURvbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvbGxhcHNlRG9uZSgpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdjb2xsYXBzaW5nJyk7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnY29sbGFwc2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5jb2xsYXBzZSwgZnVuY3Rpb24gKHNob3VsZENvbGxhcHNlKSB7XG4gICAgICAgICAgaWYgKHNob3VsZENvbGxhcHNlKSB7XG4gICAgICAgICAgICBjb2xsYXBzZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHBhbmQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5hY2NvcmRpb24nLCBbJ3VpLmJvb3RzdHJhcC5jb2xsYXBzZSddKVxuXG4uY29uc3RhbnQoJ2FjY29yZGlvbkNvbmZpZycsIHtcbiAgY2xvc2VPdGhlcnM6IHRydWVcbn0pXG5cbi5jb250cm9sbGVyKCdBY2NvcmRpb25Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJGF0dHJzJywgJ2FjY29yZGlvbkNvbmZpZycsIGZ1bmN0aW9uICgkc2NvcGUsICRhdHRycywgYWNjb3JkaW9uQ29uZmlnKSB7XG5cbiAgLy8gVGhpcyBhcnJheSBrZWVwcyB0cmFjayBvZiB0aGUgYWNjb3JkaW9uIGdyb3Vwc1xuICB0aGlzLmdyb3VwcyA9IFtdO1xuXG4gIC8vIEVuc3VyZSB0aGF0IGFsbCB0aGUgZ3JvdXBzIGluIHRoaXMgYWNjb3JkaW9uIGFyZSBjbG9zZWQsIHVubGVzcyBjbG9zZS1vdGhlcnMgZXhwbGljaXRseSBzYXlzIG5vdCB0b1xuICB0aGlzLmNsb3NlT3RoZXJzID0gZnVuY3Rpb24ob3Blbkdyb3VwKSB7XG4gICAgdmFyIGNsb3NlT3RoZXJzID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmNsb3NlT3RoZXJzKSA/ICRzY29wZS4kZXZhbCgkYXR0cnMuY2xvc2VPdGhlcnMpIDogYWNjb3JkaW9uQ29uZmlnLmNsb3NlT3RoZXJzO1xuICAgIGlmICggY2xvc2VPdGhlcnMgKSB7XG4gICAgICBhbmd1bGFyLmZvckVhY2godGhpcy5ncm91cHMsIGZ1bmN0aW9uIChncm91cCkge1xuICAgICAgICBpZiAoIGdyb3VwICE9PSBvcGVuR3JvdXAgKSB7XG4gICAgICAgICAgZ3JvdXAuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvLyBUaGlzIGlzIGNhbGxlZCBmcm9tIHRoZSBhY2NvcmRpb24tZ3JvdXAgZGlyZWN0aXZlIHRvIGFkZCBpdHNlbGYgdG8gdGhlIGFjY29yZGlvblxuICB0aGlzLmFkZEdyb3VwID0gZnVuY3Rpb24oZ3JvdXBTY29wZSkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB0aGlzLmdyb3Vwcy5wdXNoKGdyb3VwU2NvcGUpO1xuXG4gICAgZ3JvdXBTY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB0aGF0LnJlbW92ZUdyb3VwKGdyb3VwU2NvcGUpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFRoaXMgaXMgY2FsbGVkIGZyb20gdGhlIGFjY29yZGlvbi1ncm91cCBkaXJlY3RpdmUgd2hlbiB0byByZW1vdmUgaXRzZWxmXG4gIHRoaXMucmVtb3ZlR3JvdXAgPSBmdW5jdGlvbihncm91cCkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuZ3JvdXBzLmluZGV4T2YoZ3JvdXApO1xuICAgIGlmICggaW5kZXggIT09IC0xICkge1xuICAgICAgdGhpcy5ncm91cHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH07XG5cbn1dKVxuXG4vLyBUaGUgYWNjb3JkaW9uIGRpcmVjdGl2ZSBzaW1wbHkgc2V0cyB1cCB0aGUgZGlyZWN0aXZlIGNvbnRyb2xsZXJcbi8vIGFuZCBhZGRzIGFuIGFjY29yZGlvbiBDU1MgY2xhc3MgdG8gaXRzZWxmIGVsZW1lbnQuXG4uZGlyZWN0aXZlKCdhY2NvcmRpb24nLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6J0VBJyxcbiAgICBjb250cm9sbGVyOidBY2NvcmRpb25Db250cm9sbGVyJyxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sJ1xuICB9O1xufSlcblxuLy8gVGhlIGFjY29yZGlvbi1ncm91cCBkaXJlY3RpdmUgaW5kaWNhdGVzIGEgYmxvY2sgb2YgaHRtbCB0aGF0IHdpbGwgZXhwYW5kIGFuZCBjb2xsYXBzZSBpbiBhbiBhY2NvcmRpb25cbi5kaXJlY3RpdmUoJ2FjY29yZGlvbkdyb3VwJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTonXmFjY29yZGlvbicsICAgICAgICAgLy8gV2UgbmVlZCB0aGlzIGRpcmVjdGl2ZSB0byBiZSBpbnNpZGUgYW4gYWNjb3JkaW9uXG4gICAgcmVzdHJpY3Q6J0VBJyxcbiAgICB0cmFuc2NsdWRlOnRydWUsICAgICAgICAgICAgICAvLyBJdCB0cmFuc2NsdWRlcyB0aGUgY29udGVudHMgb2YgdGhlIGRpcmVjdGl2ZSBpbnRvIHRoZSB0ZW1wbGF0ZVxuICAgIHJlcGxhY2U6IHRydWUsICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGRpcmVjdGl2ZSB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIHRlbXBsYXRlXG4gICAgdGVtcGxhdGVVcmw6J3RlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbCcsXG4gICAgc2NvcGU6IHtcbiAgICAgIGhlYWRpbmc6ICdAJywgICAgICAgICAgICAgICAvLyBJbnRlcnBvbGF0ZSB0aGUgaGVhZGluZyBhdHRyaWJ1dGUgb250byB0aGlzIHNjb3BlXG4gICAgICBpc09wZW46ICc9PycsXG4gICAgICBpc0Rpc2FibGVkOiAnPT8nXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuc2V0SGVhZGluZyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5oZWFkaW5nID0gZWxlbWVudDtcbiAgICAgIH07XG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGFjY29yZGlvbkN0cmwpIHtcbiAgICAgIGFjY29yZGlvbkN0cmwuYWRkR3JvdXAoc2NvcGUpO1xuXG4gICAgICBzY29wZS4kd2F0Y2goJ2lzT3BlbicsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICggdmFsdWUgKSB7XG4gICAgICAgICAgYWNjb3JkaW9uQ3RybC5jbG9zZU90aGVycyhzY29wZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS50b2dnbGVPcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggIXNjb3BlLmlzRGlzYWJsZWQgKSB7XG4gICAgICAgICAgc2NvcGUuaXNPcGVuID0gIXNjb3BlLmlzT3BlbjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59KVxuXG4vLyBVc2UgYWNjb3JkaW9uLWhlYWRpbmcgYmVsb3cgYW4gYWNjb3JkaW9uLWdyb3VwIHRvIHByb3ZpZGUgYSBoZWFkaW5nIGNvbnRhaW5pbmcgSFRNTFxuLy8gPGFjY29yZGlvbi1ncm91cD5cbi8vICAgPGFjY29yZGlvbi1oZWFkaW5nPkhlYWRpbmcgY29udGFpbmluZyBIVE1MIC0gPGltZyBzcmM9XCIuLi5cIj48L2FjY29yZGlvbi1oZWFkaW5nPlxuLy8gPC9hY2NvcmRpb24tZ3JvdXA+XG4uZGlyZWN0aXZlKCdhY2NvcmRpb25IZWFkaW5nJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSwgICAvLyBHcmFiIHRoZSBjb250ZW50cyB0byBiZSB1c2VkIGFzIHRoZSBoZWFkaW5nXG4gICAgdGVtcGxhdGU6ICcnLCAgICAgICAvLyBJbiBlZmZlY3QgcmVtb3ZlIHRoaXMgZWxlbWVudCFcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHJlcXVpcmU6ICdeYWNjb3JkaW9uR3JvdXAnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBhY2NvcmRpb25Hcm91cEN0cmwsIHRyYW5zY2x1ZGUpIHtcbiAgICAgIC8vIFBhc3MgdGhlIGhlYWRpbmcgdG8gdGhlIGFjY29yZGlvbi1ncm91cCBjb250cm9sbGVyXG4gICAgICAvLyBzbyB0aGF0IGl0IGNhbiBiZSB0cmFuc2NsdWRlZCBpbnRvIHRoZSByaWdodCBwbGFjZSBpbiB0aGUgdGVtcGxhdGVcbiAgICAgIC8vIFtUaGUgc2Vjb25kIHBhcmFtZXRlciB0byB0cmFuc2NsdWRlIGNhdXNlcyB0aGUgZWxlbWVudHMgdG8gYmUgY2xvbmVkIHNvIHRoYXQgdGhleSB3b3JrIGluIG5nLXJlcGVhdF1cbiAgICAgIGFjY29yZGlvbkdyb3VwQ3RybC5zZXRIZWFkaW5nKHRyYW5zY2x1ZGUoc2NvcGUsIGZ1bmN0aW9uKCkge30pKTtcbiAgICB9XG4gIH07XG59KVxuXG4vLyBVc2UgaW4gdGhlIGFjY29yZGlvbi1ncm91cCB0ZW1wbGF0ZSB0byBpbmRpY2F0ZSB3aGVyZSB5b3Ugd2FudCB0aGUgaGVhZGluZyB0byBiZSB0cmFuc2NsdWRlZFxuLy8gWW91IG11c3QgcHJvdmlkZSB0aGUgcHJvcGVydHkgb24gdGhlIGFjY29yZGlvbi1ncm91cCBjb250cm9sbGVyIHRoYXQgd2lsbCBob2xkIHRoZSB0cmFuc2NsdWRlZCBlbGVtZW50XG4vLyA8ZGl2IGNsYXNzPVwiYWNjb3JkaW9uLWdyb3VwXCI+XG4vLyAgIDxkaXYgY2xhc3M9XCJhY2NvcmRpb24taGVhZGluZ1wiID48YSAuLi4gYWNjb3JkaW9uLXRyYW5zY2x1ZGU9XCJoZWFkaW5nXCI+Li4uPC9hPjwvZGl2PlxuLy8gICAuLi5cbi8vIDwvZGl2PlxuLmRpcmVjdGl2ZSgnYWNjb3JkaW9uVHJhbnNjbHVkZScsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlcXVpcmU6ICdeYWNjb3JkaW9uR3JvdXAnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjb250cm9sbGVyKSB7XG4gICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7IHJldHVybiBjb250cm9sbGVyW2F0dHIuYWNjb3JkaW9uVHJhbnNjbHVkZV07IH0sIGZ1bmN0aW9uKGhlYWRpbmcpIHtcbiAgICAgICAgaWYgKCBoZWFkaW5nICkge1xuICAgICAgICAgIGVsZW1lbnQuaHRtbCgnJyk7XG4gICAgICAgICAgZWxlbWVudC5hcHBlbmQoaGVhZGluZyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmFsZXJ0JywgW10pXG5cbi5jb250cm9sbGVyKCdBbGVydENvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCBmdW5jdGlvbiAoJHNjb3BlLCAkYXR0cnMpIHtcbiAgJHNjb3BlLmNsb3NlYWJsZSA9ICdjbG9zZScgaW4gJGF0dHJzO1xufV0pXG5cbi5kaXJlY3RpdmUoJ2FsZXJ0JywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OidFQScsXG4gICAgY29udHJvbGxlcjonQWxlcnRDb250cm9sbGVyJyxcbiAgICB0ZW1wbGF0ZVVybDondGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbCcsXG4gICAgdHJhbnNjbHVkZTp0cnVlLFxuICAgIHJlcGxhY2U6dHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgdHlwZTogJ0AnLFxuICAgICAgY2xvc2U6ICcmJ1xuICAgIH1cbiAgfTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmJpbmRIdG1sJywgW10pXG5cbiAgLmRpcmVjdGl2ZSgnYmluZEh0bWxVbnNhZmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgZWxlbWVudC5hZGRDbGFzcygnbmctYmluZGluZycpLmRhdGEoJyRiaW5kaW5nJywgYXR0ci5iaW5kSHRtbFVuc2FmZSk7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0ci5iaW5kSHRtbFVuc2FmZSwgZnVuY3Rpb24gYmluZEh0bWxVbnNhZmVXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICBlbGVtZW50Lmh0bWwodmFsdWUgfHwgJycpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLmJ1dHRvbnMnLCBbXSlcblxuLmNvbnN0YW50KCdidXR0b25Db25maWcnLCB7XG4gIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcbiAgdG9nZ2xlRXZlbnQ6ICdjbGljaydcbn0pXG5cbi5jb250cm9sbGVyKCdCdXR0b25zQ29udHJvbGxlcicsIFsnYnV0dG9uQ29uZmlnJywgZnVuY3Rpb24oYnV0dG9uQ29uZmlnKSB7XG4gIHRoaXMuYWN0aXZlQ2xhc3MgPSBidXR0b25Db25maWcuYWN0aXZlQ2xhc3MgfHwgJ2FjdGl2ZSc7XG4gIHRoaXMudG9nZ2xlRXZlbnQgPSBidXR0b25Db25maWcudG9nZ2xlRXZlbnQgfHwgJ2NsaWNrJztcbn1dKVxuXG4uZGlyZWN0aXZlKCdidG5SYWRpbycsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiBbJ2J0blJhZGlvJywgJ25nTW9kZWwnXSxcbiAgICBjb250cm9sbGVyOiAnQnV0dG9uc0NvbnRyb2xsZXInLFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICB2YXIgYnV0dG9uc0N0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcblxuICAgICAgLy9tb2RlbCAtPiBVSVxuICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC50b2dnbGVDbGFzcyhidXR0b25zQ3RybC5hY3RpdmVDbGFzcywgYW5ndWxhci5lcXVhbHMobmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUsIHNjb3BlLiRldmFsKGF0dHJzLmJ0blJhZGlvKSkpO1xuICAgICAgfTtcblxuICAgICAgLy91aS0+bW9kZWxcbiAgICAgIGVsZW1lbnQuYmluZChidXR0b25zQ3RybC50b2dnbGVFdmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXNBY3RpdmUgPSBlbGVtZW50Lmhhc0NsYXNzKGJ1dHRvbnNDdHJsLmFjdGl2ZUNsYXNzKTtcblxuICAgICAgICBpZiAoIWlzQWN0aXZlIHx8IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLnVuY2hlY2thYmxlKSkge1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGlzQWN0aXZlID8gbnVsbCA6IHNjb3BlLiRldmFsKGF0dHJzLmJ0blJhZGlvKSk7XG4gICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pXG5cbi5kaXJlY3RpdmUoJ2J0bkNoZWNrYm94JywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlcXVpcmU6IFsnYnRuQ2hlY2tib3gnLCAnbmdNb2RlbCddLFxuICAgIGNvbnRyb2xsZXI6ICdCdXR0b25zQ29udHJvbGxlcicsXG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIHZhciBidXR0b25zQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICBmdW5jdGlvbiBnZXRUcnVlVmFsdWUoKSB7XG4gICAgICAgIHJldHVybiBnZXRDaGVja2JveFZhbHVlKGF0dHJzLmJ0bkNoZWNrYm94VHJ1ZSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldEZhbHNlVmFsdWUoKSB7XG4gICAgICAgIHJldHVybiBnZXRDaGVja2JveFZhbHVlKGF0dHJzLmJ0bkNoZWNrYm94RmFsc2UsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0Q2hlY2tib3hWYWx1ZShhdHRyaWJ1dGVWYWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHZhciB2YWwgPSBzY29wZS4kZXZhbChhdHRyaWJ1dGVWYWx1ZSk7XG4gICAgICAgIHJldHVybiBhbmd1bGFyLmlzRGVmaW5lZCh2YWwpID8gdmFsIDogZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuXG4gICAgICAvL21vZGVsIC0+IFVJXG4gICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKGJ1dHRvbnNDdHJsLmFjdGl2ZUNsYXNzLCBhbmd1bGFyLmVxdWFscyhuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSwgZ2V0VHJ1ZVZhbHVlKCkpKTtcbiAgICAgIH07XG5cbiAgICAgIC8vdWktPm1vZGVsXG4gICAgICBlbGVtZW50LmJpbmQoYnV0dG9uc0N0cmwudG9nZ2xlRXZlbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnQuaGFzQ2xhc3MoYnV0dG9uc0N0cmwuYWN0aXZlQ2xhc3MpID8gZ2V0RmFsc2VWYWx1ZSgpIDogZ2V0VHJ1ZVZhbHVlKCkpO1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcblxuLyoqXG4qIEBuZ2RvYyBvdmVydmlld1xuKiBAbmFtZSB1aS5ib290c3RyYXAuY2Fyb3VzZWxcbipcbiogQGRlc2NyaXB0aW9uXG4qIEFuZ3VsYXJKUyB2ZXJzaW9uIG9mIGFuIGltYWdlIGNhcm91c2VsLlxuKlxuKi9cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuY2Fyb3VzZWwnLCBbJ3VpLmJvb3RzdHJhcC50cmFuc2l0aW9uJ10pXG4uY29udHJvbGxlcignQ2Fyb3VzZWxDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHRpbWVvdXQnLCAnJHRyYW5zaXRpb24nLCBmdW5jdGlvbiAoJHNjb3BlLCAkdGltZW91dCwgJHRyYW5zaXRpb24pIHtcbiAgdmFyIHNlbGYgPSB0aGlzLFxuICAgIHNsaWRlcyA9IHNlbGYuc2xpZGVzID0gJHNjb3BlLnNsaWRlcyA9IFtdLFxuICAgIGN1cnJlbnRJbmRleCA9IC0xLFxuICAgIGN1cnJlbnRUaW1lb3V0LCBpc1BsYXlpbmc7XG4gIHNlbGYuY3VycmVudFNsaWRlID0gbnVsbDtcblxuICB2YXIgZGVzdHJveWVkID0gZmFsc2U7XG4gIC8qIGRpcmVjdGlvbjogXCJwcmV2XCIgb3IgXCJuZXh0XCIgKi9cbiAgc2VsZi5zZWxlY3QgPSAkc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24obmV4dFNsaWRlLCBkaXJlY3Rpb24pIHtcbiAgICB2YXIgbmV4dEluZGV4ID0gc2xpZGVzLmluZGV4T2YobmV4dFNsaWRlKTtcbiAgICAvL0RlY2lkZSBkaXJlY3Rpb24gaWYgaXQncyBub3QgZ2l2ZW5cbiAgICBpZiAoZGlyZWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpcmVjdGlvbiA9IG5leHRJbmRleCA+IGN1cnJlbnRJbmRleCA/ICduZXh0JyA6ICdwcmV2JztcbiAgICB9XG4gICAgaWYgKG5leHRTbGlkZSAmJiBuZXh0U2xpZGUgIT09IHNlbGYuY3VycmVudFNsaWRlKSB7XG4gICAgICBpZiAoJHNjb3BlLiRjdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgICAkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uLmNhbmNlbCgpO1xuICAgICAgICAvL1RpbWVvdXQgc28gbmctY2xhc3MgaW4gdGVtcGxhdGUgaGFzIHRpbWUgdG8gZml4IGNsYXNzZXMgZm9yIGZpbmlzaGVkIHNsaWRlXG4gICAgICAgICR0aW1lb3V0KGdvTmV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnb05leHQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ29OZXh0KCkge1xuICAgICAgLy8gU2NvcGUgaGFzIGJlZW4gZGVzdHJveWVkLCBzdG9wIGhlcmUuXG4gICAgICBpZiAoZGVzdHJveWVkKSB7IHJldHVybjsgfVxuICAgICAgLy9JZiB3ZSBoYXZlIGEgc2xpZGUgdG8gdHJhbnNpdGlvbiBmcm9tIGFuZCB3ZSBoYXZlIGEgdHJhbnNpdGlvbiB0eXBlIGFuZCB3ZSdyZSBhbGxvd2VkLCBnb1xuICAgICAgaWYgKHNlbGYuY3VycmVudFNsaWRlICYmIGFuZ3VsYXIuaXNTdHJpbmcoZGlyZWN0aW9uKSAmJiAhJHNjb3BlLm5vVHJhbnNpdGlvbiAmJiBuZXh0U2xpZGUuJGVsZW1lbnQpIHtcbiAgICAgICAgLy9XZSBzaG91bGRuJ3QgZG8gY2xhc3MgbWFuaXAgaW4gaGVyZSwgYnV0IGl0J3MgdGhlIHNhbWUgd2VpcmQgdGhpbmcgYm9vdHN0cmFwIGRvZXMuIG5lZWQgdG8gZml4IHNvbWV0aW1lXG4gICAgICAgIG5leHRTbGlkZS4kZWxlbWVudC5hZGRDbGFzcyhkaXJlY3Rpb24pO1xuICAgICAgICB2YXIgcmVmbG93ID0gbmV4dFNsaWRlLiRlbGVtZW50WzBdLm9mZnNldFdpZHRoOyAvL2ZvcmNlIHJlZmxvd1xuXG4gICAgICAgIC8vU2V0IGFsbCBvdGhlciBzbGlkZXMgdG8gc3RvcCBkb2luZyB0aGVpciBzdHVmZiBmb3IgdGhlIG5ldyB0cmFuc2l0aW9uXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzbGlkZXMsIGZ1bmN0aW9uKHNsaWRlKSB7XG4gICAgICAgICAgYW5ndWxhci5leHRlbmQoc2xpZGUsIHtkaXJlY3Rpb246ICcnLCBlbnRlcmluZzogZmFsc2UsIGxlYXZpbmc6IGZhbHNlLCBhY3RpdmU6IGZhbHNlfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhbmd1bGFyLmV4dGVuZChuZXh0U2xpZGUsIHtkaXJlY3Rpb246IGRpcmVjdGlvbiwgYWN0aXZlOiB0cnVlLCBlbnRlcmluZzogdHJ1ZX0pO1xuICAgICAgICBhbmd1bGFyLmV4dGVuZChzZWxmLmN1cnJlbnRTbGlkZXx8e30sIHtkaXJlY3Rpb246IGRpcmVjdGlvbiwgbGVhdmluZzogdHJ1ZX0pO1xuXG4gICAgICAgICRzY29wZS4kY3VycmVudFRyYW5zaXRpb24gPSAkdHJhbnNpdGlvbihuZXh0U2xpZGUuJGVsZW1lbnQsIHt9KTtcbiAgICAgICAgLy9XZSBoYXZlIHRvIGNyZWF0ZSBuZXcgcG9pbnRlcnMgaW5zaWRlIGEgY2xvc3VyZSBzaW5jZSBuZXh0ICYgY3VycmVudCB3aWxsIGNoYW5nZVxuICAgICAgICAoZnVuY3Rpb24obmV4dCxjdXJyZW50KSB7XG4gICAgICAgICAgJHNjb3BlLiRjdXJyZW50VHJhbnNpdGlvbi50aGVuKFxuICAgICAgICAgICAgZnVuY3Rpb24oKXsgdHJhbnNpdGlvbkRvbmUobmV4dCwgY3VycmVudCk7IH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpeyB0cmFuc2l0aW9uRG9uZShuZXh0LCBjdXJyZW50KTsgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0obmV4dFNsaWRlLCBzZWxmLmN1cnJlbnRTbGlkZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbkRvbmUobmV4dFNsaWRlLCBzZWxmLmN1cnJlbnRTbGlkZSk7XG4gICAgICB9XG4gICAgICBzZWxmLmN1cnJlbnRTbGlkZSA9IG5leHRTbGlkZTtcbiAgICAgIGN1cnJlbnRJbmRleCA9IG5leHRJbmRleDtcbiAgICAgIC8vZXZlcnkgdGltZSB5b3UgY2hhbmdlIHNsaWRlcywgcmVzZXQgdGhlIHRpbWVyXG4gICAgICByZXN0YXJ0VGltZXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdHJhbnNpdGlvbkRvbmUobmV4dCwgY3VycmVudCkge1xuICAgICAgYW5ndWxhci5leHRlbmQobmV4dCwge2RpcmVjdGlvbjogJycsIGFjdGl2ZTogdHJ1ZSwgbGVhdmluZzogZmFsc2UsIGVudGVyaW5nOiBmYWxzZX0pO1xuICAgICAgYW5ndWxhci5leHRlbmQoY3VycmVudHx8e30sIHtkaXJlY3Rpb246ICcnLCBhY3RpdmU6IGZhbHNlLCBsZWF2aW5nOiBmYWxzZSwgZW50ZXJpbmc6IGZhbHNlfSk7XG4gICAgICAkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uID0gbnVsbDtcbiAgICB9XG4gIH07XG4gICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgIGRlc3Ryb3llZCA9IHRydWU7XG4gIH0pO1xuXG4gIC8qIEFsbG93IG91dHNpZGUgcGVvcGxlIHRvIGNhbGwgaW5kZXhPZiBvbiBzbGlkZXMgYXJyYXkgKi9cbiAgc2VsZi5pbmRleE9mU2xpZGUgPSBmdW5jdGlvbihzbGlkZSkge1xuICAgIHJldHVybiBzbGlkZXMuaW5kZXhPZihzbGlkZSk7XG4gIH07XG5cbiAgJHNjb3BlLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3SW5kZXggPSAoY3VycmVudEluZGV4ICsgMSkgJSBzbGlkZXMubGVuZ3RoO1xuXG4gICAgLy9QcmV2ZW50IHRoaXMgdXNlci10cmlnZ2VyZWQgdHJhbnNpdGlvbiBmcm9tIG9jY3VycmluZyBpZiB0aGVyZSBpcyBhbHJlYWR5IG9uZSBpbiBwcm9ncmVzc1xuICAgIGlmICghJHNjb3BlLiRjdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgcmV0dXJuIHNlbGYuc2VsZWN0KHNsaWRlc1tuZXdJbmRleF0sICduZXh0Jyk7XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS5wcmV2ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld0luZGV4ID0gY3VycmVudEluZGV4IC0gMSA8IDAgPyBzbGlkZXMubGVuZ3RoIC0gMSA6IGN1cnJlbnRJbmRleCAtIDE7XG5cbiAgICAvL1ByZXZlbnQgdGhpcyB1c2VyLXRyaWdnZXJlZCB0cmFuc2l0aW9uIGZyb20gb2NjdXJyaW5nIGlmIHRoZXJlIGlzIGFscmVhZHkgb25lIGluIHByb2dyZXNzXG4gICAgaWYgKCEkc2NvcGUuJGN1cnJlbnRUcmFuc2l0aW9uKSB7XG4gICAgICByZXR1cm4gc2VsZi5zZWxlY3Qoc2xpZGVzW25ld0luZGV4XSwgJ3ByZXYnKTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24oc2xpZGUpIHtcbiAgICAgcmV0dXJuIHNlbGYuY3VycmVudFNsaWRlID09PSBzbGlkZTtcbiAgfTtcblxuICAkc2NvcGUuJHdhdGNoKCdpbnRlcnZhbCcsIHJlc3RhcnRUaW1lcik7XG4gICRzY29wZS4kb24oJyRkZXN0cm95JywgcmVzZXRUaW1lcik7XG5cbiAgZnVuY3Rpb24gcmVzdGFydFRpbWVyKCkge1xuICAgIHJlc2V0VGltZXIoKTtcbiAgICB2YXIgaW50ZXJ2YWwgPSArJHNjb3BlLmludGVydmFsO1xuICAgIGlmICghaXNOYU4oaW50ZXJ2YWwpICYmIGludGVydmFsPj0wKSB7XG4gICAgICBjdXJyZW50VGltZW91dCA9ICR0aW1lb3V0KHRpbWVyRm4sIGludGVydmFsKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRpbWVyKCkge1xuICAgIGlmIChjdXJyZW50VGltZW91dCkge1xuICAgICAgJHRpbWVvdXQuY2FuY2VsKGN1cnJlbnRUaW1lb3V0KTtcbiAgICAgIGN1cnJlbnRUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckZuKCkge1xuICAgIGlmIChpc1BsYXlpbmcpIHtcbiAgICAgICRzY29wZS5uZXh0KCk7XG4gICAgICByZXN0YXJ0VGltZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgJHNjb3BlLnBsYXkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIWlzUGxheWluZykge1xuICAgICAgaXNQbGF5aW5nID0gdHJ1ZTtcbiAgICAgIHJlc3RhcnRUaW1lcigpO1xuICAgIH1cbiAgfTtcbiAgJHNjb3BlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEkc2NvcGUubm9QYXVzZSkge1xuICAgICAgaXNQbGF5aW5nID0gZmFsc2U7XG4gICAgICByZXNldFRpbWVyKCk7XG4gICAgfVxuICB9O1xuXG4gIHNlbGYuYWRkU2xpZGUgPSBmdW5jdGlvbihzbGlkZSwgZWxlbWVudCkge1xuICAgIHNsaWRlLiRlbGVtZW50ID0gZWxlbWVudDtcbiAgICBzbGlkZXMucHVzaChzbGlkZSk7XG4gICAgLy9pZiB0aGlzIGlzIHRoZSBmaXJzdCBzbGlkZSBvciB0aGUgc2xpZGUgaXMgc2V0IHRvIGFjdGl2ZSwgc2VsZWN0IGl0XG4gICAgaWYoc2xpZGVzLmxlbmd0aCA9PT0gMSB8fCBzbGlkZS5hY3RpdmUpIHtcbiAgICAgIHNlbGYuc2VsZWN0KHNsaWRlc1tzbGlkZXMubGVuZ3RoLTFdKTtcbiAgICAgIGlmIChzbGlkZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgJHNjb3BlLnBsYXkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHNlbGYucmVtb3ZlU2xpZGUgPSBmdW5jdGlvbihzbGlkZSkge1xuICAgIC8vZ2V0IHRoZSBpbmRleCBvZiB0aGUgc2xpZGUgaW5zaWRlIHRoZSBjYXJvdXNlbFxuICAgIHZhciBpbmRleCA9IHNsaWRlcy5pbmRleE9mKHNsaWRlKTtcbiAgICBzbGlkZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBpZiAoc2xpZGVzLmxlbmd0aCA+IDAgJiYgc2xpZGUuYWN0aXZlKSB7XG4gICAgICBpZiAoaW5kZXggPj0gc2xpZGVzLmxlbmd0aCkge1xuICAgICAgICBzZWxmLnNlbGVjdChzbGlkZXNbaW5kZXgtMV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5zZWxlY3Qoc2xpZGVzW2luZGV4XSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjdXJyZW50SW5kZXggPiBpbmRleCkge1xuICAgICAgY3VycmVudEluZGV4LS07XG4gICAgfVxuICB9O1xuXG59XSlcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB1aS5ib290c3RyYXAuY2Fyb3VzZWwuZGlyZWN0aXZlOmNhcm91c2VsXG4gKiBAcmVzdHJpY3QgRUFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENhcm91c2VsIGlzIHRoZSBvdXRlciBjb250YWluZXIgZm9yIGEgc2V0IG9mIGltYWdlICdzbGlkZXMnIHRvIHNob3djYXNlLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyPX0gaW50ZXJ2YWwgVGhlIHRpbWUsIGluIG1pbGxpc2Vjb25kcywgdGhhdCBpdCB3aWxsIHRha2UgdGhlIGNhcm91c2VsIHRvIGdvIHRvIHRoZSBuZXh0IHNsaWRlLlxuICogQHBhcmFtIHtib29sZWFuPX0gbm9UcmFuc2l0aW9uIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFuc2l0aW9ucyBvbiB0aGUgY2Fyb3VzZWwuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBub1BhdXNlIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXVzaW5nIG9uIHRoZSBjYXJvdXNlbCAoYnkgZGVmYXVsdCwgdGhlIGNhcm91c2VsIGludGVydmFsIHBhdXNlcyBvbiBob3ZlcikuXG4gKlxuICogQGV4YW1wbGVcbjxleGFtcGxlIG1vZHVsZT1cInVpLmJvb3RzdHJhcFwiPlxuICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgIDxjYXJvdXNlbD5cbiAgICAgIDxzbGlkZT5cbiAgICAgICAgPGltZyBzcmM9XCJodHRwOi8vcGxhY2VraXR0ZW4uY29tLzE1MC8xNTBcIiBzdHlsZT1cIm1hcmdpbjphdXRvO1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtY2FwdGlvblwiPlxuICAgICAgICAgIDxwPkJlYXV0aWZ1bCE8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9zbGlkZT5cbiAgICAgIDxzbGlkZT5cbiAgICAgICAgPGltZyBzcmM9XCJodHRwOi8vcGxhY2VraXR0ZW4uY29tLzEwMC8xNTBcIiBzdHlsZT1cIm1hcmdpbjphdXRvO1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtY2FwdGlvblwiPlxuICAgICAgICAgIDxwPkQnYXd3ITwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NsaWRlPlxuICAgIDwvY2Fyb3VzZWw+XG4gIDwvZmlsZT5cbiAgPGZpbGUgbmFtZT1cImRlbW8uY3NzXCI+XG4gICAgLmNhcm91c2VsLWluZGljYXRvcnMge1xuICAgICAgdG9wOiBhdXRvO1xuICAgICAgYm90dG9tOiAxNXB4O1xuICAgIH1cbiAgPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG4uZGlyZWN0aXZlKCdjYXJvdXNlbCcsIFtmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgY29udHJvbGxlcjogJ0Nhcm91c2VsQ29udHJvbGxlcicsXG4gICAgcmVxdWlyZTogJ2Nhcm91c2VsJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWwnLFxuICAgIHNjb3BlOiB7XG4gICAgICBpbnRlcnZhbDogJz0nLFxuICAgICAgbm9UcmFuc2l0aW9uOiAnPScsXG4gICAgICBub1BhdXNlOiAnPSdcbiAgICB9XG4gIH07XG59XSlcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB1aS5ib290c3RyYXAuY2Fyb3VzZWwuZGlyZWN0aXZlOnNsaWRlXG4gKiBAcmVzdHJpY3QgRUFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBzbGlkZSBpbnNpZGUgYSB7QGxpbmsgdWkuYm9vdHN0cmFwLmNhcm91c2VsLmRpcmVjdGl2ZTpjYXJvdXNlbCBjYXJvdXNlbH0uICBNdXN0IGJlIHBsYWNlZCBhcyBhIGNoaWxkIG9mIGEgY2Fyb3VzZWwgZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBhY3RpdmUgTW9kZWwgYmluZGluZywgd2hldGhlciBvciBub3QgdGhpcyBzbGlkZSBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICpcbiAqIEBleGFtcGxlXG48ZXhhbXBsZSBtb2R1bGU9XCJ1aS5ib290c3RyYXBcIj5cbiAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbjxkaXYgbmctY29udHJvbGxlcj1cIkNhcm91c2VsRGVtb0N0cmxcIj5cbiAgPGNhcm91c2VsPlxuICAgIDxzbGlkZSBuZy1yZXBlYXQ9XCJzbGlkZSBpbiBzbGlkZXNcIiBhY3RpdmU9XCJzbGlkZS5hY3RpdmVcIj5cbiAgICAgIDxpbWcgbmctc3JjPVwie3tzbGlkZS5pbWFnZX19XCIgc3R5bGU9XCJtYXJnaW46YXV0bztcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1jYXB0aW9uXCI+XG4gICAgICAgIDxoND5TbGlkZSB7eyRpbmRleH19PC9oND5cbiAgICAgICAgPHA+e3tzbGlkZS50ZXh0fX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L3NsaWRlPlxuICA8L2Nhcm91c2VsPlxuICBJbnRlcnZhbCwgaW4gbWlsbGlzZWNvbmRzOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwibXlJbnRlcnZhbFwiPlxuICA8YnIgLz5FbnRlciBhIG5lZ2F0aXZlIG51bWJlciB0byBzdG9wIHRoZSBpbnRlcnZhbC5cbjwvZGl2PlxuICA8L2ZpbGU+XG4gIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbmZ1bmN0aW9uIENhcm91c2VsRGVtb0N0cmwoJHNjb3BlKSB7XG4gICRzY29wZS5teUludGVydmFsID0gNTAwMDtcbn1cbiAgPC9maWxlPlxuICA8ZmlsZSBuYW1lPVwiZGVtby5jc3NcIj5cbiAgICAuY2Fyb3VzZWwtaW5kaWNhdG9ycyB7XG4gICAgICB0b3A6IGF1dG87XG4gICAgICBib3R0b206IDE1cHg7XG4gICAgfVxuICA8L2ZpbGU+XG48L2V4YW1wbGU+XG4qL1xuXG4uZGlyZWN0aXZlKCdzbGlkZScsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlcXVpcmU6ICdeY2Fyb3VzZWwnLFxuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWwnLFxuICAgIHNjb3BlOiB7XG4gICAgICBhY3RpdmU6ICc9PydcbiAgICB9LFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNhcm91c2VsQ3RybCkge1xuICAgICAgY2Fyb3VzZWxDdHJsLmFkZFNsaWRlKHNjb3BlLCBlbGVtZW50KTtcbiAgICAgIC8vd2hlbiB0aGUgc2NvcGUgaXMgZGVzdHJveWVkIHRoZW4gcmVtb3ZlIHRoZSBzbGlkZSBmcm9tIHRoZSBjdXJyZW50IHNsaWRlcyBhcnJheVxuICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjYXJvdXNlbEN0cmwucmVtb3ZlU2xpZGUoc2NvcGUpO1xuICAgICAgfSk7XG5cbiAgICAgIHNjb3BlLiR3YXRjaCgnYWN0aXZlJywgZnVuY3Rpb24oYWN0aXZlKSB7XG4gICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICBjYXJvdXNlbEN0cmwuc2VsZWN0KHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuZGF0ZXBhcnNlcicsIFtdKVxuXG4uc2VydmljZSgnZGF0ZVBhcnNlcicsIFsnJGxvY2FsZScsICdvcmRlckJ5RmlsdGVyJywgZnVuY3Rpb24oJGxvY2FsZSwgb3JkZXJCeUZpbHRlcikge1xuXG4gIHRoaXMucGFyc2VycyA9IHt9O1xuXG4gIHZhciBmb3JtYXRDb2RlVG9SZWdleCA9IHtcbiAgICAneXl5eSc6IHtcbiAgICAgIHJlZ2V4OiAnXFxcXGR7NH0nLFxuICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMueWVhciA9ICt2YWx1ZTsgfVxuICAgIH0sXG4gICAgJ3l5Jzoge1xuICAgICAgcmVnZXg6ICdcXFxcZHsyfScsXG4gICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy55ZWFyID0gK3ZhbHVlICsgMjAwMDsgfVxuICAgIH0sXG4gICAgJ3knOiB7XG4gICAgICByZWdleDogJ1xcXFxkezEsNH0nLFxuICAgICAgYXBwbHk6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMueWVhciA9ICt2YWx1ZTsgfVxuICAgIH0sXG4gICAgJ01NTU0nOiB7XG4gICAgICByZWdleDogJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLk1PTlRILmpvaW4oJ3wnKSxcbiAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1vbnRoID0gJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLk1PTlRILmluZGV4T2YodmFsdWUpOyB9XG4gICAgfSxcbiAgICAnTU1NJzoge1xuICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmpvaW4oJ3wnKSxcbiAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLm1vbnRoID0gJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguaW5kZXhPZih2YWx1ZSk7IH1cbiAgICB9LFxuICAgICdNTSc6IHtcbiAgICAgIHJlZ2V4OiAnMFsxLTldfDFbMC0yXScsXG4gICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5tb250aCA9IHZhbHVlIC0gMTsgfVxuICAgIH0sXG4gICAgJ00nOiB7XG4gICAgICByZWdleDogJ1sxLTldfDFbMC0yXScsXG4gICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5tb250aCA9IHZhbHVlIC0gMTsgfVxuICAgIH0sXG4gICAgJ2RkJzoge1xuICAgICAgcmVnZXg6ICdbMC0yXVswLTldezF9fDNbMC0xXXsxfScsXG4gICAgICBhcHBseTogZnVuY3Rpb24odmFsdWUpIHsgdGhpcy5kYXRlID0gK3ZhbHVlOyB9XG4gICAgfSxcbiAgICAnZCc6IHtcbiAgICAgIHJlZ2V4OiAnWzEtMl0/WzAtOV17MX18M1swLTFdezF9JyxcbiAgICAgIGFwcGx5OiBmdW5jdGlvbih2YWx1ZSkgeyB0aGlzLmRhdGUgPSArdmFsdWU7IH1cbiAgICB9LFxuICAgICdFRUVFJzoge1xuICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5EQVkuam9pbignfCcpXG4gICAgfSxcbiAgICAnRUVFJzoge1xuICAgICAgcmVnZXg6ICRsb2NhbGUuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWS5qb2luKCd8JylcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlUGFyc2VyKGZvcm1hdCkge1xuICAgIHZhciBtYXAgPSBbXSwgcmVnZXggPSBmb3JtYXQuc3BsaXQoJycpO1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKGZvcm1hdENvZGVUb1JlZ2V4LCBmdW5jdGlvbihkYXRhLCBjb2RlKSB7XG4gICAgICB2YXIgaW5kZXggPSBmb3JtYXQuaW5kZXhPZihjb2RlKTtcblxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnNwbGl0KCcnKTtcblxuICAgICAgICByZWdleFtpbmRleF0gPSAnKCcgKyBkYXRhLnJlZ2V4ICsgJyknO1xuICAgICAgICBmb3JtYXRbaW5kZXhdID0gJyQnOyAvLyBDdXN0b20gc3ltYm9sIHRvIGRlZmluZSBjb25zdW1lZCBwYXJ0IG9mIGZvcm1hdFxuICAgICAgICBmb3IgKHZhciBpID0gaW5kZXggKyAxLCBuID0gaW5kZXggKyBjb2RlLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgIHJlZ2V4W2ldID0gJyc7XG4gICAgICAgICAgZm9ybWF0W2ldID0gJyQnO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1hdCA9IGZvcm1hdC5qb2luKCcnKTtcblxuICAgICAgICBtYXAucHVzaCh7IGluZGV4OiBpbmRleCwgYXBwbHk6IGRhdGEuYXBwbHkgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVnZXg6IG5ldyBSZWdFeHAoJ14nICsgcmVnZXguam9pbignJykgKyAnJCcpLFxuICAgICAgbWFwOiBvcmRlckJ5RmlsdGVyKG1hcCwgJ2luZGV4JylcbiAgICB9O1xuICB9XG5cbiAgdGhpcy5wYXJzZSA9IGZ1bmN0aW9uKGlucHV0LCBmb3JtYXQpIHtcbiAgICBpZiAoICFhbmd1bGFyLmlzU3RyaW5nKGlucHV0KSB8fCAhZm9ybWF0ICkge1xuICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cblxuICAgIGZvcm1hdCA9ICRsb2NhbGUuREFURVRJTUVfRk9STUFUU1tmb3JtYXRdIHx8IGZvcm1hdDtcblxuICAgIGlmICggIXRoaXMucGFyc2Vyc1tmb3JtYXRdICkge1xuICAgICAgdGhpcy5wYXJzZXJzW2Zvcm1hdF0gPSBjcmVhdGVQYXJzZXIoZm9ybWF0KTtcbiAgICB9XG5cbiAgICB2YXIgcGFyc2VyID0gdGhpcy5wYXJzZXJzW2Zvcm1hdF0sXG4gICAgICAgIHJlZ2V4ID0gcGFyc2VyLnJlZ2V4LFxuICAgICAgICBtYXAgPSBwYXJzZXIubWFwLFxuICAgICAgICByZXN1bHRzID0gaW5wdXQubWF0Y2gocmVnZXgpO1xuXG4gICAgaWYgKCByZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoICkge1xuICAgICAgdmFyIGZpZWxkcyA9IHsgeWVhcjogMTkwMCwgbW9udGg6IDAsIGRhdGU6IDEsIGhvdXJzOiAwIH0sIGR0O1xuXG4gICAgICBmb3IoIHZhciBpID0gMSwgbiA9IHJlc3VsdHMubGVuZ3RoOyBpIDwgbjsgaSsrICkge1xuICAgICAgICB2YXIgbWFwcGVyID0gbWFwW2ktMV07XG4gICAgICAgIGlmICggbWFwcGVyLmFwcGx5ICkge1xuICAgICAgICAgIG1hcHBlci5hcHBseS5jYWxsKGZpZWxkcywgcmVzdWx0c1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCBpc1ZhbGlkKGZpZWxkcy55ZWFyLCBmaWVsZHMubW9udGgsIGZpZWxkcy5kYXRlKSApIHtcbiAgICAgICAgZHQgPSBuZXcgRGF0ZSggZmllbGRzLnllYXIsIGZpZWxkcy5tb250aCwgZmllbGRzLmRhdGUsIGZpZWxkcy5ob3Vycyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkdDtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyB2YWxpZCBmb3Igc3BlY2lmaWMgbW9udGggKGFuZCB5ZWFyIGZvciBGZWJydWFyeSkuXG4gIC8vIE1vbnRoOiAwID0gSmFuLCAxID0gRmViLCBldGNcbiAgZnVuY3Rpb24gaXNWYWxpZCh5ZWFyLCBtb250aCwgZGF0ZSkge1xuICAgIGlmICggbW9udGggPT09IDEgJiYgZGF0ZSA+IDI4KSB7XG4gICAgICAgIHJldHVybiBkYXRlID09PSAyOSAmJiAoKHllYXIgJSA0ID09PSAwICYmIHllYXIgJSAxMDAgIT09IDApIHx8IHllYXIgJSA0MDAgPT09IDApO1xuICAgIH1cblxuICAgIGlmICggbW9udGggPT09IDMgfHwgbW9udGggPT09IDUgfHwgbW9udGggPT09IDggfHwgbW9udGggPT09IDEwKSB7XG4gICAgICAgIHJldHVybiBkYXRlIDwgMzE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5wb3NpdGlvbicsIFtdKVxuXG4vKipcbiAqIEEgc2V0IG9mIHV0aWxpdHkgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2UgdG8gcmV0cmlldmUgcG9zaXRpb24gb2YgRE9NIGVsZW1lbnRzLlxuICogSXQgaXMgbWVhbnQgdG8gYmUgdXNlZCB3aGVyZSB3ZSBuZWVkIHRvIGFic29sdXRlLXBvc2l0aW9uIERPTSBlbGVtZW50cyBpblxuICogcmVsYXRpb24gdG8gb3RoZXIsIGV4aXN0aW5nIGVsZW1lbnRzICh0aGlzIGlzIHRoZSBjYXNlIGZvciB0b29sdGlwcywgcG9wb3ZlcnMsXG4gKiB0eXBlYWhlYWQgc3VnZ2VzdGlvbnMgZXRjLikuXG4gKi9cbiAgLmZhY3RvcnkoJyRwb3NpdGlvbicsIFsnJGRvY3VtZW50JywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJGRvY3VtZW50LCAkd2luZG93KSB7XG5cbiAgICBmdW5jdGlvbiBnZXRTdHlsZShlbCwgY3NzcHJvcCkge1xuICAgICAgaWYgKGVsLmN1cnJlbnRTdHlsZSkgeyAvL0lFXG4gICAgICAgIHJldHVybiBlbC5jdXJyZW50U3R5bGVbY3NzcHJvcF07XG4gICAgICB9IGVsc2UgaWYgKCR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKVtjc3Nwcm9wXTtcbiAgICAgIH1cbiAgICAgIC8vIGZpbmFsbHkgdHJ5IGFuZCBnZXQgaW5saW5lIHN0eWxlXG4gICAgICByZXR1cm4gZWwuc3R5bGVbY3NzcHJvcF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgZ2l2ZW4gZWxlbWVudCBpcyBzdGF0aWNhbGx5IHBvc2l0aW9uZWRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIHJhdyBET00gZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzU3RhdGljUG9zaXRpb25lZChlbGVtZW50KSB7XG4gICAgICByZXR1cm4gKGdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpIHx8ICdzdGF0aWMnICkgPT09ICdzdGF0aWMnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgdGhlIGNsb3Nlc3QsIG5vbi1zdGF0aWNhbGx5IHBvc2l0aW9uZWQgcGFyZW50T2Zmc2V0IG9mIGEgZ2l2ZW4gZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50XG4gICAgICovXG4gICAgdmFyIHBhcmVudE9mZnNldEVsID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIHZhciBkb2NEb21FbCA9ICRkb2N1bWVudFswXTtcbiAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudCB8fCBkb2NEb21FbDtcbiAgICAgIHdoaWxlIChvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50ICE9PSBkb2NEb21FbCAmJiBpc1N0YXRpY1Bvc2l0aW9uZWQob2Zmc2V0UGFyZW50KSApIHtcbiAgICAgICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jRG9tRWw7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIFByb3ZpZGVzIHJlYWQtb25seSBlcXVpdmFsZW50IG9mIGpRdWVyeSdzIHBvc2l0aW9uIGZ1bmN0aW9uOlxuICAgICAgICogaHR0cDovL2FwaS5qcXVlcnkuY29tL3Bvc2l0aW9uL1xuICAgICAgICovXG4gICAgICBwb3NpdGlvbjogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGVsQkNSID0gdGhpcy5vZmZzZXQoZWxlbWVudCk7XG4gICAgICAgIHZhciBvZmZzZXRQYXJlbnRCQ1IgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgICAgICB2YXIgb2Zmc2V0UGFyZW50RWwgPSBwYXJlbnRPZmZzZXRFbChlbGVtZW50WzBdKTtcbiAgICAgICAgaWYgKG9mZnNldFBhcmVudEVsICE9ICRkb2N1bWVudFswXSkge1xuICAgICAgICAgIG9mZnNldFBhcmVudEJDUiA9IHRoaXMub2Zmc2V0KGFuZ3VsYXIuZWxlbWVudChvZmZzZXRQYXJlbnRFbCkpO1xuICAgICAgICAgIG9mZnNldFBhcmVudEJDUi50b3AgKz0gb2Zmc2V0UGFyZW50RWwuY2xpZW50VG9wIC0gb2Zmc2V0UGFyZW50RWwuc2Nyb2xsVG9wO1xuICAgICAgICAgIG9mZnNldFBhcmVudEJDUi5sZWZ0ICs9IG9mZnNldFBhcmVudEVsLmNsaWVudExlZnQgLSBvZmZzZXRQYXJlbnRFbC5zY3JvbGxMZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGJvdW5kaW5nQ2xpZW50UmVjdCA9IGVsZW1lbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2lkdGg6IGJvdW5kaW5nQ2xpZW50UmVjdC53aWR0aCB8fCBlbGVtZW50LnByb3AoJ29mZnNldFdpZHRoJyksXG4gICAgICAgICAgaGVpZ2h0OiBib3VuZGluZ0NsaWVudFJlY3QuaGVpZ2h0IHx8IGVsZW1lbnQucHJvcCgnb2Zmc2V0SGVpZ2h0JyksXG4gICAgICAgICAgdG9wOiBlbEJDUi50b3AgLSBvZmZzZXRQYXJlbnRCQ1IudG9wLFxuICAgICAgICAgIGxlZnQ6IGVsQkNSLmxlZnQgLSBvZmZzZXRQYXJlbnRCQ1IubGVmdFxuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBQcm92aWRlcyByZWFkLW9ubHkgZXF1aXZhbGVudCBvZiBqUXVlcnkncyBvZmZzZXQgZnVuY3Rpb246XG4gICAgICAgKiBodHRwOi8vYXBpLmpxdWVyeS5jb20vb2Zmc2V0L1xuICAgICAgICovXG4gICAgICBvZmZzZXQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciBib3VuZGluZ0NsaWVudFJlY3QgPSBlbGVtZW50WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHdpZHRoOiBib3VuZGluZ0NsaWVudFJlY3Qud2lkdGggfHwgZWxlbWVudC5wcm9wKCdvZmZzZXRXaWR0aCcpLFxuICAgICAgICAgIGhlaWdodDogYm91bmRpbmdDbGllbnRSZWN0LmhlaWdodCB8fCBlbGVtZW50LnByb3AoJ29mZnNldEhlaWdodCcpLFxuICAgICAgICAgIHRvcDogYm91bmRpbmdDbGllbnRSZWN0LnRvcCArICgkd2luZG93LnBhZ2VZT2Zmc2V0IHx8ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSxcbiAgICAgICAgICBsZWZ0OiBib3VuZGluZ0NsaWVudFJlY3QubGVmdCArICgkd2luZG93LnBhZ2VYT2Zmc2V0IHx8ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdClcbiAgICAgICAgfTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogUHJvdmlkZXMgY29vcmRpbmF0ZXMgZm9yIHRoZSB0YXJnZXRFbCBpbiByZWxhdGlvbiB0byBob3N0RWxcbiAgICAgICAqL1xuICAgICAgcG9zaXRpb25FbGVtZW50czogZnVuY3Rpb24gKGhvc3RFbCwgdGFyZ2V0RWwsIHBvc2l0aW9uU3RyLCBhcHBlbmRUb0JvZHkpIHtcblxuICAgICAgICB2YXIgcG9zaXRpb25TdHJQYXJ0cyA9IHBvc2l0aW9uU3RyLnNwbGl0KCctJyk7XG4gICAgICAgIHZhciBwb3MwID0gcG9zaXRpb25TdHJQYXJ0c1swXSwgcG9zMSA9IHBvc2l0aW9uU3RyUGFydHNbMV0gfHwgJ2NlbnRlcic7XG5cbiAgICAgICAgdmFyIGhvc3RFbFBvcyxcbiAgICAgICAgICB0YXJnZXRFbFdpZHRoLFxuICAgICAgICAgIHRhcmdldEVsSGVpZ2h0LFxuICAgICAgICAgIHRhcmdldEVsUG9zO1xuXG4gICAgICAgIGhvc3RFbFBvcyA9IGFwcGVuZFRvQm9keSA/IHRoaXMub2Zmc2V0KGhvc3RFbCkgOiB0aGlzLnBvc2l0aW9uKGhvc3RFbCk7XG5cbiAgICAgICAgdGFyZ2V0RWxXaWR0aCA9IHRhcmdldEVsLnByb3AoJ29mZnNldFdpZHRoJyk7XG4gICAgICAgIHRhcmdldEVsSGVpZ2h0ID0gdGFyZ2V0RWwucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7XG5cbiAgICAgICAgdmFyIHNoaWZ0V2lkdGggPSB7XG4gICAgICAgICAgY2VudGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaG9zdEVsUG9zLmxlZnQgKyBob3N0RWxQb3Mud2lkdGggLyAyIC0gdGFyZ2V0RWxXaWR0aCAvIDI7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBsZWZ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaG9zdEVsUG9zLmxlZnQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgICByaWdodDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy5sZWZ0ICsgaG9zdEVsUG9zLndpZHRoO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc2hpZnRIZWlnaHQgPSB7XG4gICAgICAgICAgY2VudGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaG9zdEVsUG9zLnRvcCArIGhvc3RFbFBvcy5oZWlnaHQgLyAyIC0gdGFyZ2V0RWxIZWlnaHQgLyAyO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gaG9zdEVsUG9zLnRvcDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvdHRvbTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvc3RFbFBvcy50b3AgKyBob3N0RWxQb3MuaGVpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzd2l0Y2ggKHBvczApIHtcbiAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICB0YXJnZXRFbFBvcyA9IHtcbiAgICAgICAgICAgICAgdG9wOiBzaGlmdEhlaWdodFtwb3MxXSgpLFxuICAgICAgICAgICAgICBsZWZ0OiBzaGlmdFdpZHRoW3BvczBdKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgIHRhcmdldEVsUG9zID0ge1xuICAgICAgICAgICAgICB0b3A6IHNoaWZ0SGVpZ2h0W3BvczFdKCksXG4gICAgICAgICAgICAgIGxlZnQ6IGhvc3RFbFBvcy5sZWZ0IC0gdGFyZ2V0RWxXaWR0aFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICB0YXJnZXRFbFBvcyA9IHtcbiAgICAgICAgICAgICAgdG9wOiBzaGlmdEhlaWdodFtwb3MwXSgpLFxuICAgICAgICAgICAgICBsZWZ0OiBzaGlmdFdpZHRoW3BvczFdKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGFyZ2V0RWxQb3MgPSB7XG4gICAgICAgICAgICAgIHRvcDogaG9zdEVsUG9zLnRvcCAtIHRhcmdldEVsSGVpZ2h0LFxuICAgICAgICAgICAgICBsZWZ0OiBzaGlmdFdpZHRoW3BvczFdKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXRFbFBvcztcbiAgICAgIH1cbiAgICB9O1xuICB9XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuZGF0ZXBpY2tlcicsIFsndWkuYm9vdHN0cmFwLmRhdGVwYXJzZXInLCAndWkuYm9vdHN0cmFwLnBvc2l0aW9uJ10pXG5cbi5jb25zdGFudCgnZGF0ZXBpY2tlckNvbmZpZycsIHtcbiAgZm9ybWF0RGF5OiAnZGQnLFxuICBmb3JtYXRNb250aDogJ01NTU0nLFxuICBmb3JtYXRZZWFyOiAneXl5eScsXG4gIGZvcm1hdERheUhlYWRlcjogJ0VFRScsXG4gIGZvcm1hdERheVRpdGxlOiAnTU1NTSB5eXl5JyxcbiAgZm9ybWF0TW9udGhUaXRsZTogJ3l5eXknLFxuICBkYXRlcGlja2VyTW9kZTogJ2RheScsXG4gIG1pbk1vZGU6ICdkYXknLFxuICBtYXhNb2RlOiAneWVhcicsXG4gIHNob3dXZWVrczogdHJ1ZSxcbiAgc3RhcnRpbmdEYXk6IDAsXG4gIHllYXJSYW5nZTogMjAsXG4gIG1pbkRhdGU6IG51bGwsXG4gIG1heERhdGU6IG51bGxcbn0pXG5cbi5jb250cm9sbGVyKCdEYXRlcGlja2VyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRhdHRycycsICckcGFyc2UnLCAnJGludGVycG9sYXRlJywgJyR0aW1lb3V0JywgJyRsb2cnLCAnZGF0ZUZpbHRlcicsICdkYXRlcGlja2VyQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsICRwYXJzZSwgJGludGVycG9sYXRlLCAkdGltZW91dCwgJGxvZywgZGF0ZUZpbHRlciwgZGF0ZXBpY2tlckNvbmZpZykge1xuICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICBuZ01vZGVsQ3RybCA9IHsgJHNldFZpZXdWYWx1ZTogYW5ndWxhci5ub29wIH07IC8vIG51bGxNb2RlbEN0cmw7XG5cbiAgLy8gTW9kZXMgY2hhaW5cbiAgdGhpcy5tb2RlcyA9IFsnZGF5JywgJ21vbnRoJywgJ3llYXInXTtcblxuICAvLyBDb25maWd1cmF0aW9uIGF0dHJpYnV0ZXNcbiAgYW5ndWxhci5mb3JFYWNoKFsnZm9ybWF0RGF5JywgJ2Zvcm1hdE1vbnRoJywgJ2Zvcm1hdFllYXInLCAnZm9ybWF0RGF5SGVhZGVyJywgJ2Zvcm1hdERheVRpdGxlJywgJ2Zvcm1hdE1vbnRoVGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICdtaW5Nb2RlJywgJ21heE1vZGUnLCAnc2hvd1dlZWtzJywgJ3N0YXJ0aW5nRGF5JywgJ3llYXJSYW5nZSddLCBmdW5jdGlvbigga2V5LCBpbmRleCApIHtcbiAgICBzZWxmW2tleV0gPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnNba2V5XSkgPyAoaW5kZXggPCA4ID8gJGludGVycG9sYXRlKCRhdHRyc1trZXldKSgkc2NvcGUuJHBhcmVudCkgOiAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnNba2V5XSkpIDogZGF0ZXBpY2tlckNvbmZpZ1trZXldO1xuICB9KTtcblxuICAvLyBXYXRjaGFibGUgZGF0ZSBhdHRyaWJ1dGVzXG4gIGFuZ3VsYXIuZm9yRWFjaChbJ21pbkRhdGUnLCAnbWF4RGF0ZSddLCBmdW5jdGlvbigga2V5ICkge1xuICAgIGlmICggJGF0dHJzW2tleV0gKSB7XG4gICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goJHBhcnNlKCRhdHRyc1trZXldKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgc2VsZltrZXldID0gdmFsdWUgPyBuZXcgRGF0ZSh2YWx1ZSkgOiBudWxsO1xuICAgICAgICBzZWxmLnJlZnJlc2hWaWV3KCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZltrZXldID0gZGF0ZXBpY2tlckNvbmZpZ1trZXldID8gbmV3IERhdGUoZGF0ZXBpY2tlckNvbmZpZ1trZXldKSA6IG51bGw7XG4gICAgfVxuICB9KTtcblxuICAkc2NvcGUuZGF0ZXBpY2tlck1vZGUgPSAkc2NvcGUuZGF0ZXBpY2tlck1vZGUgfHwgZGF0ZXBpY2tlckNvbmZpZy5kYXRlcGlja2VyTW9kZTtcbiAgJHNjb3BlLnVuaXF1ZUlkID0gJ2RhdGVwaWNrZXItJyArICRzY29wZS4kaWQgKyAnLScgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7XG4gIHRoaXMuYWN0aXZlRGF0ZSA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5pbml0RGF0ZSkgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuaW5pdERhdGUpIDogbmV3IERhdGUoKTtcblxuICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihkYXRlT2JqZWN0KSB7XG4gICAgaWYgKHNlbGYuY29tcGFyZShkYXRlT2JqZWN0LmRhdGUsIHNlbGYuYWN0aXZlRGF0ZSkgPT09IDApIHtcbiAgICAgICRzY29wZS5hY3RpdmVEYXRlSWQgPSBkYXRlT2JqZWN0LnVpZDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgdGhpcy5pbml0ID0gZnVuY3Rpb24oIG5nTW9kZWxDdHJsXyApIHtcbiAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsXztcblxuICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucmVuZGVyKCk7XG4gICAgfTtcbiAgfTtcblxuICB0aGlzLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICggbmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUgKSB7XG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCBuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSApLFxuICAgICAgICAgIGlzVmFsaWQgPSAhaXNOYU4oZGF0ZSk7XG5cbiAgICAgIGlmICggaXNWYWxpZCApIHtcbiAgICAgICAgdGhpcy5hY3RpdmVEYXRlID0gZGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRsb2cuZXJyb3IoJ0RhdGVwaWNrZXIgZGlyZWN0aXZlOiBcIm5nLW1vZGVsXCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0LCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCBvciBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gUkZDMjgyMiBvciBJU08gODYwMSBkYXRlLicpO1xuICAgICAgfVxuICAgICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdkYXRlJywgaXNWYWxpZCk7XG4gICAgfVxuICAgIHRoaXMucmVmcmVzaFZpZXcoKTtcbiAgfTtcblxuICB0aGlzLnJlZnJlc2hWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCB0aGlzLmVsZW1lbnQgKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoVmlldygpO1xuXG4gICAgICB2YXIgZGF0ZSA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlID8gbmV3IERhdGUobmdNb2RlbEN0cmwuJG1vZGVsVmFsdWUpIDogbnVsbDtcbiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnZGF0ZS1kaXNhYmxlZCcsICFkYXRlIHx8ICh0aGlzLmVsZW1lbnQgJiYgIXRoaXMuaXNEaXNhYmxlZChkYXRlKSkpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLmNyZWF0ZURhdGVPYmplY3QgPSBmdW5jdGlvbihkYXRlLCBmb3JtYXQpIHtcbiAgICB2YXIgbW9kZWwgPSBuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSA/IG5ldyBEYXRlKG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlKSA6IG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGU6IGRhdGUsXG4gICAgICBsYWJlbDogZGF0ZUZpbHRlcihkYXRlLCBmb3JtYXQpLFxuICAgICAgc2VsZWN0ZWQ6IG1vZGVsICYmIHRoaXMuY29tcGFyZShkYXRlLCBtb2RlbCkgPT09IDAsXG4gICAgICBkaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkKGRhdGUpLFxuICAgICAgY3VycmVudDogdGhpcy5jb21wYXJlKGRhdGUsIG5ldyBEYXRlKCkpID09PSAwXG4gICAgfTtcbiAgfTtcblxuICB0aGlzLmlzRGlzYWJsZWQgPSBmdW5jdGlvbiggZGF0ZSApIHtcbiAgICByZXR1cm4gKCh0aGlzLm1pbkRhdGUgJiYgdGhpcy5jb21wYXJlKGRhdGUsIHRoaXMubWluRGF0ZSkgPCAwKSB8fCAodGhpcy5tYXhEYXRlICYmIHRoaXMuY29tcGFyZShkYXRlLCB0aGlzLm1heERhdGUpID4gMCkgfHwgKCRhdHRycy5kYXRlRGlzYWJsZWQgJiYgJHNjb3BlLmRhdGVEaXNhYmxlZCh7ZGF0ZTogZGF0ZSwgbW9kZTogJHNjb3BlLmRhdGVwaWNrZXJNb2RlfSkpKTtcbiAgfTtcblxuICAvLyBTcGxpdCBhcnJheSBpbnRvIHNtYWxsZXIgYXJyYXlzXG4gIHRoaXMuc3BsaXQgPSBmdW5jdGlvbihhcnIsIHNpemUpIHtcbiAgICB2YXIgYXJyYXlzID0gW107XG4gICAgd2hpbGUgKGFyci5sZW5ndGggPiAwKSB7XG4gICAgICBhcnJheXMucHVzaChhcnIuc3BsaWNlKDAsIHNpemUpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5cztcbiAgfTtcblxuICAkc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24oIGRhdGUgKSB7XG4gICAgaWYgKCAkc2NvcGUuZGF0ZXBpY2tlck1vZGUgPT09IHNlbGYubWluTW9kZSApIHtcbiAgICAgIHZhciBkdCA9IG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlID8gbmV3IERhdGUoIG5nTW9kZWxDdHJsLiRtb2RlbFZhbHVlICkgOiBuZXcgRGF0ZSgwLCAwLCAwLCAwLCAwLCAwLCAwKTtcbiAgICAgIGR0LnNldEZ1bGxZZWFyKCBkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkgKTtcbiAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoIGR0ICk7XG4gICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYuYWN0aXZlRGF0ZSA9IGRhdGU7XG4gICAgICAkc2NvcGUuZGF0ZXBpY2tlck1vZGUgPSBzZWxmLm1vZGVzWyBzZWxmLm1vZGVzLmluZGV4T2YoICRzY29wZS5kYXRlcGlja2VyTW9kZSApIC0gMSBdO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUubW92ZSA9IGZ1bmN0aW9uKCBkaXJlY3Rpb24gKSB7XG4gICAgdmFyIHllYXIgPSBzZWxmLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSArIGRpcmVjdGlvbiAqIChzZWxmLnN0ZXAueWVhcnMgfHwgMCksXG4gICAgICAgIG1vbnRoID0gc2VsZi5hY3RpdmVEYXRlLmdldE1vbnRoKCkgKyBkaXJlY3Rpb24gKiAoc2VsZi5zdGVwLm1vbnRocyB8fCAwKTtcbiAgICBzZWxmLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoeWVhciwgbW9udGgsIDEpO1xuICAgIHNlbGYucmVmcmVzaFZpZXcoKTtcbiAgfTtcblxuICAkc2NvcGUudG9nZ2xlTW9kZSA9IGZ1bmN0aW9uKCBkaXJlY3Rpb24gKSB7XG4gICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uIHx8IDE7XG5cbiAgICBpZiAoKCRzY29wZS5kYXRlcGlja2VyTW9kZSA9PT0gc2VsZi5tYXhNb2RlICYmIGRpcmVjdGlvbiA9PT0gMSkgfHwgKCRzY29wZS5kYXRlcGlja2VyTW9kZSA9PT0gc2VsZi5taW5Nb2RlICYmIGRpcmVjdGlvbiA9PT0gLTEpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJHNjb3BlLmRhdGVwaWNrZXJNb2RlID0gc2VsZi5tb2Rlc1sgc2VsZi5tb2Rlcy5pbmRleE9mKCAkc2NvcGUuZGF0ZXBpY2tlck1vZGUgKSArIGRpcmVjdGlvbiBdO1xuICB9O1xuXG4gIC8vIEtleSBldmVudCBtYXBwZXJcbiAgJHNjb3BlLmtleXMgPSB7IDEzOidlbnRlcicsIDMyOidzcGFjZScsIDMzOidwYWdldXAnLCAzNDoncGFnZWRvd24nLCAzNTonZW5kJywgMzY6J2hvbWUnLCAzNzonbGVmdCcsIDM4Oid1cCcsIDM5OidyaWdodCcsIDQwOidkb3duJyB9O1xuXG4gIHZhciBmb2N1c0VsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZWxlbWVudFswXS5mb2N1cygpO1xuICAgIH0sIDAgLCBmYWxzZSk7XG4gIH07XG5cbiAgLy8gTGlzdGVuIGZvciBmb2N1cyByZXF1ZXN0cyBmcm9tIHBvcHVwIGRpcmVjdGl2ZVxuICAkc2NvcGUuJG9uKCdkYXRlcGlja2VyLmZvY3VzJywgZm9jdXNFbGVtZW50KTtcblxuICAkc2NvcGUua2V5ZG93biA9IGZ1bmN0aW9uKCBldnQgKSB7XG4gICAgdmFyIGtleSA9ICRzY29wZS5rZXlzW2V2dC53aGljaF07XG5cbiAgICBpZiAoICFrZXkgfHwgZXZ0LnNoaWZ0S2V5IHx8IGV2dC5hbHRLZXkgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgaWYgKGtleSA9PT0gJ2VudGVyJyB8fCBrZXkgPT09ICdzcGFjZScpIHtcbiAgICAgIGlmICggc2VsZi5pc0Rpc2FibGVkKHNlbGYuYWN0aXZlRGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuOyAvLyBkbyBub3RoaW5nXG4gICAgICB9XG4gICAgICAkc2NvcGUuc2VsZWN0KHNlbGYuYWN0aXZlRGF0ZSk7XG4gICAgICBmb2N1c0VsZW1lbnQoKTtcbiAgICB9IGVsc2UgaWYgKGV2dC5jdHJsS2V5ICYmIChrZXkgPT09ICd1cCcgfHwga2V5ID09PSAnZG93bicpKSB7XG4gICAgICAkc2NvcGUudG9nZ2xlTW9kZShrZXkgPT09ICd1cCcgPyAxIDogLTEpO1xuICAgICAgZm9jdXNFbGVtZW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYuaGFuZGxlS2V5RG93bihrZXksIGV2dCk7XG4gICAgICBzZWxmLnJlZnJlc2hWaWV3KCk7XG4gICAgfVxuICB9O1xufV0pXG5cbi5kaXJlY3RpdmUoICdkYXRlcGlja2VyJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbCcsXG4gICAgc2NvcGU6IHtcbiAgICAgIGRhdGVwaWNrZXJNb2RlOiAnPT8nLFxuICAgICAgZGF0ZURpc2FibGVkOiAnJidcbiAgICB9LFxuICAgIHJlcXVpcmU6IFsnZGF0ZXBpY2tlcicsICc/Xm5nTW9kZWwnXSxcbiAgICBjb250cm9sbGVyOiAnRGF0ZXBpY2tlckNvbnRyb2xsZXInLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIHZhciBkYXRlcGlja2VyQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICBpZiAoIG5nTW9kZWxDdHJsICkge1xuICAgICAgICBkYXRlcGlja2VyQ3RybC5pbml0KCBuZ01vZGVsQ3RybCApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn0pXG5cbi5kaXJlY3RpdmUoJ2RheXBpY2tlcicsIFsnZGF0ZUZpbHRlcicsIGZ1bmN0aW9uIChkYXRlRmlsdGVyKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWwnLFxuICAgIHJlcXVpcmU6ICdeZGF0ZXBpY2tlcicsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICBzY29wZS5zaG93V2Vla3MgPSBjdHJsLnNob3dXZWVrcztcblxuICAgICAgY3RybC5zdGVwID0geyBtb250aHM6IDEgfTtcbiAgICAgIGN0cmwuZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAgIHZhciBEQVlTX0lOX01PTlRIID0gWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuICAgICAgZnVuY3Rpb24gZ2V0RGF5c0luTW9udGgoIHllYXIsIG1vbnRoICkge1xuICAgICAgICByZXR1cm4gKChtb250aCA9PT0gMSkgJiYgKHllYXIgJSA0ID09PSAwKSAmJiAoKHllYXIgJSAxMDAgIT09IDApIHx8ICh5ZWFyICUgNDAwID09PSAwKSkpID8gMjkgOiBEQVlTX0lOX01PTlRIW21vbnRoXTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0RGF0ZXMoc3RhcnREYXRlLCBuKSB7XG4gICAgICAgIHZhciBkYXRlcyA9IG5ldyBBcnJheShuKSwgY3VycmVudCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSksIGkgPSAwO1xuICAgICAgICBjdXJyZW50LnNldEhvdXJzKDEyKTsgLy8gUHJldmVudCByZXBlYXRlZCBkYXRlcyBiZWNhdXNlIG9mIHRpbWV6b25lIGJ1Z1xuICAgICAgICB3aGlsZSAoIGkgPCBuICkge1xuICAgICAgICAgIGRhdGVzW2krK10gPSBuZXcgRGF0ZShjdXJyZW50KTtcbiAgICAgICAgICBjdXJyZW50LnNldERhdGUoIGN1cnJlbnQuZ2V0RGF0ZSgpICsgMSApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRlcztcbiAgICAgIH1cblxuICAgICAgY3RybC5fcmVmcmVzaFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHllYXIgPSBjdHJsLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICBtb250aCA9IGN0cmwuYWN0aXZlRGF0ZS5nZXRNb250aCgpLFxuICAgICAgICAgIGZpcnN0RGF5T2ZNb250aCA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKSxcbiAgICAgICAgICBkaWZmZXJlbmNlID0gY3RybC5zdGFydGluZ0RheSAtIGZpcnN0RGF5T2ZNb250aC5nZXREYXkoKSxcbiAgICAgICAgICBudW1EaXNwbGF5ZWRGcm9tUHJldmlvdXNNb250aCA9IChkaWZmZXJlbmNlID4gMCkgPyA3IC0gZGlmZmVyZW5jZSA6IC0gZGlmZmVyZW5jZSxcbiAgICAgICAgICBmaXJzdERhdGUgPSBuZXcgRGF0ZShmaXJzdERheU9mTW9udGgpO1xuXG4gICAgICAgIGlmICggbnVtRGlzcGxheWVkRnJvbVByZXZpb3VzTW9udGggPiAwICkge1xuICAgICAgICAgIGZpcnN0RGF0ZS5zZXREYXRlKCAtIG51bURpc3BsYXllZEZyb21QcmV2aW91c01vbnRoICsgMSApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNDIgaXMgdGhlIG51bWJlciBvZiBkYXlzIG9uIGEgc2l4LW1vbnRoIGNhbGVuZGFyXG4gICAgICAgIHZhciBkYXlzID0gZ2V0RGF0ZXMoZmlyc3REYXRlLCA0Mik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDI7IGkgKyspIHtcbiAgICAgICAgICBkYXlzW2ldID0gYW5ndWxhci5leHRlbmQoY3RybC5jcmVhdGVEYXRlT2JqZWN0KGRheXNbaV0sIGN0cmwuZm9ybWF0RGF5KSwge1xuICAgICAgICAgICAgc2Vjb25kYXJ5OiBkYXlzW2ldLmdldE1vbnRoKCkgIT09IG1vbnRoLFxuICAgICAgICAgICAgdWlkOiBzY29wZS51bmlxdWVJZCArICctJyArIGlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLmxhYmVscyA9IG5ldyBBcnJheSg3KTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA3OyBqKyspIHtcbiAgICAgICAgICBzY29wZS5sYWJlbHNbal0gPSB7XG4gICAgICAgICAgICBhYmJyOiBkYXRlRmlsdGVyKGRheXNbal0uZGF0ZSwgY3RybC5mb3JtYXREYXlIZWFkZXIpLFxuICAgICAgICAgICAgZnVsbDogZGF0ZUZpbHRlcihkYXlzW2pdLmRhdGUsICdFRUVFJylcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUudGl0bGUgPSBkYXRlRmlsdGVyKGN0cmwuYWN0aXZlRGF0ZSwgY3RybC5mb3JtYXREYXlUaXRsZSk7XG4gICAgICAgIHNjb3BlLnJvd3MgPSBjdHJsLnNwbGl0KGRheXMsIDcpO1xuXG4gICAgICAgIGlmICggc2NvcGUuc2hvd1dlZWtzICkge1xuICAgICAgICAgIHNjb3BlLndlZWtOdW1iZXJzID0gW107XG4gICAgICAgICAgdmFyIHdlZWtOdW1iZXIgPSBnZXRJU084NjAxV2Vla051bWJlciggc2NvcGUucm93c1swXVswXS5kYXRlICksXG4gICAgICAgICAgICAgIG51bVdlZWtzID0gc2NvcGUucm93cy5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUoIHNjb3BlLndlZWtOdW1iZXJzLnB1c2god2Vla051bWJlcisrKSA8IG51bVdlZWtzICkge31cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY3RybC5jb21wYXJlID0gZnVuY3Rpb24oZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiAobmV3IERhdGUoIGRhdGUxLmdldEZ1bGxZZWFyKCksIGRhdGUxLmdldE1vbnRoKCksIGRhdGUxLmdldERhdGUoKSApIC0gbmV3IERhdGUoIGRhdGUyLmdldEZ1bGxZZWFyKCksIGRhdGUyLmdldE1vbnRoKCksIGRhdGUyLmdldERhdGUoKSApICk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBnZXRJU084NjAxV2Vla051bWJlcihkYXRlKSB7XG4gICAgICAgIHZhciBjaGVja0RhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgY2hlY2tEYXRlLnNldERhdGUoY2hlY2tEYXRlLmdldERhdGUoKSArIDQgLSAoY2hlY2tEYXRlLmdldERheSgpIHx8IDcpKTsgLy8gVGh1cnNkYXlcbiAgICAgICAgdmFyIHRpbWUgPSBjaGVja0RhdGUuZ2V0VGltZSgpO1xuICAgICAgICBjaGVja0RhdGUuc2V0TW9udGgoMCk7IC8vIENvbXBhcmUgd2l0aCBKYW4gMVxuICAgICAgICBjaGVja0RhdGUuc2V0RGF0ZSgxKTtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgodGltZSAtIGNoZWNrRGF0ZSkgLyA4NjQwMDAwMCkgLyA3KSArIDE7XG4gICAgICB9XG5cbiAgICAgIGN0cmwuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uKCBrZXksIGV2dCApIHtcbiAgICAgICAgdmFyIGRhdGUgPSBjdHJsLmFjdGl2ZURhdGUuZ2V0RGF0ZSgpO1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlIC0gMTsgICAvLyB1cFxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3VwJykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlIC0gNzsgICAvLyBkb3duXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgZGF0ZSA9IGRhdGUgKyAxOyAgIC8vIGRvd25cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdkb3duJykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlICsgNztcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdwYWdldXAnIHx8IGtleSA9PT0gJ3BhZ2Vkb3duJykge1xuICAgICAgICAgIHZhciBtb250aCA9IGN0cmwuYWN0aXZlRGF0ZS5nZXRNb250aCgpICsgKGtleSA9PT0gJ3BhZ2V1cCcgPyAtIDEgOiAxKTtcbiAgICAgICAgICBjdHJsLmFjdGl2ZURhdGUuc2V0TW9udGgobW9udGgsIDEpO1xuICAgICAgICAgIGRhdGUgPSBNYXRoLm1pbihnZXREYXlzSW5Nb250aChjdHJsLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSwgY3RybC5hY3RpdmVEYXRlLmdldE1vbnRoKCkpLCBkYXRlKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdob21lJykge1xuICAgICAgICAgIGRhdGUgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICBkYXRlID0gZ2V0RGF5c0luTW9udGgoY3RybC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksIGN0cmwuYWN0aXZlRGF0ZS5nZXRNb250aCgpKTtcbiAgICAgICAgfVxuICAgICAgICBjdHJsLmFjdGl2ZURhdGUuc2V0RGF0ZShkYXRlKTtcbiAgICAgIH07XG5cbiAgICAgIGN0cmwucmVmcmVzaFZpZXcoKTtcbiAgICB9XG4gIH07XG59XSlcblxuLmRpcmVjdGl2ZSgnbW9udGhwaWNrZXInLCBbJ2RhdGVGaWx0ZXInLCBmdW5jdGlvbiAoZGF0ZUZpbHRlcikge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWwnLFxuICAgIHJlcXVpcmU6ICdeZGF0ZXBpY2tlcicsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICBjdHJsLnN0ZXAgPSB7IHllYXJzOiAxIH07XG4gICAgICBjdHJsLmVsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICBjdHJsLl9yZWZyZXNoVmlldyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbW9udGhzID0gbmV3IEFycmF5KDEyKSxcbiAgICAgICAgICAgIHllYXIgPSBjdHJsLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCAxMjsgaSsrICkge1xuICAgICAgICAgIG1vbnRoc1tpXSA9IGFuZ3VsYXIuZXh0ZW5kKGN0cmwuY3JlYXRlRGF0ZU9iamVjdChuZXcgRGF0ZSh5ZWFyLCBpLCAxKSwgY3RybC5mb3JtYXRNb250aCksIHtcbiAgICAgICAgICAgIHVpZDogc2NvcGUudW5pcXVlSWQgKyAnLScgKyBpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS50aXRsZSA9IGRhdGVGaWx0ZXIoY3RybC5hY3RpdmVEYXRlLCBjdHJsLmZvcm1hdE1vbnRoVGl0bGUpO1xuICAgICAgICBzY29wZS5yb3dzID0gY3RybC5zcGxpdChtb250aHMsIDMpO1xuICAgICAgfTtcblxuICAgICAgY3RybC5jb21wYXJlID0gZnVuY3Rpb24oZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSggZGF0ZTEuZ2V0RnVsbFllYXIoKSwgZGF0ZTEuZ2V0TW9udGgoKSApIC0gbmV3IERhdGUoIGRhdGUyLmdldEZ1bGxZZWFyKCksIGRhdGUyLmdldE1vbnRoKCkgKTtcbiAgICAgIH07XG5cbiAgICAgIGN0cmwuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uKCBrZXksIGV2dCApIHtcbiAgICAgICAgdmFyIGRhdGUgPSBjdHJsLmFjdGl2ZURhdGUuZ2V0TW9udGgoKTtcblxuICAgICAgICBpZiAoa2V5ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICBkYXRlID0gZGF0ZSAtIDE7ICAgLy8gdXBcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICd1cCcpIHtcbiAgICAgICAgICBkYXRlID0gZGF0ZSAtIDM7ICAgLy8gZG93blxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlICsgMTsgICAvLyBkb3duXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZG93bicpIHtcbiAgICAgICAgICBkYXRlID0gZGF0ZSArIDM7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncGFnZXVwJyB8fCBrZXkgPT09ICdwYWdlZG93bicpIHtcbiAgICAgICAgICB2YXIgeWVhciA9IGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpICsgKGtleSA9PT0gJ3BhZ2V1cCcgPyAtIDEgOiAxKTtcbiAgICAgICAgICBjdHJsLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoeWVhcik7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnaG9tZScpIHtcbiAgICAgICAgICBkYXRlID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdlbmQnKSB7XG4gICAgICAgICAgZGF0ZSA9IDExO1xuICAgICAgICB9XG4gICAgICAgIGN0cmwuYWN0aXZlRGF0ZS5zZXRNb250aChkYXRlKTtcbiAgICAgIH07XG5cbiAgICAgIGN0cmwucmVmcmVzaFZpZXcoKTtcbiAgICB9XG4gIH07XG59XSlcblxuLmRpcmVjdGl2ZSgneWVhcnBpY2tlcicsIFsnZGF0ZUZpbHRlcicsIGZ1bmN0aW9uIChkYXRlRmlsdGVyKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sJyxcbiAgICByZXF1aXJlOiAnXmRhdGVwaWNrZXInLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCkge1xuICAgICAgdmFyIHJhbmdlID0gY3RybC55ZWFyUmFuZ2U7XG5cbiAgICAgIGN0cmwuc3RlcCA9IHsgeWVhcnM6IHJhbmdlIH07XG4gICAgICBjdHJsLmVsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICBmdW5jdGlvbiBnZXRTdGFydGluZ1llYXIoIHllYXIgKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCgoeWVhciAtIDEpIC8gcmFuZ2UsIDEwKSAqIHJhbmdlICsgMTtcbiAgICAgIH1cblxuICAgICAgY3RybC5fcmVmcmVzaFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHllYXJzID0gbmV3IEFycmF5KHJhbmdlKTtcblxuICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIHN0YXJ0ID0gZ2V0U3RhcnRpbmdZZWFyKGN0cmwuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKTsgaSA8IHJhbmdlOyBpKysgKSB7XG4gICAgICAgICAgeWVhcnNbaV0gPSBhbmd1bGFyLmV4dGVuZChjdHJsLmNyZWF0ZURhdGVPYmplY3QobmV3IERhdGUoc3RhcnQgKyBpLCAwLCAxKSwgY3RybC5mb3JtYXRZZWFyKSwge1xuICAgICAgICAgICAgdWlkOiBzY29wZS51bmlxdWVJZCArICctJyArIGlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLnRpdGxlID0gW3llYXJzWzBdLmxhYmVsLCB5ZWFyc1tyYW5nZSAtIDFdLmxhYmVsXS5qb2luKCcgLSAnKTtcbiAgICAgICAgc2NvcGUucm93cyA9IGN0cmwuc3BsaXQoeWVhcnMsIDUpO1xuICAgICAgfTtcblxuICAgICAgY3RybC5jb21wYXJlID0gZnVuY3Rpb24oZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBkYXRlMS5nZXRGdWxsWWVhcigpIC0gZGF0ZTIuZ2V0RnVsbFllYXIoKTtcbiAgICAgIH07XG5cbiAgICAgIGN0cmwuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uKCBrZXksIGV2dCApIHtcbiAgICAgICAgdmFyIGRhdGUgPSBjdHJsLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICBpZiAoa2V5ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICBkYXRlID0gZGF0ZSAtIDE7ICAgLy8gdXBcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICd1cCcpIHtcbiAgICAgICAgICBkYXRlID0gZGF0ZSAtIDU7ICAgLy8gZG93blxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIGRhdGUgPSBkYXRlICsgMTsgICAvLyBkb3duXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnZG93bicpIHtcbiAgICAgICAgICBkYXRlID0gZGF0ZSArIDU7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncGFnZXVwJyB8fCBrZXkgPT09ICdwYWdlZG93bicpIHtcbiAgICAgICAgICBkYXRlICs9IChrZXkgPT09ICdwYWdldXAnID8gLSAxIDogMSkgKiBjdHJsLnN0ZXAueWVhcnM7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnaG9tZScpIHtcbiAgICAgICAgICBkYXRlID0gZ2V0U3RhcnRpbmdZZWFyKCBjdHJsLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSApO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2VuZCcpIHtcbiAgICAgICAgICBkYXRlID0gZ2V0U3RhcnRpbmdZZWFyKCBjdHJsLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSApICsgcmFuZ2UgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGN0cmwuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihkYXRlKTtcbiAgICAgIH07XG5cbiAgICAgIGN0cmwucmVmcmVzaFZpZXcoKTtcbiAgICB9XG4gIH07XG59XSlcblxuLmNvbnN0YW50KCdkYXRlcGlja2VyUG9wdXBDb25maWcnLCB7XG4gIGRhdGVwaWNrZXJQb3B1cDogJ3l5eXktTU0tZGQnLFxuICBjdXJyZW50VGV4dDogJ1RvZGF5JyxcbiAgY2xlYXJUZXh0OiAnQ2xlYXInLFxuICBjbG9zZVRleHQ6ICdEb25lJyxcbiAgY2xvc2VPbkRhdGVTZWxlY3Rpb246IHRydWUsXG4gIGFwcGVuZFRvQm9keTogZmFsc2UsXG4gIHNob3dCdXR0b25CYXI6IHRydWVcbn0pXG5cbi5kaXJlY3RpdmUoJ2RhdGVwaWNrZXJQb3B1cCcsIFsnJGNvbXBpbGUnLCAnJHBhcnNlJywgJyRkb2N1bWVudCcsICckcG9zaXRpb24nLCAnZGF0ZUZpbHRlcicsICdkYXRlUGFyc2VyJywgJ2RhdGVwaWNrZXJQb3B1cENvbmZpZycsXG5mdW5jdGlvbiAoJGNvbXBpbGUsICRwYXJzZSwgJGRvY3VtZW50LCAkcG9zaXRpb24sIGRhdGVGaWx0ZXIsIGRhdGVQYXJzZXIsIGRhdGVwaWNrZXJQb3B1cENvbmZpZykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICBzY29wZToge1xuICAgICAgaXNPcGVuOiAnPT8nLFxuICAgICAgY3VycmVudFRleHQ6ICdAJyxcbiAgICAgIGNsZWFyVGV4dDogJ0AnLFxuICAgICAgY2xvc2VUZXh0OiAnQCcsXG4gICAgICBkYXRlRGlzYWJsZWQ6ICcmJ1xuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICB2YXIgZGF0ZUZvcm1hdCxcbiAgICAgICAgICBjbG9zZU9uRGF0ZVNlbGVjdGlvbiA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLmNsb3NlT25EYXRlU2VsZWN0aW9uKSA/IHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMuY2xvc2VPbkRhdGVTZWxlY3Rpb24pIDogZGF0ZXBpY2tlclBvcHVwQ29uZmlnLmNsb3NlT25EYXRlU2VsZWN0aW9uLFxuICAgICAgICAgIGFwcGVuZFRvQm9keSA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLmRhdGVwaWNrZXJBcHBlbmRUb0JvZHkpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5kYXRlcGlja2VyQXBwZW5kVG9Cb2R5KSA6IGRhdGVwaWNrZXJQb3B1cENvbmZpZy5hcHBlbmRUb0JvZHk7XG5cbiAgICAgIHNjb3BlLnNob3dCdXR0b25CYXIgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5zaG93QnV0dG9uQmFyKSA/IHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMuc2hvd0J1dHRvbkJhcikgOiBkYXRlcGlja2VyUG9wdXBDb25maWcuc2hvd0J1dHRvbkJhcjtcblxuICAgICAgc2NvcGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBrZXkgKSB7XG4gICAgICAgIHJldHVybiBzY29wZVtrZXkgKyAnVGV4dCddIHx8IGRhdGVwaWNrZXJQb3B1cENvbmZpZ1trZXkgKyAnVGV4dCddO1xuICAgICAgfTtcblxuICAgICAgYXR0cnMuJG9ic2VydmUoJ2RhdGVwaWNrZXJQb3B1cCcsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgZGF0ZUZvcm1hdCA9IHZhbHVlIHx8IGRhdGVwaWNrZXJQb3B1cENvbmZpZy5kYXRlcGlja2VyUG9wdXA7XG4gICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gcG9wdXAgZWxlbWVudCB1c2VkIHRvIGRpc3BsYXkgY2FsZW5kYXJcbiAgICAgIHZhciBwb3B1cEVsID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IGRhdGVwaWNrZXItcG9wdXAtd3JhcD48ZGl2IGRhdGVwaWNrZXI+PC9kaXY+PC9kaXY+Jyk7XG4gICAgICBwb3B1cEVsLmF0dHIoe1xuICAgICAgICAnbmctbW9kZWwnOiAnZGF0ZScsXG4gICAgICAgICduZy1jaGFuZ2UnOiAnZGF0ZVNlbGVjdGlvbigpJ1xuICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIGNhbWVsdG9EYXNoKCBzdHJpbmcgKXtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uKCQxKSB7IHJldHVybiAnLScgKyAkMS50b0xvd2VyQ2FzZSgpOyB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gZGF0ZXBpY2tlciBlbGVtZW50XG4gICAgICB2YXIgZGF0ZXBpY2tlckVsID0gYW5ndWxhci5lbGVtZW50KHBvcHVwRWwuY2hpbGRyZW4oKVswXSk7XG4gICAgICBpZiAoIGF0dHJzLmRhdGVwaWNrZXJPcHRpb25zICkge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2goc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5kYXRlcGlja2VyT3B0aW9ucyksIGZ1bmN0aW9uKCB2YWx1ZSwgb3B0aW9uICkge1xuICAgICAgICAgIGRhdGVwaWNrZXJFbC5hdHRyKCBjYW1lbHRvRGFzaChvcHRpb24pLCB2YWx1ZSApO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgc2NvcGUud2F0Y2hEYXRhID0ge307XG4gICAgICBhbmd1bGFyLmZvckVhY2goWydtaW5EYXRlJywgJ21heERhdGUnLCAnZGF0ZXBpY2tlck1vZGUnXSwgZnVuY3Rpb24oIGtleSApIHtcbiAgICAgICAgaWYgKCBhdHRyc1trZXldICkge1xuICAgICAgICAgIHZhciBnZXRBdHRyaWJ1dGUgPSAkcGFyc2UoYXR0cnNba2V5XSk7XG4gICAgICAgICAgc2NvcGUuJHBhcmVudC4kd2F0Y2goZ2V0QXR0cmlidXRlLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICBzY29wZS53YXRjaERhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRhdGVwaWNrZXJFbC5hdHRyKGNhbWVsdG9EYXNoKGtleSksICd3YXRjaERhdGEuJyArIGtleSk7XG5cbiAgICAgICAgICAvLyBQcm9wYWdhdGUgY2hhbmdlcyBmcm9tIGRhdGVwaWNrZXIgdG8gb3V0c2lkZVxuICAgICAgICAgIGlmICgga2V5ID09PSAnZGF0ZXBpY2tlck1vZGUnICkge1xuICAgICAgICAgICAgdmFyIHNldEF0dHJpYnV0ZSA9IGdldEF0dHJpYnV0ZS5hc3NpZ247XG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goJ3dhdGNoRGF0YS4nICsga2V5LCBmdW5jdGlvbih2YWx1ZSwgb2xkdmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKCB2YWx1ZSAhPT0gb2xkdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgc2V0QXR0cmlidXRlKHNjb3BlLiRwYXJlbnQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChhdHRycy5kYXRlRGlzYWJsZWQpIHtcbiAgICAgICAgZGF0ZXBpY2tlckVsLmF0dHIoJ2RhdGUtZGlzYWJsZWQnLCAnZGF0ZURpc2FibGVkKHsgZGF0ZTogZGF0ZSwgbW9kZTogbW9kZSB9KScpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwYXJzZURhdGUodmlld1ZhbHVlKSB7XG4gICAgICAgIGlmICghdmlld1ZhbHVlKSB7XG4gICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ2RhdGUnLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzRGF0ZSh2aWV3VmFsdWUpICYmICFpc05hTih2aWV3VmFsdWUpKSB7XG4gICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ2RhdGUnLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gdmlld1ZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuaXNTdHJpbmcodmlld1ZhbHVlKSkge1xuICAgICAgICAgIHZhciBkYXRlID0gZGF0ZVBhcnNlci5wYXJzZSh2aWV3VmFsdWUsIGRhdGVGb3JtYXQpIHx8IG5ldyBEYXRlKHZpZXdWYWx1ZSk7XG4gICAgICAgICAgaWYgKGlzTmFOKGRhdGUpKSB7XG4gICAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgnZGF0ZScsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5nTW9kZWwuJHNldFZhbGlkaXR5KCdkYXRlJywgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ2RhdGUnLCBmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbmdNb2RlbC4kcGFyc2Vycy51bnNoaWZ0KHBhcnNlRGF0ZSk7XG5cbiAgICAgIC8vIElubmVyIGNoYW5nZVxuICAgICAgc2NvcGUuZGF0ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uKGR0KSB7XG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChkdCkpIHtcbiAgICAgICAgICBzY29wZS5kYXRlID0gZHQ7XG4gICAgICAgIH1cbiAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKHNjb3BlLmRhdGUpO1xuICAgICAgICBuZ01vZGVsLiRyZW5kZXIoKTtcblxuICAgICAgICBpZiAoIGNsb3NlT25EYXRlU2VsZWN0aW9uICkge1xuICAgICAgICAgIHNjb3BlLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgIGVsZW1lbnRbMF0uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZWxlbWVudC5iaW5kKCdpbnB1dCBjaGFuZ2Uga2V5dXAnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNjb3BlLmRhdGUgPSBuZ01vZGVsLiRtb2RlbFZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPdXR0ZXIgY2hhbmdlXG4gICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZ01vZGVsLiR2aWV3VmFsdWUgPyBkYXRlRmlsdGVyKG5nTW9kZWwuJHZpZXdWYWx1ZSwgZGF0ZUZvcm1hdCkgOiAnJztcbiAgICAgICAgZWxlbWVudC52YWwoZGF0ZSk7XG4gICAgICAgIHNjb3BlLmRhdGUgPSBwYXJzZURhdGUoIG5nTW9kZWwuJG1vZGVsVmFsdWUgKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBkb2N1bWVudENsaWNrQmluZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChzY29wZS5pc09wZW4gJiYgZXZlbnQudGFyZ2V0ICE9PSBlbGVtZW50WzBdKSB7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2NvcGUuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBrZXlkb3duID0gZnVuY3Rpb24oZXZ0LCBub0FwcGx5KSB7XG4gICAgICAgIHNjb3BlLmtleWRvd24oZXZ0KTtcbiAgICAgIH07XG4gICAgICBlbGVtZW50LmJpbmQoJ2tleWRvd24nLCBrZXlkb3duKTtcblxuICAgICAgc2NvcGUua2V5ZG93biA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LndoaWNoID09PSAyNykge1xuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBzY29wZS5jbG9zZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2dC53aGljaCA9PT0gNDAgJiYgIXNjb3BlLmlzT3Blbikge1xuICAgICAgICAgIHNjb3BlLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNjb3BlLiR3YXRjaCgnaXNPcGVuJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgc2NvcGUuJGJyb2FkY2FzdCgnZGF0ZXBpY2tlci5mb2N1cycpO1xuICAgICAgICAgIHNjb3BlLnBvc2l0aW9uID0gYXBwZW5kVG9Cb2R5ID8gJHBvc2l0aW9uLm9mZnNldChlbGVtZW50KSA6ICRwb3NpdGlvbi5wb3NpdGlvbihlbGVtZW50KTtcbiAgICAgICAgICBzY29wZS5wb3NpdGlvbi50b3AgPSBzY29wZS5wb3NpdGlvbi50b3AgKyBlbGVtZW50LnByb3AoJ29mZnNldEhlaWdodCcpO1xuXG4gICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ2NsaWNrJywgZG9jdW1lbnRDbGlja0JpbmQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRkb2N1bWVudC51bmJpbmQoJ2NsaWNrJywgZG9jdW1lbnRDbGlja0JpbmQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24oIGRhdGUgKSB7XG4gICAgICAgIGlmIChkYXRlID09PSAndG9kYXknKSB7XG4gICAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RhdGUobmdNb2RlbC4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShuZ01vZGVsLiRtb2RlbFZhbHVlKTtcbiAgICAgICAgICAgIGRhdGUuc2V0RnVsbFllYXIodG9kYXkuZ2V0RnVsbFllYXIoKSwgdG9kYXkuZ2V0TW9udGgoKSwgdG9kYXkuZ2V0RGF0ZSgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2NvcGUuZGF0ZVNlbGVjdGlvbiggZGF0ZSApO1xuICAgICAgfTtcblxuICAgICAgc2NvcGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2NvcGUuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIGVsZW1lbnRbMF0uZm9jdXMoKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciAkcG9wdXAgPSAkY29tcGlsZShwb3B1cEVsKShzY29wZSk7XG4gICAgICAvLyBQcmV2ZW50IGpRdWVyeSBjYWNoZSBtZW1vcnkgbGVhayAodGVtcGxhdGUgaXMgbm93IHJlZHVuZGFudCBhZnRlciBsaW5raW5nKVxuICAgICAgcG9wdXBFbC5yZW1vdmUoKTtcblxuICAgICAgaWYgKCBhcHBlbmRUb0JvZHkgKSB7XG4gICAgICAgICRkb2N1bWVudC5maW5kKCdib2R5JykuYXBwZW5kKCRwb3B1cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmFmdGVyKCRwb3B1cCk7XG4gICAgICB9XG5cbiAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHBvcHVwLnJlbW92ZSgpO1xuICAgICAgICBlbGVtZW50LnVuYmluZCgna2V5ZG93bicsIGtleWRvd24pO1xuICAgICAgICAkZG9jdW1lbnQudW5iaW5kKCdjbGljaycsIGRvY3VtZW50Q2xpY2tCaW5kKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCdkYXRlcGlja2VyUG9wdXBXcmFwJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6J0VBJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWwnLFxuICAgIGxpbms6ZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgZWxlbWVudC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAuZHJvcGRvd24nLCBbXSlcblxuLmNvbnN0YW50KCdkcm9wZG93bkNvbmZpZycsIHtcbiAgb3BlbkNsYXNzOiAnb3Blbidcbn0pXG5cbi5zZXJ2aWNlKCdkcm9wZG93blNlcnZpY2UnLCBbJyRkb2N1bWVudCcsIGZ1bmN0aW9uKCRkb2N1bWVudCkge1xuICB2YXIgb3BlblNjb3BlID0gbnVsbDtcblxuICB0aGlzLm9wZW4gPSBmdW5jdGlvbiggZHJvcGRvd25TY29wZSApIHtcbiAgICBpZiAoICFvcGVuU2NvcGUgKSB7XG4gICAgICAkZG9jdW1lbnQuYmluZCgnY2xpY2snLCBjbG9zZURyb3Bkb3duKTtcbiAgICAgICRkb2N1bWVudC5iaW5kKCdrZXlkb3duJywgZXNjYXBlS2V5QmluZCk7XG4gICAgfVxuXG4gICAgaWYgKCBvcGVuU2NvcGUgJiYgb3BlblNjb3BlICE9PSBkcm9wZG93blNjb3BlICkge1xuICAgICAgICBvcGVuU2NvcGUuaXNPcGVuID0gZmFsc2U7XG4gICAgfVxuXG4gICAgb3BlblNjb3BlID0gZHJvcGRvd25TY29wZTtcbiAgfTtcblxuICB0aGlzLmNsb3NlID0gZnVuY3Rpb24oIGRyb3Bkb3duU2NvcGUgKSB7XG4gICAgaWYgKCBvcGVuU2NvcGUgPT09IGRyb3Bkb3duU2NvcGUgKSB7XG4gICAgICBvcGVuU2NvcGUgPSBudWxsO1xuICAgICAgJGRvY3VtZW50LnVuYmluZCgnY2xpY2snLCBjbG9zZURyb3Bkb3duKTtcbiAgICAgICRkb2N1bWVudC51bmJpbmQoJ2tleWRvd24nLCBlc2NhcGVLZXlCaW5kKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGNsb3NlRHJvcGRvd24gPSBmdW5jdGlvbiggZXZ0ICkge1xuICAgIHZhciB0b2dnbGVFbGVtZW50ID0gb3BlblNjb3BlLmdldFRvZ2dsZUVsZW1lbnQoKTtcbiAgICBpZiAoIGV2dCAmJiB0b2dnbGVFbGVtZW50ICYmIHRvZ2dsZUVsZW1lbnRbMF0uY29udGFpbnMoZXZ0LnRhcmdldCkgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvcGVuU2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgb3BlblNjb3BlLmlzT3BlbiA9IGZhbHNlO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBlc2NhcGVLZXlCaW5kID0gZnVuY3Rpb24oIGV2dCApIHtcbiAgICBpZiAoIGV2dC53aGljaCA9PT0gMjcgKSB7XG4gICAgICBvcGVuU2NvcGUuZm9jdXNUb2dnbGVFbGVtZW50KCk7XG4gICAgICBjbG9zZURyb3Bkb3duKCk7XG4gICAgfVxuICB9O1xufV0pXG5cbi5jb250cm9sbGVyKCdEcm9wZG93bkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAnJHBhcnNlJywgJ2Ryb3Bkb3duQ29uZmlnJywgJ2Ryb3Bkb3duU2VydmljZScsICckYW5pbWF0ZScsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzLCAkcGFyc2UsIGRyb3Bkb3duQ29uZmlnLCBkcm9wZG93blNlcnZpY2UsICRhbmltYXRlKSB7XG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIHNjb3BlID0gJHNjb3BlLiRuZXcoKSwgLy8gY3JlYXRlIGEgY2hpbGQgc2NvcGUgc28gd2UgYXJlIG5vdCBwb2xsdXRpbmcgb3JpZ2luYWwgb25lXG4gICAgICBvcGVuQ2xhc3MgPSBkcm9wZG93bkNvbmZpZy5vcGVuQ2xhc3MsXG4gICAgICBnZXRJc09wZW4sXG4gICAgICBzZXRJc09wZW4gPSBhbmd1bGFyLm5vb3AsXG4gICAgICB0b2dnbGVJbnZva2VyID0gJGF0dHJzLm9uVG9nZ2xlID8gJHBhcnNlKCRhdHRycy5vblRvZ2dsZSkgOiBhbmd1bGFyLm5vb3A7XG5cbiAgdGhpcy5pbml0ID0gZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG4gICAgc2VsZi4kZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICBpZiAoICRhdHRycy5pc09wZW4gKSB7XG4gICAgICBnZXRJc09wZW4gPSAkcGFyc2UoJGF0dHJzLmlzT3Blbik7XG4gICAgICBzZXRJc09wZW4gPSBnZXRJc09wZW4uYXNzaWduO1xuXG4gICAgICAkc2NvcGUuJHdhdGNoKGdldElzT3BlbiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgc2NvcGUuaXNPcGVuID0gISF2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLnRvZ2dsZSA9IGZ1bmN0aW9uKCBvcGVuICkge1xuICAgIHJldHVybiBzY29wZS5pc09wZW4gPSBhcmd1bWVudHMubGVuZ3RoID8gISFvcGVuIDogIXNjb3BlLmlzT3BlbjtcbiAgfTtcblxuICAvLyBBbGxvdyBvdGhlciBkaXJlY3RpdmVzIHRvIHdhdGNoIHN0YXR1c1xuICB0aGlzLmlzT3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzY29wZS5pc09wZW47XG4gIH07XG5cbiAgc2NvcGUuZ2V0VG9nZ2xlRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLnRvZ2dsZUVsZW1lbnQ7XG4gIH07XG5cbiAgc2NvcGUuZm9jdXNUb2dnbGVFbGVtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCBzZWxmLnRvZ2dsZUVsZW1lbnQgKSB7XG4gICAgICBzZWxmLnRvZ2dsZUVsZW1lbnRbMF0uZm9jdXMoKTtcbiAgICB9XG4gIH07XG5cbiAgc2NvcGUuJHdhdGNoKCdpc09wZW4nLCBmdW5jdGlvbiggaXNPcGVuLCB3YXNPcGVuICkge1xuICAgICRhbmltYXRlW2lzT3BlbiA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXShzZWxmLiRlbGVtZW50LCBvcGVuQ2xhc3MpO1xuXG4gICAgaWYgKCBpc09wZW4gKSB7XG4gICAgICBzY29wZS5mb2N1c1RvZ2dsZUVsZW1lbnQoKTtcbiAgICAgIGRyb3Bkb3duU2VydmljZS5vcGVuKCBzY29wZSApO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcm9wZG93blNlcnZpY2UuY2xvc2UoIHNjb3BlICk7XG4gICAgfVxuXG4gICAgc2V0SXNPcGVuKCRzY29wZSwgaXNPcGVuKTtcbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaXNPcGVuKSAmJiBpc09wZW4gIT09IHdhc09wZW4pIHtcbiAgICAgIHRvZ2dsZUludm9rZXIoJHNjb3BlLCB7IG9wZW46ICEhaXNPcGVuIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgJHNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCkge1xuICAgIHNjb3BlLmlzT3BlbiA9IGZhbHNlO1xuICB9KTtcblxuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgIHNjb3BlLiRkZXN0cm95KCk7XG4gIH0pO1xufV0pXG5cbi5kaXJlY3RpdmUoJ2Ryb3Bkb3duJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdDQScsXG4gICAgY29udHJvbGxlcjogJ0Ryb3Bkb3duQ29udHJvbGxlcicsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBkcm9wZG93bkN0cmwpIHtcbiAgICAgIGRyb3Bkb3duQ3RybC5pbml0KCBlbGVtZW50ICk7XG4gICAgfVxuICB9O1xufSlcblxuLmRpcmVjdGl2ZSgnZHJvcGRvd25Ub2dnbGUnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0NBJyxcbiAgICByZXF1aXJlOiAnP15kcm9wZG93bicsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBkcm9wZG93bkN0cmwpIHtcbiAgICAgIGlmICggIWRyb3Bkb3duQ3RybCApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBkcm9wZG93bkN0cmwudG9nZ2xlRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAgIHZhciB0b2dnbGVEcm9wZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKCAhZWxlbWVudC5oYXNDbGFzcygnZGlzYWJsZWQnKSAmJiAhYXR0cnMuZGlzYWJsZWQgKSB7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZHJvcGRvd25DdHJsLnRvZ2dsZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBlbGVtZW50LmJpbmQoJ2NsaWNrJywgdG9nZ2xlRHJvcGRvd24pO1xuXG4gICAgICAvLyBXQUktQVJJQVxuICAgICAgZWxlbWVudC5hdHRyKHsgJ2FyaWEtaGFzcG9wdXAnOiB0cnVlLCAnYXJpYS1leHBhbmRlZCc6IGZhbHNlIH0pO1xuICAgICAgc2NvcGUuJHdhdGNoKGRyb3Bkb3duQ3RybC5pc09wZW4sIGZ1bmN0aW9uKCBpc09wZW4gKSB7XG4gICAgICAgIGVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsICEhaXNPcGVuKTtcbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGVsZW1lbnQudW5iaW5kKCdjbGljaycsIHRvZ2dsZURyb3Bkb3duKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLm1vZGFsJywgWyd1aS5ib290c3RyYXAudHJhbnNpdGlvbiddKVxuXG4vKipcbiAqIEEgaGVscGVyLCBpbnRlcm5hbCBkYXRhIHN0cnVjdHVyZSB0aGF0IGFjdHMgYXMgYSBtYXAgYnV0IGFsc28gYWxsb3dzIGdldHRpbmcgLyByZW1vdmluZ1xuICogZWxlbWVudHMgaW4gdGhlIExJRk8gb3JkZXJcbiAqL1xuICAuZmFjdG9yeSgnJCRzdGFja2VkTWFwJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGVOZXc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YWNrID0gW107XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKGtleSA9PSBzdGFja1tpXS5rZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2tbaV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGtleXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAga2V5cy5wdXNoKHN0YWNrW2ldLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gLTE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChrZXkgPT0gc3RhY2tbaV0ua2V5KSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YWNrLnNwbGljZShpZHgsIDEpWzBdO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3ZlVG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhY2suc3BsaWNlKHN0YWNrLmxlbmd0aCAtIDEsIDEpWzBdO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbGVuZ3RoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhY2subGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuXG4vKipcbiAqIEEgaGVscGVyIGRpcmVjdGl2ZSBmb3IgdGhlICRtb2RhbCBzZXJ2aWNlLiBJdCBjcmVhdGVzIGEgYmFja2Ryb3AgZWxlbWVudC5cbiAqL1xuICAuZGlyZWN0aXZlKCdtb2RhbEJhY2tkcm9wJywgWyckdGltZW91dCcsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWwnLFxuICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBzY29wZS5iYWNrZHJvcENsYXNzID0gYXR0cnMuYmFja2Ryb3BDbGFzcyB8fCAnJztcblxuICAgICAgICBzY29wZS5hbmltYXRlID0gZmFsc2U7XG5cbiAgICAgICAgLy90cmlnZ2VyIENTUyB0cmFuc2l0aW9uc1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2NvcGUuYW5pbWF0ZSA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1dKVxuXG4gIC5kaXJlY3RpdmUoJ21vZGFsV2luZG93JywgWyckbW9kYWxTdGFjaycsICckdGltZW91dCcsIGZ1bmN0aW9uICgkbW9kYWxTdGFjaywgJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICBzY29wZToge1xuICAgICAgICBpbmRleDogJ0AnLFxuICAgICAgICBhbmltYXRlOiAnPSdcbiAgICAgIH0sXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7XG4gICAgICAgIHJldHVybiB0QXR0cnMudGVtcGxhdGVVcmwgfHwgJ3RlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sJztcbiAgICAgIH0sXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoYXR0cnMud2luZG93Q2xhc3MgfHwgJycpO1xuICAgICAgICBzY29wZS5zaXplID0gYXR0cnMuc2l6ZTtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gdHJpZ2dlciBDU1MgdHJhbnNpdGlvbnNcbiAgICAgICAgICBzY29wZS5hbmltYXRlID0gdHJ1ZTtcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEF1dG8tZm9jdXNpbmcgb2YgYSBmcmVzaGx5LW9wZW5lZCBtb2RhbCBlbGVtZW50IGNhdXNlcyBhbnkgY2hpbGQgZWxlbWVudHNcbiAgICAgICAgICAgKiB3aXRoIHRoZSBhdXRvZm9jdXMgYXR0cmlidXRlIHRvIGxvb3NlIGZvY3VzLiBUaGlzIGlzIGFuIGlzc3VlIG9uIHRvdWNoXG4gICAgICAgICAgICogYmFzZWQgZGV2aWNlcyB3aGljaCB3aWxsIHNob3cgYW5kIHRoZW4gaGlkZSB0aGUgb25zY3JlZW4ga2V5Ym9hcmQuXG4gICAgICAgICAgICogQXR0ZW1wdHMgdG8gcmVmb2N1cyB0aGUgYXV0b2ZvY3VzIGVsZW1lbnQgdmlhIEphdmFTY3JpcHQgd2lsbCBub3QgcmVvcGVuXG4gICAgICAgICAgICogdGhlIG9uc2NyZWVuIGtleWJvYXJkLiBGaXhlZCBieSB1cGRhdGVkIHRoZSBmb2N1c2luZyBsb2dpYyB0byBvbmx5IGF1dG9mb2N1c1xuICAgICAgICAgICAqIHRoZSBtb2RhbCBlbGVtZW50IGlmIHRoZSBtb2RhbCBkb2VzIG5vdCBjb250YWluIGFuIGF1dG9mb2N1cyBlbGVtZW50LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmICghZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKCdbYXV0b2ZvY3VzXScpLmxlbmd0aCkge1xuICAgICAgICAgICAgZWxlbWVudFswXS5mb2N1cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2NvcGUuY2xvc2UgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgdmFyIG1vZGFsID0gJG1vZGFsU3RhY2suZ2V0VG9wKCk7XG4gICAgICAgICAgaWYgKG1vZGFsICYmIG1vZGFsLnZhbHVlLmJhY2tkcm9wICYmIG1vZGFsLnZhbHVlLmJhY2tkcm9wICE9ICdzdGF0aWMnICYmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkpIHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgJG1vZGFsU3RhY2suZGlzbWlzcyhtb2RhbC5rZXksICdiYWNrZHJvcCBjbGljaycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XSlcblxuICAuZGlyZWN0aXZlKCdtb2RhbFRyYW5zY2x1ZGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgY29udHJvbGxlciwgJHRyYW5zY2x1ZGUpIHtcbiAgICAgICAgJHRyYW5zY2x1ZGUoJHNjb3BlLiRwYXJlbnQsIGZ1bmN0aW9uKGNsb25lKSB7XG4gICAgICAgICAgJGVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuXG4gIC5mYWN0b3J5KCckbW9kYWxTdGFjaycsIFsnJHRyYW5zaXRpb24nLCAnJHRpbWVvdXQnLCAnJGRvY3VtZW50JywgJyRjb21waWxlJywgJyRyb290U2NvcGUnLCAnJCRzdGFja2VkTWFwJyxcbiAgICBmdW5jdGlvbiAoJHRyYW5zaXRpb24sICR0aW1lb3V0LCAkZG9jdW1lbnQsICRjb21waWxlLCAkcm9vdFNjb3BlLCAkJHN0YWNrZWRNYXApIHtcblxuICAgICAgdmFyIE9QRU5FRF9NT0RBTF9DTEFTUyA9ICdtb2RhbC1vcGVuJztcblxuICAgICAgdmFyIGJhY2tkcm9wRG9tRWwsIGJhY2tkcm9wU2NvcGU7XG4gICAgICB2YXIgb3BlbmVkV2luZG93cyA9ICQkc3RhY2tlZE1hcC5jcmVhdGVOZXcoKTtcbiAgICAgIHZhciAkbW9kYWxTdGFjayA9IHt9O1xuXG4gICAgICBmdW5jdGlvbiBiYWNrZHJvcEluZGV4KCkge1xuICAgICAgICB2YXIgdG9wQmFja2Ryb3BJbmRleCA9IC0xO1xuICAgICAgICB2YXIgb3BlbmVkID0gb3BlbmVkV2luZG93cy5rZXlzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BlbmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKG9wZW5lZFdpbmRvd3MuZ2V0KG9wZW5lZFtpXSkudmFsdWUuYmFja2Ryb3ApIHtcbiAgICAgICAgICAgIHRvcEJhY2tkcm9wSW5kZXggPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9wQmFja2Ryb3BJbmRleDtcbiAgICAgIH1cblxuICAgICAgJHJvb3RTY29wZS4kd2F0Y2goYmFja2Ryb3BJbmRleCwgZnVuY3Rpb24obmV3QmFja2Ryb3BJbmRleCl7XG4gICAgICAgIGlmIChiYWNrZHJvcFNjb3BlKSB7XG4gICAgICAgICAgYmFja2Ryb3BTY29wZS5pbmRleCA9IG5ld0JhY2tkcm9wSW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiByZW1vdmVNb2RhbFdpbmRvdyhtb2RhbEluc3RhbmNlKSB7XG5cbiAgICAgICAgdmFyIGJvZHkgPSAkZG9jdW1lbnQuZmluZCgnYm9keScpLmVxKDApO1xuICAgICAgICB2YXIgbW9kYWxXaW5kb3cgPSBvcGVuZWRXaW5kb3dzLmdldChtb2RhbEluc3RhbmNlKS52YWx1ZTtcblxuICAgICAgICAvL2NsZWFuIHVwIHRoZSBzdGFja1xuICAgICAgICBvcGVuZWRXaW5kb3dzLnJlbW92ZShtb2RhbEluc3RhbmNlKTtcblxuICAgICAgICAvL3JlbW92ZSB3aW5kb3cgRE9NIGVsZW1lbnRcbiAgICAgICAgcmVtb3ZlQWZ0ZXJBbmltYXRlKG1vZGFsV2luZG93Lm1vZGFsRG9tRWwsIG1vZGFsV2luZG93Lm1vZGFsU2NvcGUsIDMwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbW9kYWxXaW5kb3cubW9kYWxTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgIGJvZHkudG9nZ2xlQ2xhc3MoT1BFTkVEX01PREFMX0NMQVNTLCBvcGVuZWRXaW5kb3dzLmxlbmd0aCgpID4gMCk7XG4gICAgICAgICAgY2hlY2tSZW1vdmVCYWNrZHJvcCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2hlY2tSZW1vdmVCYWNrZHJvcCgpIHtcbiAgICAgICAgICAvL3JlbW92ZSBiYWNrZHJvcCBpZiBubyBsb25nZXIgbmVlZGVkXG4gICAgICAgICAgaWYgKGJhY2tkcm9wRG9tRWwgJiYgYmFja2Ryb3BJbmRleCgpID09IC0xKSB7XG4gICAgICAgICAgICB2YXIgYmFja2Ryb3BTY29wZVJlZiA9IGJhY2tkcm9wU2NvcGU7XG4gICAgICAgICAgICByZW1vdmVBZnRlckFuaW1hdGUoYmFja2Ryb3BEb21FbCwgYmFja2Ryb3BTY29wZSwgMTUwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGJhY2tkcm9wU2NvcGVSZWYuJGRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgYmFja2Ryb3BTY29wZVJlZiA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJhY2tkcm9wRG9tRWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBiYWNrZHJvcFNjb3BlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVtb3ZlQWZ0ZXJBbmltYXRlKGRvbUVsLCBzY29wZSwgZW11bGF0ZVRpbWUsIGRvbmUpIHtcbiAgICAgICAgLy8gQ2xvc2luZyBhbmltYXRpb25cbiAgICAgICAgc2NvcGUuYW5pbWF0ZSA9IGZhbHNlO1xuXG4gICAgICAgIHZhciB0cmFuc2l0aW9uRW5kRXZlbnROYW1lID0gJHRyYW5zaXRpb24udHJhbnNpdGlvbkVuZEV2ZW50TmFtZTtcbiAgICAgICAgaWYgKHRyYW5zaXRpb25FbmRFdmVudE5hbWUpIHtcbiAgICAgICAgICAvLyB0cmFuc2l0aW9uIG91dFxuICAgICAgICAgIHZhciB0aW1lb3V0ID0gJHRpbWVvdXQoYWZ0ZXJBbmltYXRpbmcsIGVtdWxhdGVUaW1lKTtcblxuICAgICAgICAgIGRvbUVsLmJpbmQodHJhbnNpdGlvbkVuZEV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVvdXQpO1xuICAgICAgICAgICAgYWZ0ZXJBbmltYXRpbmcoKTtcbiAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEVuc3VyZSB0aGlzIGNhbGwgaXMgYXN5bmNcbiAgICAgICAgICAkdGltZW91dChhZnRlckFuaW1hdGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZnRlckFuaW1hdGluZygpIHtcbiAgICAgICAgICBpZiAoYWZ0ZXJBbmltYXRpbmcuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZnRlckFuaW1hdGluZy5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIGRvbUVsLnJlbW92ZSgpO1xuICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRkb2N1bWVudC5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICB2YXIgbW9kYWw7XG5cbiAgICAgICAgaWYgKGV2dC53aGljaCA9PT0gMjcpIHtcbiAgICAgICAgICBtb2RhbCA9IG9wZW5lZFdpbmRvd3MudG9wKCk7XG4gICAgICAgICAgaWYgKG1vZGFsICYmIG1vZGFsLnZhbHVlLmtleWJvYXJkKSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgJG1vZGFsU3RhY2suZGlzbWlzcyhtb2RhbC5rZXksICdlc2NhcGUga2V5IHByZXNzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkbW9kYWxTdGFjay5vcGVuID0gZnVuY3Rpb24gKG1vZGFsSW5zdGFuY2UsIG1vZGFsKSB7XG5cbiAgICAgICAgb3BlbmVkV2luZG93cy5hZGQobW9kYWxJbnN0YW5jZSwge1xuICAgICAgICAgIGRlZmVycmVkOiBtb2RhbC5kZWZlcnJlZCxcbiAgICAgICAgICBtb2RhbFNjb3BlOiBtb2RhbC5zY29wZSxcbiAgICAgICAgICBiYWNrZHJvcDogbW9kYWwuYmFja2Ryb3AsXG4gICAgICAgICAga2V5Ym9hcmQ6IG1vZGFsLmtleWJvYXJkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBib2R5ID0gJGRvY3VtZW50LmZpbmQoJ2JvZHknKS5lcSgwKSxcbiAgICAgICAgICAgIGN1cnJCYWNrZHJvcEluZGV4ID0gYmFja2Ryb3BJbmRleCgpO1xuXG4gICAgICAgIGlmIChjdXJyQmFja2Ryb3BJbmRleCA+PSAwICYmICFiYWNrZHJvcERvbUVsKSB7XG4gICAgICAgICAgYmFja2Ryb3BTY29wZSA9ICRyb290U2NvcGUuJG5ldyh0cnVlKTtcbiAgICAgICAgICBiYWNrZHJvcFNjb3BlLmluZGV4ID0gY3VyckJhY2tkcm9wSW5kZXg7XG4gICAgICAgICAgdmFyIGFuZ3VsYXJCYWNrZ3JvdW5kRG9tRWwgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgbW9kYWwtYmFja2Ryb3A+PC9kaXY+Jyk7XG4gICAgICAgICAgYW5ndWxhckJhY2tncm91bmREb21FbC5hdHRyKCdiYWNrZHJvcC1jbGFzcycsIG1vZGFsLmJhY2tkcm9wQ2xhc3MpO1xuICAgICAgICAgIGJhY2tkcm9wRG9tRWwgPSAkY29tcGlsZShhbmd1bGFyQmFja2dyb3VuZERvbUVsKShiYWNrZHJvcFNjb3BlKTtcbiAgICAgICAgICBib2R5LmFwcGVuZChiYWNrZHJvcERvbUVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhbmd1bGFyRG9tRWwgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgbW9kYWwtd2luZG93PjwvZGl2PicpO1xuICAgICAgICBhbmd1bGFyRG9tRWwuYXR0cih7XG4gICAgICAgICAgJ3RlbXBsYXRlLXVybCc6IG1vZGFsLndpbmRvd1RlbXBsYXRlVXJsLFxuICAgICAgICAgICd3aW5kb3ctY2xhc3MnOiBtb2RhbC53aW5kb3dDbGFzcyxcbiAgICAgICAgICAnc2l6ZSc6IG1vZGFsLnNpemUsXG4gICAgICAgICAgJ2luZGV4Jzogb3BlbmVkV2luZG93cy5sZW5ndGgoKSAtIDEsXG4gICAgICAgICAgJ2FuaW1hdGUnOiAnYW5pbWF0ZSdcbiAgICAgICAgfSkuaHRtbChtb2RhbC5jb250ZW50KTtcblxuICAgICAgICB2YXIgbW9kYWxEb21FbCA9ICRjb21waWxlKGFuZ3VsYXJEb21FbCkobW9kYWwuc2NvcGUpO1xuICAgICAgICBvcGVuZWRXaW5kb3dzLnRvcCgpLnZhbHVlLm1vZGFsRG9tRWwgPSBtb2RhbERvbUVsO1xuICAgICAgICBib2R5LmFwcGVuZChtb2RhbERvbUVsKTtcbiAgICAgICAgYm9keS5hZGRDbGFzcyhPUEVORURfTU9EQUxfQ0xBU1MpO1xuICAgICAgfTtcblxuICAgICAgJG1vZGFsU3RhY2suY2xvc2UgPSBmdW5jdGlvbiAobW9kYWxJbnN0YW5jZSwgcmVzdWx0KSB7XG4gICAgICAgIHZhciBtb2RhbFdpbmRvdyA9IG9wZW5lZFdpbmRvd3MuZ2V0KG1vZGFsSW5zdGFuY2UpO1xuICAgICAgICBpZiAobW9kYWxXaW5kb3cpIHtcbiAgICAgICAgICBtb2RhbFdpbmRvdy52YWx1ZS5kZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgcmVtb3ZlTW9kYWxXaW5kb3cobW9kYWxJbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICRtb2RhbFN0YWNrLmRpc21pc3MgPSBmdW5jdGlvbiAobW9kYWxJbnN0YW5jZSwgcmVhc29uKSB7XG4gICAgICAgIHZhciBtb2RhbFdpbmRvdyA9IG9wZW5lZFdpbmRvd3MuZ2V0KG1vZGFsSW5zdGFuY2UpO1xuICAgICAgICBpZiAobW9kYWxXaW5kb3cpIHtcbiAgICAgICAgICBtb2RhbFdpbmRvdy52YWx1ZS5kZWZlcnJlZC5yZWplY3QocmVhc29uKTtcbiAgICAgICAgICByZW1vdmVNb2RhbFdpbmRvdyhtb2RhbEluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJG1vZGFsU3RhY2suZGlzbWlzc0FsbCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgdmFyIHRvcE1vZGFsID0gdGhpcy5nZXRUb3AoKTtcbiAgICAgICAgd2hpbGUgKHRvcE1vZGFsKSB7XG4gICAgICAgICAgdGhpcy5kaXNtaXNzKHRvcE1vZGFsLmtleSwgcmVhc29uKTtcbiAgICAgICAgICB0b3BNb2RhbCA9IHRoaXMuZ2V0VG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICRtb2RhbFN0YWNrLmdldFRvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG9wZW5lZFdpbmRvd3MudG9wKCk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gJG1vZGFsU3RhY2s7XG4gICAgfV0pXG5cbiAgLnByb3ZpZGVyKCckbW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgJG1vZGFsUHJvdmlkZXIgPSB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGJhY2tkcm9wOiB0cnVlLCAvL2NhbiBiZSBhbHNvIGZhbHNlIG9yICdzdGF0aWMnXG4gICAgICAgIGtleWJvYXJkOiB0cnVlXG4gICAgICB9LFxuICAgICAgJGdldDogWyckaW5qZWN0b3InLCAnJHJvb3RTY29wZScsICckcScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsICckY29udHJvbGxlcicsICckbW9kYWxTdGFjaycsXG4gICAgICAgIGZ1bmN0aW9uICgkaW5qZWN0b3IsICRyb290U2NvcGUsICRxLCAkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRjb250cm9sbGVyLCAkbW9kYWxTdGFjaykge1xuXG4gICAgICAgICAgdmFyICRtb2RhbCA9IHt9O1xuXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0VGVtcGxhdGVQcm9taXNlKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnRlbXBsYXRlID8gJHEud2hlbihvcHRpb25zLnRlbXBsYXRlKSA6XG4gICAgICAgICAgICAgICRodHRwLmdldChhbmd1bGFyLmlzRnVuY3Rpb24ob3B0aW9ucy50ZW1wbGF0ZVVybCkgPyAob3B0aW9ucy50ZW1wbGF0ZVVybCkoKSA6IG9wdGlvbnMudGVtcGxhdGVVcmwsXG4gICAgICAgICAgICAgICAge2NhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBnZXRSZXNvbHZlUHJvbWlzZXMocmVzb2x2ZXMpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlc0FyciA9IFtdO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc29sdmVzLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbih2YWx1ZSkgfHwgYW5ndWxhci5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHByb21pc2VzQXJyLnB1c2goJHEud2hlbigkaW5qZWN0b3IuaW52b2tlKHZhbHVlKSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlc0FycjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkbW9kYWwub3BlbiA9IGZ1bmN0aW9uIChtb2RhbE9wdGlvbnMpIHtcblxuICAgICAgICAgICAgdmFyIG1vZGFsUmVzdWx0RGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIG1vZGFsT3BlbmVkRGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAvL3ByZXBhcmUgYW4gaW5zdGFuY2Ugb2YgYSBtb2RhbCB0byBiZSBpbmplY3RlZCBpbnRvIGNvbnRyb2xsZXJzIGFuZCByZXR1cm5lZCB0byBhIGNhbGxlclxuICAgICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSB7XG4gICAgICAgICAgICAgIHJlc3VsdDogbW9kYWxSZXN1bHREZWZlcnJlZC5wcm9taXNlLFxuICAgICAgICAgICAgICBvcGVuZWQ6IG1vZGFsT3BlbmVkRGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkbW9kYWxTdGFjay5jbG9zZShtb2RhbEluc3RhbmNlLCByZXN1bHQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkaXNtaXNzOiBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgJG1vZGFsU3RhY2suZGlzbWlzcyhtb2RhbEluc3RhbmNlLCByZWFzb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL21lcmdlIGFuZCBjbGVhbiB1cCBvcHRpb25zXG4gICAgICAgICAgICBtb2RhbE9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgJG1vZGFsUHJvdmlkZXIub3B0aW9ucywgbW9kYWxPcHRpb25zKTtcbiAgICAgICAgICAgIG1vZGFsT3B0aW9ucy5yZXNvbHZlID0gbW9kYWxPcHRpb25zLnJlc29sdmUgfHwge307XG5cbiAgICAgICAgICAgIC8vdmVyaWZ5IG9wdGlvbnNcbiAgICAgICAgICAgIGlmICghbW9kYWxPcHRpb25zLnRlbXBsYXRlICYmICFtb2RhbE9wdGlvbnMudGVtcGxhdGVVcmwpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmUgb2YgdGVtcGxhdGUgb3IgdGVtcGxhdGVVcmwgb3B0aW9ucyBpcyByZXF1aXJlZC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlQW5kUmVzb2x2ZVByb21pc2UgPVxuICAgICAgICAgICAgICAkcS5hbGwoW2dldFRlbXBsYXRlUHJvbWlzZShtb2RhbE9wdGlvbnMpXS5jb25jYXQoZ2V0UmVzb2x2ZVByb21pc2VzKG1vZGFsT3B0aW9ucy5yZXNvbHZlKSkpO1xuXG5cbiAgICAgICAgICAgIHRlbXBsYXRlQW5kUmVzb2x2ZVByb21pc2UudGhlbihmdW5jdGlvbiByZXNvbHZlU3VjY2Vzcyh0cGxBbmRWYXJzKSB7XG5cbiAgICAgICAgICAgICAgdmFyIG1vZGFsU2NvcGUgPSAobW9kYWxPcHRpb25zLnNjb3BlIHx8ICRyb290U2NvcGUpLiRuZXcoKTtcbiAgICAgICAgICAgICAgbW9kYWxTY29wZS4kY2xvc2UgPSBtb2RhbEluc3RhbmNlLmNsb3NlO1xuICAgICAgICAgICAgICBtb2RhbFNjb3BlLiRkaXNtaXNzID0gbW9kYWxJbnN0YW5jZS5kaXNtaXNzO1xuXG4gICAgICAgICAgICAgIHZhciBjdHJsSW5zdGFuY2UsIGN0cmxMb2NhbHMgPSB7fTtcbiAgICAgICAgICAgICAgdmFyIHJlc29sdmVJdGVyID0gMTtcblxuICAgICAgICAgICAgICAvL2NvbnRyb2xsZXJzXG4gICAgICAgICAgICAgIGlmIChtb2RhbE9wdGlvbnMuY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGN0cmxMb2NhbHMuJHNjb3BlID0gbW9kYWxTY29wZTtcbiAgICAgICAgICAgICAgICBjdHJsTG9jYWxzLiRtb2RhbEluc3RhbmNlID0gbW9kYWxJbnN0YW5jZTtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobW9kYWxPcHRpb25zLnJlc29sdmUsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICBjdHJsTG9jYWxzW2tleV0gPSB0cGxBbmRWYXJzW3Jlc29sdmVJdGVyKytdO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY3RybEluc3RhbmNlID0gJGNvbnRyb2xsZXIobW9kYWxPcHRpb25zLmNvbnRyb2xsZXIsIGN0cmxMb2NhbHMpO1xuICAgICAgICAgICAgICAgIGlmIChtb2RhbE9wdGlvbnMuY29udHJvbGxlckFzKSB7XG4gICAgICAgICAgICAgICAgICBtb2RhbFNjb3BlW21vZGFsT3B0aW9ucy5jb250cm9sbGVyQXNdID0gY3RybEluc3RhbmNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICRtb2RhbFN0YWNrLm9wZW4obW9kYWxJbnN0YW5jZSwge1xuICAgICAgICAgICAgICAgIHNjb3BlOiBtb2RhbFNjb3BlLFxuICAgICAgICAgICAgICAgIGRlZmVycmVkOiBtb2RhbFJlc3VsdERlZmVycmVkLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRwbEFuZFZhcnNbMF0sXG4gICAgICAgICAgICAgICAgYmFja2Ryb3A6IG1vZGFsT3B0aW9ucy5iYWNrZHJvcCxcbiAgICAgICAgICAgICAgICBrZXlib2FyZDogbW9kYWxPcHRpb25zLmtleWJvYXJkLFxuICAgICAgICAgICAgICAgIGJhY2tkcm9wQ2xhc3M6IG1vZGFsT3B0aW9ucy5iYWNrZHJvcENsYXNzLFxuICAgICAgICAgICAgICAgIHdpbmRvd0NsYXNzOiBtb2RhbE9wdGlvbnMud2luZG93Q2xhc3MsXG4gICAgICAgICAgICAgICAgd2luZG93VGVtcGxhdGVVcmw6IG1vZGFsT3B0aW9ucy53aW5kb3dUZW1wbGF0ZVVybCxcbiAgICAgICAgICAgICAgICBzaXplOiBtb2RhbE9wdGlvbnMuc2l6ZVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gcmVzb2x2ZUVycm9yKHJlYXNvbikge1xuICAgICAgICAgICAgICBtb2RhbFJlc3VsdERlZmVycmVkLnJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlbXBsYXRlQW5kUmVzb2x2ZVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIG1vZGFsT3BlbmVkRGVmZXJyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbW9kYWxPcGVuZWREZWZlcnJlZC5yZWplY3QoZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBtb2RhbEluc3RhbmNlO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4gJG1vZGFsO1xuICAgICAgICB9XVxuICAgIH07XG5cbiAgICByZXR1cm4gJG1vZGFsUHJvdmlkZXI7XG4gIH0pO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnBhZ2luYXRpb24nLCBbXSlcblxuLmNvbnRyb2xsZXIoJ1BhZ2luYXRpb25Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJGF0dHJzJywgJyRwYXJzZScsIGZ1bmN0aW9uICgkc2NvcGUsICRhdHRycywgJHBhcnNlKSB7XG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIG5nTW9kZWxDdHJsID0geyAkc2V0Vmlld1ZhbHVlOiBhbmd1bGFyLm5vb3AgfSwgLy8gbnVsbE1vZGVsQ3RybFxuICAgICAgc2V0TnVtUGFnZXMgPSAkYXR0cnMubnVtUGFnZXMgPyAkcGFyc2UoJGF0dHJzLm51bVBhZ2VzKS5hc3NpZ24gOiBhbmd1bGFyLm5vb3A7XG5cbiAgdGhpcy5pbml0ID0gZnVuY3Rpb24obmdNb2RlbEN0cmxfLCBjb25maWcpIHtcbiAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsXztcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblxuICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucmVuZGVyKCk7XG4gICAgfTtcblxuICAgIGlmICgkYXR0cnMuaXRlbXNQZXJQYWdlKSB7XG4gICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goJHBhcnNlKCRhdHRycy5pdGVtc1BlclBhZ2UpLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBzZWxmLml0ZW1zUGVyUGFnZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICRzY29wZS50b3RhbFBhZ2VzID0gc2VsZi5jYWxjdWxhdGVUb3RhbFBhZ2VzKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pdGVtc1BlclBhZ2UgPSBjb25maWcuaXRlbXNQZXJQYWdlO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLmNhbGN1bGF0ZVRvdGFsUGFnZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdG90YWxQYWdlcyA9IHRoaXMuaXRlbXNQZXJQYWdlIDwgMSA/IDEgOiBNYXRoLmNlaWwoJHNjb3BlLnRvdGFsSXRlbXMgLyB0aGlzLml0ZW1zUGVyUGFnZSk7XG4gICAgcmV0dXJuIE1hdGgubWF4KHRvdGFsUGFnZXMgfHwgMCwgMSk7XG4gIH07XG5cbiAgdGhpcy5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUucGFnZSA9IHBhcnNlSW50KG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUsIDEwKSB8fCAxO1xuICB9O1xuXG4gICRzY29wZS5zZWxlY3RQYWdlID0gZnVuY3Rpb24ocGFnZSkge1xuICAgIGlmICggJHNjb3BlLnBhZ2UgIT09IHBhZ2UgJiYgcGFnZSA+IDAgJiYgcGFnZSA8PSAkc2NvcGUudG90YWxQYWdlcykge1xuICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShwYWdlKTtcbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLmdldFRleHQgPSBmdW5jdGlvbigga2V5ICkge1xuICAgIHJldHVybiAkc2NvcGVba2V5ICsgJ1RleHQnXSB8fCBzZWxmLmNvbmZpZ1trZXkgKyAnVGV4dCddO1xuICB9O1xuICAkc2NvcGUubm9QcmV2aW91cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkc2NvcGUucGFnZSA9PT0gMTtcbiAgfTtcbiAgJHNjb3BlLm5vTmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkc2NvcGUucGFnZSA9PT0gJHNjb3BlLnRvdGFsUGFnZXM7XG4gIH07XG5cbiAgJHNjb3BlLiR3YXRjaCgndG90YWxJdGVtcycsIGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS50b3RhbFBhZ2VzID0gc2VsZi5jYWxjdWxhdGVUb3RhbFBhZ2VzKCk7XG4gIH0pO1xuXG4gICRzY29wZS4kd2F0Y2goJ3RvdGFsUGFnZXMnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHNldE51bVBhZ2VzKCRzY29wZS4kcGFyZW50LCB2YWx1ZSk7IC8vIFJlYWRvbmx5IHZhcmlhYmxlXG5cbiAgICBpZiAoICRzY29wZS5wYWdlID4gdmFsdWUgKSB7XG4gICAgICAkc2NvcGUuc2VsZWN0UGFnZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9XG4gIH0pO1xufV0pXG5cbi5jb25zdGFudCgncGFnaW5hdGlvbkNvbmZpZycsIHtcbiAgaXRlbXNQZXJQYWdlOiAxMCxcbiAgYm91bmRhcnlMaW5rczogZmFsc2UsXG4gIGRpcmVjdGlvbkxpbmtzOiB0cnVlLFxuICBmaXJzdFRleHQ6ICdGaXJzdCcsXG4gIHByZXZpb3VzVGV4dDogJ1ByZXZpb3VzJyxcbiAgbmV4dFRleHQ6ICdOZXh0JyxcbiAgbGFzdFRleHQ6ICdMYXN0JyxcbiAgcm90YXRlOiB0cnVlXG59KVxuXG4uZGlyZWN0aXZlKCdwYWdpbmF0aW9uJywgWyckcGFyc2UnLCAncGFnaW5hdGlvbkNvbmZpZycsIGZ1bmN0aW9uKCRwYXJzZSwgcGFnaW5hdGlvbkNvbmZpZykge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHNjb3BlOiB7XG4gICAgICB0b3RhbEl0ZW1zOiAnPScsXG4gICAgICBmaXJzdFRleHQ6ICdAJyxcbiAgICAgIHByZXZpb3VzVGV4dDogJ0AnLFxuICAgICAgbmV4dFRleHQ6ICdAJyxcbiAgICAgIGxhc3RUZXh0OiAnQCdcbiAgICB9LFxuICAgIHJlcXVpcmU6IFsncGFnaW5hdGlvbicsICc/bmdNb2RlbCddLFxuICAgIGNvbnRyb2xsZXI6ICdQYWdpbmF0aW9uQ29udHJvbGxlcicsXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbCcsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICB2YXIgcGFnaW5hdGlvbkN0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcblxuICAgICAgaWYgKCFuZ01vZGVsQ3RybCkge1xuICAgICAgICAgcmV0dXJuOyAvLyBkbyBub3RoaW5nIGlmIG5vIG5nLW1vZGVsXG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgICAgdmFyIG1heFNpemUgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5tYXhTaXplKSA/IHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMubWF4U2l6ZSkgOiBwYWdpbmF0aW9uQ29uZmlnLm1heFNpemUsXG4gICAgICAgICAgcm90YXRlID0gYW5ndWxhci5pc0RlZmluZWQoYXR0cnMucm90YXRlKSA/IHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMucm90YXRlKSA6IHBhZ2luYXRpb25Db25maWcucm90YXRlO1xuICAgICAgc2NvcGUuYm91bmRhcnlMaW5rcyA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLmJvdW5kYXJ5TGlua3MpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5ib3VuZGFyeUxpbmtzKSA6IHBhZ2luYXRpb25Db25maWcuYm91bmRhcnlMaW5rcztcbiAgICAgIHNjb3BlLmRpcmVjdGlvbkxpbmtzID0gYW5ndWxhci5pc0RlZmluZWQoYXR0cnMuZGlyZWN0aW9uTGlua3MpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5kaXJlY3Rpb25MaW5rcykgOiBwYWdpbmF0aW9uQ29uZmlnLmRpcmVjdGlvbkxpbmtzO1xuXG4gICAgICBwYWdpbmF0aW9uQ3RybC5pbml0KG5nTW9kZWxDdHJsLCBwYWdpbmF0aW9uQ29uZmlnKTtcblxuICAgICAgaWYgKGF0dHJzLm1heFNpemUpIHtcbiAgICAgICAgc2NvcGUuJHBhcmVudC4kd2F0Y2goJHBhcnNlKGF0dHJzLm1heFNpemUpLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIG1heFNpemUgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgIHBhZ2luYXRpb25DdHJsLnJlbmRlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHBhZ2Ugb2JqZWN0IHVzZWQgaW4gdGVtcGxhdGVcbiAgICAgIGZ1bmN0aW9uIG1ha2VQYWdlKG51bWJlciwgdGV4dCwgaXNBY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBudW1iZXI6IG51bWJlcixcbiAgICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICAgIGFjdGl2ZTogaXNBY3RpdmVcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0UGFnZXMoY3VycmVudFBhZ2UsIHRvdGFsUGFnZXMpIHtcbiAgICAgICAgdmFyIHBhZ2VzID0gW107XG5cbiAgICAgICAgLy8gRGVmYXVsdCBwYWdlIGxpbWl0c1xuICAgICAgICB2YXIgc3RhcnRQYWdlID0gMSwgZW5kUGFnZSA9IHRvdGFsUGFnZXM7XG4gICAgICAgIHZhciBpc01heFNpemVkID0gKCBhbmd1bGFyLmlzRGVmaW5lZChtYXhTaXplKSAmJiBtYXhTaXplIDwgdG90YWxQYWdlcyApO1xuXG4gICAgICAgIC8vIHJlY29tcHV0ZSBpZiBtYXhTaXplXG4gICAgICAgIGlmICggaXNNYXhTaXplZCApIHtcbiAgICAgICAgICBpZiAoIHJvdGF0ZSApIHtcbiAgICAgICAgICAgIC8vIEN1cnJlbnQgcGFnZSBpcyBkaXNwbGF5ZWQgaW4gdGhlIG1pZGRsZSBvZiB0aGUgdmlzaWJsZSBvbmVzXG4gICAgICAgICAgICBzdGFydFBhZ2UgPSBNYXRoLm1heChjdXJyZW50UGFnZSAtIE1hdGguZmxvb3IobWF4U2l6ZS8yKSwgMSk7XG4gICAgICAgICAgICBlbmRQYWdlICAgPSBzdGFydFBhZ2UgKyBtYXhTaXplIC0gMTtcblxuICAgICAgICAgICAgLy8gQWRqdXN0IGlmIGxpbWl0IGlzIGV4Y2VlZGVkXG4gICAgICAgICAgICBpZiAoZW5kUGFnZSA+IHRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgZW5kUGFnZSAgID0gdG90YWxQYWdlcztcbiAgICAgICAgICAgICAgc3RhcnRQYWdlID0gZW5kUGFnZSAtIG1heFNpemUgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBWaXNpYmxlIHBhZ2VzIGFyZSBwYWdpbmF0ZWQgd2l0aCBtYXhTaXplXG4gICAgICAgICAgICBzdGFydFBhZ2UgPSAoKE1hdGguY2VpbChjdXJyZW50UGFnZSAvIG1heFNpemUpIC0gMSkgKiBtYXhTaXplKSArIDE7XG5cbiAgICAgICAgICAgIC8vIEFkanVzdCBsYXN0IHBhZ2UgaWYgbGltaXQgaXMgZXhjZWVkZWRcbiAgICAgICAgICAgIGVuZFBhZ2UgPSBNYXRoLm1pbihzdGFydFBhZ2UgKyBtYXhTaXplIC0gMSwgdG90YWxQYWdlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIHBhZ2UgbnVtYmVyIGxpbmtzXG4gICAgICAgIGZvciAodmFyIG51bWJlciA9IHN0YXJ0UGFnZTsgbnVtYmVyIDw9IGVuZFBhZ2U7IG51bWJlcisrKSB7XG4gICAgICAgICAgdmFyIHBhZ2UgPSBtYWtlUGFnZShudW1iZXIsIG51bWJlciwgbnVtYmVyID09PSBjdXJyZW50UGFnZSk7XG4gICAgICAgICAgcGFnZXMucHVzaChwYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBsaW5rcyB0byBtb3ZlIGJldHdlZW4gcGFnZSBzZXRzXG4gICAgICAgIGlmICggaXNNYXhTaXplZCAmJiAhIHJvdGF0ZSApIHtcbiAgICAgICAgICBpZiAoIHN0YXJ0UGFnZSA+IDEgKSB7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNQYWdlU2V0ID0gbWFrZVBhZ2Uoc3RhcnRQYWdlIC0gMSwgJy4uLicsIGZhbHNlKTtcbiAgICAgICAgICAgIHBhZ2VzLnVuc2hpZnQocHJldmlvdXNQYWdlU2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIGVuZFBhZ2UgPCB0b3RhbFBhZ2VzICkge1xuICAgICAgICAgICAgdmFyIG5leHRQYWdlU2V0ID0gbWFrZVBhZ2UoZW5kUGFnZSArIDEsICcuLi4nLCBmYWxzZSk7XG4gICAgICAgICAgICBwYWdlcy5wdXNoKG5leHRQYWdlU2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGFnZXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBvcmlnaW5hbFJlbmRlciA9IHBhZ2luYXRpb25DdHJsLnJlbmRlcjtcbiAgICAgIHBhZ2luYXRpb25DdHJsLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBvcmlnaW5hbFJlbmRlcigpO1xuICAgICAgICBpZiAoc2NvcGUucGFnZSA+IDAgJiYgc2NvcGUucGFnZSA8PSBzY29wZS50b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgc2NvcGUucGFnZXMgPSBnZXRQYWdlcyhzY29wZS5wYWdlLCBzY29wZS50b3RhbFBhZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XSlcblxuLmNvbnN0YW50KCdwYWdlckNvbmZpZycsIHtcbiAgaXRlbXNQZXJQYWdlOiAxMCxcbiAgcHJldmlvdXNUZXh0OiAnwqsgUHJldmlvdXMnLFxuICBuZXh0VGV4dDogJ05leHQgwrsnLFxuICBhbGlnbjogdHJ1ZVxufSlcblxuLmRpcmVjdGl2ZSgncGFnZXInLCBbJ3BhZ2VyQ29uZmlnJywgZnVuY3Rpb24ocGFnZXJDb25maWcpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICBzY29wZToge1xuICAgICAgdG90YWxJdGVtczogJz0nLFxuICAgICAgcHJldmlvdXNUZXh0OiAnQCcsXG4gICAgICBuZXh0VGV4dDogJ0AnXG4gICAgfSxcbiAgICByZXF1aXJlOiBbJ3BhZ2VyJywgJz9uZ01vZGVsJ10sXG4gICAgY29udHJvbGxlcjogJ1BhZ2luYXRpb25Db250cm9sbGVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbCcsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICB2YXIgcGFnaW5hdGlvbkN0cmwgPSBjdHJsc1swXSwgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcblxuICAgICAgaWYgKCFuZ01vZGVsQ3RybCkge1xuICAgICAgICAgcmV0dXJuOyAvLyBkbyBub3RoaW5nIGlmIG5vIG5nLW1vZGVsXG4gICAgICB9XG5cbiAgICAgIHNjb3BlLmFsaWduID0gYW5ndWxhci5pc0RlZmluZWQoYXR0cnMuYWxpZ24pID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5hbGlnbikgOiBwYWdlckNvbmZpZy5hbGlnbjtcbiAgICAgIHBhZ2luYXRpb25DdHJsLmluaXQobmdNb2RlbEN0cmwsIHBhZ2VyQ29uZmlnKTtcbiAgICB9XG4gIH07XG59XSk7XG5cbi8qKlxuICogVGhlIGZvbGxvd2luZyBmZWF0dXJlcyBhcmUgc3RpbGwgb3V0c3RhbmRpbmc6IGFuaW1hdGlvbiBhcyBhXG4gKiBmdW5jdGlvbiwgcGxhY2VtZW50IGFzIGEgZnVuY3Rpb24sIGluc2lkZSwgc3VwcG9ydCBmb3IgbW9yZSB0cmlnZ2VycyB0aGFuXG4gKiBqdXN0IG1vdXNlIGVudGVyL2xlYXZlLCBodG1sIHRvb2x0aXBzLCBhbmQgc2VsZWN0b3IgZGVsZWdhdGlvbi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoICd1aS5ib290c3RyYXAudG9vbHRpcCcsIFsgJ3VpLmJvb3RzdHJhcC5wb3NpdGlvbicsICd1aS5ib290c3RyYXAuYmluZEh0bWwnIF0gKVxuXG4vKipcbiAqIFRoZSAkdG9vbHRpcCBzZXJ2aWNlIGNyZWF0ZXMgdG9vbHRpcC0gYW5kIHBvcG92ZXItbGlrZSBkaXJlY3RpdmVzIGFzIHdlbGwgYXNcbiAqIGhvdXNlcyBnbG9iYWwgb3B0aW9ucyBmb3IgdGhlbS5cbiAqL1xuLnByb3ZpZGVyKCAnJHRvb2x0aXAnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIFRoZSBkZWZhdWx0IG9wdGlvbnMgdG9vbHRpcCBhbmQgcG9wb3Zlci5cbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIHBsYWNlbWVudDogJ3RvcCcsXG4gICAgYW5pbWF0aW9uOiB0cnVlLFxuICAgIHBvcHVwRGVsYXk6IDBcbiAgfTtcblxuICAvLyBEZWZhdWx0IGhpZGUgdHJpZ2dlcnMgZm9yIGVhY2ggc2hvdyB0cmlnZ2VyXG4gIHZhciB0cmlnZ2VyTWFwID0ge1xuICAgICdtb3VzZWVudGVyJzogJ21vdXNlbGVhdmUnLFxuICAgICdjbGljayc6ICdjbGljaycsXG4gICAgJ2ZvY3VzJzogJ2JsdXInXG4gIH07XG5cbiAgLy8gVGhlIG9wdGlvbnMgc3BlY2lmaWVkIHRvIHRoZSBwcm92aWRlciBnbG9iYWxseS5cbiAgdmFyIGdsb2JhbE9wdGlvbnMgPSB7fTtcblxuICAvKipcbiAgICogYG9wdGlvbnMoe30pYCBhbGxvd3MgZ2xvYmFsIGNvbmZpZ3VyYXRpb24gb2YgYWxsIHRvb2x0aXBzIGluIHRoZVxuICAgKiBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoICdBcHAnLCBbJ3VpLmJvb3RzdHJhcC50b29sdGlwJ10sIGZ1bmN0aW9uKCAkdG9vbHRpcFByb3ZpZGVyICkge1xuICAgKiAgICAgLy8gcGxhY2UgdG9vbHRpcHMgbGVmdCBpbnN0ZWFkIG9mIHRvcCBieSBkZWZhdWx0XG4gICAqICAgICAkdG9vbHRpcFByb3ZpZGVyLm9wdGlvbnMoIHsgcGxhY2VtZW50OiAnbGVmdCcgfSApO1xuICAgKiAgIH0pO1xuICAgKi9cblx0dGhpcy5vcHRpb25zID0gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdGFuZ3VsYXIuZXh0ZW5kKCBnbG9iYWxPcHRpb25zLCB2YWx1ZSApO1xuXHR9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGFsbG93cyB5b3UgdG8gZXh0ZW5kIHRoZSBzZXQgb2YgdHJpZ2dlciBtYXBwaW5ncyBhdmFpbGFibGUuIEUuZy46XG4gICAqXG4gICAqICAgJHRvb2x0aXBQcm92aWRlci5zZXRUcmlnZ2VycyggJ29wZW5UcmlnZ2VyJzogJ2Nsb3NlVHJpZ2dlcicgKTtcbiAgICovXG4gIHRoaXMuc2V0VHJpZ2dlcnMgPSBmdW5jdGlvbiBzZXRUcmlnZ2VycyAoIHRyaWdnZXJzICkge1xuICAgIGFuZ3VsYXIuZXh0ZW5kKCB0cmlnZ2VyTWFwLCB0cmlnZ2VycyApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGlzIGEgaGVscGVyIGZ1bmN0aW9uIGZvciB0cmFuc2xhdGluZyBjYW1lbC1jYXNlIHRvIHNuYWtlLWNhc2UuXG4gICAqL1xuICBmdW5jdGlvbiBzbmFrZV9jYXNlKG5hbWUpe1xuICAgIHZhciByZWdleHAgPSAvW0EtWl0vZztcbiAgICB2YXIgc2VwYXJhdG9yID0gJy0nO1xuICAgIHJldHVybiBuYW1lLnJlcGxhY2UocmVnZXhwLCBmdW5jdGlvbihsZXR0ZXIsIHBvcykge1xuICAgICAgcmV0dXJuIChwb3MgPyBzZXBhcmF0b3IgOiAnJykgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhY3R1YWwgaW5zdGFuY2Ugb2YgdGhlICR0b29sdGlwIHNlcnZpY2UuXG4gICAqIFRPRE8gc3VwcG9ydCBtdWx0aXBsZSB0cmlnZ2Vyc1xuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyAnJHdpbmRvdycsICckY29tcGlsZScsICckdGltZW91dCcsICckcGFyc2UnLCAnJGRvY3VtZW50JywgJyRwb3NpdGlvbicsICckaW50ZXJwb2xhdGUnLCBmdW5jdGlvbiAoICR3aW5kb3csICRjb21waWxlLCAkdGltZW91dCwgJHBhcnNlLCAkZG9jdW1lbnQsICRwb3NpdGlvbiwgJGludGVycG9sYXRlICkge1xuICAgIHJldHVybiBmdW5jdGlvbiAkdG9vbHRpcCAoIHR5cGUsIHByZWZpeCwgZGVmYXVsdFRyaWdnZXJTaG93ICkge1xuICAgICAgdmFyIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZCgge30sIGRlZmF1bHRPcHRpb25zLCBnbG9iYWxPcHRpb25zICk7XG5cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyBhbiBvYmplY3Qgb2Ygc2hvdyBhbmQgaGlkZSB0cmlnZ2Vycy5cbiAgICAgICAqXG4gICAgICAgKiBJZiBhIHRyaWdnZXIgaXMgc3VwcGxpZWQsXG4gICAgICAgKiBpdCBpcyB1c2VkIHRvIHNob3cgdGhlIHRvb2x0aXA7IG90aGVyd2lzZSwgaXQgd2lsbCB1c2UgdGhlIGB0cmlnZ2VyYFxuICAgICAgICogb3B0aW9uIHBhc3NlZCB0byB0aGUgYCR0b29sdGlwUHJvdmlkZXIub3B0aW9uc2AgbWV0aG9kOyBlbHNlIGl0IHdpbGxcbiAgICAgICAqIGRlZmF1bHQgdG8gdGhlIHRyaWdnZXIgc3VwcGxpZWQgdG8gdGhpcyBkaXJlY3RpdmUgZmFjdG9yeS5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgaGlkZSB0cmlnZ2VyIGlzIGJhc2VkIG9uIHRoZSBzaG93IHRyaWdnZXIuIElmIHRoZSBgdHJpZ2dlcmAgb3B0aW9uXG4gICAgICAgKiB3YXMgcGFzc2VkIHRvIHRoZSBgJHRvb2x0aXBQcm92aWRlci5vcHRpb25zYCBtZXRob2QsIGl0IHdpbGwgdXNlIHRoZVxuICAgICAgICogbWFwcGVkIHRyaWdnZXIgZnJvbSBgdHJpZ2dlck1hcGAgb3IgdGhlIHBhc3NlZCB0cmlnZ2VyIGlmIHRoZSBtYXAgaXNcbiAgICAgICAqIHVuZGVmaW5lZDsgb3RoZXJ3aXNlLCBpdCB1c2VzIHRoZSBgdHJpZ2dlck1hcGAgdmFsdWUgb2YgdGhlIHNob3dcbiAgICAgICAqIHRyaWdnZXI7IGVsc2UgaXQgd2lsbCBqdXN0IHVzZSB0aGUgc2hvdyB0cmlnZ2VyLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBnZXRUcmlnZ2VycyAoIHRyaWdnZXIgKSB7XG4gICAgICAgIHZhciBzaG93ID0gdHJpZ2dlciB8fCBvcHRpb25zLnRyaWdnZXIgfHwgZGVmYXVsdFRyaWdnZXJTaG93O1xuICAgICAgICB2YXIgaGlkZSA9IHRyaWdnZXJNYXBbc2hvd10gfHwgc2hvdztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG93OiBzaG93LFxuICAgICAgICAgIGhpZGU6IGhpZGVcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRpcmVjdGl2ZU5hbWUgPSBzbmFrZV9jYXNlKCB0eXBlICk7XG5cbiAgICAgIHZhciBzdGFydFN5bSA9ICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpO1xuICAgICAgdmFyIGVuZFN5bSA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKTtcbiAgICAgIHZhciB0ZW1wbGF0ZSA9XG4gICAgICAgICc8ZGl2ICcrIGRpcmVjdGl2ZU5hbWUgKyctcG9wdXAgJytcbiAgICAgICAgICAndGl0bGU9XCInK3N0YXJ0U3ltKyd0dF90aXRsZScrZW5kU3ltKydcIiAnK1xuICAgICAgICAgICdjb250ZW50PVwiJytzdGFydFN5bSsndHRfY29udGVudCcrZW5kU3ltKydcIiAnK1xuICAgICAgICAgICdwbGFjZW1lbnQ9XCInK3N0YXJ0U3ltKyd0dF9wbGFjZW1lbnQnK2VuZFN5bSsnXCIgJytcbiAgICAgICAgICAnYW5pbWF0aW9uPVwidHRfYW5pbWF0aW9uXCIgJytcbiAgICAgICAgICAnaXMtb3Blbj1cInR0X2lzT3BlblwiJytcbiAgICAgICAgICAnPicrXG4gICAgICAgICc8L2Rpdj4nO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0RWxlbSwgdEF0dHJzKSB7XG4gICAgICAgICAgdmFyIHRvb2x0aXBMaW5rZXIgPSAkY29tcGlsZSggdGVtcGxhdGUgKTtcblxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBsaW5rICggc2NvcGUsIGVsZW1lbnQsIGF0dHJzICkge1xuICAgICAgICAgICAgdmFyIHRvb2x0aXA7XG4gICAgICAgICAgICB2YXIgdHJhbnNpdGlvblRpbWVvdXQ7XG4gICAgICAgICAgICB2YXIgcG9wdXBUaW1lb3V0O1xuICAgICAgICAgICAgdmFyIGFwcGVuZFRvQm9keSA9IGFuZ3VsYXIuaXNEZWZpbmVkKCBvcHRpb25zLmFwcGVuZFRvQm9keSApID8gb3B0aW9ucy5hcHBlbmRUb0JvZHkgOiBmYWxzZTtcbiAgICAgICAgICAgIHZhciB0cmlnZ2VycyA9IGdldFRyaWdnZXJzKCB1bmRlZmluZWQgKTtcbiAgICAgICAgICAgIHZhciBoYXNFbmFibGVFeHAgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRyc1twcmVmaXgrJ0VuYWJsZSddKTtcblxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uVG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICB2YXIgdHRQb3NpdGlvbiA9ICRwb3NpdGlvbi5wb3NpdGlvbkVsZW1lbnRzKGVsZW1lbnQsIHRvb2x0aXAsIHNjb3BlLnR0X3BsYWNlbWVudCwgYXBwZW5kVG9Cb2R5KTtcbiAgICAgICAgICAgICAgdHRQb3NpdGlvbi50b3AgKz0gJ3B4JztcbiAgICAgICAgICAgICAgdHRQb3NpdGlvbi5sZWZ0ICs9ICdweCc7XG5cbiAgICAgICAgICAgICAgLy8gTm93IHNldCB0aGUgY2FsY3VsYXRlZCBwb3NpdGlvbmluZy5cbiAgICAgICAgICAgICAgdG9vbHRpcC5jc3MoIHR0UG9zaXRpb24gKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEJ5IGRlZmF1bHQsIHRoZSB0b29sdGlwIGlzIG5vdCBvcGVuLlxuICAgICAgICAgICAgLy8gVE9ETyBhZGQgYWJpbGl0eSB0byBzdGFydCB0b29sdGlwIG9wZW5lZFxuICAgICAgICAgICAgc2NvcGUudHRfaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvZ2dsZVRvb2x0aXBCaW5kICgpIHtcbiAgICAgICAgICAgICAgaWYgKCAhIHNjb3BlLnR0X2lzT3BlbiApIHtcbiAgICAgICAgICAgICAgICBzaG93VG9vbHRpcEJpbmQoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoaWRlVG9vbHRpcEJpbmQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTaG93IHRoZSB0b29sdGlwIHdpdGggZGVsYXkgaWYgc3BlY2lmaWVkLCBvdGhlcndpc2Ugc2hvdyBpdCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgZnVuY3Rpb24gc2hvd1Rvb2x0aXBCaW5kKCkge1xuICAgICAgICAgICAgICBpZihoYXNFbmFibGVFeHAgJiYgIXNjb3BlLiRldmFsKGF0dHJzW3ByZWZpeCsnRW5hYmxlJ10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICggc2NvcGUudHRfcG9wdXBEZWxheSApIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZSB0b29sdGlwIHdhcyBhbHJlYWR5IHNjaGVkdWxlZCB0byBwb3AtdXAuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGlmIHNob3cgaXMgdHJpZ2dlcmVkIG11bHRpcGxlIHRpbWVzIGJlZm9yZSBhbnkgaGlkZSBpcyB0cmlnZ2VyZWQuXG4gICAgICAgICAgICAgICAgaWYgKCFwb3B1cFRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAgIHBvcHVwVGltZW91dCA9ICR0aW1lb3V0KCBzaG93LCBzY29wZS50dF9wb3B1cERlbGF5LCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgcG9wdXBUaW1lb3V0LnRoZW4oZnVuY3Rpb24ocmVwb3NpdGlvbil7cmVwb3NpdGlvbigpO30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaG93KCkoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWRlVG9vbHRpcEJpbmQgKCkge1xuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGhpZGUoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNob3cgdGhlIHRvb2x0aXAgcG9wdXAgZWxlbWVudC5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3coKSB7XG5cbiAgICAgICAgICAgICAgcG9wdXBUaW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIHBlbmRpbmcgcmVtb3ZlIHRyYW5zaXRpb24sIHdlIG11c3QgY2FuY2VsIGl0LCBsZXN0IHRoZVxuICAgICAgICAgICAgICAvLyB0b29sdGlwIGJlIG15c3RlcmlvdXNseSByZW1vdmVkLlxuICAgICAgICAgICAgICBpZiAoIHRyYW5zaXRpb25UaW1lb3V0ICkge1xuICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCggdHJhbnNpdGlvblRpbWVvdXQgKTtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBEb24ndCBzaG93IGVtcHR5IHRvb2x0aXBzLlxuICAgICAgICAgICAgICBpZiAoICEgc2NvcGUudHRfY29udGVudCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5ub29wO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY3JlYXRlVG9vbHRpcCgpO1xuXG4gICAgICAgICAgICAgIC8vIFNldCB0aGUgaW5pdGlhbCBwb3NpdGlvbmluZy5cbiAgICAgICAgICAgICAgdG9vbHRpcC5jc3MoeyB0b3A6IDAsIGxlZnQ6IDAsIGRpc3BsYXk6ICdibG9jaycgfSk7XG5cbiAgICAgICAgICAgICAgLy8gTm93IHdlIGFkZCBpdCB0byB0aGUgRE9NIGJlY2F1c2UgbmVlZCBzb21lIGluZm8gYWJvdXQgaXQuIEJ1dCBpdCdzIG5vdCBcbiAgICAgICAgICAgICAgLy8gdmlzaWJsZSB5ZXQgYW55d2F5LlxuICAgICAgICAgICAgICBpZiAoIGFwcGVuZFRvQm9keSApIHtcbiAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5maW5kKCAnYm9keScgKS5hcHBlbmQoIHRvb2x0aXAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFmdGVyKCB0b29sdGlwICk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBwb3NpdGlvblRvb2x0aXAoKTtcblxuICAgICAgICAgICAgICAvLyBBbmQgc2hvdyB0aGUgdG9vbHRpcC5cbiAgICAgICAgICAgICAgc2NvcGUudHRfaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpOyAvLyBkaWdlc3QgcmVxdWlyZWQgYXMgJGFwcGx5IGlzIG5vdCBjYWxsZWRcblxuICAgICAgICAgICAgICAvLyBSZXR1cm4gcG9zaXRpb25pbmcgZnVuY3Rpb24gYXMgcHJvbWlzZSBjYWxsYmFjayBmb3IgY29ycmVjdFxuICAgICAgICAgICAgICAvLyBwb3NpdGlvbmluZyBhZnRlciBkcmF3LlxuICAgICAgICAgICAgICByZXR1cm4gcG9zaXRpb25Ub29sdGlwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIaWRlIHRoZSB0b29sdGlwIHBvcHVwIGVsZW1lbnQuXG4gICAgICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgICAvLyBGaXJzdCB0aGluZ3MgZmlyc3Q6IHdlIGRvbid0IHNob3cgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgc2NvcGUudHRfaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgLy9pZiB0b29sdGlwIGlzIGdvaW5nIHRvIGJlIHNob3duIGFmdGVyIGRlbGF5LCB3ZSBtdXN0IGNhbmNlbCB0aGlzXG4gICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCggcG9wdXBUaW1lb3V0ICk7XG4gICAgICAgICAgICAgIHBvcHVwVGltZW91dCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgLy8gQW5kIG5vdyB3ZSByZW1vdmUgaXQgZnJvbSB0aGUgRE9NLiBIb3dldmVyLCBpZiB3ZSBoYXZlIGFuaW1hdGlvbiwgd2UgXG4gICAgICAgICAgICAgIC8vIG5lZWQgdG8gd2FpdCBmb3IgaXQgdG8gZXhwaXJlIGJlZm9yZWhhbmQuXG4gICAgICAgICAgICAgIC8vIEZJWE1FOiB0aGlzIGlzIGEgcGxhY2Vob2xkZXIgZm9yIGEgcG9ydCBvZiB0aGUgdHJhbnNpdGlvbnMgbGlicmFyeS5cbiAgICAgICAgICAgICAgaWYgKCBzY29wZS50dF9hbmltYXRpb24gKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0cmFuc2l0aW9uVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblRpbWVvdXQgPSAkdGltZW91dChyZW1vdmVUb29sdGlwLCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZW1vdmVUb29sdGlwKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlVG9vbHRpcCgpIHtcbiAgICAgICAgICAgICAgLy8gVGhlcmUgY2FuIG9ubHkgYmUgb25lIHRvb2x0aXAgZWxlbWVudCBwZXIgZGlyZWN0aXZlIHNob3duIGF0IG9uY2UuXG4gICAgICAgICAgICAgIGlmICh0b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlVG9vbHRpcCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRvb2x0aXAgPSB0b29sdGlwTGlua2VyKHNjb3BlLCBmdW5jdGlvbiAoKSB7fSk7XG5cbiAgICAgICAgICAgICAgLy8gR2V0IGNvbnRlbnRzIHJlbmRlcmVkIGludG8gdGhlIHRvb2x0aXBcbiAgICAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVUb29sdGlwKCkge1xuICAgICAgICAgICAgICB0cmFuc2l0aW9uVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgIGlmICh0b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0b29sdGlwID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE9ic2VydmUgdGhlIHJlbGV2YW50IGF0dHJpYnV0ZXMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKCB0eXBlLCBmdW5jdGlvbiAoIHZhbCApIHtcbiAgICAgICAgICAgICAgc2NvcGUudHRfY29udGVudCA9IHZhbDtcblxuICAgICAgICAgICAgICBpZiAoIXZhbCAmJiBzY29wZS50dF9pc09wZW4gKSB7XG4gICAgICAgICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoIHByZWZpeCsnVGl0bGUnLCBmdW5jdGlvbiAoIHZhbCApIHtcbiAgICAgICAgICAgICAgc2NvcGUudHRfdGl0bGUgPSB2YWw7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoIHByZWZpeCsnUGxhY2VtZW50JywgZnVuY3Rpb24gKCB2YWwgKSB7XG4gICAgICAgICAgICAgIHNjb3BlLnR0X3BsYWNlbWVudCA9IGFuZ3VsYXIuaXNEZWZpbmVkKCB2YWwgKSA/IHZhbCA6IG9wdGlvbnMucGxhY2VtZW50O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKCBwcmVmaXgrJ1BvcHVwRGVsYXknLCBmdW5jdGlvbiAoIHZhbCApIHtcbiAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gcGFyc2VJbnQoIHZhbCwgMTAgKTtcbiAgICAgICAgICAgICAgc2NvcGUudHRfcG9wdXBEZWxheSA9ICEgaXNOYU4oZGVsYXkpID8gZGVsYXkgOiBvcHRpb25zLnBvcHVwRGVsYXk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHVucmVnaXN0ZXJUcmlnZ2VycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC51bmJpbmQodHJpZ2dlcnMuc2hvdywgc2hvd1Rvb2x0aXBCaW5kKTtcbiAgICAgICAgICAgICAgZWxlbWVudC51bmJpbmQodHJpZ2dlcnMuaGlkZSwgaGlkZVRvb2x0aXBCaW5kKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKCBwcmVmaXgrJ1RyaWdnZXInLCBmdW5jdGlvbiAoIHZhbCApIHtcbiAgICAgICAgICAgICAgdW5yZWdpc3RlclRyaWdnZXJzKCk7XG5cbiAgICAgICAgICAgICAgdHJpZ2dlcnMgPSBnZXRUcmlnZ2VycyggdmFsICk7XG5cbiAgICAgICAgICAgICAgaWYgKCB0cmlnZ2Vycy5zaG93ID09PSB0cmlnZ2Vycy5oaWRlICkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZCggdHJpZ2dlcnMuc2hvdywgdG9nZ2xlVG9vbHRpcEJpbmQgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmJpbmQoIHRyaWdnZXJzLnNob3csIHNob3dUb29sdGlwQmluZCApO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZCggdHJpZ2dlcnMuaGlkZSwgaGlkZVRvb2x0aXBCaW5kICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2NvcGUuJGV2YWwoYXR0cnNbcHJlZml4ICsgJ0FuaW1hdGlvbiddKTtcbiAgICAgICAgICAgIHNjb3BlLnR0X2FuaW1hdGlvbiA9IGFuZ3VsYXIuaXNEZWZpbmVkKGFuaW1hdGlvbikgPyAhIWFuaW1hdGlvbiA6IG9wdGlvbnMuYW5pbWF0aW9uO1xuXG4gICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSggcHJlZml4KydBcHBlbmRUb0JvZHknLCBmdW5jdGlvbiAoIHZhbCApIHtcbiAgICAgICAgICAgICAgYXBwZW5kVG9Cb2R5ID0gYW5ndWxhci5pc0RlZmluZWQoIHZhbCApID8gJHBhcnNlKCB2YWwgKSggc2NvcGUgKSA6IGFwcGVuZFRvQm9keTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBpZiBhIHRvb2x0aXAgaXMgYXR0YWNoZWQgdG8gPGJvZHk+IHdlIG5lZWQgdG8gcmVtb3ZlIGl0IG9uXG4gICAgICAgICAgICAvLyBsb2NhdGlvbiBjaGFuZ2UgYXMgaXRzIHBhcmVudCBzY29wZSB3aWxsIHByb2JhYmx5IG5vdCBiZSBkZXN0cm95ZWRcbiAgICAgICAgICAgIC8vIGJ5IHRoZSBjaGFuZ2UuXG4gICAgICAgICAgICBpZiAoIGFwcGVuZFRvQm9keSApIHtcbiAgICAgICAgICAgICAgc2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gY2xvc2VUb29sdGlwT25Mb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgKCkge1xuICAgICAgICAgICAgICBpZiAoIHNjb3BlLnR0X2lzT3BlbiApIHtcbiAgICAgICAgICAgICAgICBoaWRlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdG9vbHRpcCBpcyBkZXN0cm95ZWQgYW5kIHJlbW92ZWQuXG4gICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gb25EZXN0cm95VG9vbHRpcCgpIHtcbiAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKCB0cmFuc2l0aW9uVGltZW91dCApO1xuICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwoIHBvcHVwVGltZW91dCApO1xuICAgICAgICAgICAgICB1bnJlZ2lzdGVyVHJpZ2dlcnMoKTtcbiAgICAgICAgICAgICAgcmVtb3ZlVG9vbHRpcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICB9XTtcbn0pXG5cbi5kaXJlY3RpdmUoICd0b29sdGlwUG9wdXAnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZTogeyBjb250ZW50OiAnQCcsIHBsYWNlbWVudDogJ0AnLCBhbmltYXRpb246ICcmJywgaXNPcGVuOiAnJicgfSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sJ1xuICB9O1xufSlcblxuLmRpcmVjdGl2ZSggJ3Rvb2x0aXAnLCBbICckdG9vbHRpcCcsIGZ1bmN0aW9uICggJHRvb2x0aXAgKSB7XG4gIHJldHVybiAkdG9vbHRpcCggJ3Rvb2x0aXAnLCAndG9vbHRpcCcsICdtb3VzZWVudGVyJyApO1xufV0pXG5cbi5kaXJlY3RpdmUoICd0b29sdGlwSHRtbFVuc2FmZVBvcHVwJywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgc2NvcGU6IHsgY29udGVudDogJ0AnLCBwbGFjZW1lbnQ6ICdAJywgYW5pbWF0aW9uOiAnJicsIGlzT3BlbjogJyYnIH0sXG4gICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC11bnNhZmUtcG9wdXAuaHRtbCdcbiAgfTtcbn0pXG5cbi5kaXJlY3RpdmUoICd0b29sdGlwSHRtbFVuc2FmZScsIFsgJyR0b29sdGlwJywgZnVuY3Rpb24gKCAkdG9vbHRpcCApIHtcbiAgcmV0dXJuICR0b29sdGlwKCAndG9vbHRpcEh0bWxVbnNhZmUnLCAndG9vbHRpcCcsICdtb3VzZWVudGVyJyApO1xufV0pO1xuXG4vKipcbiAqIFRoZSBmb2xsb3dpbmcgZmVhdHVyZXMgYXJlIHN0aWxsIG91dHN0YW5kaW5nOiBwb3B1cCBkZWxheSwgYW5pbWF0aW9uIGFzIGFcbiAqIGZ1bmN0aW9uLCBwbGFjZW1lbnQgYXMgYSBmdW5jdGlvbiwgaW5zaWRlLCBzdXBwb3J0IGZvciBtb3JlIHRyaWdnZXJzIHRoYW5cbiAqIGp1c3QgbW91c2UgZW50ZXIvbGVhdmUsIGh0bWwgcG9wb3ZlcnMsIGFuZCBzZWxlY3RvciBkZWxlZ2F0YXRpb24uXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCAndWkuYm9vdHN0cmFwLnBvcG92ZXInLCBbICd1aS5ib290c3RyYXAudG9vbHRpcCcgXSApXG5cbi5kaXJlY3RpdmUoICdwb3BvdmVyUG9wdXAnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICBzY29wZTogeyB0aXRsZTogJ0AnLCBjb250ZW50OiAnQCcsIHBsYWNlbWVudDogJ0AnLCBhbmltYXRpb246ICcmJywgaXNPcGVuOiAnJicgfSxcbiAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci5odG1sJ1xuICB9O1xufSlcblxuLmRpcmVjdGl2ZSggJ3BvcG92ZXInLCBbICckdG9vbHRpcCcsIGZ1bmN0aW9uICggJHRvb2x0aXAgKSB7XG4gIHJldHVybiAkdG9vbHRpcCggJ3BvcG92ZXInLCAncG9wb3ZlcicsICdjbGljaycgKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5wcm9ncmVzc2JhcicsIFtdKVxuXG4uY29uc3RhbnQoJ3Byb2dyZXNzQ29uZmlnJywge1xuICBhbmltYXRlOiB0cnVlLFxuICBtYXg6IDEwMFxufSlcblxuLmNvbnRyb2xsZXIoJ1Byb2dyZXNzQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRhdHRycycsICdwcm9ncmVzc0NvbmZpZycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzLCBwcm9ncmVzc0NvbmZpZykge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgYW5pbWF0ZSA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5hbmltYXRlKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5hbmltYXRlKSA6IHByb2dyZXNzQ29uZmlnLmFuaW1hdGU7XG5cbiAgICB0aGlzLmJhcnMgPSBbXTtcbiAgICAkc2NvcGUubWF4ID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLm1heCkgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMubWF4KSA6IHByb2dyZXNzQ29uZmlnLm1heDtcblxuICAgIHRoaXMuYWRkQmFyID0gZnVuY3Rpb24oYmFyLCBlbGVtZW50KSB7XG4gICAgICAgIGlmICggIWFuaW1hdGUgKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNzcyh7J3RyYW5zaXRpb24nOiAnbm9uZSd9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmFycy5wdXNoKGJhcik7XG5cbiAgICAgICAgYmFyLiR3YXRjaCgndmFsdWUnLCBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgICAgICBiYXIucGVyY2VudCA9ICsoMTAwICogdmFsdWUgLyAkc2NvcGUubWF4KS50b0ZpeGVkKDIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBiYXIuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICBzZWxmLnJlbW92ZUJhcihiYXIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZW1vdmVCYXIgPSBmdW5jdGlvbihiYXIpIHtcbiAgICAgICAgdGhpcy5iYXJzLnNwbGljZSh0aGlzLmJhcnMuaW5kZXhPZihiYXIpLCAxKTtcbiAgICB9O1xufV0pXG5cbi5kaXJlY3RpdmUoJ3Byb2dyZXNzJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdQcm9ncmVzc0NvbnRyb2xsZXInLFxuICAgICAgICByZXF1aXJlOiAncHJvZ3Jlc3MnLFxuICAgICAgICBzY29wZToge30sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbCdcbiAgICB9O1xufSlcblxuLmRpcmVjdGl2ZSgnYmFyJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgIHJlcXVpcmU6ICdecHJvZ3Jlc3MnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgdmFsdWU6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICdAJ1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBwcm9ncmVzc0N0cmwpIHtcbiAgICAgICAgICAgIHByb2dyZXNzQ3RybC5hZGRCYXIoc2NvcGUsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcbn0pXG5cbi5kaXJlY3RpdmUoJ3Byb2dyZXNzYmFyJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdQcm9ncmVzc0NvbnRyb2xsZXInLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgdmFsdWU6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICdAJ1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIHByb2dyZXNzQ3RybCkge1xuICAgICAgICAgICAgcHJvZ3Jlc3NDdHJsLmFkZEJhcihzY29wZSwgYW5ndWxhci5lbGVtZW50KGVsZW1lbnQuY2hpbGRyZW4oKVswXSkpO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC5yYXRpbmcnLCBbXSlcblxuLmNvbnN0YW50KCdyYXRpbmdDb25maWcnLCB7XG4gIG1heDogNSxcbiAgc3RhdGVPbjogbnVsbCxcbiAgc3RhdGVPZmY6IG51bGxcbn0pXG5cbi5jb250cm9sbGVyKCdSYXRpbmdDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGF0dHJzJywgJ3JhdGluZ0NvbmZpZycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzLCByYXRpbmdDb25maWcpIHtcbiAgdmFyIG5nTW9kZWxDdHJsICA9IHsgJHNldFZpZXdWYWx1ZTogYW5ndWxhci5ub29wIH07XG5cbiAgdGhpcy5pbml0ID0gZnVuY3Rpb24obmdNb2RlbEN0cmxfKSB7XG4gICAgbmdNb2RlbEN0cmwgPSBuZ01vZGVsQ3RybF87XG4gICAgbmdNb2RlbEN0cmwuJHJlbmRlciA9IHRoaXMucmVuZGVyO1xuXG4gICAgdGhpcy5zdGF0ZU9uID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLnN0YXRlT24pID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLnN0YXRlT24pIDogcmF0aW5nQ29uZmlnLnN0YXRlT247XG4gICAgdGhpcy5zdGF0ZU9mZiA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5zdGF0ZU9mZikgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMuc3RhdGVPZmYpIDogcmF0aW5nQ29uZmlnLnN0YXRlT2ZmO1xuXG4gICAgdmFyIHJhdGluZ1N0YXRlcyA9IGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5yYXRpbmdTdGF0ZXMpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLnJhdGluZ1N0YXRlcykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEFycmF5KCBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMubWF4KSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5tYXgpIDogcmF0aW5nQ29uZmlnLm1heCApO1xuICAgICRzY29wZS5yYW5nZSA9IHRoaXMuYnVpbGRUZW1wbGF0ZU9iamVjdHMocmF0aW5nU3RhdGVzKTtcbiAgfTtcblxuICB0aGlzLmJ1aWxkVGVtcGxhdGVPYmplY3RzID0gZnVuY3Rpb24oc3RhdGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSBzdGF0ZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBzdGF0ZXNbaV0gPSBhbmd1bGFyLmV4dGVuZCh7IGluZGV4OiBpIH0sIHsgc3RhdGVPbjogdGhpcy5zdGF0ZU9uLCBzdGF0ZU9mZjogdGhpcy5zdGF0ZU9mZiB9LCBzdGF0ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGVzO1xuICB9O1xuXG4gICRzY29wZS5yYXRlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoICEkc2NvcGUucmVhZG9ubHkgJiYgdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAkc2NvcGUucmFuZ2UubGVuZ3RoICkge1xuICAgICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSh2YWx1ZSk7XG4gICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS5lbnRlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKCAhJHNjb3BlLnJlYWRvbmx5ICkge1xuICAgICAgJHNjb3BlLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgICRzY29wZS5vbkhvdmVyKHt2YWx1ZTogdmFsdWV9KTtcbiAgfTtcblxuICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUudmFsdWUgPSBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlO1xuICAgICRzY29wZS5vbkxlYXZlKCk7XG4gIH07XG5cbiAgJHNjb3BlLm9uS2V5ZG93biA9IGZ1bmN0aW9uKGV2dCkge1xuICAgIGlmICgvKDM3fDM4fDM5fDQwKS8udGVzdChldnQud2hpY2gpKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICRzY29wZS5yYXRlKCAkc2NvcGUudmFsdWUgKyAoZXZ0LndoaWNoID09PSAzOCB8fCBldnQud2hpY2ggPT09IDM5ID8gMSA6IC0xKSApO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS52YWx1ZSA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG4gIH07XG59XSlcblxuLmRpcmVjdGl2ZSgncmF0aW5nJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVxdWlyZTogWydyYXRpbmcnLCAnbmdNb2RlbCddLFxuICAgIHNjb3BlOiB7XG4gICAgICByZWFkb25seTogJz0/JyxcbiAgICAgIG9uSG92ZXI6ICcmJyxcbiAgICAgIG9uTGVhdmU6ICcmJ1xuICAgIH0sXG4gICAgY29udHJvbGxlcjogJ1JhdGluZ0NvbnRyb2xsZXInLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIHZhciByYXRpbmdDdHJsID0gY3RybHNbMF0sIG5nTW9kZWxDdHJsID0gY3RybHNbMV07XG5cbiAgICAgIGlmICggbmdNb2RlbEN0cmwgKSB7XG4gICAgICAgIHJhdGluZ0N0cmwuaW5pdCggbmdNb2RlbEN0cmwgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59KTtcblxuLyoqXG4gKiBAbmdkb2Mgb3ZlcnZpZXdcbiAqIEBuYW1lIHVpLmJvb3RzdHJhcC50YWJzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBbmd1bGFySlMgdmVyc2lvbiBvZiB0aGUgdGFicyBkaXJlY3RpdmUuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC50YWJzJywgW10pXG5cbi5jb250cm9sbGVyKCdUYWJzZXRDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbiBUYWJzZXRDdHJsKCRzY29wZSkge1xuICB2YXIgY3RybCA9IHRoaXMsXG4gICAgICB0YWJzID0gY3RybC50YWJzID0gJHNjb3BlLnRhYnMgPSBbXTtcblxuICBjdHJsLnNlbGVjdCA9IGZ1bmN0aW9uKHNlbGVjdGVkVGFiKSB7XG4gICAgYW5ndWxhci5mb3JFYWNoKHRhYnMsIGZ1bmN0aW9uKHRhYikge1xuICAgICAgaWYgKHRhYi5hY3RpdmUgJiYgdGFiICE9PSBzZWxlY3RlZFRhYikge1xuICAgICAgICB0YWIuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRhYi5vbkRlc2VsZWN0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2VsZWN0ZWRUYWIuYWN0aXZlID0gdHJ1ZTtcbiAgICBzZWxlY3RlZFRhYi5vblNlbGVjdCgpO1xuICB9O1xuXG4gIGN0cmwuYWRkVGFiID0gZnVuY3Rpb24gYWRkVGFiKHRhYikge1xuICAgIHRhYnMucHVzaCh0YWIpO1xuICAgIC8vIHdlIGNhbid0IHJ1biB0aGUgc2VsZWN0IGZ1bmN0aW9uIG9uIHRoZSBmaXJzdCB0YWJcbiAgICAvLyBzaW5jZSB0aGF0IHdvdWxkIHNlbGVjdCBpdCB0d2ljZVxuICAgIGlmICh0YWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGFiLmFjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0YWIuYWN0aXZlKSB7XG4gICAgICBjdHJsLnNlbGVjdCh0YWIpO1xuICAgIH1cbiAgfTtcblxuICBjdHJsLnJlbW92ZVRhYiA9IGZ1bmN0aW9uIHJlbW92ZVRhYih0YWIpIHtcbiAgICB2YXIgaW5kZXggPSB0YWJzLmluZGV4T2YodGFiKTtcbiAgICAvL1NlbGVjdCBhIG5ldyB0YWIgaWYgdGhlIHRhYiB0byBiZSByZW1vdmVkIGlzIHNlbGVjdGVkXG4gICAgaWYgKHRhYi5hY3RpdmUgJiYgdGFicy5sZW5ndGggPiAxKSB7XG4gICAgICAvL0lmIHRoaXMgaXMgdGhlIGxhc3QgdGFiLCBzZWxlY3QgdGhlIHByZXZpb3VzIHRhYi4gZWxzZSwgdGhlIG5leHQgdGFiLlxuICAgICAgdmFyIG5ld0FjdGl2ZUluZGV4ID0gaW5kZXggPT0gdGFicy5sZW5ndGggLSAxID8gaW5kZXggLSAxIDogaW5kZXggKyAxO1xuICAgICAgY3RybC5zZWxlY3QodGFic1tuZXdBY3RpdmVJbmRleF0pO1xuICAgIH1cbiAgICB0YWJzLnNwbGljZShpbmRleCwgMSk7XG4gIH07XG59XSlcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB1aS5ib290c3RyYXAudGFicy5kaXJlY3RpdmU6dGFic2V0XG4gKiBAcmVzdHJpY3QgRUFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRhYnNldCBpcyB0aGUgb3V0ZXIgY29udGFpbmVyIGZvciB0aGUgdGFicyBkaXJlY3RpdmVcbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSB2ZXJ0aWNhbCBXaGV0aGVyIG9yIG5vdCB0byB1c2UgdmVydGljYWwgc3R5bGluZyBmb3IgdGhlIHRhYnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBqdXN0aWZpZWQgV2hldGhlciBvciBub3QgdG8gdXNlIGp1c3RpZmllZCBzdHlsaW5nIGZvciB0aGUgdGFicy5cbiAqXG4gKiBAZXhhbXBsZVxuPGV4YW1wbGUgbW9kdWxlPVwidWkuYm9vdHN0cmFwXCI+XG4gIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgPHRhYnNldD5cbiAgICAgIDx0YWIgaGVhZGluZz1cIlRhYiAxXCI+PGI+Rmlyc3Q8L2I+IENvbnRlbnQhPC90YWI+XG4gICAgICA8dGFiIGhlYWRpbmc9XCJUYWIgMlwiPjxpPlNlY29uZDwvaT4gQ29udGVudCE8L3RhYj5cbiAgICA8L3RhYnNldD5cbiAgICA8aHIgLz5cbiAgICA8dGFic2V0IHZlcnRpY2FsPVwidHJ1ZVwiPlxuICAgICAgPHRhYiBoZWFkaW5nPVwiVmVydGljYWwgVGFiIDFcIj48Yj5GaXJzdDwvYj4gVmVydGljYWwgQ29udGVudCE8L3RhYj5cbiAgICAgIDx0YWIgaGVhZGluZz1cIlZlcnRpY2FsIFRhYiAyXCI+PGk+U2Vjb25kPC9pPiBWZXJ0aWNhbCBDb250ZW50ITwvdGFiPlxuICAgIDwvdGFic2V0PlxuICAgIDx0YWJzZXQganVzdGlmaWVkPVwidHJ1ZVwiPlxuICAgICAgPHRhYiBoZWFkaW5nPVwiSnVzdGlmaWVkIFRhYiAxXCI+PGI+Rmlyc3Q8L2I+IEp1c3RpZmllZCBDb250ZW50ITwvdGFiPlxuICAgICAgPHRhYiBoZWFkaW5nPVwiSnVzdGlmaWVkIFRhYiAyXCI+PGk+U2Vjb25kPC9pPiBKdXN0aWZpZWQgQ29udGVudCE8L3RhYj5cbiAgICA8L3RhYnNldD5cbiAgPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG4uZGlyZWN0aXZlKCd0YWJzZXQnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgc2NvcGU6IHtcbiAgICAgIHR5cGU6ICdAJ1xuICAgIH0sXG4gICAgY29udHJvbGxlcjogJ1RhYnNldENvbnRyb2xsZXInLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICBzY29wZS52ZXJ0aWNhbCA9IGFuZ3VsYXIuaXNEZWZpbmVkKGF0dHJzLnZlcnRpY2FsKSA/IHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMudmVydGljYWwpIDogZmFsc2U7XG4gICAgICBzY29wZS5qdXN0aWZpZWQgPSBhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5qdXN0aWZpZWQpID8gc2NvcGUuJHBhcmVudC4kZXZhbChhdHRycy5qdXN0aWZpZWQpIDogZmFsc2U7XG4gICAgfVxuICB9O1xufSlcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB1aS5ib290c3RyYXAudGFicy5kaXJlY3RpdmU6dGFiXG4gKiBAcmVzdHJpY3QgRUFcbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IGhlYWRpbmcgVGhlIHZpc2libGUgaGVhZGluZywgb3IgdGl0bGUsIG9mIHRoZSB0YWIuIFNldCBIVE1MIGhlYWRpbmdzIHdpdGgge0BsaW5rIHVpLmJvb3RzdHJhcC50YWJzLmRpcmVjdGl2ZTp0YWJIZWFkaW5nIHRhYkhlYWRpbmd9LlxuICogQHBhcmFtIHtzdHJpbmc9fSBzZWxlY3QgQW4gZXhwcmVzc2lvbiB0byBldmFsdWF0ZSB3aGVuIHRoZSB0YWIgaXMgc2VsZWN0ZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBhY3RpdmUgQSBiaW5kaW5nLCB0ZWxsaW5nIHdoZXRoZXIgb3Igbm90IHRoaXMgdGFiIGlzIHNlbGVjdGVkLlxuICogQHBhcmFtIHtib29sZWFuPX0gZGlzYWJsZWQgQSBiaW5kaW5nLCB0ZWxsaW5nIHdoZXRoZXIgb3Igbm90IHRoaXMgdGFiIGlzIGRpc2FibGVkLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIHRhYiB3aXRoIGEgaGVhZGluZyBhbmQgY29udGVudC4gTXVzdCBiZSBwbGFjZWQgd2l0aGluIGEge0BsaW5rIHVpLmJvb3RzdHJhcC50YWJzLmRpcmVjdGl2ZTp0YWJzZXQgdGFic2V0fS5cbiAqXG4gKiBAZXhhbXBsZVxuPGV4YW1wbGUgbW9kdWxlPVwidWkuYm9vdHN0cmFwXCI+XG4gIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgPGRpdiBuZy1jb250cm9sbGVyPVwiVGFic0RlbW9DdHJsXCI+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1zbWFsbFwiIG5nLWNsaWNrPVwiaXRlbXNbMF0uYWN0aXZlID0gdHJ1ZVwiPlxuICAgICAgICBTZWxlY3QgaXRlbSAxLCB1c2luZyBhY3RpdmUgYmluZGluZ1xuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1zbWFsbFwiIG5nLWNsaWNrPVwiaXRlbXNbMV0uZGlzYWJsZWQgPSAhaXRlbXNbMV0uZGlzYWJsZWRcIj5cbiAgICAgICAgRW5hYmxlL2Rpc2FibGUgaXRlbSAyLCB1c2luZyBkaXNhYmxlZCBiaW5kaW5nXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxiciAvPlxuICAgICAgPHRhYnNldD5cbiAgICAgICAgPHRhYiBoZWFkaW5nPVwiVGFiIDFcIj5GaXJzdCBUYWI8L3RhYj5cbiAgICAgICAgPHRhYiBzZWxlY3Q9XCJhbGVydE1lKClcIj5cbiAgICAgICAgICA8dGFiLWhlYWRpbmc+PGkgY2xhc3M9XCJpY29uLWJlbGxcIj48L2k+IEFsZXJ0IG1lITwvdGFiLWhlYWRpbmc+XG4gICAgICAgICAgU2Vjb25kIFRhYiwgd2l0aCBhbGVydCBjYWxsYmFjayBhbmQgaHRtbCBoZWFkaW5nIVxuICAgICAgICA8L3RhYj5cbiAgICAgICAgPHRhYiBuZy1yZXBlYXQ9XCJpdGVtIGluIGl0ZW1zXCJcbiAgICAgICAgICBoZWFkaW5nPVwie3tpdGVtLnRpdGxlfX1cIlxuICAgICAgICAgIGRpc2FibGVkPVwiaXRlbS5kaXNhYmxlZFwiXG4gICAgICAgICAgYWN0aXZlPVwiaXRlbS5hY3RpdmVcIj5cbiAgICAgICAgICB7e2l0ZW0uY29udGVudH19XG4gICAgICAgIDwvdGFiPlxuICAgICAgPC90YWJzZXQ+XG4gICAgPC9kaXY+XG4gIDwvZmlsZT5cbiAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgIGZ1bmN0aW9uIFRhYnNEZW1vQ3RybCgkc2NvcGUpIHtcbiAgICAgICRzY29wZS5pdGVtcyA9IFtcbiAgICAgICAgeyB0aXRsZTpcIkR5bmFtaWMgVGl0bGUgMVwiLCBjb250ZW50OlwiRHluYW1pYyBJdGVtIDBcIiB9LFxuICAgICAgICB7IHRpdGxlOlwiRHluYW1pYyBUaXRsZSAyXCIsIGNvbnRlbnQ6XCJEeW5hbWljIEl0ZW0gMVwiLCBkaXNhYmxlZDogdHJ1ZSB9XG4gICAgICBdO1xuXG4gICAgICAkc2NvcGUuYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFsZXJ0KFwiWW91J3ZlIHNlbGVjdGVkIHRoZSBhbGVydCB0YWIhXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfTtcbiAgPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgdWkuYm9vdHN0cmFwLnRhYnMuZGlyZWN0aXZlOnRhYkhlYWRpbmdcbiAqIEByZXN0cmljdCBFQVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhbiBIVE1MIGhlYWRpbmcgZm9yIGEge0BsaW5rIHVpLmJvb3RzdHJhcC50YWJzLmRpcmVjdGl2ZTp0YWIgdGFifS4gTXVzdCBiZSBwbGFjZWQgYXMgYSBjaGlsZCBvZiBhIHRhYiBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG48ZXhhbXBsZSBtb2R1bGU9XCJ1aS5ib290c3RyYXBcIj5cbiAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICA8dGFic2V0PlxuICAgICAgPHRhYj5cbiAgICAgICAgPHRhYi1oZWFkaW5nPjxiPkhUTUw8L2I+IGluIG15IHRpdGxlcz8hPC90YWItaGVhZGluZz5cbiAgICAgICAgQW5kIHNvbWUgY29udGVudCwgdG9vIVxuICAgICAgPC90YWI+XG4gICAgICA8dGFiPlxuICAgICAgICA8dGFiLWhlYWRpbmc+PGkgY2xhc3M9XCJpY29uLWhlYXJ0XCI+PC9pPiBJY29uIGhlYWRpbmc/IT88L3RhYi1oZWFkaW5nPlxuICAgICAgICBUaGF0J3MgcmlnaHQuXG4gICAgICA8L3RhYj5cbiAgICA8L3RhYnNldD5cbiAgPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG4uZGlyZWN0aXZlKCd0YWInLCBbJyRwYXJzZScsIGZ1bmN0aW9uKCRwYXJzZSkge1xuICByZXR1cm4ge1xuICAgIHJlcXVpcmU6ICdedGFic2V0JyxcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvdGFicy90YWIuaHRtbCcsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICBzY29wZToge1xuICAgICAgYWN0aXZlOiAnPT8nLFxuICAgICAgaGVhZGluZzogJ0AnLFxuICAgICAgb25TZWxlY3Q6ICcmc2VsZWN0JywgLy9UaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCBpbiBjb250ZW50SGVhZGluZ1RyYW5zY2x1ZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vbmNlIGl0IGluc2VydHMgdGhlIHRhYidzIGNvbnRlbnQgaW50byB0aGUgZG9tXG4gICAgICBvbkRlc2VsZWN0OiAnJmRlc2VsZWN0J1xuICAgIH0sXG4gICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gICAgICAvL0VtcHR5IGNvbnRyb2xsZXIgc28gb3RoZXIgZGlyZWN0aXZlcyBjYW4gcmVxdWlyZSBiZWluZyAndW5kZXInIGEgdGFiXG4gICAgfSxcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbG0sIGF0dHJzLCB0cmFuc2NsdWRlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGVsbSwgYXR0cnMsIHRhYnNldEN0cmwpIHtcbiAgICAgICAgc2NvcGUuJHdhdGNoKCdhY3RpdmUnLCBmdW5jdGlvbihhY3RpdmUpIHtcbiAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICB0YWJzZXRDdHJsLnNlbGVjdChzY29wZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzY29wZS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoIGF0dHJzLmRpc2FibGVkICkge1xuICAgICAgICAgIHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRwYXJzZShhdHRycy5kaXNhYmxlZCksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBzY29wZS5kaXNhYmxlZCA9ICEhIHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUuc2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCAhc2NvcGUuZGlzYWJsZWQgKSB7XG4gICAgICAgICAgICBzY29wZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0YWJzZXRDdHJsLmFkZFRhYihzY29wZSk7XG4gICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0YWJzZXRDdHJsLnJlbW92ZVRhYihzY29wZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vV2UgbmVlZCB0byB0cmFuc2NsdWRlIGxhdGVyLCBvbmNlIHRoZSBjb250ZW50IGNvbnRhaW5lciBpcyByZWFkeS5cbiAgICAgICAgLy93aGVuIHRoaXMgbGluayBoYXBwZW5zLCB3ZSdyZSBpbnNpZGUgYSB0YWIgaGVhZGluZy5cbiAgICAgICAgc2NvcGUuJHRyYW5zY2x1ZGVGbiA9IHRyYW5zY2x1ZGU7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dKVxuXG4uZGlyZWN0aXZlKCd0YWJIZWFkaW5nVHJhbnNjbHVkZScsIFtmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICdedGFiJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRycywgdGFiQ3RybCkge1xuICAgICAgc2NvcGUuJHdhdGNoKCdoZWFkaW5nRWxlbWVudCcsIGZ1bmN0aW9uIHVwZGF0ZUhlYWRpbmdFbGVtZW50KGhlYWRpbmcpIHtcbiAgICAgICAgaWYgKGhlYWRpbmcpIHtcbiAgICAgICAgICBlbG0uaHRtbCgnJyk7XG4gICAgICAgICAgZWxtLmFwcGVuZChoZWFkaW5nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pXG5cbi5kaXJlY3RpdmUoJ3RhYkNvbnRlbnRUcmFuc2NsdWRlJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnXnRhYnNldCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0cnMpIHtcbiAgICAgIHZhciB0YWIgPSBzY29wZS4kZXZhbChhdHRycy50YWJDb250ZW50VHJhbnNjbHVkZSk7XG5cbiAgICAgIC8vTm93IG91ciB0YWIgaXMgcmVhZHkgdG8gYmUgdHJhbnNjbHVkZWQ6IGJvdGggdGhlIHRhYiBoZWFkaW5nIGFyZWFcbiAgICAgIC8vYW5kIHRoZSB0YWIgY29udGVudCBhcmVhIGFyZSBsb2FkZWQuICBUcmFuc2NsdWRlICdlbSBib3RoLlxuICAgICAgdGFiLiR0cmFuc2NsdWRlRm4odGFiLiRwYXJlbnQsIGZ1bmN0aW9uKGNvbnRlbnRzKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjb250ZW50cywgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgIGlmIChpc1RhYkhlYWRpbmcobm9kZSkpIHtcbiAgICAgICAgICAgIC8vTGV0IHRhYkhlYWRpbmdUcmFuc2NsdWRlIGtub3cuXG4gICAgICAgICAgICB0YWIuaGVhZGluZ0VsZW1lbnQgPSBub2RlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbG0uYXBwZW5kKG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGlzVGFiSGVhZGluZyhub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUudGFnTmFtZSAmJiAgKFxuICAgICAgbm9kZS5oYXNBdHRyaWJ1dGUoJ3RhYi1oZWFkaW5nJykgfHxcbiAgICAgIG5vZGUuaGFzQXR0cmlidXRlKCdkYXRhLXRhYi1oZWFkaW5nJykgfHxcbiAgICAgIG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGFiLWhlYWRpbmcnIHx8XG4gICAgICBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2RhdGEtdGFiLWhlYWRpbmcnXG4gICAgKTtcbiAgfVxufSlcblxuO1xuXG5hbmd1bGFyLm1vZHVsZSgndWkuYm9vdHN0cmFwLnRpbWVwaWNrZXInLCBbXSlcblxuLmNvbnN0YW50KCd0aW1lcGlja2VyQ29uZmlnJywge1xuICBob3VyU3RlcDogMSxcbiAgbWludXRlU3RlcDogMSxcbiAgc2hvd01lcmlkaWFuOiB0cnVlLFxuICBtZXJpZGlhbnM6IG51bGwsXG4gIHJlYWRvbmx5SW5wdXQ6IGZhbHNlLFxuICBtb3VzZXdoZWVsOiB0cnVlXG59KVxuXG4uY29udHJvbGxlcignVGltZXBpY2tlckNvbnRyb2xsZXInLCBbJyRzY29wZScsICckYXR0cnMnLCAnJHBhcnNlJywgJyRsb2cnLCAnJGxvY2FsZScsICd0aW1lcGlja2VyQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsICRwYXJzZSwgJGxvZywgJGxvY2FsZSwgdGltZXBpY2tlckNvbmZpZykge1xuICB2YXIgc2VsZWN0ZWQgPSBuZXcgRGF0ZSgpLFxuICAgICAgbmdNb2RlbEN0cmwgPSB7ICRzZXRWaWV3VmFsdWU6IGFuZ3VsYXIubm9vcCB9LCAvLyBudWxsTW9kZWxDdHJsXG4gICAgICBtZXJpZGlhbnMgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMubWVyaWRpYW5zKSA/ICRzY29wZS4kcGFyZW50LiRldmFsKCRhdHRycy5tZXJpZGlhbnMpIDogdGltZXBpY2tlckNvbmZpZy5tZXJpZGlhbnMgfHwgJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTLkFNUE1TO1xuXG4gIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCBuZ01vZGVsQ3RybF8sIGlucHV0cyApIHtcbiAgICBuZ01vZGVsQ3RybCA9IG5nTW9kZWxDdHJsXztcbiAgICBuZ01vZGVsQ3RybC4kcmVuZGVyID0gdGhpcy5yZW5kZXI7XG5cbiAgICB2YXIgaG91cnNJbnB1dEVsID0gaW5wdXRzLmVxKDApLFxuICAgICAgICBtaW51dGVzSW5wdXRFbCA9IGlucHV0cy5lcSgxKTtcblxuICAgIHZhciBtb3VzZXdoZWVsID0gYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLm1vdXNld2hlZWwpID8gJHNjb3BlLiRwYXJlbnQuJGV2YWwoJGF0dHJzLm1vdXNld2hlZWwpIDogdGltZXBpY2tlckNvbmZpZy5tb3VzZXdoZWVsO1xuICAgIGlmICggbW91c2V3aGVlbCApIHtcbiAgICAgIHRoaXMuc2V0dXBNb3VzZXdoZWVsRXZlbnRzKCBob3Vyc0lucHV0RWwsIG1pbnV0ZXNJbnB1dEVsICk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnJlYWRvbmx5SW5wdXQgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMucmVhZG9ubHlJbnB1dCkgPyAkc2NvcGUuJHBhcmVudC4kZXZhbCgkYXR0cnMucmVhZG9ubHlJbnB1dCkgOiB0aW1lcGlja2VyQ29uZmlnLnJlYWRvbmx5SW5wdXQ7XG4gICAgdGhpcy5zZXR1cElucHV0RXZlbnRzKCBob3Vyc0lucHV0RWwsIG1pbnV0ZXNJbnB1dEVsICk7XG4gIH07XG5cbiAgdmFyIGhvdXJTdGVwID0gdGltZXBpY2tlckNvbmZpZy5ob3VyU3RlcDtcbiAgaWYgKCRhdHRycy5ob3VyU3RlcCkge1xuICAgICRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLmhvdXJTdGVwKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGhvdXJTdGVwID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBtaW51dGVTdGVwID0gdGltZXBpY2tlckNvbmZpZy5taW51dGVTdGVwO1xuICBpZiAoJGF0dHJzLm1pbnV0ZVN0ZXApIHtcbiAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goJHBhcnNlKCRhdHRycy5taW51dGVTdGVwKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIG1pbnV0ZVN0ZXAgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gMTJIIC8gMjRIIG1vZGVcbiAgJHNjb3BlLnNob3dNZXJpZGlhbiA9IHRpbWVwaWNrZXJDb25maWcuc2hvd01lcmlkaWFuO1xuICBpZiAoJGF0dHJzLnNob3dNZXJpZGlhbikge1xuICAgICRzY29wZS4kcGFyZW50LiR3YXRjaCgkcGFyc2UoJGF0dHJzLnNob3dNZXJpZGlhbiksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAkc2NvcGUuc2hvd01lcmlkaWFuID0gISF2YWx1ZTtcblxuICAgICAgaWYgKCBuZ01vZGVsQ3RybC4kZXJyb3IudGltZSApIHtcbiAgICAgICAgLy8gRXZhbHVhdGUgZnJvbSB0ZW1wbGF0ZVxuICAgICAgICB2YXIgaG91cnMgPSBnZXRIb3Vyc0Zyb21UZW1wbGF0ZSgpLCBtaW51dGVzID0gZ2V0TWludXRlc0Zyb21UZW1wbGF0ZSgpO1xuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoIGhvdXJzICkgJiYgYW5ndWxhci5pc0RlZmluZWQoIG1pbnV0ZXMgKSkge1xuICAgICAgICAgIHNlbGVjdGVkLnNldEhvdXJzKCBob3VycyApO1xuICAgICAgICAgIHJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBkYXRlVGVtcGxhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIEdldCAkc2NvcGUuaG91cnMgaW4gMjRIIG1vZGUgaWYgdmFsaWRcbiAgZnVuY3Rpb24gZ2V0SG91cnNGcm9tVGVtcGxhdGUgKCApIHtcbiAgICB2YXIgaG91cnMgPSBwYXJzZUludCggJHNjb3BlLmhvdXJzLCAxMCApO1xuICAgIHZhciB2YWxpZCA9ICggJHNjb3BlLnNob3dNZXJpZGlhbiApID8gKGhvdXJzID4gMCAmJiBob3VycyA8IDEzKSA6IChob3VycyA+PSAwICYmIGhvdXJzIDwgMjQpO1xuICAgIGlmICggIXZhbGlkICkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoICRzY29wZS5zaG93TWVyaWRpYW4gKSB7XG4gICAgICBpZiAoIGhvdXJzID09PSAxMiApIHtcbiAgICAgICAgaG91cnMgPSAwO1xuICAgICAgfVxuICAgICAgaWYgKCAkc2NvcGUubWVyaWRpYW4gPT09IG1lcmlkaWFuc1sxXSApIHtcbiAgICAgICAgaG91cnMgPSBob3VycyArIDEyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaG91cnM7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNaW51dGVzRnJvbVRlbXBsYXRlKCkge1xuICAgIHZhciBtaW51dGVzID0gcGFyc2VJbnQoJHNjb3BlLm1pbnV0ZXMsIDEwKTtcbiAgICByZXR1cm4gKCBtaW51dGVzID49IDAgJiYgbWludXRlcyA8IDYwICkgPyBtaW51dGVzIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFkKCB2YWx1ZSApIHtcbiAgICByZXR1cm4gKCBhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUudG9TdHJpbmcoKS5sZW5ndGggPCAyICkgPyAnMCcgKyB2YWx1ZSA6IHZhbHVlO1xuICB9XG5cbiAgLy8gUmVzcG9uZCBvbiBtb3VzZXdoZWVsIHNwaW5cbiAgdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMgPSBmdW5jdGlvbiggaG91cnNJbnB1dEVsLCBtaW51dGVzSW5wdXRFbCApIHtcbiAgICB2YXIgaXNTY3JvbGxpbmdVcCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgZSA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgIH1cbiAgICAgIC8vcGljayBjb3JyZWN0IGRlbHRhIHZhcmlhYmxlIGRlcGVuZGluZyBvbiBldmVudFxuICAgICAgdmFyIGRlbHRhID0gKGUud2hlZWxEZWx0YSkgPyBlLndoZWVsRGVsdGEgOiAtZS5kZWx0YVk7XG4gICAgICByZXR1cm4gKGUuZGV0YWlsIHx8IGRlbHRhID4gMCk7XG4gICAgfTtcblxuICAgIGhvdXJzSW5wdXRFbC5iaW5kKCdtb3VzZXdoZWVsIHdoZWVsJywgZnVuY3Rpb24oZSkge1xuICAgICAgJHNjb3BlLiRhcHBseSggKGlzU2Nyb2xsaW5nVXAoZSkpID8gJHNjb3BlLmluY3JlbWVudEhvdXJzKCkgOiAkc2NvcGUuZGVjcmVtZW50SG91cnMoKSApO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgbWludXRlc0lucHV0RWwuYmluZCgnbW91c2V3aGVlbCB3aGVlbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICRzY29wZS4kYXBwbHkoIChpc1Njcm9sbGluZ1VwKGUpKSA/ICRzY29wZS5pbmNyZW1lbnRNaW51dGVzKCkgOiAkc2NvcGUuZGVjcmVtZW50TWludXRlcygpICk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgfTtcblxuICB0aGlzLnNldHVwSW5wdXRFdmVudHMgPSBmdW5jdGlvbiggaG91cnNJbnB1dEVsLCBtaW51dGVzSW5wdXRFbCApIHtcbiAgICBpZiAoICRzY29wZS5yZWFkb25seUlucHV0ICkge1xuICAgICAgJHNjb3BlLnVwZGF0ZUhvdXJzID0gYW5ndWxhci5ub29wO1xuICAgICAgJHNjb3BlLnVwZGF0ZU1pbnV0ZXMgPSBhbmd1bGFyLm5vb3A7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGludmFsaWRhdGUgPSBmdW5jdGlvbihpbnZhbGlkSG91cnMsIGludmFsaWRNaW51dGVzKSB7XG4gICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKCBudWxsICk7XG4gICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ3RpbWUnLCBmYWxzZSk7XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoaW52YWxpZEhvdXJzKSkge1xuICAgICAgICAkc2NvcGUuaW52YWxpZEhvdXJzID0gaW52YWxpZEhvdXJzO1xuICAgICAgfVxuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGludmFsaWRNaW51dGVzKSkge1xuICAgICAgICAkc2NvcGUuaW52YWxpZE1pbnV0ZXMgPSBpbnZhbGlkTWludXRlcztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgJHNjb3BlLnVwZGF0ZUhvdXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaG91cnMgPSBnZXRIb3Vyc0Zyb21UZW1wbGF0ZSgpO1xuXG4gICAgICBpZiAoIGFuZ3VsYXIuaXNEZWZpbmVkKGhvdXJzKSApIHtcbiAgICAgICAgc2VsZWN0ZWQuc2V0SG91cnMoIGhvdXJzICk7XG4gICAgICAgIHJlZnJlc2goICdoJyApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW52YWxpZGF0ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaG91cnNJbnB1dEVsLmJpbmQoJ2JsdXInLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoICEkc2NvcGUuaW52YWxpZEhvdXJzICYmICRzY29wZS5ob3VycyA8IDEwKSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5ob3VycyA9IHBhZCggJHNjb3BlLmhvdXJzICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLnVwZGF0ZU1pbnV0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtaW51dGVzID0gZ2V0TWludXRlc0Zyb21UZW1wbGF0ZSgpO1xuXG4gICAgICBpZiAoIGFuZ3VsYXIuaXNEZWZpbmVkKG1pbnV0ZXMpICkge1xuICAgICAgICBzZWxlY3RlZC5zZXRNaW51dGVzKCBtaW51dGVzICk7XG4gICAgICAgIHJlZnJlc2goICdtJyApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW52YWxpZGF0ZSh1bmRlZmluZWQsIHRydWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBtaW51dGVzSW5wdXRFbC5iaW5kKCdibHVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKCAhJHNjb3BlLmludmFsaWRNaW51dGVzICYmICRzY29wZS5taW51dGVzIDwgMTAgKSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5taW51dGVzID0gcGFkKCAkc2NvcGUubWludXRlcyApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9O1xuXG4gIHRoaXMucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRhdGUgPSBuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSA/IG5ldyBEYXRlKCBuZ01vZGVsQ3RybC4kbW9kZWxWYWx1ZSApIDogbnVsbDtcblxuICAgIGlmICggaXNOYU4oZGF0ZSkgKSB7XG4gICAgICBuZ01vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ3RpbWUnLCBmYWxzZSk7XG4gICAgICAkbG9nLmVycm9yKCdUaW1lcGlja2VyIGRpcmVjdGl2ZTogXCJuZy1tb2RlbFwiIHZhbHVlIG11c3QgYmUgYSBEYXRlIG9iamVjdCwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDAxLjAxLjE5NzAgb3IgYSBzdHJpbmcgcmVwcmVzZW50aW5nIGFuIFJGQzI4MjIgb3IgSVNPIDg2MDEgZGF0ZS4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCBkYXRlICkge1xuICAgICAgICBzZWxlY3RlZCA9IGRhdGU7XG4gICAgICB9XG4gICAgICBtYWtlVmFsaWQoKTtcbiAgICAgIHVwZGF0ZVRlbXBsYXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENhbGwgaW50ZXJuYWxseSB3aGVuIHdlIGtub3cgdGhhdCBtb2RlbCBpcyB2YWxpZC5cbiAgZnVuY3Rpb24gcmVmcmVzaCgga2V5Ym9hcmRDaGFuZ2UgKSB7XG4gICAgbWFrZVZhbGlkKCk7XG4gICAgbmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZSggbmV3IERhdGUoc2VsZWN0ZWQpICk7XG4gICAgdXBkYXRlVGVtcGxhdGUoIGtleWJvYXJkQ2hhbmdlICk7XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlVmFsaWQoKSB7XG4gICAgbmdNb2RlbEN0cmwuJHNldFZhbGlkaXR5KCd0aW1lJywgdHJ1ZSk7XG4gICAgJHNjb3BlLmludmFsaWRIb3VycyA9IGZhbHNlO1xuICAgICRzY29wZS5pbnZhbGlkTWludXRlcyA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlVGVtcGxhdGUoIGtleWJvYXJkQ2hhbmdlICkge1xuICAgIHZhciBob3VycyA9IHNlbGVjdGVkLmdldEhvdXJzKCksIG1pbnV0ZXMgPSBzZWxlY3RlZC5nZXRNaW51dGVzKCk7XG5cbiAgICBpZiAoICRzY29wZS5zaG93TWVyaWRpYW4gKSB7XG4gICAgICBob3VycyA9ICggaG91cnMgPT09IDAgfHwgaG91cnMgPT09IDEyICkgPyAxMiA6IGhvdXJzICUgMTI7IC8vIENvbnZlcnQgMjQgdG8gMTIgaG91ciBzeXN0ZW1cbiAgICB9XG5cbiAgICAkc2NvcGUuaG91cnMgPSBrZXlib2FyZENoYW5nZSA9PT0gJ2gnID8gaG91cnMgOiBwYWQoaG91cnMpO1xuICAgICRzY29wZS5taW51dGVzID0ga2V5Ym9hcmRDaGFuZ2UgPT09ICdtJyA/IG1pbnV0ZXMgOiBwYWQobWludXRlcyk7XG4gICAgJHNjb3BlLm1lcmlkaWFuID0gc2VsZWN0ZWQuZ2V0SG91cnMoKSA8IDEyID8gbWVyaWRpYW5zWzBdIDogbWVyaWRpYW5zWzFdO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkTWludXRlcyggbWludXRlcyApIHtcbiAgICB2YXIgZHQgPSBuZXcgRGF0ZSggc2VsZWN0ZWQuZ2V0VGltZSgpICsgbWludXRlcyAqIDYwMDAwICk7XG4gICAgc2VsZWN0ZWQuc2V0SG91cnMoIGR0LmdldEhvdXJzKCksIGR0LmdldE1pbnV0ZXMoKSApO1xuICAgIHJlZnJlc2goKTtcbiAgfVxuXG4gICRzY29wZS5pbmNyZW1lbnRIb3VycyA9IGZ1bmN0aW9uKCkge1xuICAgIGFkZE1pbnV0ZXMoIGhvdXJTdGVwICogNjAgKTtcbiAgfTtcbiAgJHNjb3BlLmRlY3JlbWVudEhvdXJzID0gZnVuY3Rpb24oKSB7XG4gICAgYWRkTWludXRlcyggLSBob3VyU3RlcCAqIDYwICk7XG4gIH07XG4gICRzY29wZS5pbmNyZW1lbnRNaW51dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgYWRkTWludXRlcyggbWludXRlU3RlcCApO1xuICB9O1xuICAkc2NvcGUuZGVjcmVtZW50TWludXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgIGFkZE1pbnV0ZXMoIC0gbWludXRlU3RlcCApO1xuICB9O1xuICAkc2NvcGUudG9nZ2xlTWVyaWRpYW4gPSBmdW5jdGlvbigpIHtcbiAgICBhZGRNaW51dGVzKCAxMiAqIDYwICogKCggc2VsZWN0ZWQuZ2V0SG91cnMoKSA8IDEyICkgPyAxIDogLTEpICk7XG4gIH07XG59XSlcblxuLmRpcmVjdGl2ZSgndGltZXBpY2tlcicsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXF1aXJlOiBbJ3RpbWVwaWNrZXInLCAnP15uZ01vZGVsJ10sXG4gICAgY29udHJvbGxlcjonVGltZXBpY2tlckNvbnRyb2xsZXInLFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgc2NvcGU6IHt9LFxuICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgIHZhciB0aW1lcGlja2VyQ3RybCA9IGN0cmxzWzBdLCBuZ01vZGVsQ3RybCA9IGN0cmxzWzFdO1xuXG4gICAgICBpZiAoIG5nTW9kZWxDdHJsICkge1xuICAgICAgICB0aW1lcGlja2VyQ3RybC5pbml0KCBuZ01vZGVsQ3RybCwgZWxlbWVudC5maW5kKCdpbnB1dCcpICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCd1aS5ib290c3RyYXAudHlwZWFoZWFkJywgWyd1aS5ib290c3RyYXAucG9zaXRpb24nLCAndWkuYm9vdHN0cmFwLmJpbmRIdG1sJ10pXG5cbi8qKlxuICogQSBoZWxwZXIgc2VydmljZSB0aGF0IGNhbiBwYXJzZSB0eXBlYWhlYWQncyBzeW50YXggKHN0cmluZyBwcm92aWRlZCBieSB1c2VycylcbiAqIEV4dHJhY3RlZCB0byBhIHNlcGFyYXRlIHNlcnZpY2UgZm9yIGVhc2Ugb2YgdW5pdCB0ZXN0aW5nXG4gKi9cbiAgLmZhY3RvcnkoJ3R5cGVhaGVhZFBhcnNlcicsIFsnJHBhcnNlJywgZnVuY3Rpb24gKCRwYXJzZSkge1xuXG4gIC8vICAgICAgICAgICAgICAgICAgICAgIDAwMDAwMTExMDAwMDAwMDAwMDAwMDIyMjAwMDAwMDAwMDAwMDAwMDAzMzMzMzMzMzMzMzMzMzMwMDAwMDAwMDAwMDQ0MDAwXG4gIHZhciBUWVBFQUhFQURfUkVHRVhQID0gL15cXHMqKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooW1xcJFxcd11bXFwkXFx3XFxkXSopKVxccytpblxccysoW1xcc1xcU10rPykkLztcblxuICByZXR1cm4ge1xuICAgIHBhcnNlOmZ1bmN0aW9uIChpbnB1dCkge1xuXG4gICAgICB2YXIgbWF0Y2ggPSBpbnB1dC5tYXRjaChUWVBFQUhFQURfUkVHRVhQKTtcbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdFeHBlY3RlZCB0eXBlYWhlYWQgc3BlY2lmaWNhdGlvbiBpbiBmb3JtIG9mIFwiX21vZGVsVmFsdWVfIChhcyBfbGFiZWxfKT8gZm9yIF9pdGVtXyBpbiBfY29sbGVjdGlvbl9cIicgK1xuICAgICAgICAgICAgJyBidXQgZ290IFwiJyArIGlucHV0ICsgJ1wiLicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpdGVtTmFtZTptYXRjaFszXSxcbiAgICAgICAgc291cmNlOiRwYXJzZShtYXRjaFs0XSksXG4gICAgICAgIHZpZXdNYXBwZXI6JHBhcnNlKG1hdGNoWzJdIHx8IG1hdGNoWzFdKSxcbiAgICAgICAgbW9kZWxNYXBwZXI6JHBhcnNlKG1hdGNoWzFdKVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XSlcblxuICAuZGlyZWN0aXZlKCd0eXBlYWhlYWQnLCBbJyRjb21waWxlJywgJyRwYXJzZScsICckcScsICckdGltZW91dCcsICckZG9jdW1lbnQnLCAnJHBvc2l0aW9uJywgJ3R5cGVhaGVhZFBhcnNlcicsXG4gICAgZnVuY3Rpb24gKCRjb21waWxlLCAkcGFyc2UsICRxLCAkdGltZW91dCwgJGRvY3VtZW50LCAkcG9zaXRpb24sIHR5cGVhaGVhZFBhcnNlcikge1xuXG4gIHZhciBIT1RfS0VZUyA9IFs5LCAxMywgMjcsIDM4LCA0MF07XG5cbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiduZ01vZGVsJyxcbiAgICBsaW5rOmZ1bmN0aW9uIChvcmlnaW5hbFNjb3BlLCBlbGVtZW50LCBhdHRycywgbW9kZWxDdHJsKSB7XG5cbiAgICAgIC8vU1VQUE9SVEVEIEFUVFJJQlVURVMgKE9QVElPTlMpXG5cbiAgICAgIC8vbWluaW1hbCBubyBvZiBjaGFyYWN0ZXJzIHRoYXQgbmVlZHMgdG8gYmUgZW50ZXJlZCBiZWZvcmUgdHlwZWFoZWFkIGtpY2tzLWluXG4gICAgICB2YXIgbWluU2VhcmNoID0gb3JpZ2luYWxTY29wZS4kZXZhbChhdHRycy50eXBlYWhlYWRNaW5MZW5ndGgpIHx8IDE7XG5cbiAgICAgIC8vbWluaW1hbCB3YWl0IHRpbWUgYWZ0ZXIgbGFzdCBjaGFyYWN0ZXIgdHlwZWQgYmVmb3JlIHR5cGVoZWFkIGtpY2tzLWluXG4gICAgICB2YXIgd2FpdFRpbWUgPSBvcmlnaW5hbFNjb3BlLiRldmFsKGF0dHJzLnR5cGVhaGVhZFdhaXRNcykgfHwgMDtcblxuICAgICAgLy9zaG91bGQgaXQgcmVzdHJpY3QgbW9kZWwgdmFsdWVzIHRvIHRoZSBvbmVzIHNlbGVjdGVkIGZyb20gdGhlIHBvcHVwIG9ubHk/XG4gICAgICB2YXIgaXNFZGl0YWJsZSA9IG9yaWdpbmFsU2NvcGUuJGV2YWwoYXR0cnMudHlwZWFoZWFkRWRpdGFibGUpICE9PSBmYWxzZTtcblxuICAgICAgLy9iaW5kaW5nIHRvIGEgdmFyaWFibGUgdGhhdCBpbmRpY2F0ZXMgaWYgbWF0Y2hlcyBhcmUgYmVpbmcgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5XG4gICAgICB2YXIgaXNMb2FkaW5nU2V0dGVyID0gJHBhcnNlKGF0dHJzLnR5cGVhaGVhZExvYWRpbmcpLmFzc2lnbiB8fCBhbmd1bGFyLm5vb3A7XG5cbiAgICAgIC8vYSBjYWxsYmFjayBleGVjdXRlZCB3aGVuIGEgbWF0Y2ggaXMgc2VsZWN0ZWRcbiAgICAgIHZhciBvblNlbGVjdENhbGxiYWNrID0gJHBhcnNlKGF0dHJzLnR5cGVhaGVhZE9uU2VsZWN0KTtcblxuICAgICAgdmFyIGlucHV0Rm9ybWF0dGVyID0gYXR0cnMudHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXIgPyAkcGFyc2UoYXR0cnMudHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXIpIDogdW5kZWZpbmVkO1xuXG4gICAgICB2YXIgYXBwZW5kVG9Cb2R5ID0gIGF0dHJzLnR5cGVhaGVhZEFwcGVuZFRvQm9keSA/IG9yaWdpbmFsU2NvcGUuJGV2YWwoYXR0cnMudHlwZWFoZWFkQXBwZW5kVG9Cb2R5KSA6IGZhbHNlO1xuXG4gICAgICAvL0lOVEVSTkFMIFZBUklBQkxFU1xuXG4gICAgICAvL21vZGVsIHNldHRlciBleGVjdXRlZCB1cG9uIG1hdGNoIHNlbGVjdGlvblxuICAgICAgdmFyICRzZXRNb2RlbFZhbHVlID0gJHBhcnNlKGF0dHJzLm5nTW9kZWwpLmFzc2lnbjtcblxuICAgICAgLy9leHByZXNzaW9ucyB1c2VkIGJ5IHR5cGVhaGVhZFxuICAgICAgdmFyIHBhcnNlclJlc3VsdCA9IHR5cGVhaGVhZFBhcnNlci5wYXJzZShhdHRycy50eXBlYWhlYWQpO1xuXG4gICAgICB2YXIgaGFzRm9jdXM7XG5cbiAgICAgIC8vY3JlYXRlIGEgY2hpbGQgc2NvcGUgZm9yIHRoZSB0eXBlYWhlYWQgZGlyZWN0aXZlIHNvIHdlIGFyZSBub3QgcG9sbHV0aW5nIG9yaWdpbmFsIHNjb3BlXG4gICAgICAvL3dpdGggdHlwZWFoZWFkLXNwZWNpZmljIGRhdGEgKG1hdGNoZXMsIHF1ZXJ5IGV0Yy4pXG4gICAgICB2YXIgc2NvcGUgPSBvcmlnaW5hbFNjb3BlLiRuZXcoKTtcbiAgICAgIG9yaWdpbmFsU2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHNjb3BlLiRkZXN0cm95KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gV0FJLUFSSUFcbiAgICAgIHZhciBwb3B1cElkID0gJ3R5cGVhaGVhZC0nICsgc2NvcGUuJGlkICsgJy0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApO1xuICAgICAgZWxlbWVudC5hdHRyKHtcbiAgICAgICAgJ2FyaWEtYXV0b2NvbXBsZXRlJzogJ2xpc3QnLFxuICAgICAgICAnYXJpYS1leHBhbmRlZCc6IGZhbHNlLFxuICAgICAgICAnYXJpYS1vd25zJzogcG9wdXBJZFxuICAgICAgfSk7XG5cbiAgICAgIC8vcG9wLXVwIGVsZW1lbnQgdXNlZCB0byBkaXNwbGF5IG1hdGNoZXNcbiAgICAgIHZhciBwb3BVcEVsID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IHR5cGVhaGVhZC1wb3B1cD48L2Rpdj4nKTtcbiAgICAgIHBvcFVwRWwuYXR0cih7XG4gICAgICAgIGlkOiBwb3B1cElkLFxuICAgICAgICBtYXRjaGVzOiAnbWF0Y2hlcycsXG4gICAgICAgIGFjdGl2ZTogJ2FjdGl2ZUlkeCcsXG4gICAgICAgIHNlbGVjdDogJ3NlbGVjdChhY3RpdmVJZHgpJyxcbiAgICAgICAgcXVlcnk6ICdxdWVyeScsXG4gICAgICAgIHBvc2l0aW9uOiAncG9zaXRpb24nXG4gICAgICB9KTtcbiAgICAgIC8vY3VzdG9tIGl0ZW0gdGVtcGxhdGVcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhdHRycy50eXBlYWhlYWRUZW1wbGF0ZVVybCkpIHtcbiAgICAgICAgcG9wVXBFbC5hdHRyKCd0ZW1wbGF0ZS11cmwnLCBhdHRycy50eXBlYWhlYWRUZW1wbGF0ZVVybCk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXNldE1hdGNoZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2NvcGUubWF0Y2hlcyA9IFtdO1xuICAgICAgICBzY29wZS5hY3RpdmVJZHggPSAtMTtcbiAgICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGdldE1hdGNoSWQgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICByZXR1cm4gcG9wdXBJZCArICctb3B0aW9uLScgKyBpbmRleDtcbiAgICAgIH07XG5cbiAgICAgIC8vIEluZGljYXRlIHRoYXQgdGhlIHNwZWNpZmllZCBtYXRjaCBpcyB0aGUgYWN0aXZlIChwcmUtc2VsZWN0ZWQpIGl0ZW0gaW4gdGhlIGxpc3Qgb3duZWQgYnkgdGhpcyB0eXBlYWhlYWQuXG4gICAgICAvLyBUaGlzIGF0dHJpYnV0ZSBpcyBhZGRlZCBvciByZW1vdmVkIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGUgYGFjdGl2ZUlkeGAgY2hhbmdlcy5cbiAgICAgIHNjb3BlLiR3YXRjaCgnYWN0aXZlSWR4JywgZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnLCBnZXRNYXRjaElkKGluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB2YXIgZ2V0TWF0Y2hlc0FzeW5jID0gZnVuY3Rpb24oaW5wdXRWYWx1ZSkge1xuXG4gICAgICAgIHZhciBsb2NhbHMgPSB7JHZpZXdWYWx1ZTogaW5wdXRWYWx1ZX07XG4gICAgICAgIGlzTG9hZGluZ1NldHRlcihvcmlnaW5hbFNjb3BlLCB0cnVlKTtcbiAgICAgICAgJHEud2hlbihwYXJzZXJSZXN1bHQuc291cmNlKG9yaWdpbmFsU2NvcGUsIGxvY2FscykpLnRoZW4oZnVuY3Rpb24obWF0Y2hlcykge1xuXG4gICAgICAgICAgLy9pdCBtaWdodCBoYXBwZW4gdGhhdCBzZXZlcmFsIGFzeW5jIHF1ZXJpZXMgd2VyZSBpbiBwcm9ncmVzcyBpZiBhIHVzZXIgd2VyZSB0eXBpbmcgZmFzdFxuICAgICAgICAgIC8vYnV0IHdlIGFyZSBpbnRlcmVzdGVkIG9ubHkgaW4gcmVzcG9uc2VzIHRoYXQgY29ycmVzcG9uZCB0byB0aGUgY3VycmVudCB2aWV3IHZhbHVlXG4gICAgICAgICAgdmFyIG9uQ3VycmVudFJlcXVlc3QgPSAoaW5wdXRWYWx1ZSA9PT0gbW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgIGlmIChvbkN1cnJlbnRSZXF1ZXN0ICYmIGhhc0ZvY3VzKSB7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgICAgc2NvcGUuYWN0aXZlSWR4ID0gMDtcbiAgICAgICAgICAgICAgc2NvcGUubWF0Y2hlcy5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgIC8vdHJhbnNmb3JtIGxhYmVsc1xuICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTxtYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSBtYXRjaGVzW2ldO1xuICAgICAgICAgICAgICAgIHNjb3BlLm1hdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICBpZDogZ2V0TWF0Y2hJZChpKSxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBwYXJzZXJSZXN1bHQudmlld01hcHBlcihzY29wZSwgbG9jYWxzKSxcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiBtYXRjaGVzW2ldXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzY29wZS5xdWVyeSA9IGlucHV0VmFsdWU7XG4gICAgICAgICAgICAgIC8vcG9zaXRpb24gcG9wLXVwIHdpdGggbWF0Y2hlcyAtIHdlIG5lZWQgdG8gcmUtY2FsY3VsYXRlIGl0cyBwb3NpdGlvbiBlYWNoIHRpbWUgd2UgYXJlIG9wZW5pbmcgYSB3aW5kb3dcbiAgICAgICAgICAgICAgLy93aXRoIG1hdGNoZXMgYXMgYSBwb3AtdXAgbWlnaHQgYmUgYWJzb2x1dGUtcG9zaXRpb25lZCBhbmQgcG9zaXRpb24gb2YgYW4gaW5wdXQgbWlnaHQgaGF2ZSBjaGFuZ2VkIG9uIGEgcGFnZVxuICAgICAgICAgICAgICAvL2R1ZSB0byBvdGhlciBlbGVtZW50cyBiZWluZyByZW5kZXJlZFxuICAgICAgICAgICAgICBzY29wZS5wb3NpdGlvbiA9IGFwcGVuZFRvQm9keSA/ICRwb3NpdGlvbi5vZmZzZXQoZWxlbWVudCkgOiAkcG9zaXRpb24ucG9zaXRpb24oZWxlbWVudCk7XG4gICAgICAgICAgICAgIHNjb3BlLnBvc2l0aW9uLnRvcCA9IHNjb3BlLnBvc2l0aW9uLnRvcCArIGVsZW1lbnQucHJvcCgnb2Zmc2V0SGVpZ2h0Jyk7XG5cbiAgICAgICAgICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9uQ3VycmVudFJlcXVlc3QpIHtcbiAgICAgICAgICAgIGlzTG9hZGluZ1NldHRlcihvcmlnaW5hbFNjb3BlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpe1xuICAgICAgICAgIHJlc2V0TWF0Y2hlcygpO1xuICAgICAgICAgIGlzTG9hZGluZ1NldHRlcihvcmlnaW5hbFNjb3BlLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgcmVzZXRNYXRjaGVzKCk7XG5cbiAgICAgIC8vd2UgbmVlZCB0byBwcm9wYWdhdGUgdXNlcidzIHF1ZXJ5IHNvIHdlIGNhbiBoaWdsaWdodCBtYXRjaGVzXG4gICAgICBzY29wZS5xdWVyeSA9IHVuZGVmaW5lZDtcblxuICAgICAgLy9EZWNsYXJlIHRoZSB0aW1lb3V0IHByb21pc2UgdmFyIG91dHNpZGUgdGhlIGZ1bmN0aW9uIHNjb3BlIHNvIHRoYXQgc3RhY2tlZCBjYWxscyBjYW4gYmUgY2FuY2VsbGVkIGxhdGVyIFxuICAgICAgdmFyIHRpbWVvdXRQcm9taXNlO1xuXG4gICAgICB2YXIgc2NoZWR1bGVTZWFyY2hXaXRoVGltZW91dCA9IGZ1bmN0aW9uKGlucHV0VmFsdWUpIHtcbiAgICAgICAgdGltZW91dFByb21pc2UgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZ2V0TWF0Y2hlc0FzeW5jKGlucHV0VmFsdWUpO1xuICAgICAgICB9LCB3YWl0VGltZSk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FuY2VsUHJldmlvdXNUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aW1lb3V0UHJvbWlzZSkge1xuICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lb3V0UHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vcGx1ZyBpbnRvICRwYXJzZXJzIHBpcGVsaW5lIHRvIG9wZW4gYSB0eXBlYWhlYWQgb24gdmlldyBjaGFuZ2VzIGluaXRpYXRlZCBmcm9tIERPTVxuICAgICAgLy8kcGFyc2VycyBraWNrLWluIG9uIGFsbCB0aGUgY2hhbmdlcyBjb21pbmcgZnJvbSB0aGUgdmlldyBhcyB3ZWxsIGFzIG1hbnVhbGx5IHRyaWdnZXJlZCBieSAkc2V0Vmlld1ZhbHVlXG4gICAgICBtb2RlbEN0cmwuJHBhcnNlcnMudW5zaGlmdChmdW5jdGlvbiAoaW5wdXRWYWx1ZSkge1xuXG4gICAgICAgIGhhc0ZvY3VzID0gdHJ1ZTtcblxuICAgICAgICBpZiAoaW5wdXRWYWx1ZSAmJiBpbnB1dFZhbHVlLmxlbmd0aCA+PSBtaW5TZWFyY2gpIHtcbiAgICAgICAgICBpZiAod2FpdFRpbWUgPiAwKSB7XG4gICAgICAgICAgICBjYW5jZWxQcmV2aW91c1RpbWVvdXQoKTtcbiAgICAgICAgICAgIHNjaGVkdWxlU2VhcmNoV2l0aFRpbWVvdXQoaW5wdXRWYWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdldE1hdGNoZXNBc3luYyhpbnB1dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNMb2FkaW5nU2V0dGVyKG9yaWdpbmFsU2NvcGUsIGZhbHNlKTtcbiAgICAgICAgICBjYW5jZWxQcmV2aW91c1RpbWVvdXQoKTtcbiAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0VkaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGlucHV0VmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFpbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBpbiBjYXNlIHVzZXIgaGFkIHR5cGVkIHNvbWV0aGluZyBwcmV2aW91c2x5LlxuICAgICAgICAgICAgbW9kZWxDdHJsLiRzZXRWYWxpZGl0eSgnZWRpdGFibGUnLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dFZhbHVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJHNldFZhbGlkaXR5KCdlZGl0YWJsZScsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbW9kZWxDdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24gKG1vZGVsVmFsdWUpIHtcblxuICAgICAgICB2YXIgY2FuZGlkYXRlVmlld1ZhbHVlLCBlbXB0eVZpZXdWYWx1ZTtcbiAgICAgICAgdmFyIGxvY2FscyA9IHt9O1xuXG4gICAgICAgIGlmIChpbnB1dEZvcm1hdHRlcikge1xuXG4gICAgICAgICAgbG9jYWxzWyckbW9kZWwnXSA9IG1vZGVsVmFsdWU7XG4gICAgICAgICAgcmV0dXJuIGlucHV0Rm9ybWF0dGVyKG9yaWdpbmFsU2NvcGUsIGxvY2Fscyk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIC8vaXQgbWlnaHQgaGFwcGVuIHRoYXQgd2UgZG9uJ3QgaGF2ZSBlbm91Z2ggaW5mbyB0byBwcm9wZXJseSByZW5kZXIgaW5wdXQgdmFsdWVcbiAgICAgICAgICAvL3dlIG5lZWQgdG8gY2hlY2sgZm9yIHRoaXMgc2l0dWF0aW9uIGFuZCBzaW1wbHkgcmV0dXJuIG1vZGVsIHZhbHVlIGlmIHdlIGNhbid0IGFwcGx5IGN1c3RvbSBmb3JtYXR0aW5nXG4gICAgICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSBtb2RlbFZhbHVlO1xuICAgICAgICAgIGNhbmRpZGF0ZVZpZXdWYWx1ZSA9IHBhcnNlclJlc3VsdC52aWV3TWFwcGVyKG9yaWdpbmFsU2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgZW1wdHlWaWV3VmFsdWUgPSBwYXJzZXJSZXN1bHQudmlld01hcHBlcihvcmlnaW5hbFNjb3BlLCBsb2NhbHMpO1xuXG4gICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZVZpZXdWYWx1ZSE9PSBlbXB0eVZpZXdWYWx1ZSA/IGNhbmRpZGF0ZVZpZXdWYWx1ZSA6IG1vZGVsVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS5zZWxlY3QgPSBmdW5jdGlvbiAoYWN0aXZlSWR4KSB7XG4gICAgICAgIC8vY2FsbGVkIGZyb20gd2l0aGluIHRoZSAkZGlnZXN0KCkgY3ljbGVcbiAgICAgICAgdmFyIGxvY2FscyA9IHt9O1xuICAgICAgICB2YXIgbW9kZWwsIGl0ZW07XG5cbiAgICAgICAgbG9jYWxzW3BhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSBpdGVtID0gc2NvcGUubWF0Y2hlc1thY3RpdmVJZHhdLm1vZGVsO1xuICAgICAgICBtb2RlbCA9IHBhcnNlclJlc3VsdC5tb2RlbE1hcHBlcihvcmlnaW5hbFNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAkc2V0TW9kZWxWYWx1ZShvcmlnaW5hbFNjb3BlLCBtb2RlbCk7XG4gICAgICAgIG1vZGVsQ3RybC4kc2V0VmFsaWRpdHkoJ2VkaXRhYmxlJywgdHJ1ZSk7XG5cbiAgICAgICAgb25TZWxlY3RDYWxsYmFjayhvcmlnaW5hbFNjb3BlLCB7XG4gICAgICAgICAgJGl0ZW06IGl0ZW0sXG4gICAgICAgICAgJG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICAkbGFiZWw6IHBhcnNlclJlc3VsdC52aWV3TWFwcGVyKG9yaWdpbmFsU2NvcGUsIGxvY2FscylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzZXRNYXRjaGVzKCk7XG5cbiAgICAgICAgLy9yZXR1cm4gZm9jdXMgdG8gdGhlIGlucHV0IGVsZW1lbnQgaWYgYSBtYXRjaCB3YXMgc2VsZWN0ZWQgdmlhIGEgbW91c2UgY2xpY2sgZXZlbnRcbiAgICAgICAgLy8gdXNlIHRpbWVvdXQgdG8gYXZvaWQgJHJvb3RTY29wZTppbnByb2cgZXJyb3JcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7IGVsZW1lbnRbMF0uZm9jdXMoKTsgfSwgMCwgZmFsc2UpO1xuICAgICAgfTtcblxuICAgICAgLy9iaW5kIGtleWJvYXJkIGV2ZW50czogYXJyb3dzIHVwKDM4KSAvIGRvd24oNDApLCBlbnRlcigxMykgYW5kIHRhYig5KSwgZXNjKDI3KVxuICAgICAgZWxlbWVudC5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgIC8vdHlwZWFoZWFkIGlzIG9wZW4gYW5kIGFuIFwiaW50ZXJlc3RpbmdcIiBrZXkgd2FzIHByZXNzZWRcbiAgICAgICAgaWYgKHNjb3BlLm1hdGNoZXMubGVuZ3RoID09PSAwIHx8IEhPVF9LRVlTLmluZGV4T2YoZXZ0LndoaWNoKSA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZXZ0LndoaWNoID09PSA0MCkge1xuICAgICAgICAgIHNjb3BlLmFjdGl2ZUlkeCA9IChzY29wZS5hY3RpdmVJZHggKyAxKSAlIHNjb3BlLm1hdGNoZXMubGVuZ3RoO1xuICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGV2dC53aGljaCA9PT0gMzgpIHtcbiAgICAgICAgICBzY29wZS5hY3RpdmVJZHggPSAoc2NvcGUuYWN0aXZlSWR4ID8gc2NvcGUuYWN0aXZlSWR4IDogc2NvcGUubWF0Y2hlcy5sZW5ndGgpIC0gMTtcbiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChldnQud2hpY2ggPT09IDEzIHx8IGV2dC53aGljaCA9PT0gOSkge1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY29wZS5zZWxlY3Qoc2NvcGUuYWN0aXZlSWR4KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2UgaWYgKGV2dC53aGljaCA9PT0gMjcpIHtcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBlbGVtZW50LmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGhhc0ZvY3VzID0gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgLy8gS2VlcCByZWZlcmVuY2UgdG8gY2xpY2sgaGFuZGxlciB0byB1bmJpbmQgaXQuXG4gICAgICB2YXIgZGlzbWlzc0NsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRbMF0gIT09IGV2dC50YXJnZXQpIHtcbiAgICAgICAgICByZXNldE1hdGNoZXMoKTtcbiAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgICRkb2N1bWVudC5iaW5kKCdjbGljaycsIGRpc21pc3NDbGlja0hhbmRsZXIpO1xuXG4gICAgICBvcmlnaW5hbFNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpe1xuICAgICAgICAkZG9jdW1lbnQudW5iaW5kKCdjbGljaycsIGRpc21pc3NDbGlja0hhbmRsZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciAkcG9wdXAgPSAkY29tcGlsZShwb3BVcEVsKShzY29wZSk7XG4gICAgICBpZiAoIGFwcGVuZFRvQm9keSApIHtcbiAgICAgICAgJGRvY3VtZW50LmZpbmQoJ2JvZHknKS5hcHBlbmQoJHBvcHVwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuYWZ0ZXIoJHBvcHVwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbn1dKVxuXG4gIC5kaXJlY3RpdmUoJ3R5cGVhaGVhZFBvcHVwJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDonRUEnLFxuICAgICAgc2NvcGU6e1xuICAgICAgICBtYXRjaGVzOic9JyxcbiAgICAgICAgcXVlcnk6Jz0nLFxuICAgICAgICBhY3RpdmU6Jz0nLFxuICAgICAgICBwb3NpdGlvbjonPScsXG4gICAgICAgIHNlbGVjdDonJidcbiAgICAgIH0sXG4gICAgICByZXBsYWNlOnRydWUsXG4gICAgICB0ZW1wbGF0ZVVybDondGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sJyxcbiAgICAgIGxpbms6ZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgIHNjb3BlLnRlbXBsYXRlVXJsID0gYXR0cnMudGVtcGxhdGVVcmw7XG5cbiAgICAgICAgc2NvcGUuaXNPcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzY29wZS5tYXRjaGVzLmxlbmd0aCA+IDA7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAobWF0Y2hJZHgpIHtcbiAgICAgICAgICByZXR1cm4gc2NvcGUuYWN0aXZlID09IG1hdGNoSWR4O1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLnNlbGVjdEFjdGl2ZSA9IGZ1bmN0aW9uIChtYXRjaElkeCkge1xuICAgICAgICAgIHNjb3BlLmFjdGl2ZSA9IG1hdGNoSWR4O1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLnNlbGVjdE1hdGNoID0gZnVuY3Rpb24gKGFjdGl2ZUlkeCkge1xuICAgICAgICAgIHNjb3BlLnNlbGVjdCh7YWN0aXZlSWR4OmFjdGl2ZUlkeH0pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH0pXG5cbiAgLmRpcmVjdGl2ZSgndHlwZWFoZWFkTWF0Y2gnLCBbJyRodHRwJywgJyR0ZW1wbGF0ZUNhY2hlJywgJyRjb21waWxlJywgJyRwYXJzZScsIGZ1bmN0aW9uICgkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRjb21waWxlLCAkcGFyc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6J0VBJyxcbiAgICAgIHNjb3BlOntcbiAgICAgICAgaW5kZXg6Jz0nLFxuICAgICAgICBtYXRjaDonPScsXG4gICAgICAgIHF1ZXJ5Oic9J1xuICAgICAgfSxcbiAgICAgIGxpbms6ZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB2YXIgdHBsVXJsID0gJHBhcnNlKGF0dHJzLnRlbXBsYXRlVXJsKShzY29wZS4kcGFyZW50KSB8fCAndGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1tYXRjaC5odG1sJztcbiAgICAgICAgJGh0dHAuZ2V0KHRwbFVybCwge2NhY2hlOiAkdGVtcGxhdGVDYWNoZX0pLnN1Y2Nlc3MoZnVuY3Rpb24odHBsQ29udGVudCl7XG4gICAgICAgICAgIGVsZW1lbnQucmVwbGFjZVdpdGgoJGNvbXBpbGUodHBsQ29udGVudC50cmltKCkpKHNjb3BlKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1dKVxuXG4gIC5maWx0ZXIoJ3R5cGVhaGVhZEhpZ2hsaWdodCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgZnVuY3Rpb24gZXNjYXBlUmVnZXhwKHF1ZXJ5VG9Fc2NhcGUpIHtcbiAgICAgIHJldHVybiBxdWVyeVRvRXNjYXBlLnJlcGxhY2UoLyhbLj8qK14kW1xcXVxcXFwoKXt9fC1dKS9nLCAnXFxcXCQxJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG1hdGNoSXRlbSwgcXVlcnkpIHtcbiAgICAgIHJldHVybiBxdWVyeSA/ICgnJyArIG1hdGNoSXRlbSkucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZVJlZ2V4cChxdWVyeSksICdnaScpLCAnPHN0cm9uZz4kJjwvc3Ryb25nPicpIDogbWF0Y2hJdGVtO1xuICAgIH07XG4gIH0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwicGFuZWwgcGFuZWwtZGVmYXVsdFxcXCI+XFxuXCIgK1xuICAgIFwiICA8ZGl2IGNsYXNzPVxcXCJwYW5lbC1oZWFkaW5nXFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGg0IGNsYXNzPVxcXCJwYW5lbC10aXRsZVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgPGEgY2xhc3M9XFxcImFjY29yZGlvbi10b2dnbGVcXFwiIG5nLWNsaWNrPVxcXCJ0b2dnbGVPcGVuKClcXFwiIGFjY29yZGlvbi10cmFuc2NsdWRlPVxcXCJoZWFkaW5nXFxcIj48c3BhbiBuZy1jbGFzcz1cXFwieyd0ZXh0LW11dGVkJzogaXNEaXNhYmxlZH1cXFwiPnt7aGVhZGluZ319PC9zcGFuPjwvYT5cXG5cIiArXG4gICAgXCIgICAgPC9oND5cXG5cIiArXG4gICAgXCIgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwicGFuZWwtY29sbGFwc2VcXFwiIGNvbGxhcHNlPVxcXCIhaXNPcGVuXFxcIj5cXG5cIiArXG4gICAgXCJcdCAgPGRpdiBjbGFzcz1cXFwicGFuZWwtYm9keVxcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIiArXG4gICAgXCIgIDwvZGl2PlxcblwiICtcbiAgICBcIjwvZGl2PlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcInBhbmVsLWdyb3VwXFxcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwiYWxlcnRcXFwiIG5nLWNsYXNzPVxcXCJbJ2FsZXJ0LScgKyAodHlwZSB8fCAnd2FybmluZycpLCBjbG9zZWFibGUgPyAnYWxlcnQtZGlzbWlzc2FibGUnIDogbnVsbF1cXFwiIHJvbGU9XFxcImFsZXJ0XFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGJ1dHRvbiBuZy1zaG93PVxcXCJjbG9zZWFibGVcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImNsb3NlXFxcIiBuZy1jbGljaz1cXFwiY2xvc2UoKVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+JnRpbWVzOzwvc3Bhbj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJzci1vbmx5XFxcIj5DbG9zZTwvc3Bhbj5cXG5cIiArXG4gICAgXCIgICAgPC9idXR0b24+XFxuXCIgK1xuICAgIFwiICAgIDxkaXYgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIixcbiAgICBcIjxkaXYgbmctbW91c2VlbnRlcj1cXFwicGF1c2UoKVxcXCIgbmctbW91c2VsZWF2ZT1cXFwicGxheSgpXFxcIiBjbGFzcz1cXFwiY2Fyb3VzZWxcXFwiIG5nLXN3aXBlLXJpZ2h0PVxcXCJwcmV2KClcXFwiIG5nLXN3aXBlLWxlZnQ9XFxcIm5leHQoKVxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDxvbCBjbGFzcz1cXFwiY2Fyb3VzZWwtaW5kaWNhdG9yc1xcXCIgbmctc2hvdz1cXFwic2xpZGVzLmxlbmd0aCA+IDFcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgPGxpIG5nLXJlcGVhdD1cXFwic2xpZGUgaW4gc2xpZGVzIHRyYWNrIGJ5ICRpbmRleFxcXCIgbmctY2xhc3M9XFxcInthY3RpdmU6IGlzQWN0aXZlKHNsaWRlKX1cXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3Qoc2xpZGUpXFxcIj48L2xpPlxcblwiICtcbiAgICBcIiAgICA8L29sPlxcblwiICtcbiAgICBcIiAgICA8ZGl2IGNsYXNzPVxcXCJjYXJvdXNlbC1pbm5lclxcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgPGEgY2xhc3M9XFxcImxlZnQgY2Fyb3VzZWwtY29udHJvbFxcXCIgbmctY2xpY2s9XFxcInByZXYoKVxcXCIgbmctc2hvdz1cXFwic2xpZGVzLmxlbmd0aCA+IDFcXFwiPjxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFxcXCI+PC9zcGFuPjwvYT5cXG5cIiArXG4gICAgXCIgICAgPGEgY2xhc3M9XFxcInJpZ2h0IGNhcm91c2VsLWNvbnRyb2xcXFwiIG5nLWNsaWNrPVxcXCJuZXh0KClcXFwiIG5nLXNob3c9XFxcInNsaWRlcy5sZW5ndGggPiAxXFxcIj48c3BhbiBjbGFzcz1cXFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XFxcIj48L3NwYW4+PC9hPlxcblwiICtcbiAgICBcIjwvZGl2PlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFxuICAgIFwiPGRpdiBuZy1jbGFzcz1cXFwie1xcblwiICtcbiAgICBcIiAgICAnYWN0aXZlJzogbGVhdmluZyB8fCAoYWN0aXZlICYmICFlbnRlcmluZyksXFxuXCIgK1xuICAgIFwiICAgICdwcmV2JzogKG5leHQgfHwgYWN0aXZlKSAmJiBkaXJlY3Rpb249PSdwcmV2JyxcXG5cIiArXG4gICAgXCIgICAgJ25leHQnOiAobmV4dCB8fCBhY3RpdmUpICYmIGRpcmVjdGlvbj09J25leHQnLFxcblwiICtcbiAgICBcIiAgICAncmlnaHQnOiBkaXJlY3Rpb249PSdwcmV2JyxcXG5cIiArXG4gICAgXCIgICAgJ2xlZnQnOiBkaXJlY3Rpb249PSduZXh0J1xcblwiICtcbiAgICBcIiAgfVxcXCIgY2xhc3M9XFxcIml0ZW0gdGV4dC1jZW50ZXJcXFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixcbiAgICBcIjxkaXYgbmctc3dpdGNoPVxcXCJkYXRlcGlja2VyTW9kZVxcXCIgcm9sZT1cXFwiYXBwbGljYXRpb25cXFwiIG5nLWtleWRvd249XFxcImtleWRvd24oJGV2ZW50KVxcXCI+XFxuXCIgK1xuICAgIFwiICA8ZGF5cGlja2VyIG5nLXN3aXRjaC13aGVuPVxcXCJkYXlcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L2RheXBpY2tlcj5cXG5cIiArXG4gICAgXCIgIDxtb250aHBpY2tlciBuZy1zd2l0Y2gtd2hlbj1cXFwibW9udGhcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L21vbnRocGlja2VyPlxcblwiICtcbiAgICBcIiAgPHllYXJwaWNrZXIgbmctc3dpdGNoLXdoZW49XFxcInllYXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L3llYXJwaWNrZXI+XFxuXCIgK1xuICAgIFwiPC9kaXY+XCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sXCIsXG4gICAgXCI8dGFibGUgcm9sZT1cXFwiZ3JpZFxcXCIgYXJpYS1sYWJlbGxlZGJ5PVxcXCJ7e3VuaXF1ZUlkfX0tdGl0bGVcXFwiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cXFwie3thY3RpdmVEYXRlSWR9fVxcXCI+XFxuXCIgK1xuICAgIFwiICA8dGhlYWQ+XFxuXCIgK1xuICAgIFwiICAgIDx0cj5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFxcXCIgbmctY2xpY2s9XFxcIm1vdmUoLTEpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPjxpIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFxcXCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoIGNvbHNwYW49XFxcInt7NSArIHNob3dXZWVrc319XFxcIj48YnV0dG9uIGlkPVxcXCJ7e3VuaXF1ZUlkfX0tdGl0bGVcXFwiIHJvbGU9XFxcImhlYWRpbmdcXFwiIGFyaWEtbGl2ZT1cXFwiYXNzZXJ0aXZlXFxcIiBhcmlhLWF0b21pYz1cXFwidHJ1ZVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVxcXCIgbmctY2xpY2s9XFxcInRvZ2dsZU1vZGUoKVxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIiBzdHlsZT1cXFwid2lkdGg6MTAwJTtcXFwiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHRcXFwiIG5nLWNsaWNrPVxcXCJtb3ZlKDEpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPjxpIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcXFwiPjwvaT48L2J1dHRvbj48L3RoPlxcblwiICtcbiAgICBcIiAgICA8L3RyPlxcblwiICtcbiAgICBcIiAgICA8dHI+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoIG5nLXNob3c9XFxcInNob3dXZWVrc1xcXCIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIj48L3RoPlxcblwiICtcbiAgICBcIiAgICAgIDx0aCBuZy1yZXBlYXQ9XFxcImxhYmVsIGluIGxhYmVscyB0cmFjayBieSAkaW5kZXhcXFwiIGNsYXNzPVxcXCJ0ZXh0LWNlbnRlclxcXCI+PHNtYWxsIGFyaWEtbGFiZWw9XFxcInt7bGFiZWwuZnVsbH19XFxcIj57e2xhYmVsLmFiYnJ9fTwvc21hbGw+PC90aD5cXG5cIiArXG4gICAgXCIgICAgPC90cj5cXG5cIiArXG4gICAgXCIgIDwvdGhlYWQ+XFxuXCIgK1xuICAgIFwiICA8dGJvZHk+XFxuXCIgK1xuICAgIFwiICAgIDx0ciBuZy1yZXBlYXQ9XFxcInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgPHRkIG5nLXNob3c9XFxcInNob3dXZWVrc1xcXCIgY2xhc3M9XFxcInRleHQtY2VudGVyIGg2XFxcIj48ZW0+e3sgd2Vla051bWJlcnNbJGluZGV4XSB9fTwvZW0+PC90ZD5cXG5cIiArXG4gICAgXCIgICAgICA8dGQgbmctcmVwZWF0PVxcXCJkdCBpbiByb3cgdHJhY2sgYnkgZHQuZGF0ZVxcXCIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIiByb2xlPVxcXCJncmlkY2VsbFxcXCIgaWQ9XFxcInt7ZHQudWlkfX1cXFwiIGFyaWEtZGlzYWJsZWQ9XFxcInt7ISFkdC5kaXNhYmxlZH19XFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBzdHlsZT1cXFwid2lkdGg6MTAwJTtcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXFxcIiBuZy1jbGFzcz1cXFwieydidG4taW5mbyc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3QoZHQuZGF0ZSlcXFwiIG5nLWRpc2FibGVkPVxcXCJkdC5kaXNhYmxlZFxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj48c3BhbiBuZy1jbGFzcz1cXFwieyd0ZXh0LW11dGVkJzogZHQuc2Vjb25kYXJ5LCAndGV4dC1pbmZvJzogZHQuY3VycmVudH1cXFwiPnt7ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG5cIiArXG4gICAgXCIgICAgICA8L3RkPlxcblwiICtcbiAgICBcIiAgICA8L3RyPlxcblwiICtcbiAgICBcIiAgPC90Ym9keT5cXG5cIiArXG4gICAgXCI8L3RhYmxlPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWxcIixcbiAgICBcIjx0YWJsZSByb2xlPVxcXCJncmlkXFxcIiBhcmlhLWxhYmVsbGVkYnk9XFxcInt7dW5pcXVlSWR9fS10aXRsZVxcXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVxcXCJ7e2FjdGl2ZURhdGVJZH19XFxcIj5cXG5cIiArXG4gICAgXCIgIDx0aGVhZD5cXG5cIiArXG4gICAgXCIgICAgPHRyPlxcblwiICtcbiAgICBcIiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1sZWZ0XFxcIiBuZy1jbGljaz1cXFwibW92ZSgtMSlcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+PGkgY2xhc3M9XFxcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0XFxcIj48L2k+PC9idXR0b24+PC90aD5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiBpZD1cXFwie3t1bmlxdWVJZH19LXRpdGxlXFxcIiByb2xlPVxcXCJoZWFkaW5nXFxcIiBhcmlhLWxpdmU9XFxcImFzc2VydGl2ZVxcXCIgYXJpYS1hdG9taWM9XFxcInRydWVcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCBidG4tc21cXFwiIG5nLWNsaWNrPVxcXCJ0b2dnbGVNb2RlKClcXFwiIHRhYmluZGV4PVxcXCItMVxcXCIgc3R5bGU9XFxcIndpZHRoOjEwMCU7XFxcIj48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoPjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLXJpZ2h0XFxcIiBuZy1jbGljaz1cXFwibW92ZSgxKVxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj48aSBjbGFzcz1cXFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XFxcIj48L2k+PC9idXR0b24+PC90aD5cXG5cIiArXG4gICAgXCIgICAgPC90cj5cXG5cIiArXG4gICAgXCIgIDwvdGhlYWQ+XFxuXCIgK1xuICAgIFwiICA8dGJvZHk+XFxuXCIgK1xuICAgIFwiICAgIDx0ciBuZy1yZXBlYXQ9XFxcInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgPHRkIG5nLXJlcGVhdD1cXFwiZHQgaW4gcm93IHRyYWNrIGJ5IGR0LmRhdGVcXFwiIGNsYXNzPVxcXCJ0ZXh0LWNlbnRlclxcXCIgcm9sZT1cXFwiZ3JpZGNlbGxcXFwiIGlkPVxcXCJ7e2R0LnVpZH19XFxcIiBhcmlhLWRpc2FibGVkPVxcXCJ7eyEhZHQuZGlzYWJsZWR9fVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgc3R5bGU9XFxcIndpZHRoOjEwMCU7XFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGFzcz1cXFwieydidG4taW5mbyc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3QoZHQuZGF0ZSlcXFwiIG5nLWRpc2FibGVkPVxcXCJkdC5kaXNhYmxlZFxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj48c3BhbiBuZy1jbGFzcz1cXFwieyd0ZXh0LWluZm8nOiBkdC5jdXJyZW50fVxcXCI+e3tkdC5sYWJlbH19PC9zcGFuPjwvYnV0dG9uPlxcblwiICtcbiAgICBcIiAgICAgIDwvdGQ+XFxuXCIgK1xuICAgIFwiICAgIDwvdHI+XFxuXCIgK1xuICAgIFwiICA8L3Rib2R5PlxcblwiICtcbiAgICBcIjwvdGFibGU+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIvcG9wdXAuaHRtbFwiLFxuICAgIFwiPHVsIGNsYXNzPVxcXCJkcm9wZG93bi1tZW51XFxcIiBuZy1zdHlsZT1cXFwie2Rpc3BsYXk6IChpc09wZW4gJiYgJ2Jsb2NrJykgfHwgJ25vbmUnLCB0b3A6IHBvc2l0aW9uLnRvcCsncHgnLCBsZWZ0OiBwb3NpdGlvbi5sZWZ0KydweCd9XFxcIiBuZy1rZXlkb3duPVxcXCJrZXlkb3duKCRldmVudClcXFwiPlxcblwiICtcbiAgICBcIlx0PGxpIG5nLXRyYW5zY2x1ZGU+PC9saT5cXG5cIiArXG4gICAgXCJcdDxsaSBuZy1pZj1cXFwic2hvd0J1dHRvbkJhclxcXCIgc3R5bGU9XFxcInBhZGRpbmc6MTBweCA5cHggMnB4XFxcIj5cXG5cIiArXG4gICAgXCJcdFx0PHNwYW4gY2xhc3M9XFxcImJ0bi1ncm91cFxcXCI+XFxuXCIgK1xuICAgIFwiXHRcdFx0PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLXNtIGJ0bi1pbmZvXFxcIiBuZy1jbGljaz1cXFwic2VsZWN0KCd0b2RheScpXFxcIj57eyBnZXRUZXh0KCdjdXJyZW50JykgfX08L2J1dHRvbj5cXG5cIiArXG4gICAgXCJcdFx0XHQ8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLWRhbmdlclxcXCIgbmctY2xpY2s9XFxcInNlbGVjdChudWxsKVxcXCI+e3sgZ2V0VGV4dCgnY2xlYXInKSB9fTwvYnV0dG9uPlxcblwiICtcbiAgICBcIlx0XHQ8L3NwYW4+XFxuXCIgK1xuICAgIFwiXHRcdDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyBwdWxsLXJpZ2h0XFxcIiBuZy1jbGljaz1cXFwiY2xvc2UoKVxcXCI+e3sgZ2V0VGV4dCgnY2xvc2UnKSB9fTwvYnV0dG9uPlxcblwiICtcbiAgICBcIlx0PC9saT5cXG5cIiArXG4gICAgXCI8L3VsPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIsXG4gICAgXCI8dGFibGUgcm9sZT1cXFwiZ3JpZFxcXCIgYXJpYS1sYWJlbGxlZGJ5PVxcXCJ7e3VuaXF1ZUlkfX0tdGl0bGVcXFwiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cXFwie3thY3RpdmVEYXRlSWR9fVxcXCI+XFxuXCIgK1xuICAgIFwiICA8dGhlYWQ+XFxuXCIgK1xuICAgIFwiICAgIDx0cj5cXG5cIiArXG4gICAgXCIgICAgICA8dGg+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFxcXCIgbmctY2xpY2s9XFxcIm1vdmUoLTEpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPjxpIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFxcXCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgICAgPHRoIGNvbHNwYW49XFxcIjNcXFwiPjxidXR0b24gaWQ9XFxcInt7dW5pcXVlSWR9fS10aXRsZVxcXCIgcm9sZT1cXFwiaGVhZGluZ1xcXCIgYXJpYS1saXZlPVxcXCJhc3NlcnRpdmVcXFwiIGFyaWEtYXRvbWljPVxcXCJ0cnVlXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXFxcIiBuZy1jbGljaz1cXFwidG9nZ2xlTW9kZSgpXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiIHN0eWxlPVxcXCJ3aWR0aDoxMDAlO1xcXCI+PHN0cm9uZz57e3RpdGxlfX08L3N0cm9uZz48L2J1dHRvbj48L3RoPlxcblwiICtcbiAgICBcIiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodFxcXCIgbmctY2xpY2s9XFxcIm1vdmUoMSlcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+PGkgY2xhc3M9XFxcImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodFxcXCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuXCIgK1xuICAgIFwiICAgIDwvdHI+XFxuXCIgK1xuICAgIFwiICA8L3RoZWFkPlxcblwiICtcbiAgICBcIiAgPHRib2R5PlxcblwiICtcbiAgICBcIiAgICA8dHIgbmctcmVwZWF0PVxcXCJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXhcXFwiPlxcblwiICtcbiAgICBcIiAgICAgIDx0ZCBuZy1yZXBlYXQ9XFxcImR0IGluIHJvdyB0cmFjayBieSBkdC5kYXRlXFxcIiBjbGFzcz1cXFwidGV4dC1jZW50ZXJcXFwiIHJvbGU9XFxcImdyaWRjZWxsXFxcIiBpZD1cXFwie3tkdC51aWR9fVxcXCIgYXJpYS1kaXNhYmxlZD1cXFwie3shIWR0LmRpc2FibGVkfX1cXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIHN0eWxlPVxcXCJ3aWR0aDoxMDAlO1xcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgbmctY2xhc3M9XFxcInsnYnRuLWluZm8nOiBkdC5zZWxlY3RlZCwgYWN0aXZlOiBpc0FjdGl2ZShkdCl9XFxcIiBuZy1jbGljaz1cXFwic2VsZWN0KGR0LmRhdGUpXFxcIiBuZy1kaXNhYmxlZD1cXFwiZHQuZGlzYWJsZWRcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+PHNwYW4gbmctY2xhc3M9XFxcInsndGV4dC1pbmZvJzogZHQuY3VycmVudH1cXFwiPnt7ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG5cIiArXG4gICAgXCIgICAgICA8L3RkPlxcblwiICtcbiAgICBcIiAgICA8L3RyPlxcblwiICtcbiAgICBcIiAgPC90Ym9keT5cXG5cIiArXG4gICAgXCI8L3RhYmxlPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwibW9kYWwtYmFja2Ryb3AgZmFkZSB7eyBiYWNrZHJvcENsYXNzIH19XFxcIlxcblwiICtcbiAgICBcIiAgICAgbmctY2xhc3M9XFxcIntpbjogYW5pbWF0ZX1cXFwiXFxuXCIgK1xuICAgIFwiICAgICBuZy1zdHlsZT1cXFwieyd6LWluZGV4JzogMTA0MCArIChpbmRleCAmJiAxIHx8IDApICsgaW5kZXgqMTB9XFxcIlxcblwiICtcbiAgICBcIj48L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwiLFxuICAgIFwiPGRpdiB0YWJpbmRleD1cXFwiLTFcXFwiIHJvbGU9XFxcImRpYWxvZ1xcXCIgY2xhc3M9XFxcIm1vZGFsIGZhZGVcXFwiIG5nLWNsYXNzPVxcXCJ7aW46IGFuaW1hdGV9XFxcIiBuZy1zdHlsZT1cXFwieyd6LWluZGV4JzogMTA1MCArIGluZGV4KjEwLCBkaXNwbGF5OiAnYmxvY2snfVxcXCIgbmctY2xpY2s9XFxcImNsb3NlKCRldmVudClcXFwiPlxcblwiICtcbiAgICBcIiAgICA8ZGl2IGNsYXNzPVxcXCJtb2RhbC1kaWFsb2dcXFwiIG5nLWNsYXNzPVxcXCJ7J21vZGFsLXNtJzogc2l6ZSA9PSAnc20nLCAnbW9kYWwtbGcnOiBzaXplID09ICdsZyd9XFxcIj48ZGl2IGNsYXNzPVxcXCJtb2RhbC1jb250ZW50XFxcIiBtb2RhbC10cmFuc2NsdWRlPjwvZGl2PjwvZGl2PlxcblwiICtcbiAgICBcIjwvZGl2PlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2VyLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2VyLmh0bWxcIixcbiAgICBcIjx1bCBjbGFzcz1cXFwicGFnZXJcXFwiPlxcblwiICtcbiAgICBcIiAgPGxpIG5nLWNsYXNzPVxcXCJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKSwgcHJldmlvdXM6IGFsaWdufVxcXCI+PGEgaHJlZiBuZy1jbGljaz1cXFwic2VsZWN0UGFnZShwYWdlIC0gMSlcXFwiPnt7Z2V0VGV4dCgncHJldmlvdXMnKX19PC9hPjwvbGk+XFxuXCIgK1xuICAgIFwiICA8bGkgbmctY2xhc3M9XFxcIntkaXNhYmxlZDogbm9OZXh0KCksIG5leHQ6IGFsaWdufVxcXCI+PGEgaHJlZiBuZy1jbGljaz1cXFwic2VsZWN0UGFnZShwYWdlICsgMSlcXFwiPnt7Z2V0VGV4dCgnbmV4dCcpfX08L2E+PC9saT5cXG5cIiArXG4gICAgXCI8L3VsPlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sXCIsXG4gICAgXCI8dWwgY2xhc3M9XFxcInBhZ2luYXRpb25cXFwiPlxcblwiICtcbiAgICBcIiAgPGxpIG5nLWlmPVxcXCJib3VuZGFyeUxpbmtzXFxcIiBuZy1jbGFzcz1cXFwie2Rpc2FibGVkOiBub1ByZXZpb3VzKCl9XFxcIj48YSBocmVmIG5nLWNsaWNrPVxcXCJzZWxlY3RQYWdlKDEpXFxcIj57e2dldFRleHQoJ2ZpcnN0Jyl9fTwvYT48L2xpPlxcblwiICtcbiAgICBcIiAgPGxpIG5nLWlmPVxcXCJkaXJlY3Rpb25MaW5rc1xcXCIgbmctY2xhc3M9XFxcIntkaXNhYmxlZDogbm9QcmV2aW91cygpfVxcXCI+PGEgaHJlZiBuZy1jbGljaz1cXFwic2VsZWN0UGFnZShwYWdlIC0gMSlcXFwiPnt7Z2V0VGV4dCgncHJldmlvdXMnKX19PC9hPjwvbGk+XFxuXCIgK1xuICAgIFwiICA8bGkgbmctcmVwZWF0PVxcXCJwYWdlIGluIHBhZ2VzIHRyYWNrIGJ5ICRpbmRleFxcXCIgbmctY2xhc3M9XFxcInthY3RpdmU6IHBhZ2UuYWN0aXZlfVxcXCI+PGEgaHJlZiBuZy1jbGljaz1cXFwic2VsZWN0UGFnZShwYWdlLm51bWJlcilcXFwiPnt7cGFnZS50ZXh0fX08L2E+PC9saT5cXG5cIiArXG4gICAgXCIgIDxsaSBuZy1pZj1cXFwiZGlyZWN0aW9uTGlua3NcXFwiIG5nLWNsYXNzPVxcXCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfVxcXCI+PGEgaHJlZiBuZy1jbGljaz1cXFwic2VsZWN0UGFnZShwYWdlICsgMSlcXFwiPnt7Z2V0VGV4dCgnbmV4dCcpfX08L2E+PC9saT5cXG5cIiArXG4gICAgXCIgIDxsaSBuZy1pZj1cXFwiYm91bmRhcnlMaW5rc1xcXCIgbmctY2xhc3M9XFxcIntkaXNhYmxlZDogbm9OZXh0KCl9XFxcIj48YSBocmVmIG5nLWNsaWNrPVxcXCJzZWxlY3RQYWdlKHRvdGFsUGFnZXMpXFxcIj57e2dldFRleHQoJ2xhc3QnKX19PC9hPjwvbGk+XFxuXCIgK1xuICAgIFwiPC91bD5cIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtdW5zYWZlLXBvcHVwLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC11bnNhZmUtcG9wdXAuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwidG9vbHRpcCB7e3BsYWNlbWVudH19XFxcIiBuZy1jbGFzcz1cXFwieyBpbjogaXNPcGVuKCksIGZhZGU6IGFuaW1hdGlvbigpIH1cXFwiPlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwidG9vbHRpcC1hcnJvd1xcXCI+PC9kaXY+XFxuXCIgK1xuICAgIFwiICA8ZGl2IGNsYXNzPVxcXCJ0b29sdGlwLWlubmVyXFxcIiBiaW5kLWh0bWwtdW5zYWZlPVxcXCJjb250ZW50XFxcIj48L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtcG9wdXAuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwidG9vbHRpcCB7e3BsYWNlbWVudH19XFxcIiBuZy1jbGFzcz1cXFwieyBpbjogaXNPcGVuKCksIGZhZGU6IGFuaW1hdGlvbigpIH1cXFwiPlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwidG9vbHRpcC1hcnJvd1xcXCI+PC9kaXY+XFxuXCIgK1xuICAgIFwiICA8ZGl2IGNsYXNzPVxcXCJ0b29sdGlwLWlubmVyXFxcIiBuZy1iaW5kPVxcXCJjb250ZW50XFxcIj48L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cXG5cIiArXG4gICAgXCJcIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwiLFxuICAgIFwiPGRpdiBjbGFzcz1cXFwicG9wb3ZlciB7e3BsYWNlbWVudH19XFxcIiBuZy1jbGFzcz1cXFwieyBpbjogaXNPcGVuKCksIGZhZGU6IGFuaW1hdGlvbigpIH1cXFwiPlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwiYXJyb3dcXFwiPjwvZGl2PlxcblwiICtcbiAgICBcIlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwicG9wb3Zlci1pbm5lclxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgPGgzIGNsYXNzPVxcXCJwb3BvdmVyLXRpdGxlXFxcIiBuZy1iaW5kPVxcXCJ0aXRsZVxcXCIgbmctc2hvdz1cXFwidGl0bGVcXFwiPjwvaDM+XFxuXCIgK1xuICAgIFwiICAgICAgPGRpdiBjbGFzcz1cXFwicG9wb3Zlci1jb250ZW50XFxcIiBuZy1iaW5kPVxcXCJjb250ZW50XFxcIj48L2Rpdj5cXG5cIiArXG4gICAgXCIgIDwvZGl2PlxcblwiICtcbiAgICBcIjwvZGl2PlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sXCIsXG4gICAgXCI8ZGl2IGNsYXNzPVxcXCJwcm9ncmVzcy1iYXJcXFwiIG5nLWNsYXNzPVxcXCJ0eXBlICYmICdwcm9ncmVzcy1iYXItJyArIHR5cGVcXFwiIHJvbGU9XFxcInByb2dyZXNzYmFyXFxcIiBhcmlhLXZhbHVlbm93PVxcXCJ7e3ZhbHVlfX1cXFwiIGFyaWEtdmFsdWVtaW49XFxcIjBcXFwiIGFyaWEtdmFsdWVtYXg9XFxcInt7bWF4fX1cXFwiIG5nLXN0eWxlPVxcXCJ7d2lkdGg6IHBlcmNlbnQgKyAnJSd9XFxcIiBhcmlhLXZhbHVldGV4dD1cXFwie3twZXJjZW50IHwgbnVtYmVyOjB9fSVcXFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsXG4gICAgXCI8ZGl2IGNsYXNzPVxcXCJwcm9ncmVzc1xcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixcbiAgICBcIjxkaXYgY2xhc3M9XFxcInByb2dyZXNzXFxcIj5cXG5cIiArXG4gICAgXCIgIDxkaXYgY2xhc3M9XFxcInByb2dyZXNzLWJhclxcXCIgbmctY2xhc3M9XFxcInR5cGUgJiYgJ3Byb2dyZXNzLWJhci0nICsgdHlwZVxcXCIgcm9sZT1cXFwicHJvZ3Jlc3NiYXJcXFwiIGFyaWEtdmFsdWVub3c9XFxcInt7dmFsdWV9fVxcXCIgYXJpYS12YWx1ZW1pbj1cXFwiMFxcXCIgYXJpYS12YWx1ZW1heD1cXFwie3ttYXh9fVxcXCIgbmctc3R5bGU9XFxcInt3aWR0aDogcGVyY2VudCArICclJ31cXFwiIGFyaWEtdmFsdWV0ZXh0PVxcXCJ7e3BlcmNlbnQgfCBudW1iZXI6MH19JVxcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIiArXG4gICAgXCI8L2Rpdj5cIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sXCIsXG4gICAgXCI8c3BhbiBuZy1tb3VzZWxlYXZlPVxcXCJyZXNldCgpXFxcIiBuZy1rZXlkb3duPVxcXCJvbktleWRvd24oJGV2ZW50KVxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiIHJvbGU9XFxcInNsaWRlclxcXCIgYXJpYS12YWx1ZW1pbj1cXFwiMFxcXCIgYXJpYS12YWx1ZW1heD1cXFwie3tyYW5nZS5sZW5ndGh9fVxcXCIgYXJpYS12YWx1ZW5vdz1cXFwie3t2YWx1ZX19XFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGkgbmctcmVwZWF0PVxcXCJyIGluIHJhbmdlIHRyYWNrIGJ5ICRpbmRleFxcXCIgbmctbW91c2VlbnRlcj1cXFwiZW50ZXIoJGluZGV4ICsgMSlcXFwiIG5nLWNsaWNrPVxcXCJyYXRlKCRpbmRleCArIDEpXFxcIiBjbGFzcz1cXFwiZ2x5cGhpY29uXFxcIiBuZy1jbGFzcz1cXFwiJGluZGV4IDwgdmFsdWUgJiYgKHIuc3RhdGVPbiB8fCAnZ2x5cGhpY29uLXN0YXInKSB8fCAoci5zdGF0ZU9mZiB8fCAnZ2x5cGhpY29uLXN0YXItZW1wdHknKVxcXCI+XFxuXCIgK1xuICAgIFwiICAgICAgICA8c3BhbiBjbGFzcz1cXFwic3Itb25seVxcXCI+KHt7ICRpbmRleCA8IHZhbHVlID8gJyonIDogJyAnIH19KTwvc3Bhbj5cXG5cIiArXG4gICAgXCIgICAgPC9pPlxcblwiICtcbiAgICBcIjwvc3Bhbj5cIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdGFicy90YWIuaHRtbFwiLCBbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dChcInRlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIixcbiAgICBcIjxsaSBuZy1jbGFzcz1cXFwie2FjdGl2ZTogYWN0aXZlLCBkaXNhYmxlZDogZGlzYWJsZWR9XFxcIj5cXG5cIiArXG4gICAgXCIgIDxhIG5nLWNsaWNrPVxcXCJzZWxlY3QoKVxcXCIgdGFiLWhlYWRpbmctdHJhbnNjbHVkZT57e2hlYWRpbmd9fTwvYT5cXG5cIiArXG4gICAgXCI8L2xpPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbFwiLFxuICAgIFwiPGRpdj5cXG5cIiArXG4gICAgXCIgIDx1bCBjbGFzcz1cXFwibmF2IG5hdi17e3R5cGUgfHwgJ3RhYnMnfX1cXFwiIG5nLWNsYXNzPVxcXCJ7J25hdi1zdGFja2VkJzogdmVydGljYWwsICduYXYtanVzdGlmaWVkJzoganVzdGlmaWVkfVxcXCIgbmctdHJhbnNjbHVkZT48L3VsPlxcblwiICtcbiAgICBcIiAgPGRpdiBjbGFzcz1cXFwidGFiLWNvbnRlbnRcXFwiPlxcblwiICtcbiAgICBcIiAgICA8ZGl2IGNsYXNzPVxcXCJ0YWItcGFuZVxcXCIgXFxuXCIgK1xuICAgIFwiICAgICAgICAgbmctcmVwZWF0PVxcXCJ0YWIgaW4gdGFic1xcXCIgXFxuXCIgK1xuICAgIFwiICAgICAgICAgbmctY2xhc3M9XFxcInthY3RpdmU6IHRhYi5hY3RpdmV9XFxcIlxcblwiICtcbiAgICBcIiAgICAgICAgIHRhYi1jb250ZW50LXRyYW5zY2x1ZGU9XFxcInRhYlxcXCI+XFxuXCIgK1xuICAgIFwiICAgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgPC9kaXY+XFxuXCIgK1xuICAgIFwiPC9kaXY+XFxuXCIgK1xuICAgIFwiXCIpO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIixcbiAgICBcIjx0YWJsZT5cXG5cIiArXG4gICAgXCJcdDx0Ym9keT5cXG5cIiArXG4gICAgXCJcdFx0PHRyIGNsYXNzPVxcXCJ0ZXh0LWNlbnRlclxcXCI+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkPjxhIG5nLWNsaWNrPVxcXCJpbmNyZW1lbnRIb3VycygpXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1saW5rXFxcIj48c3BhbiBjbGFzcz1cXFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXFxcIj48L3NwYW4+PC9hPjwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkPiZuYnNwOzwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkPjxhIG5nLWNsaWNrPVxcXCJpbmNyZW1lbnRNaW51dGVzKClcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWxpbmtcXFwiPjxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXBcXFwiPjwvc3Bhbj48L2E+PC90ZD5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQgbmctc2hvdz1cXFwic2hvd01lcmlkaWFuXFxcIj48L3RkPlxcblwiICtcbiAgICBcIlx0XHQ8L3RyPlxcblwiICtcbiAgICBcIlx0XHQ8dHI+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkIHN0eWxlPVxcXCJ3aWR0aDo1MHB4O1xcXCIgY2xhc3M9XFxcImZvcm0tZ3JvdXBcXFwiIG5nLWNsYXNzPVxcXCJ7J2hhcy1lcnJvcic6IGludmFsaWRIb3Vyc31cXFwiPlxcblwiICtcbiAgICBcIlx0XHRcdFx0PGlucHV0IHR5cGU9XFxcInRleHRcXFwiIG5nLW1vZGVsPVxcXCJob3Vyc1xcXCIgbmctY2hhbmdlPVxcXCJ1cGRhdGVIb3VycygpXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sIHRleHQtY2VudGVyXFxcIiBuZy1tb3VzZXdoZWVsPVxcXCJpbmNyZW1lbnRIb3VycygpXFxcIiBuZy1yZWFkb25seT1cXFwicmVhZG9ubHlJbnB1dFxcXCIgbWF4bGVuZ3RoPVxcXCIyXFxcIj5cXG5cIiArXG4gICAgXCJcdFx0XHQ8L3RkPlxcblwiICtcbiAgICBcIlx0XHRcdDx0ZD46PC90ZD5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQgc3R5bGU9XFxcIndpZHRoOjUwcHg7XFxcIiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCIgbmctY2xhc3M9XFxcInsnaGFzLWVycm9yJzogaW52YWxpZE1pbnV0ZXN9XFxcIj5cXG5cIiArXG4gICAgXCJcdFx0XHRcdDxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBuZy1tb2RlbD1cXFwibWludXRlc1xcXCIgbmctY2hhbmdlPVxcXCJ1cGRhdGVNaW51dGVzKClcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXJcXFwiIG5nLXJlYWRvbmx5PVxcXCJyZWFkb25seUlucHV0XFxcIiBtYXhsZW5ndGg9XFxcIjJcXFwiPlxcblwiICtcbiAgICBcIlx0XHRcdDwvdGQ+XFxuXCIgK1xuICAgIFwiXHRcdFx0PHRkIG5nLXNob3c9XFxcInNob3dNZXJpZGlhblxcXCI+PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgdGV4dC1jZW50ZXJcXFwiIG5nLWNsaWNrPVxcXCJ0b2dnbGVNZXJpZGlhbigpXFxcIj57e21lcmlkaWFufX08L2J1dHRvbj48L3RkPlxcblwiICtcbiAgICBcIlx0XHQ8L3RyPlxcblwiICtcbiAgICBcIlx0XHQ8dHIgY2xhc3M9XFxcInRleHQtY2VudGVyXFxcIj5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQ+PGEgbmctY2xpY2s9XFxcImRlY3JlbWVudEhvdXJzKClcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWxpbmtcXFwiPjxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93blxcXCI+PC9zcGFuPjwvYT48L3RkPlxcblwiICtcbiAgICBcIlx0XHRcdDx0ZD4mbmJzcDs8L3RkPlxcblwiICtcbiAgICBcIlx0XHRcdDx0ZD48YSBuZy1jbGljaz1cXFwiZGVjcmVtZW50TWludXRlcygpXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1saW5rXFxcIj48c3BhbiBjbGFzcz1cXFwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd25cXFwiPjwvc3Bhbj48L2E+PC90ZD5cXG5cIiArXG4gICAgXCJcdFx0XHQ8dGQgbmctc2hvdz1cXFwic2hvd01lcmlkaWFuXFxcIj48L3RkPlxcblwiICtcbiAgICBcIlx0XHQ8L3RyPlxcblwiICtcbiAgICBcIlx0PC90Ym9keT5cXG5cIiArXG4gICAgXCI8L3RhYmxlPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIixcbiAgICBcIjxhIHRhYmluZGV4PVxcXCItMVxcXCIgYmluZC1odG1sLXVuc2FmZT1cXFwibWF0Y2gubGFiZWwgfCB0eXBlYWhlYWRIaWdobGlnaHQ6cXVlcnlcXFwiPjwvYT5cIik7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCIsXG4gICAgXCI8dWwgY2xhc3M9XFxcImRyb3Bkb3duLW1lbnVcXFwiIG5nLXNob3c9XFxcImlzT3BlbigpXFxcIiBuZy1zdHlsZT1cXFwie3RvcDogcG9zaXRpb24udG9wKydweCcsIGxlZnQ6IHBvc2l0aW9uLmxlZnQrJ3B4J31cXFwiIHN0eWxlPVxcXCJkaXNwbGF5OiBibG9jaztcXFwiIHJvbGU9XFxcImxpc3Rib3hcXFwiIGFyaWEtaGlkZGVuPVxcXCJ7eyFpc09wZW4oKX19XFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGxpIG5nLXJlcGVhdD1cXFwibWF0Y2ggaW4gbWF0Y2hlcyB0cmFjayBieSAkaW5kZXhcXFwiIG5nLWNsYXNzPVxcXCJ7YWN0aXZlOiBpc0FjdGl2ZSgkaW5kZXgpIH1cXFwiIG5nLW1vdXNlZW50ZXI9XFxcInNlbGVjdEFjdGl2ZSgkaW5kZXgpXFxcIiBuZy1jbGljaz1cXFwic2VsZWN0TWF0Y2goJGluZGV4KVxcXCIgcm9sZT1cXFwib3B0aW9uXFxcIiBpZD1cXFwie3ttYXRjaC5pZH19XFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxkaXYgdHlwZWFoZWFkLW1hdGNoIGluZGV4PVxcXCIkaW5kZXhcXFwiIG1hdGNoPVxcXCJtYXRjaFxcXCIgcXVlcnk9XFxcInF1ZXJ5XFxcIiB0ZW1wbGF0ZS11cmw9XFxcInRlbXBsYXRlVXJsXFxcIj48L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgPC9saT5cXG5cIiArXG4gICAgXCI8L3VsPlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcbiIsIi8qXG4gQW5ndWxhckpTIHYxLjIuMjZcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihwLGYsbil7J3VzZSBzdHJpY3QnO2YubW9kdWxlKFwibmdDb29raWVzXCIsW1wibmdcIl0pLmZhY3RvcnkoXCIkY29va2llc1wiLFtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsZnVuY3Rpb24oZSxiKXt2YXIgYz17fSxnPXt9LGgsaz0hMSxsPWYuY29weSxtPWYuaXNVbmRlZmluZWQ7Yi5hZGRQb2xsRm4oZnVuY3Rpb24oKXt2YXIgYT1iLmNvb2tpZXMoKTtoIT1hJiYoaD1hLGwoYSxnKSxsKGEsYyksayYmZS4kYXBwbHkoKSl9KSgpO2s9ITA7ZS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYSxkLGU7Zm9yKGEgaW4gZyltKGNbYV0pJiZiLmNvb2tpZXMoYSxuKTtmb3IoYSBpbiBjKWQ9Y1thXSxmLmlzU3RyaW5nKGQpfHwoZD1cIlwiK2QsY1thXT1kKSxkIT09Z1thXSYmKGIuY29va2llcyhhLGQpLGU9ITApO2lmKGUpZm9yKGEgaW4gZD1iLmNvb2tpZXMoKSxjKWNbYV0hPT1kW2FdJiYobShkW2FdKT9kZWxldGUgY1thXTpjW2FdPWRbYV0pfSk7cmV0dXJuIGN9XSkuZmFjdG9yeShcIiRjb29raWVTdG9yZVwiLFxuW1wiJGNvb2tpZXNcIixmdW5jdGlvbihlKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKGIpe3JldHVybihiPWVbYl0pP2YuZnJvbUpzb24oYik6Yn0scHV0OmZ1bmN0aW9uKGIsYyl7ZVtiXT1mLnRvSnNvbihjKX0scmVtb3ZlOmZ1bmN0aW9uKGIpe2RlbGV0ZSBlW2JdfX19XSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1jb29raWVzLm1pbi5qcy5tYXBcbiIsImFuZ3VsYXIubW9kdWxlKFwiZm9ybWx5LnJlbmRlclwiLFtdKSxhbmd1bGFyLm1vZHVsZShcImZvcm1seVwiLFtcImZvcm1seS5yZW5kZXJcIl0pLGFuZ3VsYXIubW9kdWxlKFwiZm9ybWx5LnJlbmRlclwiKS5kaXJlY3RpdmUoXCJmb3JtbHlGaWVsZFwiLFtcIiRodHRwXCIsXCIkY29tcGlsZVwiLFwiJHRlbXBsYXRlQ2FjaGVcIixcImZvcm1seVRlbXBsYXRlXCIsZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJue3Jlc3RyaWN0OlwiQUVcIix0cmFuc2NsdWRlOiEwLHNjb3BlOntvcHRpb25zRGF0YTpcIiZvcHRpb25zXCIsZm9ybUlkOlwiPWZvcm1JZFwiLGluZGV4OlwiPWluZGV4XCIsdmFsdWU6XCI9Zm9ybVZhbHVlXCIscmVzdWx0OlwiPWZvcm1SZXN1bHRcIn0sbGluazpmdW5jdGlvbihlLGYpe2Z1bmN0aW9uIGcoYSl7Zi5odG1sKGEpLGIoZi5jb250ZW50cygpKShlKX12YXIgaD1lLm9wdGlvbnMudGVtcGxhdGU7aWYoaClnKGgpO2Vsc2V7dmFyIGk9ZS5vcHRpb25zLnRlbXBsYXRlVXJsfHxkLmdldFRlbXBsYXRlVXJsKGUub3B0aW9ucy50eXBlKTtpP2EuZ2V0KGkse2NhY2hlOmN9KS50aGVuKGZ1bmN0aW9uKGEpe2coYS5kYXRhKX0sZnVuY3Rpb24oYSl7Y29uc29sZS5sb2coXCJGb3JtbHkgRXJyb3I6IFByb2JsZW0gbG9hZGluZyB0ZW1wbGF0ZSBmb3IgXCIraSxhKX0pOmNvbnNvbGUubG9nKFwiRm9ybWx5IEVycm9yOiB0ZW1wbGF0ZSB0eXBlICdcIitlLm9wdGlvbnMudHlwZStcIicgbm90IHN1cHBvcnRlZC5cIil9fSxjb250cm9sbGVyOltcIiRzY29wZVwiLGZ1bmN0aW9uKGEpe2Eub3B0aW9ucz1hLm9wdGlvbnNEYXRhKCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEub3B0aW9ucy5kZWZhdWx0JiYoYS52YWx1ZT1hLm9wdGlvbnMuZGVmYXVsdCk7dmFyIGI9YS5vcHRpb25zLnR5cGU7IWImJmEub3B0aW9ucy50ZW1wbGF0ZT9iPVwidGVtcGxhdGVcIjohYiYmYS5vcHRpb25zLnRlbXBsYXRlVXJsJiYoYj1cInRlbXBsYXRlVXJsXCIpLGEuaWQ9YS5mb3JtSWQrYithLmluZGV4fV19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZm9ybWx5LnJlbmRlclwiKS5kaXJlY3RpdmUoXCJmb3JtbHlGb3JtXCIsW1wiZm9ybWx5T3B0aW9uc1wiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGIpe3ZhciBjPSduZy1oaWRlPVwiZmllbGQuaGlkZVwiJyxkPVsnPGZvcm1seS1maWVsZCBuZy1yZXBlYXQ9XCJmaWVsZCBpbiBmaWVsZHNcIicsJ29wdGlvbnM9XCJmaWVsZFwiJywnZm9ybS1yZXN1bHQ9XCJyZXN1bHRcIicsJ2Zvcm0tdmFsdWU9XCJyZXN1bHRbZmllbGQua2V5fHwkaW5kZXhdXCInLCdmb3JtLWlkPVwib3B0aW9ucy51bmlxdWVGb3JtSWRcIicsJ25nLWhpZGU9XCJmaWVsZC5oaWRlXCInLCdpbmRleD1cIiRpbmRleFwiPicsXCI8L2Zvcm1seS1maWVsZD5cIl0uam9pbihcIiBcIik7cmV0dXJue3Jlc3RyaWN0OlwiQUVcIix0ZW1wbGF0ZTpmdW5jdGlvbigpe2EuZ2V0T3B0aW9ucygpLnVzZU5nSWZUb0hpZGU7cmV0dXJuWyc8Zm9ybSBjbGFzcz1cImZvcm1seVwiIHJvbGU9XCJmb3JtXCI+JywnPGRpdiBjbGFzcz1cIm5nLWhpZGVcIj5maWVsZHM8L2Rpdj4nLCc8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIicsJ25nLXNob3c9XCIhb3B0aW9ucy5oaWRlU3VibWl0XCI+Jywne3tvcHRpb25zLnN1Ym1pdENvcHkgfHwgXCJTdWJtaXRcIn19JyxcIjwvYnV0dG9uPlwiLFwiPC9mb3JtPlwiXS5qb2luKFwiIFwiKX0scmVwbGFjZTohMCxzY29wZTp7ZmllbGRzOlwiPVwiLG9wdGlvbnM6XCI9P1wiLHJlc3VsdDpcIj1cIixmb3JtT25QYXJlbnRTY29wZTpcIj1uYW1lXCJ9LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cG9zdDpmdW5jdGlvbihlLGYsZyl7ZS5vcHRpb25zPWFuZ3VsYXIuZXh0ZW5kKGEuZ2V0T3B0aW9ucygpLGUub3B0aW9ucyksZS5vcHRpb25zLnN1Ym1pdEJ1dHRvblRlbXBsYXRlJiZmLmZpbmQoXCJidXR0b25cIikucmVwbGFjZVdpdGgoYihlLm9wdGlvbnMuc3VibWl0QnV0dG9uVGVtcGxhdGUpKGUpKTt2YXIgaD1kO2Uub3B0aW9ucy51c2VOZ0lmVG9IaWRlJiYoaD1oLnJlcGxhY2UoYywnbmctaWY9XCIhZmllbGQuaGlkZVwiJykpLGYuZmluZChcImRpdlwiKS5yZXBsYWNlV2l0aChiKGgpKGUpKSxlLmZvcm1PblBhcmVudFNjb3BlPWVbZy5uYW1lXX19fSxjb250cm9sbGVyOltcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYixjKXthbmd1bGFyLmZvckVhY2goYS5maWVsZHMsZnVuY3Rpb24oYil7aWYoYW5ndWxhci5pc0RlZmluZWQoYi53YXRjaCkmJmFuZ3VsYXIuaXNEZWZpbmVkKGIud2F0Y2guZXhwcmVzc2lvbikmJmFuZ3VsYXIuaXNEZWZpbmVkKGIud2F0Y2gubGlzdGVuZXIpKXt2YXIgYz1iLndhdGNoLmV4cHJlc3Npb247YW5ndWxhci5pc0Z1bmN0aW9uKGMpJiYoYz1mdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gYS51bnNoaWZ0KGIpLGIud2F0Y2guZXhwcmVzc2lvbi5hcHBseSh0aGlzLGEpfSksYS4kd2F0Y2goYyxmdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gYS51bnNoaWZ0KGIpLGIud2F0Y2gubGlzdGVuZXIuYXBwbHkodGhpcyxhKX0pfX0pLGEuJHdhdGNoKFwicmVzdWx0XCIsZnVuY3Rpb24oKXthbmd1bGFyLmZvckVhY2goYS5maWVsZHMsZnVuY3Rpb24oYil7Yi5oaWRlRXhwcmVzc2lvbiYmKGIuaGlkZT1jKGIuaGlkZUV4cHJlc3Npb24pKGEucmVzdWx0KSksYi5yZXF1aXJlZEV4cHJlc3Npb24mJihiLnJlcXVpcmVkPWMoYi5yZXF1aXJlZEV4cHJlc3Npb24pKGEucmVzdWx0KSl9KX0sITApfV19fV0pLGFuZ3VsYXIubW9kdWxlKFwiZm9ybWx5LnJlbmRlclwiKS5wcm92aWRlcihcImZvcm1seU9wdGlvbnNcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixkKXtcInN0cmluZ1wiPT10eXBlb2YgYj9jW2JdPWQ6YW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYixjKXthKGMsYil9KX1mdW5jdGlvbiBiKCl7cmV0dXJuIGFuZ3VsYXIuY29weShjKX12YXIgYz17dW5pcXVlRm9ybUlkOm51bGwsc3VibWl0Q29weTpcIlN1Ym1pdFwiLGhpZGVTdWJtaXQ6ITEsc3VibWl0QnV0dG9uVGVtcGxhdGU6bnVsbCx1c2VOZ0lmVG9IaWRlOiExfTt0aGlzLnNldE9wdGlvbj1hLHRoaXMuZ2V0T3B0aW9ucz1iLHRoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzfX0pLGFuZ3VsYXIubW9kdWxlKFwiZm9ybWx5LnJlbmRlclwiKS5wcm92aWRlcihcImZvcm1seVRlbXBsYXRlXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsZCl7XCJzdHJpbmdcIj09dHlwZW9mIGI/Y1tiXT1kOmFuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIsYyl7YShjLGIpfSl9ZnVuY3Rpb24gYihhKXtyZXR1cm4gY1thXX12YXIgYz17dGV4dGFyZWE6XCJkaXJlY3RpdmVzL2Zvcm1seS1maWVsZC10ZXh0YXJlYS5odG1sXCIscmFkaW86XCJkaXJlY3RpdmVzL2Zvcm1seS1maWVsZC1yYWRpby5odG1sXCIsc2VsZWN0OlwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtc2VsZWN0Lmh0bWxcIixudW1iZXI6XCJkaXJlY3RpdmVzL2Zvcm1seS1maWVsZC1udW1iZXIuaHRtbFwiLGNoZWNrYm94OlwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtY2hlY2tib3guaHRtbFwiLHBhc3N3b3JkOlwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtcGFzc3dvcmQuaHRtbFwiLGhpZGRlbjpcImRpcmVjdGl2ZXMvZm9ybWx5LWZpZWxkLWhpZGRlbi5odG1sXCIsZW1haWw6XCJkaXJlY3RpdmVzL2Zvcm1seS1maWVsZC1lbWFpbC5odG1sXCIsdGV4dDpcImRpcmVjdGl2ZXMvZm9ybWx5LWZpZWxkLXRleHQuaHRtbFwifTt0aGlzLnNldFRlbXBsYXRlVXJsPWEsdGhpcy5nZXRUZW1wbGF0ZVVybD1iLHRoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzfX0pLGFuZ3VsYXIubW9kdWxlKFwiZm9ybWx5LnJlbmRlclwiKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjthLnB1dChcImRpcmVjdGl2ZXMvZm9ybWx5LWZpZWxkLWNoZWNrYm94Lmh0bWxcIixcIjxkaXYgY2xhc3M9Y2hlY2tib3g+PGxhYmVsPjxpbnB1dCB0eXBlPWNoZWNrYm94IGFyaWEtZGVzY3JpYmVkYnk9e3tpZH19X2Rlc2NyaXB0aW9uIG5nLXJlcXVpcmVkPW9wdGlvbnMucmVxdWlyZWQgbmctZGlzYWJsZWQ9b3B0aW9ucy5kaXNhYmxlZCBuZy1tb2RlbD12YWx1ZT4ge3tvcHRpb25zLmxhYmVsIHx8ICdDaGVja2JveCd9fSB7e29wdGlvbnMucmVxdWlyZWQgPyAnKicgOiAnJ319PC9sYWJlbD48cCBpZD17e2lkfX1fZGVzY3JpcHRpb24gY2xhc3M9aGVscC1ibG9jayBuZy1pZj1vcHRpb25zLmRlc2NyaXB0aW9uPnt7b3B0aW9ucy5kZXNjcmlwdGlvbn19PC9wPjwvZGl2PlwiKSxhLnB1dChcImRpcmVjdGl2ZXMvZm9ybWx5LWZpZWxkLWVtYWlsLmh0bWxcIixcIjxkaXYgY2xhc3M9Zm9ybS1ncm91cD48bGFiZWwgZm9yPXt7aWR9fT57e29wdGlvbnMubGFiZWwgfHwgJ0VtYWlsJ319IHt7b3B0aW9ucy5yZXF1aXJlZCA/ICcqJyA6ICcnfX08L2xhYmVsPjxpbnB1dCB0eXBlPWVtYWlsIGNsYXNzPWZvcm0tY29udHJvbCBpZD17e2lkfX0gcGxhY2Vob2xkZXI9e3tvcHRpb25zLnBsYWNlaG9sZGVyfX0gYXJpYS1kZXNjcmliZWRieT17e2lkfX1fZGVzY3JpcHRpb24gbmctcmVxdWlyZWQ9b3B0aW9ucy5yZXF1aXJlZCBuZy1kaXNhYmxlZD1vcHRpb25zLmRpc2FibGVkIG5nLW1vZGVsPXZhbHVlPjxwIGlkPXt7aWR9fV9kZXNjcmlwdGlvbiBjbGFzcz1oZWxwLWJsb2NrIG5nLWlmPW9wdGlvbnMuZGVzY3JpcHRpb24+e3tvcHRpb25zLmRlc2NyaXB0aW9ufX08L3A+PC9kaXY+XCIpLGEucHV0KFwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtaGlkZGVuLmh0bWxcIixcIjxpbnB1dCB0eXBlPWhpZGRlbiBuZy1tb2RlbD12YWx1ZT5cIiksYS5wdXQoXCJkaXJlY3RpdmVzL2Zvcm1seS1maWVsZC1udW1iZXIuaHRtbFwiLFwiPGRpdiBjbGFzcz1mb3JtLWdyb3VwPjxsYWJlbCBmb3I9e3tpZH19Pnt7b3B0aW9ucy5sYWJlbCB8fCAnTnVtYmVyJ319IHt7b3B0aW9ucy5yZXF1aXJlZCA/ICcqJyA6ICcnfX08L2xhYmVsPjxpbnB1dCB0eXBlPW51bWJlciBjbGFzcz1mb3JtLWNvbnRyb2wgaWQ9e3tpZH19IHBsYWNlaG9sZGVyPXt7b3B0aW9ucy5wbGFjZWhvbGRlcn19IGFyaWEtZGVzY3JpYmVkYnk9e3tpZH19X2Rlc2NyaXB0aW9uIG5nLXJlcXVpcmVkPW9wdGlvbnMucmVxdWlyZWQgbmctZGlzYWJsZWQ9b3B0aW9ucy5kaXNhYmxlZCBtaW49e3tvcHRpb25zLm1pbn19IG1heD17e29wdGlvbnMubWF4fX0gbmctbWlubGVuZ3RoPXt7b3B0aW9ucy5taW5sZW5ndGh9fSBuZy1tYXhsZW5ndGg9e3tvcHRpb25zLm1heGxlbmd0aH19IG5nLW1vZGVsPXZhbHVlPjxwIGlkPXt7aWR9fV9kZXNjcmlwdGlvbiBjbGFzcz1oZWxwLWJsb2NrIG5nLWlmPW9wdGlvbnMuZGVzY3JpcHRpb24+e3tvcHRpb25zLmRlc2NyaXB0aW9ufX08L3A+PC9kaXY+XCIpLGEucHV0KFwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtcGFzc3dvcmQuaHRtbFwiLFwiPGRpdiBjbGFzcz1mb3JtLWdyb3VwPjxsYWJlbCBmb3I9e3tpZH19Pnt7b3B0aW9ucy5sYWJlbCB8fCAnUGFzc3dvcmQnfX0ge3tvcHRpb25zLnJlcXVpcmVkID8gJyonIDogJyd9fTwvbGFiZWw+PGlucHV0IHR5cGU9cGFzc3dvcmQgY2xhc3M9Zm9ybS1jb250cm9sIGlkPXt7aWR9fSBhcmlhLWRlc2NyaWJlZGJ5PXt7aWR9fV9kZXNjcmlwdGlvbiBuZy1yZXF1aXJlZD1vcHRpb25zLnJlcXVpcmVkIG5nLWRpc2FibGVkPW9wdGlvbnMuZGlzYWJsZWQgbmctdHJpbT1cXFwie3tvcHRpb25zLnRyaW1XaGl0ZXNwYWNlIHx8IGZhbHNlfX1cXFwiIG5nLW1vZGVsPXZhbHVlPjxwIGlkPXt7aWR9fV9kZXNjcmlwdGlvbiBjbGFzcz1oZWxwLWJsb2NrIG5nLWlmPW9wdGlvbnMuZGVzY3JpcHRpb24+e3tvcHRpb25zLmRlc2NyaXB0aW9ufX08L3A+PC9kaXY+XCIpLGEucHV0KFwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtcmFkaW8uaHRtbFwiLFwiPGRpdiBjbGFzcz1yYWRpby1ncm91cD48bGFiZWwgY2xhc3M9Y29udHJvbC1sYWJlbD57e29wdGlvbnMubGFiZWx9fSB7e29wdGlvbnMucmVxdWlyZWQgPyAnKicgOiAnJ319PC9sYWJlbD48ZGl2IGNsYXNzPXJhZGlvIG5nLXJlcGVhdD1cXFwiKGtleSwgb3B0aW9uKSBpbiBvcHRpb25zLm9wdGlvbnNcXFwiPjxsYWJlbD48aW5wdXQgdHlwZT1yYWRpbyBuYW1lPXt7aWR9fSBpZD1cXFwie3tpZCArICdfJysgJGluZGV4fX1cXFwiIGFyaWEtZGVzY3JpYmVkYnk9e3tpZH19X2Rlc2NyaXB0aW9uIG5nLXZhbHVlPW9wdGlvbi52YWx1ZSBuZy1yZXF1aXJlZD1vcHRpb25zLnJlcXVpcmVkIG5nLW1vZGVsPSRwYXJlbnQudmFsdWU+IHt7b3B0aW9uLm5hbWV9fTwvbGFiZWw+PHAgaWQ9e3tpZH19X2Rlc2NyaXB0aW9uIGNsYXNzPWhlbHAtYmxvY2sgbmctaWY9b3B0aW9uLmRlc2NyaXB0aW9uPnt7b3B0aW9uLmRlc2NyaXB0aW9ufX08L3A+PC9kaXY+PC9kaXY+XCIpLGEucHV0KFwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtc2VsZWN0Lmh0bWxcIixcIjxkaXYgY2xhc3M9Zm9ybS1ncm91cD48bGFiZWwgZm9yPXt7aWR9fT57e29wdGlvbnMubGFiZWwgfHwgJ1NlbGVjdCd9fSB7e29wdGlvbnMucmVxdWlyZWQgPyAnKicgOiAnJ319PC9sYWJlbD48c2VsZWN0IGNsYXNzPWZvcm0tY29udHJvbCBpZD17e2lkfX0gYXJpYS1kZXNjcmliZWRieT17e2lkfX1fZGVzY3JpcHRpb24gbmctbW9kZWw9dmFsdWUgbmctcmVxdWlyZWQ9b3B0aW9ucy5yZXF1aXJlZCBuZy1kaXNhYmxlZD1vcHRpb25zLmRpc2FibGVkIG5nLWluaXQ9XFxcInZhbHVlID0gb3B0aW9ucy5kZWZhdWx0XFxcIiBuZy1vcHRpb25zPVxcXCJvcHRpb24ubmFtZSBhcyBvcHRpb24ubmFtZSBncm91cCBieSBvcHRpb24uZ3JvdXAgZm9yIG9wdGlvbiBpbiBvcHRpb25zLm9wdGlvbnNcXFwiPjwvc2VsZWN0PjxwIGlkPXt7aWR9fV9kZXNjcmlwdGlvbiBjbGFzcz1oZWxwLWJsb2NrIG5nLWlmPW9wdGlvbnMuZGVzY3JpcHRpb24+e3tvcHRpb25zLmRlc2NyaXB0aW9ufX08L3A+PC9kaXY+XCIpLGEucHV0KFwiZGlyZWN0aXZlcy9mb3JtbHktZmllbGQtdGV4dC5odG1sXCIsXCI8ZGl2IGNsYXNzPWZvcm0tZ3JvdXA+PGxhYmVsIGZvcj17e2lkfX0+e3tvcHRpb25zLmxhYmVsIHx8ICdUZXh0J319IHt7b3B0aW9ucy5yZXF1aXJlZCA/ICcqJyA6ICcnfX08L2xhYmVsPjxpbnB1dCB0eXBlPXRleHQgY2xhc3M9Zm9ybS1jb250cm9sIGlkPXt7aWR9fSBwbGFjZWhvbGRlcj17e29wdGlvbnMucGxhY2Vob2xkZXJ9fSBhcmlhLWRlc2NyaWJlZGJ5PXt7aWR9fV9kZXNjcmlwdGlvbiBuZy1yZXF1aXJlZD1vcHRpb25zLnJlcXVpcmVkIG5nLWRpc2FibGVkPW9wdGlvbnMuZGlzYWJsZWQgbmctbW9kZWw9dmFsdWU+PHAgaWQ9e3tpZH19X2Rlc2NyaXB0aW9uIGNsYXNzPWhlbHAtYmxvY2sgbmctaWY9b3B0aW9ucy5kZXNjcmlwdGlvbj57e29wdGlvbnMuZGVzY3JpcHRpb259fTwvcD48L2Rpdj5cIiksYS5wdXQoXCJkaXJlY3RpdmVzL2Zvcm1seS1maWVsZC10ZXh0YXJlYS5odG1sXCIsXCI8ZGl2IGNsYXNzPWZvcm0tZ3JvdXA+PGxhYmVsIGZvcj17e2lkfX0+e3tvcHRpb25zLmxhYmVsIHx8ICdUZXh0J319IHt7b3B0aW9ucy5yZXF1aXJlZCA/ICcqJyA6ICcnfX08L2xhYmVsPjx0ZXh0YXJlYSB0eXBlPXRleHQgY2xhc3M9Zm9ybS1jb250cm9sIGlkPXt7aWR9fSByb3dzPXt7b3B0aW9ucy5saW5lc319IHBsYWNlaG9sZGVyPXt7b3B0aW9ucy5wbGFjZWhvbGRlcn19IGFyaWEtZGVzY3JpYmVkYnk9e3tpZH19X2Rlc2NyaXB0aW9uIG5nLXJlcXVpcmVkPW9wdGlvbnMucmVxdWlyZWQgbmctZGlzYWJsZWQ9b3B0aW9ucy5kaXNhYmxlZCBuZy1tb2RlbD12YWx1ZT5cXG5cdDwvdGV4dGFyZWE+PHAgaWQ9e3tpZH19X2Rlc2NyaXB0aW9uIGNsYXNzPWhlbHAtYmxvY2sgbmctaWY9b3B0aW9ucy5kZXNjcmlwdGlvbj57e29wdGlvbnMuZGVzY3JpcHRpb259fTwvcD48L2Rpdj5cIiksYS5wdXQoXCJkaXJlY3RpdmVzL2Zvcm1seS1maWVsZC5odG1sXCIsXCJcIiksYS5wdXQoXCJkaXJlY3RpdmVzL2Zvcm1seS1mb3JtLmh0bWxcIiwnPGZvcm0gY2xhc3M9Zm9ybWx5IHJvbGU9Zm9ybT48Zm9ybWx5LWZpZWxkIG5nLXJlcGVhdD1cImZpZWxkIGluIGZpZWxkc1wiIG9wdGlvbnM9ZmllbGQgZm9ybS12YWx1ZT1yZXN1bHRbZmllbGQua2V5fHwkaW5kZXhdIGNsYXNzPWZvcm1seS1maWVsZCBmb3JtLWlkPW9wdGlvbnMudW5pcXVlRm9ybUlkIGluZGV4PSRpbmRleCBuZy1oaWRlPWZpZWxkLmhpZGU+PC9mb3JtbHktZmllbGQ+PGJ1dHRvbiB0eXBlPXN1Ym1pdCBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIG5nLWhpZGU9b3B0aW9ucy5oaWRlU3VibWl0Pnt7b3B0aW9ucy5zdWJtaXRDb3B5IHx8IFwiU3VibWl0XCJ9fTwvYnV0dG9uPjwvZm9ybT4nKX1dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvcm1seS5ib290c3RyYXAubWluLm1hcCIsIi8qISBcbiAqIGFuZ3VsYXItbG9hZGluZy1iYXIgdjAuNi4wXG4gKiBodHRwczovL2NoaWVmZmFuY3lwYW50cy5naXRodWIuaW8vYW5ndWxhci1sb2FkaW5nLWJhclxuICogQ29weXJpZ2h0IChjKSAyMDE0IFdlcyBDcnV2ZXJcbiAqIExpY2Vuc2U6IE1JVFxuICovXG4hZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjthbmd1bGFyLm1vZHVsZShcImFuZ3VsYXItbG9hZGluZy1iYXJcIixbXCJjZnAubG9hZGluZ0JhckludGVyY2VwdG9yXCJdKSxhbmd1bGFyLm1vZHVsZShcImNoaWVmZmFuY3lwYW50cy5sb2FkaW5nQmFyXCIsW1wiY2ZwLmxvYWRpbmdCYXJJbnRlcmNlcHRvclwiXSksYW5ndWxhci5tb2R1bGUoXCJjZnAubG9hZGluZ0JhckludGVyY2VwdG9yXCIsW1wiY2ZwLmxvYWRpbmdCYXJcIl0pLmNvbmZpZyhbXCIkaHR0cFByb3ZpZGVyXCIsZnVuY3Rpb24oYSl7dmFyIGI9W1wiJHFcIixcIiRjYWNoZUZhY3RvcnlcIixcIiR0aW1lb3V0XCIsXCIkcm9vdFNjb3BlXCIsXCJjZnBMb2FkaW5nQmFyXCIsZnVuY3Rpb24oYixjLGQsZSxmKXtmdW5jdGlvbiBnKCl7ZC5jYW5jZWwoaSksZi5jb21wbGV0ZSgpLGs9MCxqPTB9ZnVuY3Rpb24gaChiKXt2YXIgZCxlPWMuZ2V0KFwiJGh0dHBcIiksZj1hLmRlZmF1bHRzOyFiLmNhY2hlJiYhZi5jYWNoZXx8Yi5jYWNoZT09PSExfHxcIkdFVFwiIT09Yi5tZXRob2QmJlwiSlNPTlBcIiE9PWIubWV0aG9kfHwoZD1hbmd1bGFyLmlzT2JqZWN0KGIuY2FjaGUpP2IuY2FjaGU6YW5ndWxhci5pc09iamVjdChmLmNhY2hlKT9mLmNhY2hlOmUpO3ZhciBnPXZvaWQgMCE9PWQ/dm9pZCAwIT09ZC5nZXQoYi51cmwpOiExO3JldHVybiB2b2lkIDAhPT1iLmNhY2hlZCYmZyE9PWIuY2FjaGVkP2IuY2FjaGVkOihiLmNhY2hlZD1nLGcpfXZhciBpLGo9MCxrPTAsbD1mLmxhdGVuY3lUaHJlc2hvbGQ7cmV0dXJue3JlcXVlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaWdub3JlTG9hZGluZ0Jhcnx8aChhKXx8KGUuJGJyb2FkY2FzdChcImNmcExvYWRpbmdCYXI6bG9hZGluZ1wiLHt1cmw6YS51cmx9KSwwPT09aiYmKGk9ZChmdW5jdGlvbigpe2Yuc3RhcnQoKX0sbCkpLGorKyxmLnNldChrL2opKSxhfSxyZXNwb25zZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb25maWcuaWdub3JlTG9hZGluZ0Jhcnx8aChhLmNvbmZpZyl8fChrKyssZS4kYnJvYWRjYXN0KFwiY2ZwTG9hZGluZ0Jhcjpsb2FkZWRcIix7dXJsOmEuY29uZmlnLnVybH0pLGs+PWo/ZygpOmYuc2V0KGsvaikpLGF9LHJlc3BvbnNlRXJyb3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29uZmlnLmlnbm9yZUxvYWRpbmdCYXJ8fGgoYS5jb25maWcpfHwoaysrLGUuJGJyb2FkY2FzdChcImNmcExvYWRpbmdCYXI6bG9hZGVkXCIse3VybDphLmNvbmZpZy51cmx9KSxrPj1qP2coKTpmLnNldChrL2opKSxiLnJlamVjdChhKX19fV07YS5pbnRlcmNlcHRvcnMucHVzaChiKX1dKSxhbmd1bGFyLm1vZHVsZShcImNmcC5sb2FkaW5nQmFyXCIsW10pLnByb3ZpZGVyKFwiY2ZwTG9hZGluZ0JhclwiLGZ1bmN0aW9uKCl7dGhpcy5pbmNsdWRlU3Bpbm5lcj0hMCx0aGlzLmluY2x1ZGVCYXI9ITAsdGhpcy5sYXRlbmN5VGhyZXNob2xkPTEwMCx0aGlzLnN0YXJ0U2l6ZT0uMDIsdGhpcy5wYXJlbnRTZWxlY3Rvcj1cImJvZHlcIix0aGlzLnNwaW5uZXJUZW1wbGF0ZT0nPGRpdiBpZD1cImxvYWRpbmctYmFyLXNwaW5uZXJcIj48ZGl2IGNsYXNzPVwic3Bpbm5lci1pY29uXCI+PC9kaXY+PC9kaXY+Jyx0aGlzLmxvYWRpbmdCYXJUZW1wbGF0ZT0nPGRpdiBpZD1cImxvYWRpbmctYmFyXCI+PGRpdiBjbGFzcz1cImJhclwiPjxkaXYgY2xhc3M9XCJwZWdcIj48L2Rpdj48L2Rpdj48L2Rpdj4nLHRoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiRkb2N1bWVudFwiLFwiJHRpbWVvdXRcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKCl7a3x8KGs9YS5nZXQoXCIkYW5pbWF0ZVwiKSk7dmFyIGU9Yi5maW5kKG4pLmVxKDApO2MuY2FuY2VsKG0pLHJ8fChkLiRicm9hZGNhc3QoXCJjZnBMb2FkaW5nQmFyOnN0YXJ0ZWRcIikscj0hMCx1JiZrLmVudGVyKG8sZSksdCYmay5lbnRlcihxLGUpLGYodikpfWZ1bmN0aW9uIGYoYSl7aWYocil7dmFyIGI9MTAwKmErXCIlXCI7cC5jc3MoXCJ3aWR0aFwiLGIpLHM9YSxjLmNhbmNlbChsKSxsPWMoZnVuY3Rpb24oKXtnKCl9LDI1MCl9fWZ1bmN0aW9uIGcoKXtpZighKGgoKT49MSkpe3ZhciBhPTAsYj1oKCk7YT1iPj0wJiYuMjU+Yj8oMypNYXRoLnJhbmRvbSgpKzMpLzEwMDpiPj0uMjUmJi42NT5iPzMqTWF0aC5yYW5kb20oKS8xMDA6Yj49LjY1JiYuOT5iPzIqTWF0aC5yYW5kb20oKS8xMDA6Yj49LjkmJi45OT5iPy4wMDU6MDt2YXIgYz1oKCkrYTtmKGMpfX1mdW5jdGlvbiBoKCl7cmV0dXJuIHN9ZnVuY3Rpb24gaSgpe3M9MCxyPSExfWZ1bmN0aW9uIGooKXtrfHwoaz1hLmdldChcIiRhbmltYXRlXCIpKSxkLiRicm9hZGNhc3QoXCJjZnBMb2FkaW5nQmFyOmNvbXBsZXRlZFwiKSxmKDEpLGMuY2FuY2VsKG0pLG09YyhmdW5jdGlvbigpe3ZhciBhPWsubGVhdmUobyxpKTthJiZhLnRoZW4mJmEudGhlbihpKSxrLmxlYXZlKHEpfSw1MDApfXZhciBrLGwsbSxuPXRoaXMucGFyZW50U2VsZWN0b3Isbz1hbmd1bGFyLmVsZW1lbnQodGhpcy5sb2FkaW5nQmFyVGVtcGxhdGUpLHA9by5maW5kKFwiZGl2XCIpLmVxKDApLHE9YW5ndWxhci5lbGVtZW50KHRoaXMuc3Bpbm5lclRlbXBsYXRlKSxyPSExLHM9MCx0PXRoaXMuaW5jbHVkZVNwaW5uZXIsdT10aGlzLmluY2x1ZGVCYXIsdj10aGlzLnN0YXJ0U2l6ZTtyZXR1cm57c3RhcnQ6ZSxzZXQ6ZixzdGF0dXM6aCxpbmM6Zyxjb21wbGV0ZTpqLGluY2x1ZGVTcGlubmVyOnRoaXMuaW5jbHVkZVNwaW5uZXIsbGF0ZW5jeVRocmVzaG9sZDp0aGlzLmxhdGVuY3lUaHJlc2hvbGQscGFyZW50U2VsZWN0b3I6dGhpcy5wYXJlbnRTZWxlY3RvcixzdGFydFNpemU6dGhpcy5zdGFydFNpemV9fV19KX0oKTsiLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4yLjI2XG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3csIGFuZ3VsYXIsIHVuZGVmaW5lZCkgeyd1c2Ugc3RyaWN0JztcblxudmFyICRyZXNvdXJjZU1pbkVyciA9IGFuZ3VsYXIuJCRtaW5FcnIoJyRyZXNvdXJjZScpO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGFuZCByZWdleCB0byBsb29rdXAgYSBkb3R0ZWQgcGF0aCBvbiBhbiBvYmplY3Rcbi8vIHN0b3BwaW5nIGF0IHVuZGVmaW5lZC9udWxsLiAgVGhlIHBhdGggbXVzdCBiZSBjb21wb3NlZCBvZiBBU0NJSVxuLy8gaWRlbnRpZmllcnMgKGp1c3QgbGlrZSAkcGFyc2UpXG52YXIgTUVNQkVSX05BTUVfUkVHRVggPSAvXihcXC5bYS16QS1aXyRdWzAtOWEtekEtWl8kXSopKyQvO1xuXG5mdW5jdGlvbiBpc1ZhbGlkRG90dGVkUGF0aChwYXRoKSB7XG4gIHJldHVybiAocGF0aCAhPSBudWxsICYmIHBhdGggIT09ICcnICYmIHBhdGggIT09ICdoYXNPd25Qcm9wZXJ0eScgJiZcbiAgICAgIE1FTUJFUl9OQU1FX1JFR0VYLnRlc3QoJy4nICsgcGF0aCkpO1xufVxuXG5mdW5jdGlvbiBsb29rdXBEb3R0ZWRQYXRoKG9iaiwgcGF0aCkge1xuICBpZiAoIWlzVmFsaWREb3R0ZWRQYXRoKHBhdGgpKSB7XG4gICAgdGhyb3cgJHJlc291cmNlTWluRXJyKCdiYWRtZW1iZXInLCAnRG90dGVkIG1lbWJlciBwYXRoIFwiQHswfVwiIGlzIGludmFsaWQuJywgcGF0aCk7XG4gIH1cbiAgdmFyIGtleXMgPSBwYXRoLnNwbGl0KCcuJyk7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGtleXMubGVuZ3RoOyBpIDwgaWkgJiYgb2JqICE9PSB1bmRlZmluZWQ7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIG9iaiA9IChvYmogIT09IG51bGwpID8gb2JqW2tleV0gOiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzaGFsbG93IGNvcHkgb2YgYW4gb2JqZWN0IGFuZCBjbGVhciBvdGhlciBmaWVsZHMgZnJvbSB0aGUgZGVzdGluYXRpb25cbiAqL1xuZnVuY3Rpb24gc2hhbGxvd0NsZWFyQW5kQ29weShzcmMsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwge307XG5cbiAgYW5ndWxhci5mb3JFYWNoKGRzdCwgZnVuY3Rpb24odmFsdWUsIGtleSl7XG4gICAgZGVsZXRlIGRzdFtrZXldO1xuICB9KTtcblxuICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgaWYgKHNyYy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICEoa2V5LmNoYXJBdCgwKSA9PT0gJyQnICYmIGtleS5jaGFyQXQoMSkgPT09ICckJykpIHtcbiAgICAgIGRzdFtrZXldID0gc3JjW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ1Jlc291cmNlXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAjIG5nUmVzb3VyY2VcbiAqXG4gKiBUaGUgYG5nUmVzb3VyY2VgIG1vZHVsZSBwcm92aWRlcyBpbnRlcmFjdGlvbiBzdXBwb3J0IHdpdGggUkVTVGZ1bCBzZXJ2aWNlc1xuICogdmlhIHRoZSAkcmVzb3VyY2Ugc2VydmljZS5cbiAqXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ1Jlc291cmNlXCI+PC9kaXY+XG4gKlxuICogU2VlIHtAbGluayBuZ1Jlc291cmNlLiRyZXNvdXJjZSBgJHJlc291cmNlYH0gZm9yIHVzYWdlLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRyZXNvdXJjZVxuICogQHJlcXVpcmVzICRodHRwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGZhY3Rvcnkgd2hpY2ggY3JlYXRlcyBhIHJlc291cmNlIG9iamVjdCB0aGF0IGxldHMgeW91IGludGVyYWN0IHdpdGhcbiAqIFtSRVNUZnVsXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JlcHJlc2VudGF0aW9uYWxfU3RhdGVfVHJhbnNmZXIpIHNlcnZlci1zaWRlIGRhdGEgc291cmNlcy5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgcmVzb3VyY2Ugb2JqZWN0IGhhcyBhY3Rpb24gbWV0aG9kcyB3aGljaCBwcm92aWRlIGhpZ2gtbGV2ZWwgYmVoYXZpb3JzIHdpdGhvdXRcbiAqIHRoZSBuZWVkIHRvIGludGVyYWN0IHdpdGggdGhlIGxvdyBsZXZlbCB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IHNlcnZpY2UuXG4gKlxuICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1Jlc291cmNlIGBuZ1Jlc291cmNlYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIEEgcGFyYW1ldHJpemVkIFVSTCB0ZW1wbGF0ZSB3aXRoIHBhcmFtZXRlcnMgcHJlZml4ZWQgYnkgYDpgIGFzIGluXG4gKiAgIGAvdXNlci86dXNlcm5hbWVgLiBJZiB5b3UgYXJlIHVzaW5nIGEgVVJMIHdpdGggYSBwb3J0IG51bWJlciAoZS5nLlxuICogICBgaHR0cDovL2V4YW1wbGUuY29tOjgwODAvYXBpYCksIGl0IHdpbGwgYmUgcmVzcGVjdGVkLlxuICpcbiAqICAgSWYgeW91IGFyZSB1c2luZyBhIHVybCB3aXRoIGEgc3VmZml4LCBqdXN0IGFkZCB0aGUgc3VmZml4LCBsaWtlIHRoaXM6XG4gKiAgIGAkcmVzb3VyY2UoJ2h0dHA6Ly9leGFtcGxlLmNvbS9yZXNvdXJjZS5qc29uJylgIG9yIGAkcmVzb3VyY2UoJ2h0dHA6Ly9leGFtcGxlLmNvbS86aWQuanNvbicpYFxuICogICBvciBldmVuIGAkcmVzb3VyY2UoJ2h0dHA6Ly9leGFtcGxlLmNvbS9yZXNvdXJjZS86cmVzb3VyY2VfaWQuOmZvcm1hdCcpYFxuICogICBJZiB0aGUgcGFyYW1ldGVyIGJlZm9yZSB0aGUgc3VmZml4IGlzIGVtcHR5LCA6cmVzb3VyY2VfaWQgaW4gdGhpcyBjYXNlLCB0aGVuIHRoZSBgLy5gIHdpbGwgYmVcbiAqICAgY29sbGFwc2VkIGRvd24gdG8gYSBzaW5nbGUgYC5gLiAgSWYgeW91IG5lZWQgdGhpcyBzZXF1ZW5jZSB0byBhcHBlYXIgYW5kIG5vdCBjb2xsYXBzZSB0aGVuIHlvdVxuICogICBjYW4gZXNjYXBlIGl0IHdpdGggYC9cXC5gLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0PX0gcGFyYW1EZWZhdWx0cyBEZWZhdWx0IHZhbHVlcyBmb3IgYHVybGAgcGFyYW1ldGVycy4gVGhlc2UgY2FuIGJlIG92ZXJyaWRkZW4gaW5cbiAqICAgYGFjdGlvbnNgIG1ldGhvZHMuIElmIGFueSBvZiB0aGUgcGFyYW1ldGVyIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGl0IHdpbGwgYmUgZXhlY3V0ZWQgZXZlcnkgdGltZVxuICogICB3aGVuIGEgcGFyYW0gdmFsdWUgbmVlZHMgdG8gYmUgb2J0YWluZWQgZm9yIGEgcmVxdWVzdCAodW5sZXNzIHRoZSBwYXJhbSB3YXMgb3ZlcnJpZGRlbikuXG4gKlxuICogICBFYWNoIGtleSB2YWx1ZSBpbiB0aGUgcGFyYW1ldGVyIG9iamVjdCBpcyBmaXJzdCBib3VuZCB0byB1cmwgdGVtcGxhdGUgaWYgcHJlc2VudCBhbmQgdGhlbiBhbnlcbiAqICAgZXhjZXNzIGtleXMgYXJlIGFwcGVuZGVkIHRvIHRoZSB1cmwgc2VhcmNoIHF1ZXJ5IGFmdGVyIHRoZSBgP2AuXG4gKlxuICogICBHaXZlbiBhIHRlbXBsYXRlIGAvcGF0aC86dmVyYmAgYW5kIHBhcmFtZXRlciBge3ZlcmI6J2dyZWV0Jywgc2FsdXRhdGlvbjonSGVsbG8nfWAgcmVzdWx0cyBpblxuICogICBVUkwgYC9wYXRoL2dyZWV0P3NhbHV0YXRpb249SGVsbG9gLlxuICpcbiAqICAgSWYgdGhlIHBhcmFtZXRlciB2YWx1ZSBpcyBwcmVmaXhlZCB3aXRoIGBAYCB0aGVuIHRoZSB2YWx1ZSBmb3IgdGhhdCBwYXJhbWV0ZXIgd2lsbCBiZSBleHRyYWN0ZWRcbiAqICAgZnJvbSB0aGUgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBvbiB0aGUgYGRhdGFgIG9iamVjdCAocHJvdmlkZWQgd2hlbiBjYWxsaW5nIGFuIGFjdGlvbiBtZXRob2QpLiAgRm9yXG4gKiAgIGV4YW1wbGUsIGlmIHRoZSBgZGVmYXVsdFBhcmFtYCBvYmplY3QgaXMgYHtzb21lUGFyYW06ICdAc29tZVByb3AnfWAgdGhlbiB0aGUgdmFsdWUgb2YgYHNvbWVQYXJhbWBcbiAqICAgd2lsbCBiZSBgZGF0YS5zb21lUHJvcGAuXG4gKlxuICogQHBhcmFtIHtPYmplY3QuPE9iamVjdD49fSBhY3Rpb25zIEhhc2ggd2l0aCBkZWNsYXJhdGlvbiBvZiBjdXN0b20gYWN0aW9uIHRoYXQgc2hvdWxkIGV4dGVuZFxuICogICB0aGUgZGVmYXVsdCBzZXQgb2YgcmVzb3VyY2UgYWN0aW9ucy4gVGhlIGRlY2xhcmF0aW9uIHNob3VsZCBiZSBjcmVhdGVkIGluIHRoZSBmb3JtYXQgb2Yge0BsaW5rXG4gKiAgIG5nLiRodHRwI3VzYWdlX3BhcmFtZXRlcnMgJGh0dHAuY29uZmlnfTpcbiAqXG4gKiAgICAgICB7YWN0aW9uMToge21ldGhvZDo/LCBwYXJhbXM6PywgaXNBcnJheTo/LCBoZWFkZXJzOj8sIC4uLn0sXG4gKiAgICAgICAgYWN0aW9uMjoge21ldGhvZDo/LCBwYXJhbXM6PywgaXNBcnJheTo/LCBoZWFkZXJzOj8sIC4uLn0sXG4gKiAgICAgICAgLi4ufVxuICpcbiAqICAgV2hlcmU6XG4gKlxuICogICAtICoqYGFjdGlvbmAqKiDigJMge3N0cmluZ30g4oCTIFRoZSBuYW1lIG9mIGFjdGlvbi4gVGhpcyBuYW1lIGJlY29tZXMgdGhlIG5hbWUgb2YgdGhlIG1ldGhvZCBvblxuICogICAgIHlvdXIgcmVzb3VyY2Ugb2JqZWN0LlxuICogICAtICoqYG1ldGhvZGAqKiDigJMge3N0cmluZ30g4oCTIENhc2UgaW5zZW5zaXRpdmUgSFRUUCBtZXRob2QgKGUuZy4gYEdFVGAsIGBQT1NUYCwgYFBVVGAsXG4gKiAgICAgYERFTEVURWAsIGBKU09OUGAsIGV0YykuXG4gKiAgIC0gKipgcGFyYW1zYCoqIOKAkyB7T2JqZWN0PX0g4oCTIE9wdGlvbmFsIHNldCBvZiBwcmUtYm91bmQgcGFyYW1ldGVycyBmb3IgdGhpcyBhY3Rpb24uIElmIGFueSBvZlxuICogICAgIHRoZSBwYXJhbWV0ZXIgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaXQgd2lsbCBiZSBleGVjdXRlZCBldmVyeSB0aW1lIHdoZW4gYSBwYXJhbSB2YWx1ZSBuZWVkcyB0b1xuICogICAgIGJlIG9idGFpbmVkIGZvciBhIHJlcXVlc3QgKHVubGVzcyB0aGUgcGFyYW0gd2FzIG92ZXJyaWRkZW4pLlxuICogICAtICoqYHVybGAqKiDigJMge3N0cmluZ30g4oCTIGFjdGlvbiBzcGVjaWZpYyBgdXJsYCBvdmVycmlkZS4gVGhlIHVybCB0ZW1wbGF0aW5nIGlzIHN1cHBvcnRlZCBqdXN0XG4gKiAgICAgbGlrZSBmb3IgdGhlIHJlc291cmNlLWxldmVsIHVybHMuXG4gKiAgIC0gKipgaXNBcnJheWAqKiDigJMge2Jvb2xlYW49fSDigJMgSWYgdHJ1ZSB0aGVuIHRoZSByZXR1cm5lZCBvYmplY3QgZm9yIHRoaXMgYWN0aW9uIGlzIGFuIGFycmF5LFxuICogICAgIHNlZSBgcmV0dXJuc2Agc2VjdGlvbi5cbiAqICAgLSAqKmB0cmFuc2Zvcm1SZXF1ZXN0YCoqIOKAk1xuICogICAgIGB7ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcil8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpPn1gIOKAk1xuICogICAgIHRyYW5zZm9ybSBmdW5jdGlvbiBvciBhbiBhcnJheSBvZiBzdWNoIGZ1bmN0aW9ucy4gVGhlIHRyYW5zZm9ybSBmdW5jdGlvbiB0YWtlcyB0aGUgaHR0cFxuICogICAgIHJlcXVlc3QgYm9keSBhbmQgaGVhZGVycyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBzZXJpYWxpemVkKSB2ZXJzaW9uLlxuICogICAgIEJ5IGRlZmF1bHQsIHRyYW5zZm9ybVJlcXVlc3Qgd2lsbCBjb250YWluIG9uZSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiB0aGUgcmVxdWVzdCBkYXRhIGlzXG4gKiAgICAgYW4gb2JqZWN0IGFuZCBzZXJpYWxpemVzIHRvIHVzaW5nIGBhbmd1bGFyLnRvSnNvbmAuIFRvIHByZXZlbnQgdGhpcyBiZWhhdmlvciwgc2V0XG4gKiAgICAgYHRyYW5zZm9ybVJlcXVlc3RgIHRvIGFuIGVtcHR5IGFycmF5OiBgdHJhbnNmb3JtUmVxdWVzdDogW11gXG4gKiAgIC0gKipgdHJhbnNmb3JtUmVzcG9uc2VgKiog4oCTXG4gKiAgICAgYHtmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKXxBcnJheS48ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcik+fWAg4oCTXG4gKiAgICAgdHJhbnNmb3JtIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN1Y2ggZnVuY3Rpb25zLiBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHRha2VzIHRoZSBodHRwXG4gKiAgICAgcmVzcG9uc2UgYm9keSBhbmQgaGVhZGVycyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBkZXNlcmlhbGl6ZWQpIHZlcnNpb24uXG4gKiAgICAgQnkgZGVmYXVsdCwgdHJhbnNmb3JtUmVzcG9uc2Ugd2lsbCBjb250YWluIG9uZSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiB0aGUgcmVzcG9uc2UgbG9va3MgbGlrZVxuICogICAgIGEgSlNPTiBzdHJpbmcgYW5kIGRlc2VyaWFsaXplcyBpdCB1c2luZyBgYW5ndWxhci5mcm9tSnNvbmAuIFRvIHByZXZlbnQgdGhpcyBiZWhhdmlvciwgc2V0XG4gKiAgICAgYHRyYW5zZm9ybVJlc3BvbnNlYCB0byBhbiBlbXB0eSBhcnJheTogYHRyYW5zZm9ybVJlc3BvbnNlOiBbXWBcbiAqICAgLSAqKmBjYWNoZWAqKiDigJMgYHtib29sZWFufENhY2hlfWAg4oCTIElmIHRydWUsIGEgZGVmYXVsdCAkaHR0cCBjYWNoZSB3aWxsIGJlIHVzZWQgdG8gY2FjaGUgdGhlXG4gKiAgICAgR0VUIHJlcXVlc3QsIG90aGVyd2lzZSBpZiBhIGNhY2hlIGluc3RhbmNlIGJ1aWx0IHdpdGhcbiAqICAgICB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSAkY2FjaGVGYWN0b3J5fSwgdGhpcyBjYWNoZSB3aWxsIGJlIHVzZWQgZm9yXG4gKiAgICAgY2FjaGluZy5cbiAqICAgLSAqKmB0aW1lb3V0YCoqIOKAkyBge251bWJlcnxQcm9taXNlfWAg4oCTIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzLCBvciB7QGxpbmsgbmcuJHEgcHJvbWlzZX0gdGhhdFxuICogICAgIHNob3VsZCBhYm9ydCB0aGUgcmVxdWVzdCB3aGVuIHJlc29sdmVkLlxuICogICAtICoqYHdpdGhDcmVkZW50aWFsc2AqKiAtIGB7Ym9vbGVhbn1gIC0gd2hldGhlciB0byBzZXQgdGhlIGB3aXRoQ3JlZGVudGlhbHNgIGZsYWcgb24gdGhlXG4gKiAgICAgWEhSIG9iamVjdC4gU2VlXG4gKiAgICAgW3JlcXVlc3RzIHdpdGggY3JlZGVudGlhbHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2h0dHBfYWNjZXNzX2NvbnRyb2wjc2VjdGlvbl81KVxuICogICAgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICogICAtICoqYHJlc3BvbnNlVHlwZWAqKiAtIGB7c3RyaW5nfWAgLSBzZWVcbiAqICAgICBbcmVxdWVzdFR5cGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL1hNTEh0dHBSZXF1ZXN0I3Jlc3BvbnNlVHlwZSkuXG4gKiAgIC0gKipgaW50ZXJjZXB0b3JgKiogLSBge09iamVjdD19YCAtIFRoZSBpbnRlcmNlcHRvciBvYmplY3QgaGFzIHR3byBvcHRpb25hbCBtZXRob2RzIC1cbiAqICAgICBgcmVzcG9uc2VgIGFuZCBgcmVzcG9uc2VFcnJvcmAuIEJvdGggYHJlc3BvbnNlYCBhbmQgYHJlc3BvbnNlRXJyb3JgIGludGVyY2VwdG9ycyBnZXQgY2FsbGVkXG4gKiAgICAgd2l0aCBgaHR0cCByZXNwb25zZWAgb2JqZWN0LiBTZWUge0BsaW5rIG5nLiRodHRwICRodHRwIGludGVyY2VwdG9yc30uXG4gKlxuICogQHJldHVybnMge09iamVjdH0gQSByZXNvdXJjZSBcImNsYXNzXCIgb2JqZWN0IHdpdGggbWV0aG9kcyBmb3IgdGhlIGRlZmF1bHQgc2V0IG9mIHJlc291cmNlIGFjdGlvbnNcbiAqICAgb3B0aW9uYWxseSBleHRlbmRlZCB3aXRoIGN1c3RvbSBgYWN0aW9uc2AuIFRoZSBkZWZhdWx0IHNldCBjb250YWlucyB0aGVzZSBhY3Rpb25zOlxuICogICBgYGBqc1xuICogICB7ICdnZXQnOiAgICB7bWV0aG9kOidHRVQnfSxcbiAqICAgICAnc2F2ZSc6ICAge21ldGhvZDonUE9TVCd9LFxuICogICAgICdxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OnRydWV9LFxuICogICAgICdyZW1vdmUnOiB7bWV0aG9kOidERUxFVEUnfSxcbiAqICAgICAnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ30gfTtcbiAqICAgYGBgXG4gKlxuICogICBDYWxsaW5nIHRoZXNlIG1ldGhvZHMgaW52b2tlIGFuIHtAbGluayBuZy4kaHR0cH0gd2l0aCB0aGUgc3BlY2lmaWVkIGh0dHAgbWV0aG9kLFxuICogICBkZXN0aW5hdGlvbiBhbmQgcGFyYW1ldGVycy4gV2hlbiB0aGUgZGF0YSBpcyByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXIgdGhlbiB0aGUgb2JqZWN0IGlzIGFuXG4gKiAgIGluc3RhbmNlIG9mIHRoZSByZXNvdXJjZSBjbGFzcy4gVGhlIGFjdGlvbnMgYHNhdmVgLCBgcmVtb3ZlYCBhbmQgYGRlbGV0ZWAgYXJlIGF2YWlsYWJsZSBvbiBpdFxuICogICBhcyAgbWV0aG9kcyB3aXRoIHRoZSBgJGAgcHJlZml4LiBUaGlzIGFsbG93cyB5b3UgdG8gZWFzaWx5IHBlcmZvcm0gQ1JVRCBvcGVyYXRpb25zIChjcmVhdGUsXG4gKiAgIHJlYWQsIHVwZGF0ZSwgZGVsZXRlKSBvbiBzZXJ2ZXItc2lkZSBkYXRhIGxpa2UgdGhpczpcbiAqICAgYGBganNcbiAqICAgdmFyIFVzZXIgPSAkcmVzb3VyY2UoJy91c2VyLzp1c2VySWQnLCB7dXNlcklkOidAaWQnfSk7XG4gKiAgIHZhciB1c2VyID0gVXNlci5nZXQoe3VzZXJJZDoxMjN9LCBmdW5jdGlvbigpIHtcbiAqICAgICB1c2VyLmFiYyA9IHRydWU7XG4gKiAgICAgdXNlci4kc2F2ZSgpO1xuICogICB9KTtcbiAqICAgYGBgXG4gKlxuICogICBJdCBpcyBpbXBvcnRhbnQgdG8gcmVhbGl6ZSB0aGF0IGludm9raW5nIGEgJHJlc291cmNlIG9iamVjdCBtZXRob2QgaW1tZWRpYXRlbHkgcmV0dXJucyBhblxuICogICBlbXB0eSByZWZlcmVuY2UgKG9iamVjdCBvciBhcnJheSBkZXBlbmRpbmcgb24gYGlzQXJyYXlgKS4gT25jZSB0aGUgZGF0YSBpcyByZXR1cm5lZCBmcm9tIHRoZVxuICogICBzZXJ2ZXIgdGhlIGV4aXN0aW5nIHJlZmVyZW5jZSBpcyBwb3B1bGF0ZWQgd2l0aCB0aGUgYWN0dWFsIGRhdGEuIFRoaXMgaXMgYSB1c2VmdWwgdHJpY2sgc2luY2VcbiAqICAgdXN1YWxseSB0aGUgcmVzb3VyY2UgaXMgYXNzaWduZWQgdG8gYSBtb2RlbCB3aGljaCBpcyB0aGVuIHJlbmRlcmVkIGJ5IHRoZSB2aWV3LiBIYXZpbmcgYW4gZW1wdHlcbiAqICAgb2JqZWN0IHJlc3VsdHMgaW4gbm8gcmVuZGVyaW5nLCBvbmNlIHRoZSBkYXRhIGFycml2ZXMgZnJvbSB0aGUgc2VydmVyIHRoZW4gdGhlIG9iamVjdCBpc1xuICogICBwb3B1bGF0ZWQgd2l0aCB0aGUgZGF0YSBhbmQgdGhlIHZpZXcgYXV0b21hdGljYWxseSByZS1yZW5kZXJzIGl0c2VsZiBzaG93aW5nIHRoZSBuZXcgZGF0YS4gVGhpc1xuICogICBtZWFucyB0aGF0IGluIG1vc3QgY2FzZXMgb25lIG5ldmVyIGhhcyB0byB3cml0ZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgYWN0aW9uIG1ldGhvZHMuXG4gKlxuICogICBUaGUgYWN0aW9uIG1ldGhvZHMgb24gdGhlIGNsYXNzIG9iamVjdCBvciBpbnN0YW5jZSBvYmplY3QgY2FuIGJlIGludm9rZWQgd2l0aCB0aGUgZm9sbG93aW5nXG4gKiAgIHBhcmFtZXRlcnM6XG4gKlxuICogICAtIEhUVFAgR0VUIFwiY2xhc3NcIiBhY3Rpb25zOiBgUmVzb3VyY2UuYWN0aW9uKFtwYXJhbWV0ZXJzXSwgW3N1Y2Nlc3NdLCBbZXJyb3JdKWBcbiAqICAgLSBub24tR0VUIFwiY2xhc3NcIiBhY3Rpb25zOiBgUmVzb3VyY2UuYWN0aW9uKFtwYXJhbWV0ZXJzXSwgcG9zdERhdGEsIFtzdWNjZXNzXSwgW2Vycm9yXSlgXG4gKiAgIC0gbm9uLUdFVCBpbnN0YW5jZSBhY3Rpb25zOiAgYGluc3RhbmNlLiRhY3Rpb24oW3BhcmFtZXRlcnNdLCBbc3VjY2Vzc10sIFtlcnJvcl0pYFxuICpcbiAqICAgU3VjY2VzcyBjYWxsYmFjayBpcyBjYWxsZWQgd2l0aCAodmFsdWUsIHJlc3BvbnNlSGVhZGVycykgYXJndW1lbnRzLiBFcnJvciBjYWxsYmFjayBpcyBjYWxsZWRcbiAqICAgd2l0aCAoaHR0cFJlc3BvbnNlKSBhcmd1bWVudC5cbiAqXG4gKiAgIENsYXNzIGFjdGlvbnMgcmV0dXJuIGVtcHR5IGluc3RhbmNlICh3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllcyBiZWxvdykuXG4gKiAgIEluc3RhbmNlIGFjdGlvbnMgcmV0dXJuIHByb21pc2Ugb2YgdGhlIGFjdGlvbi5cbiAqXG4gKiAgIFRoZSBSZXNvdXJjZSBpbnN0YW5jZXMgYW5kIGNvbGxlY3Rpb24gaGF2ZSB0aGVzZSBhZGRpdGlvbmFsIHByb3BlcnRpZXM6XG4gKlxuICogICAtIGAkcHJvbWlzZWA6IHRoZSB7QGxpbmsgbmcuJHEgcHJvbWlzZX0gb2YgdGhlIG9yaWdpbmFsIHNlcnZlciBpbnRlcmFjdGlvbiB0aGF0IGNyZWF0ZWQgdGhpc1xuICogICAgIGluc3RhbmNlIG9yIGNvbGxlY3Rpb24uXG4gKlxuICogICAgIE9uIHN1Y2Nlc3MsIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHNhbWUgcmVzb3VyY2UgaW5zdGFuY2Ugb3IgY29sbGVjdGlvbiBvYmplY3QsXG4gKiAgICAgdXBkYXRlZCB3aXRoIGRhdGEgZnJvbSBzZXJ2ZXIuIFRoaXMgbWFrZXMgaXQgZWFzeSB0byB1c2UgaW5cbiAqICAgICB7QGxpbmsgbmdSb3V0ZS4kcm91dGVQcm92aWRlciByZXNvbHZlIHNlY3Rpb24gb2YgJHJvdXRlUHJvdmlkZXIud2hlbigpfSB0byBkZWZlciB2aWV3XG4gKiAgICAgcmVuZGVyaW5nIHVudGlsIHRoZSByZXNvdXJjZShzKSBhcmUgbG9hZGVkLlxuICpcbiAqICAgICBPbiBmYWlsdXJlLCB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSB7QGxpbmsgbmcuJGh0dHAgaHR0cCByZXNwb25zZX0gb2JqZWN0LCB3aXRob3V0XG4gKiAgICAgdGhlIGByZXNvdXJjZWAgcHJvcGVydHkuXG4gKlxuICogICAgIElmIGFuIGludGVyY2VwdG9yIG9iamVjdCB3YXMgcHJvdmlkZWQsIHRoZSBwcm9taXNlIHdpbGwgaW5zdGVhZCBiZSByZXNvbHZlZCB3aXRoIHRoZSB2YWx1ZVxuICogICAgIHJldHVybmVkIGJ5IHRoZSBpbnRlcmNlcHRvci5cbiAqXG4gKiAgIC0gYCRyZXNvbHZlZGA6IGB0cnVlYCBhZnRlciBmaXJzdCBzZXJ2ZXIgaW50ZXJhY3Rpb24gaXMgY29tcGxldGVkIChlaXRoZXIgd2l0aCBzdWNjZXNzIG9yXG4gKiAgICAgIHJlamVjdGlvbiksIGBmYWxzZWAgYmVmb3JlIHRoYXQuIEtub3dpbmcgaWYgdGhlIFJlc291cmNlIGhhcyBiZWVuIHJlc29sdmVkIGlzIHVzZWZ1bCBpblxuICogICAgICBkYXRhLWJpbmRpbmcuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIENyZWRpdCBjYXJkIHJlc291cmNlXG4gKlxuICogYGBganNcbiAgICAgLy8gRGVmaW5lIENyZWRpdENhcmQgY2xhc3NcbiAgICAgdmFyIENyZWRpdENhcmQgPSAkcmVzb3VyY2UoJy91c2VyLzp1c2VySWQvY2FyZC86Y2FyZElkJyxcbiAgICAgIHt1c2VySWQ6MTIzLCBjYXJkSWQ6J0BpZCd9LCB7XG4gICAgICAgY2hhcmdlOiB7bWV0aG9kOidQT1NUJywgcGFyYW1zOntjaGFyZ2U6dHJ1ZX19XG4gICAgICB9KTtcblxuICAgICAvLyBXZSBjYW4gcmV0cmlldmUgYSBjb2xsZWN0aW9uIGZyb20gdGhlIHNlcnZlclxuICAgICB2YXIgY2FyZHMgPSBDcmVkaXRDYXJkLnF1ZXJ5KGZ1bmN0aW9uKCkge1xuICAgICAgIC8vIEdFVDogL3VzZXIvMTIzL2NhcmRcbiAgICAgICAvLyBzZXJ2ZXIgcmV0dXJuczogWyB7aWQ6NDU2LCBudW1iZXI6JzEyMzQnLCBuYW1lOidTbWl0aCd9IF07XG5cbiAgICAgICB2YXIgY2FyZCA9IGNhcmRzWzBdO1xuICAgICAgIC8vIGVhY2ggaXRlbSBpcyBhbiBpbnN0YW5jZSBvZiBDcmVkaXRDYXJkXG4gICAgICAgZXhwZWN0KGNhcmQgaW5zdGFuY2VvZiBDcmVkaXRDYXJkKS50b0VxdWFsKHRydWUpO1xuICAgICAgIGNhcmQubmFtZSA9IFwiSi4gU21pdGhcIjtcbiAgICAgICAvLyBub24gR0VUIG1ldGhvZHMgYXJlIG1hcHBlZCBvbnRvIHRoZSBpbnN0YW5jZXNcbiAgICAgICBjYXJkLiRzYXZlKCk7XG4gICAgICAgLy8gUE9TVDogL3VzZXIvMTIzL2NhcmQvNDU2IHtpZDo0NTYsIG51bWJlcjonMTIzNCcsIG5hbWU6J0ouIFNtaXRoJ31cbiAgICAgICAvLyBzZXJ2ZXIgcmV0dXJuczoge2lkOjQ1NiwgbnVtYmVyOicxMjM0JywgbmFtZTogJ0ouIFNtaXRoJ307XG5cbiAgICAgICAvLyBvdXIgY3VzdG9tIG1ldGhvZCBpcyBtYXBwZWQgYXMgd2VsbC5cbiAgICAgICBjYXJkLiRjaGFyZ2Uoe2Ftb3VudDo5Ljk5fSk7XG4gICAgICAgLy8gUE9TVDogL3VzZXIvMTIzL2NhcmQvNDU2P2Ftb3VudD05Ljk5JmNoYXJnZT10cnVlIHtpZDo0NTYsIG51bWJlcjonMTIzNCcsIG5hbWU6J0ouIFNtaXRoJ31cbiAgICAgfSk7XG5cbiAgICAgLy8gd2UgY2FuIGNyZWF0ZSBhbiBpbnN0YW5jZSBhcyB3ZWxsXG4gICAgIHZhciBuZXdDYXJkID0gbmV3IENyZWRpdENhcmQoe251bWJlcjonMDEyMyd9KTtcbiAgICAgbmV3Q2FyZC5uYW1lID0gXCJNaWtlIFNtaXRoXCI7XG4gICAgIG5ld0NhcmQuJHNhdmUoKTtcbiAgICAgLy8gUE9TVDogL3VzZXIvMTIzL2NhcmQge251bWJlcjonMDEyMycsIG5hbWU6J01pa2UgU21pdGgnfVxuICAgICAvLyBzZXJ2ZXIgcmV0dXJuczoge2lkOjc4OSwgbnVtYmVyOicwMTIzJywgbmFtZTogJ01pa2UgU21pdGgnfTtcbiAgICAgZXhwZWN0KG5ld0NhcmQuaWQpLnRvRXF1YWwoNzg5KTtcbiAqIGBgYFxuICpcbiAqIFRoZSBvYmplY3QgcmV0dXJuZWQgZnJvbSB0aGlzIGZ1bmN0aW9uIGV4ZWN1dGlvbiBpcyBhIHJlc291cmNlIFwiY2xhc3NcIiB3aGljaCBoYXMgXCJzdGF0aWNcIiBtZXRob2RcbiAqIGZvciBlYWNoIGFjdGlvbiBpbiB0aGUgZGVmaW5pdGlvbi5cbiAqXG4gKiBDYWxsaW5nIHRoZXNlIG1ldGhvZHMgaW52b2tlIGAkaHR0cGAgb24gdGhlIGB1cmxgIHRlbXBsYXRlIHdpdGggdGhlIGdpdmVuIGBtZXRob2RgLCBgcGFyYW1zYCBhbmRcbiAqIGBoZWFkZXJzYC5cbiAqIFdoZW4gdGhlIGRhdGEgaXMgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyIHRoZW4gdGhlIG9iamVjdCBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgcmVzb3VyY2UgdHlwZSBhbmRcbiAqIGFsbCBvZiB0aGUgbm9uLUdFVCBtZXRob2RzIGFyZSBhdmFpbGFibGUgd2l0aCBgJGAgcHJlZml4LiBUaGlzIGFsbG93cyB5b3UgdG8gZWFzaWx5IHN1cHBvcnQgQ1JVRFxuICogb3BlcmF0aW9ucyAoY3JlYXRlLCByZWFkLCB1cGRhdGUsIGRlbGV0ZSkgb24gc2VydmVyLXNpZGUgZGF0YS5cblxuICAgYGBganNcbiAgICAgdmFyIFVzZXIgPSAkcmVzb3VyY2UoJy91c2VyLzp1c2VySWQnLCB7dXNlcklkOidAaWQnfSk7XG4gICAgIFVzZXIuZ2V0KHt1c2VySWQ6MTIzfSwgZnVuY3Rpb24odXNlcikge1xuICAgICAgIHVzZXIuYWJjID0gdHJ1ZTtcbiAgICAgICB1c2VyLiRzYXZlKCk7XG4gICAgIH0pO1xuICAgYGBgXG4gKlxuICogSXQncyB3b3J0aCBub3RpbmcgdGhhdCB0aGUgc3VjY2VzcyBjYWxsYmFjayBmb3IgYGdldGAsIGBxdWVyeWAgYW5kIG90aGVyIG1ldGhvZHMgZ2V0cyBwYXNzZWRcbiAqIGluIHRoZSByZXNwb25zZSB0aGF0IGNhbWUgZnJvbSB0aGUgc2VydmVyIGFzIHdlbGwgYXMgJGh0dHAgaGVhZGVyIGdldHRlciBmdW5jdGlvbiwgc28gb25lXG4gKiBjb3VsZCByZXdyaXRlIHRoZSBhYm92ZSBleGFtcGxlIGFuZCBnZXQgYWNjZXNzIHRvIGh0dHAgaGVhZGVycyBhczpcbiAqXG4gICBgYGBqc1xuICAgICB2YXIgVXNlciA9ICRyZXNvdXJjZSgnL3VzZXIvOnVzZXJJZCcsIHt1c2VySWQ6J0BpZCd9KTtcbiAgICAgVXNlci5nZXQoe3VzZXJJZDoxMjN9LCBmdW5jdGlvbih1LCBnZXRSZXNwb25zZUhlYWRlcnMpe1xuICAgICAgIHUuYWJjID0gdHJ1ZTtcbiAgICAgICB1LiRzYXZlKGZ1bmN0aW9uKHUsIHB1dFJlc3BvbnNlSGVhZGVycykge1xuICAgICAgICAgLy91ID0+IHNhdmVkIHVzZXIgb2JqZWN0XG4gICAgICAgICAvL3B1dFJlc3BvbnNlSGVhZGVycyA9PiAkaHR0cCBoZWFkZXIgZ2V0dGVyXG4gICAgICAgfSk7XG4gICAgIH0pO1xuICAgYGBgXG4gKlxuICogWW91IGNhbiBhbHNvIGFjY2VzcyB0aGUgcmF3IGAkaHR0cGAgcHJvbWlzZSB2aWEgdGhlIGAkcHJvbWlzZWAgcHJvcGVydHkgb24gdGhlIG9iamVjdCByZXR1cm5lZFxuICpcbiAgIGBgYFxuICAgICB2YXIgVXNlciA9ICRyZXNvdXJjZSgnL3VzZXIvOnVzZXJJZCcsIHt1c2VySWQ6J0BpZCd9KTtcbiAgICAgVXNlci5nZXQoe3VzZXJJZDoxMjN9KVxuICAgICAgICAgLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgICAkc2NvcGUudXNlciA9IHVzZXI7XG4gICAgICAgICB9KTtcbiAgIGBgYFxuXG4gKiAjIENyZWF0aW5nIGEgY3VzdG9tICdQVVQnIHJlcXVlc3RcbiAqIEluIHRoaXMgZXhhbXBsZSB3ZSBjcmVhdGUgYSBjdXN0b20gbWV0aG9kIG9uIG91ciByZXNvdXJjZSB0byBtYWtlIGEgUFVUIHJlcXVlc3RcbiAqIGBgYGpzXG4gKiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdSZXNvdXJjZScsICduZ1JvdXRlJ10pO1xuICpcbiAqICAgIC8vIFNvbWUgQVBJcyBleHBlY3QgYSBQVVQgcmVxdWVzdCBpbiB0aGUgZm9ybWF0IFVSTC9vYmplY3QvSURcbiAqICAgIC8vIEhlcmUgd2UgYXJlIGNyZWF0aW5nIGFuICd1cGRhdGUnIG1ldGhvZFxuICogICAgYXBwLmZhY3RvcnkoJ05vdGVzJywgWyckcmVzb3VyY2UnLCBmdW5jdGlvbigkcmVzb3VyY2UpIHtcbiAqICAgIHJldHVybiAkcmVzb3VyY2UoJy9ub3Rlcy86aWQnLCBudWxsLFxuICogICAgICAgIHtcbiAqICAgICAgICAgICAgJ3VwZGF0ZSc6IHsgbWV0aG9kOidQVVQnIH1cbiAqICAgICAgICB9KTtcbiAqICAgIH1dKTtcbiAqXG4gKiAgICAvLyBJbiBvdXIgY29udHJvbGxlciB3ZSBnZXQgdGhlIElEIGZyb20gdGhlIFVSTCB1c2luZyBuZ1JvdXRlIGFuZCAkcm91dGVQYXJhbXNcbiAqICAgIC8vIFdlIHBhc3MgaW4gJHJvdXRlUGFyYW1zIGFuZCBvdXIgTm90ZXMgZmFjdG9yeSBhbG9uZyB3aXRoICRzY29wZVxuICogICAgYXBwLmNvbnRyb2xsZXIoJ05vdGVzQ3RybCcsIFsnJHNjb3BlJywgJyRyb3V0ZVBhcmFtcycsICdOb3RlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCRzY29wZSwgJHJvdXRlUGFyYW1zLCBOb3Rlcykge1xuICogICAgLy8gRmlyc3QgZ2V0IGEgbm90ZSBvYmplY3QgZnJvbSB0aGUgZmFjdG9yeVxuICogICAgdmFyIG5vdGUgPSBOb3Rlcy5nZXQoeyBpZDokcm91dGVQYXJhbXMuaWQgfSk7XG4gKiAgICAkaWQgPSBub3RlLmlkO1xuICpcbiAqICAgIC8vIE5vdyBjYWxsIHVwZGF0ZSBwYXNzaW5nIGluIHRoZSBJRCBmaXJzdCB0aGVuIHRoZSBvYmplY3QgeW91IGFyZSB1cGRhdGluZ1xuICogICAgTm90ZXMudXBkYXRlKHsgaWQ6JGlkIH0sIG5vdGUpO1xuICpcbiAqICAgIC8vIFRoaXMgd2lsbCBQVVQgL25vdGVzL0lEIHdpdGggdGhlIG5vdGUgb2JqZWN0IGluIHRoZSByZXF1ZXN0IHBheWxvYWRcbiAqICAgIH1dKTtcbiAqIGBgYFxuICovXG5hbmd1bGFyLm1vZHVsZSgnbmdSZXNvdXJjZScsIFsnbmcnXSkuXG4gIGZhY3RvcnkoJyRyZXNvdXJjZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcblxuICAgIHZhciBERUZBVUxUX0FDVElPTlMgPSB7XG4gICAgICAnZ2V0JzogICAge21ldGhvZDonR0VUJ30sXG4gICAgICAnc2F2ZSc6ICAge21ldGhvZDonUE9TVCd9LFxuICAgICAgJ3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6dHJ1ZX0sXG4gICAgICAncmVtb3ZlJzoge21ldGhvZDonREVMRVRFJ30sXG4gICAgICAnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ31cbiAgICB9O1xuICAgIHZhciBub29wID0gYW5ndWxhci5ub29wLFxuICAgICAgICBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoLFxuICAgICAgICBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZCxcbiAgICAgICAgY29weSA9IGFuZ3VsYXIuY29weSxcbiAgICAgICAgaXNGdW5jdGlvbiA9IGFuZ3VsYXIuaXNGdW5jdGlvbjtcblxuICAgIC8qKlxuICAgICAqIFdlIG5lZWQgb3VyIGN1c3RvbSBtZXRob2QgYmVjYXVzZSBlbmNvZGVVUklDb21wb25lbnQgaXMgdG9vIGFnZ3Jlc3NpdmUgYW5kIGRvZXNuJ3QgZm9sbG93XG4gICAgICogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMzk4Ni50eHQgd2l0aCByZWdhcmRzIHRvIHRoZSBjaGFyYWN0ZXIgc2V0IChwY2hhcikgYWxsb3dlZCBpbiBwYXRoXG4gICAgICogc2VnbWVudHM6XG4gICAgICogICAgc2VnbWVudCAgICAgICA9ICpwY2hhclxuICAgICAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxuICAgICAqICAgIHBjdC1lbmNvZGVkICAgPSBcIiVcIiBIRVhESUcgSEVYRElHXG4gICAgICogICAgdW5yZXNlcnZlZCAgICA9IEFMUEhBIC8gRElHSVQgLyBcIi1cIiAvIFwiLlwiIC8gXCJfXCIgLyBcIn5cIlxuICAgICAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVuY29kZVVyaVNlZ21lbnQodmFsKSB7XG4gICAgICByZXR1cm4gZW5jb2RlVXJpUXVlcnkodmFsLCB0cnVlKS5cbiAgICAgICAgcmVwbGFjZSgvJTI2L2dpLCAnJicpLlxuICAgICAgICByZXBsYWNlKC8lM0QvZ2ksICc9JykuXG4gICAgICAgIHJlcGxhY2UoLyUyQi9naSwgJysnKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIGZvciBlbmNvZGluZyAqa2V5KiBvciAqdmFsdWUqIHBhcnRzIG9mIHF1ZXJ5IGNvbXBvbmVudC4gV2UgbmVlZCBhXG4gICAgICogY3VzdG9tIG1ldGhvZCBiZWNhdXNlIGVuY29kZVVSSUNvbXBvbmVudCBpcyB0b28gYWdncmVzc2l2ZSBhbmQgZW5jb2RlcyBzdHVmZiB0aGF0IGRvZXNuJ3RcbiAgICAgKiBoYXZlIHRvIGJlIGVuY29kZWQgcGVyIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODY6XG4gICAgICogICAgcXVlcnkgICAgICAgPSAqKCBwY2hhciAvIFwiL1wiIC8gXCI/XCIgKVxuICAgICAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxuICAgICAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcbiAgICAgKiAgICBwY3QtZW5jb2RlZCAgID0gXCIlXCIgSEVYRElHIEhFWERJR1xuICAgICAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIC8gXCIqXCIgLyBcIitcIiAvIFwiLFwiIC8gXCI7XCIgLyBcIj1cIlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVuY29kZVVyaVF1ZXJ5KHZhbCwgcGN0RW5jb2RlU3BhY2VzKSB7XG4gICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cbiAgICAgICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgICAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICAgICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgICAgICByZXBsYWNlKC8lMjAvZywgKHBjdEVuY29kZVNwYWNlcyA/ICclMjAnIDogJysnKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUm91dGUodGVtcGxhdGUsIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICB0aGlzLmRlZmF1bHRzID0gZGVmYXVsdHMgfHwge307XG4gICAgICB0aGlzLnVybFBhcmFtcyA9IHt9O1xuICAgIH1cblxuICAgIFJvdXRlLnByb3RvdHlwZSA9IHtcbiAgICAgIHNldFVybFBhcmFtczogZnVuY3Rpb24oY29uZmlnLCBwYXJhbXMsIGFjdGlvblVybCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICB1cmwgPSBhY3Rpb25VcmwgfHwgc2VsZi50ZW1wbGF0ZSxcbiAgICAgICAgICAgIHZhbCxcbiAgICAgICAgICAgIGVuY29kZWRWYWw7XG5cbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IHNlbGYudXJsUGFyYW1zID0ge307XG4gICAgICAgIGZvckVhY2godXJsLnNwbGl0KC9cXFcvKSwgZnVuY3Rpb24ocGFyYW0pe1xuICAgICAgICAgIGlmIChwYXJhbSA9PT0gJ2hhc093blByb3BlcnR5Jykge1xuICAgICAgICAgICAgdGhyb3cgJHJlc291cmNlTWluRXJyKCdiYWRuYW1lJywgXCJoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCBwYXJhbWV0ZXIgbmFtZS5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghKG5ldyBSZWdFeHAoXCJeXFxcXGQrJFwiKS50ZXN0KHBhcmFtKSkgJiYgcGFyYW0gJiZcbiAgICAgICAgICAgICAgIChuZXcgUmVnRXhwKFwiKF58W15cXFxcXFxcXF0pOlwiICsgcGFyYW0gKyBcIihcXFxcV3wkKVwiKS50ZXN0KHVybCkpKSB7XG4gICAgICAgICAgICB1cmxQYXJhbXNbcGFyYW1dID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgvXFxcXDovZywgJzonKTtcblxuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIGZvckVhY2goc2VsZi51cmxQYXJhbXMsIGZ1bmN0aW9uKF8sIHVybFBhcmFtKXtcbiAgICAgICAgICB2YWwgPSBwYXJhbXMuaGFzT3duUHJvcGVydHkodXJsUGFyYW0pID8gcGFyYW1zW3VybFBhcmFtXSA6IHNlbGYuZGVmYXVsdHNbdXJsUGFyYW1dO1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh2YWwpICYmIHZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZW5jb2RlZFZhbCA9IGVuY29kZVVyaVNlZ21lbnQodmFsKTtcbiAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKG5ldyBSZWdFeHAoXCI6XCIgKyB1cmxQYXJhbSArIFwiKFxcXFxXfCQpXCIsIFwiZ1wiKSwgZnVuY3Rpb24obWF0Y2gsIHAxKSB7XG4gICAgICAgICAgICAgIHJldHVybiBlbmNvZGVkVmFsICsgcDE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UobmV3IFJlZ0V4cChcIihcXC8/KTpcIiArIHVybFBhcmFtICsgXCIoXFxcXFd8JClcIiwgXCJnXCIpLCBmdW5jdGlvbihtYXRjaCxcbiAgICAgICAgICAgICAgICBsZWFkaW5nU2xhc2hlcywgdGFpbCkge1xuICAgICAgICAgICAgICBpZiAodGFpbC5jaGFyQXQoMCkgPT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhaWw7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxlYWRpbmdTbGFzaGVzICsgdGFpbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBzdHJpcCB0cmFpbGluZyBzbGFzaGVzIGFuZCBzZXQgdGhlIHVybFxuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgvXFwvKyQvLCAnJykgfHwgJy8nO1xuICAgICAgICAvLyB0aGVuIHJlcGxhY2UgY29sbGFwc2UgYC8uYCBpZiBmb3VuZCBpbiB0aGUgbGFzdCBVUkwgcGF0aCBzZWdtZW50IGJlZm9yZSB0aGUgcXVlcnlcbiAgICAgICAgLy8gRS5nLiBgaHR0cDovL3VybC5jb20vaWQuL2Zvcm1hdD9xPXhgIGJlY29tZXMgYGh0dHA6Ly91cmwuY29tL2lkLmZvcm1hdD9xPXhgXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC9cXC9cXC4oPz1cXHcrKCR8XFw/KSkvLCAnLicpO1xuICAgICAgICAvLyByZXBsYWNlIGVzY2FwZWQgYC9cXC5gIHdpdGggYC8uYFxuICAgICAgICBjb25maWcudXJsID0gdXJsLnJlcGxhY2UoL1xcL1xcXFxcXC4vLCAnLy4nKTtcblxuXG4gICAgICAgIC8vIHNldCBwYXJhbXMgLSBkZWxlZ2F0ZSBwYXJhbSBlbmNvZGluZyB0byAkaHR0cFxuICAgICAgICBmb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24odmFsdWUsIGtleSl7XG4gICAgICAgICAgaWYgKCFzZWxmLnVybFBhcmFtc1trZXldKSB7XG4gICAgICAgICAgICBjb25maWcucGFyYW1zID0gY29uZmlnLnBhcmFtcyB8fCB7fTtcbiAgICAgICAgICAgIGNvbmZpZy5wYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gcmVzb3VyY2VGYWN0b3J5KHVybCwgcGFyYW1EZWZhdWx0cywgYWN0aW9ucykge1xuICAgICAgdmFyIHJvdXRlID0gbmV3IFJvdXRlKHVybCk7XG5cbiAgICAgIGFjdGlvbnMgPSBleHRlbmQoe30sIERFRkFVTFRfQUNUSU9OUywgYWN0aW9ucyk7XG5cbiAgICAgIGZ1bmN0aW9uIGV4dHJhY3RQYXJhbXMoZGF0YSwgYWN0aW9uUGFyYW1zKXtcbiAgICAgICAgdmFyIGlkcyA9IHt9O1xuICAgICAgICBhY3Rpb25QYXJhbXMgPSBleHRlbmQoe30sIHBhcmFtRGVmYXVsdHMsIGFjdGlvblBhcmFtcyk7XG4gICAgICAgIGZvckVhY2goYWN0aW9uUGFyYW1zLCBmdW5jdGlvbih2YWx1ZSwga2V5KXtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHsgdmFsdWUgPSB2YWx1ZSgpOyB9XG4gICAgICAgICAgaWRzW2tleV0gPSB2YWx1ZSAmJiB2YWx1ZS5jaGFyQXQgJiYgdmFsdWUuY2hhckF0KDApID09ICdAJyA/XG4gICAgICAgICAgICBsb29rdXBEb3R0ZWRQYXRoKGRhdGEsIHZhbHVlLnN1YnN0cigxKSkgOiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRlZmF1bHRSZXNwb25zZUludGVyY2VwdG9yKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5yZXNvdXJjZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gUmVzb3VyY2UodmFsdWUpe1xuICAgICAgICBzaGFsbG93Q2xlYXJBbmRDb3B5KHZhbHVlIHx8IHt9LCB0aGlzKTtcbiAgICAgIH1cblxuICAgICAgZm9yRWFjaChhY3Rpb25zLCBmdW5jdGlvbihhY3Rpb24sIG5hbWUpIHtcbiAgICAgICAgdmFyIGhhc0JvZHkgPSAvXihQT1NUfFBVVHxQQVRDSCkkL2kudGVzdChhY3Rpb24ubWV0aG9kKTtcblxuICAgICAgICBSZXNvdXJjZVtuYW1lXSA9IGZ1bmN0aW9uKGExLCBhMiwgYTMsIGE0KSB7XG4gICAgICAgICAgdmFyIHBhcmFtcyA9IHt9LCBkYXRhLCBzdWNjZXNzLCBlcnJvcjtcblxuICAgICAgICAgIC8qIGpzaGludCAtVzA4NiAqLyAvKiAocHVycG9zZWZ1bGx5IGZhbGwgdGhyb3VnaCBjYXNlIHN0YXRlbWVudHMpICovXG4gICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBlcnJvciA9IGE0O1xuICAgICAgICAgICAgc3VjY2VzcyA9IGEzO1xuICAgICAgICAgICAgLy9mYWxsdGhyb3VnaFxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihhMikpIHtcbiAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYTEpKSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzcyA9IGExO1xuICAgICAgICAgICAgICAgIGVycm9yID0gYTI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzdWNjZXNzID0gYTI7XG4gICAgICAgICAgICAgIGVycm9yID0gYTM7XG4gICAgICAgICAgICAgIC8vZmFsbHRocm91Z2hcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcmFtcyA9IGExO1xuICAgICAgICAgICAgICBkYXRhID0gYTI7XG4gICAgICAgICAgICAgIHN1Y2Nlc3MgPSBhMztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oYTEpKSBzdWNjZXNzID0gYTE7XG4gICAgICAgICAgICBlbHNlIGlmIChoYXNCb2R5KSBkYXRhID0gYTE7XG4gICAgICAgICAgICBlbHNlIHBhcmFtcyA9IGExO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAwOiBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgJHJlc291cmNlTWluRXJyKCdiYWRhcmdzJyxcbiAgICAgICAgICAgICAgXCJFeHBlY3RlZCB1cCB0byA0IGFyZ3VtZW50cyBbcGFyYW1zLCBkYXRhLCBzdWNjZXNzLCBlcnJvcl0sIGdvdCB7MH0gYXJndW1lbnRzXCIsXG4gICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvKiBqc2hpbnQgK1cwODYgKi8gLyogKHB1cnBvc2VmdWxseSBmYWxsIHRocm91Z2ggY2FzZSBzdGF0ZW1lbnRzKSAqL1xuXG4gICAgICAgICAgdmFyIGlzSW5zdGFuY2VDYWxsID0gdGhpcyBpbnN0YW5jZW9mIFJlc291cmNlO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGlzSW5zdGFuY2VDYWxsID8gZGF0YSA6IChhY3Rpb24uaXNBcnJheSA/IFtdIDogbmV3IFJlc291cmNlKGRhdGEpKTtcbiAgICAgICAgICB2YXIgaHR0cENvbmZpZyA9IHt9O1xuICAgICAgICAgIHZhciByZXNwb25zZUludGVyY2VwdG9yID0gYWN0aW9uLmludGVyY2VwdG9yICYmIGFjdGlvbi5pbnRlcmNlcHRvci5yZXNwb25zZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFJlc3BvbnNlSW50ZXJjZXB0b3I7XG4gICAgICAgICAgdmFyIHJlc3BvbnNlRXJyb3JJbnRlcmNlcHRvciA9IGFjdGlvbi5pbnRlcmNlcHRvciAmJiBhY3Rpb24uaW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuXG4gICAgICAgICAgZm9yRWFjaChhY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgIT0gJ3BhcmFtcycgJiYga2V5ICE9ICdpc0FycmF5JyAmJiBrZXkgIT0gJ2ludGVyY2VwdG9yJykge1xuICAgICAgICAgICAgICBodHRwQ29uZmlnW2tleV0gPSBjb3B5KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChoYXNCb2R5KSBodHRwQ29uZmlnLmRhdGEgPSBkYXRhO1xuICAgICAgICAgIHJvdXRlLnNldFVybFBhcmFtcyhodHRwQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQoe30sIGV4dHJhY3RQYXJhbXMoZGF0YSwgYWN0aW9uLnBhcmFtcyB8fCB7fSksIHBhcmFtcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbi51cmwpO1xuXG4gICAgICAgICAgdmFyIHByb21pc2UgPSAkaHR0cChodHRwQ29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhLFxuICAgICAgICAgICAgICBwcm9taXNlID0gdmFsdWUuJHByb21pc2U7XG5cbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgIC8vIE5lZWQgdG8gY29udmVydCBhY3Rpb24uaXNBcnJheSB0byBib29sZWFuIGluIGNhc2UgaXQgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgICAgIC8vIGpzaGludCAtVzAxOFxuICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0FycmF5KGRhdGEpICE9PSAoISFhY3Rpb24uaXNBcnJheSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAkcmVzb3VyY2VNaW5FcnIoJ2JhZGNmZycsXG4gICAgICAgICAgICAgICAgICAgICdFcnJvciBpbiByZXNvdXJjZSBjb25maWd1cmF0aW9uLiBFeHBlY3RlZCAnICtcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc3BvbnNlIHRvIGNvbnRhaW4gYW4gezB9IGJ1dCBnb3QgYW4gezF9JyxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbi5pc0FycmF5ID8gJ2FycmF5JyA6ICdvYmplY3QnLFxuICAgICAgICAgICAgICAgICAgYW5ndWxhci5pc0FycmF5KGRhdGEpID8gJ2FycmF5JyA6ICdvYmplY3QnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBqc2hpbnQgK1cwMThcbiAgICAgICAgICAgICAgaWYgKGFjdGlvbi5pc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgdmFsdWUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICBmb3JFYWNoKGRhdGEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUucHVzaChuZXcgUmVzb3VyY2UoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmFsaWQgSlNPTiB2YWx1ZXMgbWF5IGJlIHN0cmluZyBsaXRlcmFscywgYW5kIHRoZXNlIHNob3VsZCBub3QgYmUgY29udmVydGVkXG4gICAgICAgICAgICAgICAgICAgIC8vIGludG8gb2JqZWN0cy4gVGhlc2UgaXRlbXMgd2lsbCBub3QgaGF2ZSBhY2Nlc3MgdG8gdGhlIFJlc291cmNlIHByb3RvdHlwZVxuICAgICAgICAgICAgICAgICAgICAvLyBtZXRob2RzLCBidXQgdW5mb3J0dW5hdGVseSB0aGVyZVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNoYWxsb3dDbGVhckFuZENvcHkoZGF0YSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHZhbHVlLiRwcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YWx1ZS4kcmVzb2x2ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICByZXNwb25zZS5yZXNvdXJjZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHZhbHVlLiRyZXNvbHZlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIChlcnJvcnx8bm9vcCkocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVzcG9uc2VJbnRlcmNlcHRvcihyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgKHN1Y2Nlc3N8fG5vb3ApKHZhbHVlLCByZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHJlc3BvbnNlRXJyb3JJbnRlcmNlcHRvcik7XG5cbiAgICAgICAgICBpZiAoIWlzSW5zdGFuY2VDYWxsKSB7XG4gICAgICAgICAgICAvLyB3ZSBhcmUgY3JlYXRpbmcgaW5zdGFuY2UgLyBjb2xsZWN0aW9uXG4gICAgICAgICAgICAvLyAtIHNldCB0aGUgaW5pdGlhbCBwcm9taXNlXG4gICAgICAgICAgICAvLyAtIHJldHVybiB0aGUgaW5zdGFuY2UgLyBjb2xsZWN0aW9uXG4gICAgICAgICAgICB2YWx1ZS4kcHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgICAgICB2YWx1ZS4kcmVzb2x2ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGluc3RhbmNlIGNhbGxcbiAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIFJlc291cmNlLnByb3RvdHlwZVsnJCcgKyBuYW1lXSA9IGZ1bmN0aW9uKHBhcmFtcywgc3VjY2VzcywgZXJyb3IpIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihwYXJhbXMpKSB7XG4gICAgICAgICAgICBlcnJvciA9IHN1Y2Nlc3M7IHN1Y2Nlc3MgPSBwYXJhbXM7IHBhcmFtcyA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVzdWx0ID0gUmVzb3VyY2VbbmFtZV0uY2FsbCh0aGlzLCBwYXJhbXMsIHRoaXMsIHN1Y2Nlc3MsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LiRwcm9taXNlIHx8IHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICBSZXNvdXJjZS5iaW5kID0gZnVuY3Rpb24oYWRkaXRpb25hbFBhcmFtRGVmYXVsdHMpe1xuICAgICAgICByZXR1cm4gcmVzb3VyY2VGYWN0b3J5KHVybCwgZXh0ZW5kKHt9LCBwYXJhbURlZmF1bHRzLCBhZGRpdGlvbmFsUGFyYW1EZWZhdWx0cyksIGFjdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIFJlc291cmNlO1xuICAgIH1cblxuICAgIHJldHVybiByZXNvdXJjZUZhY3Rvcnk7XG4gIH1dKTtcblxuXG59KSh3aW5kb3csIHdpbmRvdy5hbmd1bGFyKTtcbiIsIi8qKlxuICogU3RhdGUtYmFzZWQgcm91dGluZyBmb3IgQW5ndWxhckpTXG4gKiBAdmVyc2lvbiB2MC4yLjExXG4gKiBAbGluayBodHRwOi8vYW5ndWxhci11aS5naXRodWIuY29tL1xuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cblwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzJiZtb2R1bGUuZXhwb3J0cz09PWV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1cInVpLnJvdXRlclwiKSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe3JldHVybiBKKG5ldyhKKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmF9KSksYil9ZnVuY3Rpb24gZShhKXtyZXR1cm4gSShhcmd1bWVudHMsZnVuY3Rpb24oYil7YiE9PWEmJkkoYixmdW5jdGlvbihiLGMpe2EuaGFzT3duUHJvcGVydHkoYyl8fChhW2NdPWIpfSl9KSxhfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1bXTtmb3IodmFyIGQgaW4gYS5wYXRoKXtpZihhLnBhdGhbZF0hPT1iLnBhdGhbZF0pYnJlYWs7Yy5wdXNoKGEucGF0aFtkXSl9cmV0dXJuIGN9ZnVuY3Rpb24gZyhhKXtpZihPYmplY3Qua2V5cylyZXR1cm4gT2JqZWN0LmtleXMoYSk7dmFyIGM9W107cmV0dXJuIGIuZm9yRWFjaChhLGZ1bmN0aW9uKGEsYil7Yy5wdXNoKGIpfSksY31mdW5jdGlvbiBoKGEsYil7aWYoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpcmV0dXJuIGEuaW5kZXhPZihiLE51bWJlcihhcmd1bWVudHNbMl0pfHwwKTt2YXIgYz1hLmxlbmd0aD4+PjAsZD1OdW1iZXIoYXJndW1lbnRzWzJdKXx8MDtmb3IoZD0wPmQ/TWF0aC5jZWlsKGQpOk1hdGguZmxvb3IoZCksMD5kJiYoZCs9Yyk7Yz5kO2QrKylpZihkIGluIGEmJmFbZF09PT1iKXJldHVybiBkO3JldHVybi0xfWZ1bmN0aW9uIGkoYSxiLGMsZCl7dmFyIGUsaT1mKGMsZCksaj17fSxrPVtdO2Zvcih2YXIgbCBpbiBpKWlmKGlbbF0ucGFyYW1zJiYoZT1nKGlbbF0ucGFyYW1zKSxlLmxlbmd0aCkpZm9yKHZhciBtIGluIGUpaChrLGVbbV0pPj0wfHwoay5wdXNoKGVbbV0pLGpbZVttXV09YVtlW21dXSk7cmV0dXJuIEooe30saixiKX1mdW5jdGlvbiBqKGEsYixjKXtpZighYyl7Yz1bXTtmb3IodmFyIGQgaW4gYSljLnB1c2goZCl9Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV07aWYoYVtmXSE9YltmXSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBrKGEsYil7dmFyIGM9e307cmV0dXJuIEkoYSxmdW5jdGlvbihhKXtjW2FdPWJbYV19KSxjfWZ1bmN0aW9uIGwoYSxiKXt2YXIgZD0xLGY9MixnPXt9LGg9W10saT1nLGo9SihhLndoZW4oZykseyQkcHJvbWlzZXM6ZywkJHZhbHVlczpnfSk7dGhpcy5zdHVkeT1mdW5jdGlvbihnKXtmdW5jdGlvbiBrKGEsYyl7aWYob1tjXSE9PWYpe2lmKG4ucHVzaChjKSxvW2NdPT09ZCl0aHJvdyBuLnNwbGljZSgwLG4uaW5kZXhPZihjKSksbmV3IEVycm9yKFwiQ3ljbGljIGRlcGVuZGVuY3k6IFwiK24uam9pbihcIiAtPiBcIikpO2lmKG9bY109ZCxGKGEpKW0ucHVzaChjLFtmdW5jdGlvbigpe3JldHVybiBiLmdldChhKX1dLGgpO2Vsc2V7dmFyIGU9Yi5hbm5vdGF0ZShhKTtJKGUsZnVuY3Rpb24oYSl7YSE9PWMmJmcuaGFzT3duUHJvcGVydHkoYSkmJmsoZ1thXSxhKX0pLG0ucHVzaChjLGEsZSl9bi5wb3AoKSxvW2NdPWZ9fWZ1bmN0aW9uIGwoYSl7cmV0dXJuIEcoYSkmJmEudGhlbiYmYS4kJHByb21pc2VzfWlmKCFHKGcpKXRocm93IG5ldyBFcnJvcihcIidpbnZvY2FibGVzJyBtdXN0IGJlIGFuIG9iamVjdFwiKTt2YXIgbT1bXSxuPVtdLG89e307cmV0dXJuIEkoZyxrKSxnPW49bz1udWxsLGZ1bmN0aW9uKGQsZixnKXtmdW5jdGlvbiBoKCl7LS1zfHwodHx8ZShyLGYuJCR2YWx1ZXMpLHAuJCR2YWx1ZXM9cixwLiQkcHJvbWlzZXM9ITAsZGVsZXRlIHAuJCRpbmhlcml0ZWRWYWx1ZXMsby5yZXNvbHZlKHIpKX1mdW5jdGlvbiBrKGEpe3AuJCRmYWlsdXJlPWEsby5yZWplY3QoYSl9ZnVuY3Rpb24gbihjLGUsZil7ZnVuY3Rpb24gaShhKXtsLnJlamVjdChhKSxrKGEpfWZ1bmN0aW9uIGooKXtpZighRChwLiQkZmFpbHVyZSkpdHJ5e2wucmVzb2x2ZShiLmludm9rZShlLGcscikpLGwucHJvbWlzZS50aGVuKGZ1bmN0aW9uKGEpe3JbY109YSxoKCl9LGkpfWNhdGNoKGEpe2koYSl9fXZhciBsPWEuZGVmZXIoKSxtPTA7SShmLGZ1bmN0aW9uKGEpe3EuaGFzT3duUHJvcGVydHkoYSkmJiFkLmhhc093blByb3BlcnR5KGEpJiYobSsrLHFbYV0udGhlbihmdW5jdGlvbihiKXtyW2FdPWIsLS1tfHxqKCl9LGkpKX0pLG18fGooKSxxW2NdPWwucHJvbWlzZX1pZihsKGQpJiZnPT09YyYmKGc9ZixmPWQsZD1udWxsKSxkKXtpZighRyhkKSl0aHJvdyBuZXcgRXJyb3IoXCInbG9jYWxzJyBtdXN0IGJlIGFuIG9iamVjdFwiKX1lbHNlIGQ9aTtpZihmKXtpZighbChmKSl0aHJvdyBuZXcgRXJyb3IoXCIncGFyZW50JyBtdXN0IGJlIGEgcHJvbWlzZSByZXR1cm5lZCBieSAkcmVzb2x2ZS5yZXNvbHZlKClcIil9ZWxzZSBmPWo7dmFyIG89YS5kZWZlcigpLHA9by5wcm9taXNlLHE9cC4kJHByb21pc2VzPXt9LHI9Sih7fSxkKSxzPTErbS5sZW5ndGgvMyx0PSExO2lmKEQoZi4kJGZhaWx1cmUpKXJldHVybiBrKGYuJCRmYWlsdXJlKSxwO2YuJCRpbmhlcml0ZWRWYWx1ZXMmJmUocixmLiQkaW5oZXJpdGVkVmFsdWVzKSxmLiQkdmFsdWVzPyh0PWUocixmLiQkdmFsdWVzKSxwLiQkaW5oZXJpdGVkVmFsdWVzPWYuJCR2YWx1ZXMsaCgpKTooZi4kJGluaGVyaXRlZFZhbHVlcyYmKHAuJCRpbmhlcml0ZWRWYWx1ZXM9Zi4kJGluaGVyaXRlZFZhbHVlcyksSihxLGYuJCRwcm9taXNlcyksZi50aGVuKGgsaykpO2Zvcih2YXIgdT0wLHY9bS5sZW5ndGg7dj51O3UrPTMpZC5oYXNPd25Qcm9wZXJ0eShtW3VdKT9oKCk6bihtW3VdLG1bdSsxXSxtW3UrMl0pO3JldHVybiBwfX0sdGhpcy5yZXNvbHZlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLnN0dWR5KGEpKGIsYyxkKX19ZnVuY3Rpb24gbShhLGIsYyl7dGhpcy5mcm9tQ29uZmlnPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gRChhLnRlbXBsYXRlKT90aGlzLmZyb21TdHJpbmcoYS50ZW1wbGF0ZSxiKTpEKGEudGVtcGxhdGVVcmwpP3RoaXMuZnJvbVVybChhLnRlbXBsYXRlVXJsLGIpOkQoYS50ZW1wbGF0ZVByb3ZpZGVyKT90aGlzLmZyb21Qcm92aWRlcihhLnRlbXBsYXRlUHJvdmlkZXIsYixjKTpudWxsfSx0aGlzLmZyb21TdHJpbmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRShhKT9hKGIpOmF9LHRoaXMuZnJvbVVybD1mdW5jdGlvbihjLGQpe3JldHVybiBFKGMpJiYoYz1jKGQpKSxudWxsPT1jP251bGw6YS5nZXQoYyx7Y2FjaGU6Yn0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGF0YX0pfSx0aGlzLmZyb21Qcm92aWRlcj1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuaW52b2tlKGEsbnVsbCxkfHx7cGFyYW1zOmJ9KX19ZnVuY3Rpb24gbihhLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuIEQoYSk/dGhpcy50eXBlLmRlY29kZShhKTpwLiQkZ2V0RGVmYXVsdFZhbHVlKHRoaXMpfWZ1bmN0aW9uIGYoYixjLGQpe2lmKCEvXlxcdysoLStcXHcrKSokLy50ZXN0KGIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVyIG5hbWUgJ1wiK2IrXCInIGluIHBhdHRlcm4gJ1wiK2ErXCInXCIpO2lmKG5bYl0pdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICdcIitiK1wiJyBpbiBwYXR0ZXJuICdcIithK1wiJ1wiKTtuW2JdPUooe3R5cGU6Y3x8bmV3IG8sJHZhbHVlOmV9LGQpfWZ1bmN0aW9uIGcoYSxiLGMpe3ZhciBkPWEucmVwbGFjZSgvW1xcXFxcXFtcXF1cXF4kKis/LigpfHt9XS9nLFwiXFxcXCQmXCIpO2lmKCFiKXJldHVybiBkO3ZhciBlPWM/XCI/XCI6XCJcIjtyZXR1cm4gZCtlK1wiKFwiK2IrXCIpXCIrZX1mdW5jdGlvbiBoKGEpe2lmKCFkLnBhcmFtc3x8IWQucGFyYW1zW2FdKXJldHVybnt9O3ZhciBiPWQucGFyYW1zW2FdO3JldHVybiBHKGIpP2I6e3ZhbHVlOmJ9fWQ9Yi5pc09iamVjdChkKT9kOnt9O3ZhciBpLGo9LyhbOipdKShcXHcrKXxcXHsoXFx3KykoPzpcXDooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nLGs9XCJeXCIsbD0wLG09dGhpcy5zZWdtZW50cz1bXSxuPXRoaXMucGFyYW1zPXt9O3RoaXMuc291cmNlPWE7Zm9yKHZhciBxLHIscyx0LHU7KGk9ai5leGVjKGEpKSYmKHE9aVsyXXx8aVszXSxyPWlbNF18fChcIipcIj09aVsxXT9cIi4qXCI6XCJbXi9dKlwiKSxzPWEuc3Vic3RyaW5nKGwsaS5pbmRleCksdD10aGlzLiR0eXBlc1tyXXx8bmV3IG8oe3BhdHRlcm46bmV3IFJlZ0V4cChyKX0pLHU9aChxKSwhKHMuaW5kZXhPZihcIj9cIik+PTApKTspays9ZyhzLHQuJHN1YlBhdHRlcm4oKSxEKHUudmFsdWUpKSxmKHEsdCx1KSxtLnB1c2gocyksbD1qLmxhc3RJbmRleDtzPWEuc3Vic3RyaW5nKGwpO3ZhciB2PXMuaW5kZXhPZihcIj9cIik7aWYodj49MCl7dmFyIHc9dGhpcy5zb3VyY2VTZWFyY2g9cy5zdWJzdHJpbmcodik7cz1zLnN1YnN0cmluZygwLHYpLHRoaXMuc291cmNlUGF0aD1hLnN1YnN0cmluZygwLGwrdiksSSh3LnN1YnN0cmluZygxKS5zcGxpdCgvWyY/XS8pLGZ1bmN0aW9uKGEpe2YoYSxudWxsLGgoYSkpfSl9ZWxzZSB0aGlzLnNvdXJjZVBhdGg9YSx0aGlzLnNvdXJjZVNlYXJjaD1cIlwiO2srPWcocykrKGQuc3RyaWN0PT09ITE/XCIvP1wiOlwiXCIpK1wiJFwiLG0ucHVzaChzKSx0aGlzLnJlZ2V4cD1uZXcgUmVnRXhwKGssZC5jYXNlSW5zZW5zaXRpdmU/XCJpXCI6YyksdGhpcy5wcmVmaXg9bVswXX1mdW5jdGlvbiBvKGEpe0oodGhpcyxhKX1mdW5jdGlvbiBwKCl7ZnVuY3Rpb24gYSgpe3JldHVybntzdHJpY3Q6ZixjYXNlSW5zZW5zaXRpdmU6ZX19ZnVuY3Rpb24gYihhKXtyZXR1cm4gRShhKXx8SChhKSYmRShhW2EubGVuZ3RoLTFdKX1mdW5jdGlvbiBjKCl7SShoLGZ1bmN0aW9uKGEpe2lmKG4ucHJvdG90eXBlLiR0eXBlc1thLm5hbWVdKXRocm93IG5ldyBFcnJvcihcIkEgdHlwZSBuYW1lZCAnXCIrYS5uYW1lK1wiJyBoYXMgYWxyZWFkeSBiZWVuIGRlZmluZWQuXCIpO3ZhciBjPW5ldyBvKGIoYS5kZWYpP2QuaW52b2tlKGEuZGVmKTphLmRlZik7bi5wcm90b3R5cGUuJHR5cGVzW2EubmFtZV09Y30pfXZhciBkLGU9ITEsZj0hMCxnPSEwLGg9W10saT17XCJpbnRcIjp7ZGVjb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludChhLDEwKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSk/dGhpcy5kZWNvZGUoYS50b1N0cmluZygpKT09PWE6ITF9LHBhdHRlcm46L1xcZCsvfSxib29sOntlbmNvZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/MTowfSxkZWNvZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIDA9PT1wYXJzZUludChhLDEwKT8hMTohMH0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT0hMHx8YT09PSExfSxwYXR0ZXJuOi8wfDEvfSxzdHJpbmc6e3BhdHRlcm46L1teXFwvXSovfSxkYXRlOntlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS50b0lTT1N0cmluZygpPT09Yi50b0lTT1N0cmluZygpfSxkZWNvZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBEYXRlKGEpfSxlbmNvZGU6ZnVuY3Rpb24oYSl7cmV0dXJuW2EuZ2V0RnVsbFllYXIoKSwoXCIwXCIrKGEuZ2V0TW9udGgoKSsxKSkuc2xpY2UoLTIpLChcIjBcIithLmdldERhdGUoKSkuc2xpY2UoLTIpXS5qb2luKFwiLVwiKX0scGF0dGVybjovWzAtOV17NH0tKD86MFsxLTldfDFbMC0yXSktKD86MFsxLTldfFsxLTJdWzAtOV18M1swLTFdKS99fTtwLiQkZ2V0RGVmYXVsdFZhbHVlPWZ1bmN0aW9uKGEpe2lmKCFiKGEudmFsdWUpKXJldHVybiBhLnZhbHVlO2lmKCFkKXRocm93IG5ldyBFcnJvcihcIkluamVjdGFibGUgZnVuY3Rpb25zIGNhbm5vdCBiZSBjYWxsZWQgYXQgY29uZmlndXJhdGlvbiB0aW1lXCIpO3JldHVybiBkLmludm9rZShhLnZhbHVlKX0sdGhpcy5jYXNlSW5zZW5zaXRpdmU9ZnVuY3Rpb24oYSl7ZT1hfSx0aGlzLnN0cmljdE1vZGU9ZnVuY3Rpb24oYSl7Zj1hfSx0aGlzLmNvbXBpbGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gbmV3IG4oYixKKGEoKSxjKSl9LHRoaXMuaXNNYXRjaGVyPWZ1bmN0aW9uKGEpe2lmKCFHKGEpKXJldHVybiExO3ZhciBiPSEwO3JldHVybiBJKG4ucHJvdG90eXBlLGZ1bmN0aW9uKGMsZCl7RShjKSYmKGI9YiYmRChhW2RdKSYmRShhW2RdKSl9KSxifSx0aGlzLnR5cGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRChiKT8oaC5wdXNoKHtuYW1lOmEsZGVmOmJ9KSxnfHxjKCksdGhpcyk6bi5wcm90b3R5cGUuJHR5cGVzW2FdfSx0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGQ9YSxnPSExLG4ucHJvdG90eXBlLiR0eXBlcz17fSxjKCksSShpLGZ1bmN0aW9uKGEsYil7bi5wcm90b3R5cGUuJHR5cGVzW2JdfHwobi5wcm90b3R5cGUuJHR5cGVzW2JdPW5ldyBvKGEpKX0pLHRoaXN9XX1mdW5jdGlvbiBxKGEsYil7ZnVuY3Rpb24gZChhKXt2YXIgYj0vXlxcXigoPzpcXFxcW15hLXpBLVowLTldfFteXFxcXFxcW1xcXVxcXiQqKz8uKCl8e31dKykqKS8uZXhlYyhhLnNvdXJjZSk7cmV0dXJuIG51bGwhPWI/YlsxXS5yZXBsYWNlKC9cXFxcKC4pL2csXCIkMVwiKTpcIlwifWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gYS5yZXBsYWNlKC9cXCQoXFwkfFxcZHsxLDJ9KS8sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYltcIiRcIj09PWM/MDpOdW1iZXIoYyldfSl9ZnVuY3Rpb24gZihhLGIsYyl7aWYoIWMpcmV0dXJuITE7dmFyIGQ9YS5pbnZva2UoYixiLHskbWF0Y2g6Y30pO3JldHVybiBEKGQpP2Q6ITB9ZnVuY3Rpb24gZyhiLGMsZCxlKXtmdW5jdGlvbiBmKGEsYixjKXtyZXR1cm5cIi9cIj09PW0/YTpiP20uc2xpY2UoMCwtMSkrYTpjP20uc2xpY2UoMSkrYTphfWZ1bmN0aW9uIGcoYSl7ZnVuY3Rpb24gYyhhKXt2YXIgYz1hKGQsYik7cmV0dXJuIGM/KEYoYykmJmIucmVwbGFjZSgpLnVybChjKSwhMCk6ITF9aWYoIWF8fCFhLmRlZmF1bHRQcmV2ZW50ZWQpe3ZhciBlLGY9aS5sZW5ndGg7Zm9yKGU9MDtmPmU7ZSsrKWlmKGMoaVtlXSkpcmV0dXJuO2omJmMoail9fWZ1bmN0aW9uIGwoKXtyZXR1cm4gaD1ofHxjLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixnKX12YXIgbT1lLmJhc2VIcmVmKCksbj1iLnVybCgpO3JldHVybiBrfHxsKCkse3N5bmM6ZnVuY3Rpb24oKXtnKCl9LGxpc3RlbjpmdW5jdGlvbigpe3JldHVybiBsKCl9LHVwZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkKG49Yi51cmwoKSk6dm9pZChiLnVybCgpIT09biYmKGIudXJsKG4pLGIucmVwbGFjZSgpKSl9LHB1c2g6ZnVuY3Rpb24oYSxjLGQpe2IudXJsKGEuZm9ybWF0KGN8fHt9KSksZCYmZC5yZXBsYWNlJiZiLnJlcGxhY2UoKX0saHJlZjpmdW5jdGlvbihjLGQsZSl7aWYoIWMudmFsaWRhdGVzKGQpKXJldHVybiBudWxsO3ZhciBnPWEuaHRtbDVNb2RlKCksaD1jLmZvcm1hdChkKTtpZihlPWV8fHt9LGd8fG51bGw9PT1ofHwoaD1cIiNcIithLmhhc2hQcmVmaXgoKStoKSxoPWYoaCxnLGUuYWJzb2x1dGUpLCFlLmFic29sdXRlfHwhaClyZXR1cm4gaDt2YXIgaT0hZyYmaD9cIi9cIjpcIlwiLGo9Yi5wb3J0KCk7cmV0dXJuIGo9ODA9PT1qfHw0NDM9PT1qP1wiXCI6XCI6XCIraixbYi5wcm90b2NvbCgpLFwiOi8vXCIsYi5ob3N0KCksaixpLGhdLmpvaW4oXCJcIil9fX12YXIgaCxpPVtdLGo9bnVsbCxrPSExO3RoaXMucnVsZT1mdW5jdGlvbihhKXtpZighRShhKSl0aHJvdyBuZXcgRXJyb3IoXCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiBpLnB1c2goYSksdGhpc30sdGhpcy5vdGhlcndpc2U9ZnVuY3Rpb24oYSl7aWYoRihhKSl7dmFyIGI9YTthPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9fWVsc2UgaWYoIUUoYSkpdGhyb3cgbmV3IEVycm9yKFwiJ3J1bGUnIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gaj1hLHRoaXN9LHRoaXMud2hlbj1mdW5jdGlvbihhLGMpe3ZhciBnLGg9RihjKTtpZihGKGEpJiYoYT1iLmNvbXBpbGUoYSkpLCFoJiYhRShjKSYmIUgoYykpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCAnaGFuZGxlcicgaW4gd2hlbigpXCIpO3ZhciBpPXttYXRjaGVyOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGgmJihnPWIuY29tcGlsZShjKSxjPVtcIiRtYXRjaFwiLGZ1bmN0aW9uKGEpe3JldHVybiBnLmZvcm1hdChhKX1dKSxKKGZ1bmN0aW9uKGIsZCl7cmV0dXJuIGYoYixjLGEuZXhlYyhkLnBhdGgoKSxkLnNlYXJjaCgpKSl9LHtwcmVmaXg6RihhLnByZWZpeCk/YS5wcmVmaXg6XCJcIn0pfSxyZWdleDpmdW5jdGlvbihhLGIpe2lmKGEuZ2xvYmFsfHxhLnN0aWNreSl0aHJvdyBuZXcgRXJyb3IoXCJ3aGVuKCkgUmVnRXhwIG11c3Qgbm90IGJlIGdsb2JhbCBvciBzdGlja3lcIik7cmV0dXJuIGgmJihnPWIsYj1bXCIkbWF0Y2hcIixmdW5jdGlvbihhKXtyZXR1cm4gZShnLGEpfV0pLEooZnVuY3Rpb24oYyxkKXtyZXR1cm4gZihjLGIsYS5leGVjKGQucGF0aCgpKSl9LHtwcmVmaXg6ZChhKX0pfX0saj17bWF0Y2hlcjpiLmlzTWF0Y2hlcihhKSxyZWdleDphIGluc3RhbmNlb2YgUmVnRXhwfTtmb3IodmFyIGsgaW4gailpZihqW2tdKXJldHVybiB0aGlzLnJ1bGUoaVtrXShhLGMpKTt0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkICd3aGF0JyBpbiB3aGVuKClcIil9LHRoaXMuZGVmZXJJbnRlcmNlcHQ9ZnVuY3Rpb24oYSl7YT09PWMmJihhPSEwKSxrPWF9LHRoaXMuJGdldD1nLGcuJGluamVjdD1bXCIkbG9jYXRpb25cIixcIiRyb290U2NvcGVcIixcIiRpbmplY3RvclwiLFwiJGJyb3dzZXJcIl19ZnVuY3Rpb24gcihhLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuIDA9PT1hLmluZGV4T2YoXCIuXCIpfHwwPT09YS5pbmRleE9mKFwiXlwiKX1mdW5jdGlvbiBoKGEsYil7aWYoIWEpcmV0dXJuIGM7dmFyIGQ9RihhKSxlPWQ/YTphLm5hbWUsZz1mKGUpO2lmKGcpe2lmKCFiKXRocm93IG5ldyBFcnJvcihcIk5vIHJlZmVyZW5jZSBwb2ludCBnaXZlbiBmb3IgcGF0aCAnXCIrZStcIidcIik7Zm9yKHZhciBoPWUuc3BsaXQoXCIuXCIpLGk9MCxqPWgubGVuZ3RoLGs9YjtqPmk7aSsrKWlmKFwiXCIhPT1oW2ldfHwwIT09aSl7aWYoXCJeXCIhPT1oW2ldKWJyZWFrO2lmKCFrLnBhcmVudCl0aHJvdyBuZXcgRXJyb3IoXCJQYXRoICdcIitlK1wiJyBub3QgdmFsaWQgZm9yIHN0YXRlICdcIitiLm5hbWUrXCInXCIpO2s9ay5wYXJlbnR9ZWxzZSBrPWI7aD1oLnNsaWNlKGkpLmpvaW4oXCIuXCIpLGU9ay5uYW1lKyhrLm5hbWUmJmg/XCIuXCI6XCJcIikraH12YXIgbD12W2VdO3JldHVybiFsfHwhZCYmKGR8fGwhPT1hJiZsLnNlbGYhPT1hKT9jOmx9ZnVuY3Rpb24gbChhLGIpe3dbYV18fCh3W2FdPVtdKSx3W2FdLnB1c2goYil9ZnVuY3Rpb24gbShiKXtiPWQoYix7c2VsZjpiLHJlc29sdmU6Yi5yZXNvbHZlfHx7fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV9fSk7dmFyIGM9Yi5uYW1lO2lmKCFGKGMpfHxjLmluZGV4T2YoXCJAXCIpPj0wKXRocm93IG5ldyBFcnJvcihcIlN0YXRlIG11c3QgaGF2ZSBhIHZhbGlkIG5hbWVcIik7aWYodi5oYXNPd25Qcm9wZXJ0eShjKSl0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIrYytcIicnIGlzIGFscmVhZHkgZGVmaW5lZFwiKTt2YXIgZT0tMSE9PWMuaW5kZXhPZihcIi5cIik/Yy5zdWJzdHJpbmcoMCxjLmxhc3RJbmRleE9mKFwiLlwiKSk6RihiLnBhcmVudCk/Yi5wYXJlbnQ6XCJcIjtpZihlJiYhdltlXSlyZXR1cm4gbChlLGIuc2VsZik7Zm9yKHZhciBmIGluIHkpRSh5W2ZdKSYmKGJbZl09eVtmXShiLHkuJGRlbGVnYXRlc1tmXSkpO2lmKHZbY109YiwhYlt4XSYmYi51cmwmJmEud2hlbihiLnVybCxbXCIkbWF0Y2hcIixcIiRzdGF0ZVBhcmFtc1wiLGZ1bmN0aW9uKGEsYyl7dS4kY3VycmVudC5uYXZpZ2FibGU9PWImJmooYSxjKXx8dS50cmFuc2l0aW9uVG8oYixhLHtsb2NhdGlvbjohMX0pfV0pLHdbY10pZm9yKHZhciBnPTA7Zzx3W2NdLmxlbmd0aDtnKyspbSh3W2NdW2ddKTtyZXR1cm4gYn1mdW5jdGlvbiBuKGEpe3JldHVybiBhLmluZGV4T2YoXCIqXCIpPi0xfWZ1bmN0aW9uIG8oYSl7dmFyIGI9YS5zcGxpdChcIi5cIiksYz11LiRjdXJyZW50Lm5hbWUuc3BsaXQoXCIuXCIpO2lmKFwiKipcIj09PWJbMF0mJihjPWMuc2xpY2UoYy5pbmRleE9mKGJbMV0pKSxjLnVuc2hpZnQoXCIqKlwiKSksXCIqKlwiPT09YltiLmxlbmd0aC0xXSYmKGMuc3BsaWNlKGMuaW5kZXhPZihiW2IubGVuZ3RoLTJdKSsxLE51bWJlci5NQVhfVkFMVUUpLGMucHVzaChcIioqXCIpKSxiLmxlbmd0aCE9Yy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKVwiKlwiPT09YltkXSYmKGNbZF09XCIqXCIpO3JldHVybiBjLmpvaW4oXCJcIik9PT1iLmpvaW4oXCJcIil9ZnVuY3Rpb24gcChhLGIpe3JldHVybiBGKGEpJiYhRChiKT95W2FdOkUoYikmJkYoYSk/KHlbYV0mJiF5LiRkZWxlZ2F0ZXNbYV0mJih5LiRkZWxlZ2F0ZXNbYV09eVthXSkseVthXT1iLHRoaXMpOnRoaXN9ZnVuY3Rpb24gcShhLGIpe3JldHVybiBHKGEpP2I9YTpiLm5hbWU9YSxtKGIpLHRoaXN9ZnVuY3Rpb24gcihhLGUsZixsLG0scCxxKXtmdW5jdGlvbiByKGIsYyxkLGYpe3ZhciBnPWEuJGJyb2FkY2FzdChcIiRzdGF0ZU5vdEZvdW5kXCIsYixjLGQpO2lmKGcuZGVmYXVsdFByZXZlbnRlZClyZXR1cm4gcS51cGRhdGUoKSxBO2lmKCFnLnJldHJ5KXJldHVybiBudWxsO2lmKGYuJHJldHJ5KXJldHVybiBxLnVwZGF0ZSgpLEI7dmFyIGg9dS50cmFuc2l0aW9uPWUud2hlbihnLnJldHJ5KTtyZXR1cm4gaC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGghPT11LnRyYW5zaXRpb24/eTooYi5vcHRpb25zLiRyZXRyeT0hMCx1LnRyYW5zaXRpb25UbyhiLnRvLGIudG9QYXJhbXMsYi5vcHRpb25zKSl9LGZ1bmN0aW9uKCl7cmV0dXJuIEF9KSxxLnVwZGF0ZSgpLGh9ZnVuY3Rpb24gdyhhLGMsZCxoLGkpe3ZhciBqPWQ/YzprKGcoYS5wYXJhbXMpLGMpLG49eyRzdGF0ZVBhcmFtczpqfTtpLnJlc29sdmU9bS5yZXNvbHZlKGEucmVzb2x2ZSxuLGkucmVzb2x2ZSxhKTt2YXIgbz1baS5yZXNvbHZlLnRoZW4oZnVuY3Rpb24oYSl7aS5nbG9iYWxzPWF9KV07cmV0dXJuIGgmJm8ucHVzaChoKSxJKGEudmlld3MsZnVuY3Rpb24oYyxkKXt2YXIgZT1jLnJlc29sdmUmJmMucmVzb2x2ZSE9PWEucmVzb2x2ZT9jLnJlc29sdmU6e307ZS4kdGVtcGxhdGU9W2Z1bmN0aW9uKCl7cmV0dXJuIGYubG9hZChkLHt2aWV3OmMsbG9jYWxzOm4scGFyYW1zOmp9KXx8XCJcIn1dLG8ucHVzaChtLnJlc29sdmUoZSxuLGkucmVzb2x2ZSxhKS50aGVuKGZ1bmN0aW9uKGYpe2lmKEUoYy5jb250cm9sbGVyUHJvdmlkZXIpfHxIKGMuY29udHJvbGxlclByb3ZpZGVyKSl7dmFyIGc9Yi5leHRlbmQoe30sZSxuKTtmLiQkY29udHJvbGxlcj1sLmludm9rZShjLmNvbnRyb2xsZXJQcm92aWRlcixudWxsLGcpfWVsc2UgZi4kJGNvbnRyb2xsZXI9Yy5jb250cm9sbGVyO2YuJCRzdGF0ZT1hLGYuJCRjb250cm9sbGVyQXM9Yy5jb250cm9sbGVyQXMsaVtkXT1mfSkpfSksZS5hbGwobykudGhlbihmdW5jdGlvbigpe3JldHVybiBpfSl9dmFyIHk9ZS5yZWplY3QobmV3IEVycm9yKFwidHJhbnNpdGlvbiBzdXBlcnNlZGVkXCIpKSx6PWUucmVqZWN0KG5ldyBFcnJvcihcInRyYW5zaXRpb24gcHJldmVudGVkXCIpKSxBPWUucmVqZWN0KG5ldyBFcnJvcihcInRyYW5zaXRpb24gYWJvcnRlZFwiKSksQj1lLnJlamVjdChuZXcgRXJyb3IoXCJ0cmFuc2l0aW9uIGZhaWxlZFwiKSk7cmV0dXJuIHQubG9jYWxzPXtyZXNvbHZlOm51bGwsZ2xvYmFsczp7JHN0YXRlUGFyYW1zOnt9fX0sdT17cGFyYW1zOnt9LGN1cnJlbnQ6dC5zZWxmLCRjdXJyZW50OnQsdHJhbnNpdGlvbjpudWxsfSx1LnJlbG9hZD1mdW5jdGlvbigpe3UudHJhbnNpdGlvblRvKHUuY3VycmVudCxwLHtyZWxvYWQ6ITAsaW5oZXJpdDohMSxub3RpZnk6ITF9KX0sdS5nbz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUudHJhbnNpdGlvblRvKGEsYixKKHtpbmhlcml0OiEwLHJlbGF0aXZlOnUuJGN1cnJlbnR9LGMpKX0sdS50cmFuc2l0aW9uVG89ZnVuY3Rpb24oYixjLGYpe2M9Y3x8e30sZj1KKHtsb2NhdGlvbjohMCxpbmhlcml0OiExLHJlbGF0aXZlOm51bGwsbm90aWZ5OiEwLHJlbG9hZDohMSwkcmV0cnk6ITF9LGZ8fHt9KTt2YXIgbSxuPXUuJGN1cnJlbnQsbz11LnBhcmFtcyx2PW4ucGF0aCxBPWgoYixmLnJlbGF0aXZlKTtpZighRChBKSl7dmFyIEI9e3RvOmIsdG9QYXJhbXM6YyxvcHRpb25zOmZ9LEM9cihCLG4uc2VsZixvLGYpO2lmKEMpcmV0dXJuIEM7aWYoYj1CLnRvLGM9Qi50b1BhcmFtcyxmPUIub3B0aW9ucyxBPWgoYixmLnJlbGF0aXZlKSwhRChBKSl7aWYoIWYucmVsYXRpdmUpdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCBzdGF0ZSAnXCIrYitcIidcIik7dGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IHJlc29sdmUgJ1wiK2IrXCInIGZyb20gc3RhdGUgJ1wiK2YucmVsYXRpdmUrXCInXCIpfX1pZihBW3hdKXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB0cmFuc2l0aW9uIHRvIGFic3RyYWN0IHN0YXRlICdcIitiK1wiJ1wiKTtmLmluaGVyaXQmJihjPWkocCxjfHx7fSx1LiRjdXJyZW50LEEpKSxiPUE7dmFyIEU9Yi5wYXRoLEY9MCxHPUVbRl0sSD10LmxvY2FscyxJPVtdO2lmKCFmLnJlbG9hZClmb3IoO0cmJkc9PT12W0ZdJiZqKGMsbyxHLm93blBhcmFtcyk7KUg9SVtGXT1HLmxvY2FscyxGKyssRz1FW0ZdO2lmKHMoYixuLEgsZikpcmV0dXJuIGIuc2VsZi5yZWxvYWRPblNlYXJjaCE9PSExJiZxLnVwZGF0ZSgpLHUudHJhbnNpdGlvbj1udWxsLGUud2hlbih1LmN1cnJlbnQpO2lmKGM9ayhnKGIucGFyYW1zKSxjfHx7fSksZi5ub3RpZnkmJmEuJGJyb2FkY2FzdChcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsYi5zZWxmLGMsbi5zZWxmLG8pLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuIHEudXBkYXRlKCksejtmb3IodmFyIEw9ZS53aGVuKEgpLE09RjtNPEUubGVuZ3RoO00rKyxHPUVbTV0pSD1JW01dPWQoSCksTD13KEcsYyxHPT09YixMLEgpO3ZhciBOPXUudHJhbnNpdGlvbj1MLnRoZW4oZnVuY3Rpb24oKXt2YXIgZCxlLGc7aWYodS50cmFuc2l0aW9uIT09TilyZXR1cm4geTtmb3IoZD12Lmxlbmd0aC0xO2Q+PUY7ZC0tKWc9dltkXSxnLnNlbGYub25FeGl0JiZsLmludm9rZShnLnNlbGYub25FeGl0LGcuc2VsZixnLmxvY2Fscy5nbG9iYWxzKSxnLmxvY2Fscz1udWxsO2ZvcihkPUY7ZDxFLmxlbmd0aDtkKyspZT1FW2RdLGUubG9jYWxzPUlbZF0sZS5zZWxmLm9uRW50ZXImJmwuaW52b2tlKGUuc2VsZi5vbkVudGVyLGUuc2VsZixlLmxvY2Fscy5nbG9iYWxzKTtyZXR1cm4gdS50cmFuc2l0aW9uIT09Tj95Oih1LiRjdXJyZW50PWIsdS5jdXJyZW50PWIuc2VsZix1LnBhcmFtcz1jLEsodS5wYXJhbXMscCksdS50cmFuc2l0aW9uPW51bGwsZi5sb2NhdGlvbiYmYi5uYXZpZ2FibGUmJnEucHVzaChiLm5hdmlnYWJsZS51cmwsYi5uYXZpZ2FibGUubG9jYWxzLmdsb2JhbHMuJHN0YXRlUGFyYW1zLHtyZXBsYWNlOlwicmVwbGFjZVwiPT09Zi5sb2NhdGlvbn0pLGYubm90aWZ5JiZhLiRicm9hZGNhc3QoXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsYi5zZWxmLGMsbi5zZWxmLG8pLHEudXBkYXRlKCEwKSx1LmN1cnJlbnQpfSxmdW5jdGlvbihkKXtyZXR1cm4gdS50cmFuc2l0aW9uIT09Tj95Oih1LnRyYW5zaXRpb249bnVsbCxtPWEuJGJyb2FkY2FzdChcIiRzdGF0ZUNoYW5nZUVycm9yXCIsYi5zZWxmLGMsbi5zZWxmLG8sZCksbS5kZWZhdWx0UHJldmVudGVkfHxxLnVwZGF0ZSgpLGUucmVqZWN0KGQpKX0pO3JldHVybiBOfSx1LmlzPWZ1bmN0aW9uKGEsZCl7dmFyIGU9aChhKTtyZXR1cm4gRChlKT91LiRjdXJyZW50IT09ZT8hMTpEKGQpJiZudWxsIT09ZD9iLmVxdWFscyhwLGQpOiEwOmN9LHUuaW5jbHVkZXM9ZnVuY3Rpb24oYSxiKXtpZihGKGEpJiZuKGEpKXtpZighbyhhKSlyZXR1cm4hMTthPXUuJGN1cnJlbnQubmFtZX12YXIgZD1oKGEpO3JldHVybiBEKGQpP0QodS4kY3VycmVudC5pbmNsdWRlc1tkLm5hbWVdKT9qKGIscCk6ITE6Y30sdS5ocmVmPWZ1bmN0aW9uKGEsYixjKXtjPUooe2xvc3N5OiEwLGluaGVyaXQ6ITAsYWJzb2x1dGU6ITEscmVsYXRpdmU6dS4kY3VycmVudH0sY3x8e30pO3ZhciBkPWgoYSxjLnJlbGF0aXZlKTtpZighRChkKSlyZXR1cm4gbnVsbDtjLmluaGVyaXQmJihiPWkocCxifHx7fSx1LiRjdXJyZW50LGQpKTt2YXIgZT1kJiZjLmxvc3N5P2QubmF2aWdhYmxlOmQ7cmV0dXJuIGUmJmUudXJsP3EuaHJlZihlLnVybCxrKGcoZC5wYXJhbXMpLGJ8fHt9KSx7YWJzb2x1dGU6Yy5hYnNvbHV0ZX0pOm51bGx9LHUuZ2V0PWZ1bmN0aW9uKGEsYil7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGcodikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiB2W2FdLnNlbGZ9KTt2YXIgYz1oKGEsYik7cmV0dXJuIGMmJmMuc2VsZj9jLnNlbGY6bnVsbH0sdX1mdW5jdGlvbiBzKGEsYixjLGQpe3JldHVybiBhIT09Ynx8KGMhPT1iLmxvY2Fsc3x8ZC5yZWxvYWQpJiZhLnNlbGYucmVsb2FkT25TZWFyY2ghPT0hMT92b2lkIDA6ITB9dmFyIHQsdSx2PXt9LHc9e30seD1cImFic3RyYWN0XCIseT17cGFyZW50OmZ1bmN0aW9uKGEpe2lmKEQoYS5wYXJlbnQpJiZhLnBhcmVudClyZXR1cm4gaChhLnBhcmVudCk7dmFyIGI9L14oLispXFwuW14uXSskLy5leGVjKGEubmFtZSk7cmV0dXJuIGI/aChiWzFdKTp0fSxkYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudCYmYS5wYXJlbnQuZGF0YSYmKGEuZGF0YT1hLnNlbGYuZGF0YT1KKHt9LGEucGFyZW50LmRhdGEsYS5kYXRhKSksYS5kYXRhfSx1cmw6ZnVuY3Rpb24oYSl7dmFyIGI9YS51cmwsYz17cGFyYW1zOmEucGFyYW1zfHx7fX07aWYoRihiKSlyZXR1cm5cIl5cIj09Yi5jaGFyQXQoMCk/ZS5jb21waWxlKGIuc3Vic3RyaW5nKDEpLGMpOihhLnBhcmVudC5uYXZpZ2FibGV8fHQpLnVybC5jb25jYXQoYixjKTtpZighYnx8ZS5pc01hdGNoZXIoYikpcmV0dXJuIGI7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1cmwgJ1wiK2IrXCInIGluIHN0YXRlICdcIithK1wiJ1wiKX0sbmF2aWdhYmxlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnVybD9hOmEucGFyZW50P2EucGFyZW50Lm5hdmlnYWJsZTpudWxsfSxwYXJhbXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyYW1zP2EucGFyYW1zOmEudXJsP2EudXJsLnBhcmFtczphLnBhcmVudC5wYXJhbXN9LHZpZXdzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O3JldHVybiBJKEQoYS52aWV3cyk/YS52aWV3czp7XCJcIjphfSxmdW5jdGlvbihjLGQpe2QuaW5kZXhPZihcIkBcIik8MCYmKGQrPVwiQFwiK2EucGFyZW50Lm5hbWUpLGJbZF09Y30pLGJ9LG93blBhcmFtczpmdW5jdGlvbihhKXtpZihhLnBhcmFtcz1hLnBhcmFtc3x8e30sIWEucGFyZW50KXJldHVybiBnKGEucGFyYW1zKTt2YXIgYj17fTtJKGEucGFyYW1zLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLEkoYS5wYXJlbnQucGFyYW1zLGZ1bmN0aW9uKGMsZCl7aWYoIWJbZF0pdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXIgJ1wiK2QrXCInIGluIHN0YXRlICdcIithLm5hbWUrXCInXCIpO2JbZF09ITF9KTt2YXIgYz1bXTtyZXR1cm4gSShiLGZ1bmN0aW9uKGEsYil7YSYmYy5wdXNoKGIpfSksY30scGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnQ/YS5wYXJlbnQucGF0aC5jb25jYXQoYSk6W119LGluY2x1ZGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50P0ooe30sYS5wYXJlbnQuaW5jbHVkZXMpOnt9O3JldHVybiBiW2EubmFtZV09ITAsYn0sJGRlbGVnYXRlczp7fX07dD1tKHtuYW1lOlwiXCIsdXJsOlwiXlwiLHZpZXdzOm51bGwsXCJhYnN0cmFjdFwiOiEwfSksdC5uYXZpZ2FibGU9bnVsbCx0aGlzLmRlY29yYXRvcj1wLHRoaXMuc3RhdGU9cSx0aGlzLiRnZXQ9cixyLiRpbmplY3Q9W1wiJHJvb3RTY29wZVwiLFwiJHFcIixcIiR2aWV3XCIsXCIkaW5qZWN0b3JcIixcIiRyZXNvbHZlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiR1cmxSb3V0ZXJcIl19ZnVuY3Rpb24gcygpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm57bG9hZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9e3RlbXBsYXRlOm51bGwsY29udHJvbGxlcjpudWxsLHZpZXc6bnVsbCxsb2NhbHM6bnVsbCxub3RpZnk6ITAsYXN5bmM6ITAscGFyYW1zOnt9fTtyZXR1cm4gZD1KKGYsZCksZC52aWV3JiYoZT1iLmZyb21Db25maWcoZC52aWV3LGQucGFyYW1zLGQubG9jYWxzKSksZSYmZC5ub3RpZnkmJmEuJGJyb2FkY2FzdChcIiR2aWV3Q29udGVudExvYWRpbmdcIixkKSxlfX19dGhpcy4kZ2V0PWEsYS4kaW5qZWN0PVtcIiRyb290U2NvcGVcIixcIiR0ZW1wbGF0ZUZhY3RvcnlcIl19ZnVuY3Rpb24gdCgpe3ZhciBhPSExO3RoaXMudXNlQW5jaG9yU2Nyb2xsPWZ1bmN0aW9uKCl7YT0hMH0sdGhpcy4kZ2V0PVtcIiRhbmNob3JTY3JvbGxcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixjKXtyZXR1cm4gYT9iOmZ1bmN0aW9uKGEpe2MoZnVuY3Rpb24oKXthWzBdLnNjcm9sbEludG9WaWV3KCl9LDAsITEpfX1dfWZ1bmN0aW9uIHUoYSxjLGQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gYy5oYXM/ZnVuY3Rpb24oYSl7cmV0dXJuIGMuaGFzKGEpP2MuZ2V0KGEpOm51bGx9OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gYy5nZXQoYSl9Y2F0Y2goYil7cmV0dXJuIG51bGx9fX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMpe2IuYWZ0ZXIoYSksYygpfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2EucmVtb3ZlKCksYigpfX19O2lmKGkpcmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtpLmVudGVyKGEsbnVsbCxiLGMpfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2kubGVhdmUoYSxiKX19O2lmKGgpe3ZhciBkPWgmJmgoYixhKTtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMpe2QuZW50ZXIoYSxudWxsLGIpLGMoKX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXtkLmxlYXZlKGEpLGIoKX19fXJldHVybiBjKCl9dmFyIGc9ZSgpLGg9ZyhcIiRhbmltYXRvclwiKSxpPWcoXCIkYW5pbWF0ZVwiKSxqPXtyZXN0cmljdDpcIkVDQVwiLHRlcm1pbmFsOiEwLHByaW9yaXR5OjQwMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbXBpbGU6ZnVuY3Rpb24oYyxlLGcpe3JldHVybiBmdW5jdGlvbihjLGUsaCl7ZnVuY3Rpb24gaSgpe2smJihrLnJlbW92ZSgpLGs9bnVsbCksbSYmKG0uJGRlc3Ryb3koKSxtPW51bGwpLGwmJihxLmxlYXZlKGwsZnVuY3Rpb24oKXtrPW51bGx9KSxrPWwsbD1udWxsKX1mdW5jdGlvbiBqKGYpe3ZhciBqLGs9dyhoLGUuaW5oZXJpdGVkRGF0YShcIiR1aVZpZXdcIikpLHI9ayYmYS4kY3VycmVudCYmYS4kY3VycmVudC5sb2NhbHNba107aWYoZnx8ciE9PW4pe2o9Yy4kbmV3KCksbj1hLiRjdXJyZW50LmxvY2Fsc1trXTt2YXIgcz1nKGosZnVuY3Rpb24oYSl7cS5lbnRlcihhLGUsZnVuY3Rpb24oKXsoYi5pc0RlZmluZWQocCkmJiFwfHxjLiRldmFsKHApKSYmZChhKX0pLGkoKX0pO2w9cyxtPWosbS4kZW1pdChcIiR2aWV3Q29udGVudExvYWRlZFwiKSxtLiRldmFsKG8pfX12YXIgayxsLG0sbixvPWgub25sb2FkfHxcIlwiLHA9aC5hdXRvc2Nyb2xsLHE9ZihoLGMpO2MuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLGZ1bmN0aW9uKCl7aighMSl9KSxjLiRvbihcIiR2aWV3Q29udGVudExvYWRpbmdcIixmdW5jdGlvbigpe2ooITEpfSksaighMCl9fX07cmV0dXJuIGp9ZnVuY3Rpb24gdihhLGIsYyl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxjb21waWxlOmZ1bmN0aW9uKGQpe3ZhciBlPWQuaHRtbCgpO3JldHVybiBmdW5jdGlvbihkLGYsZyl7dmFyIGg9Yy4kY3VycmVudCxpPXcoZyxmLmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpKSxqPWgmJmgubG9jYWxzW2ldO2lmKGope2YuZGF0YShcIiR1aVZpZXdcIix7bmFtZTppLHN0YXRlOmouJCRzdGF0ZX0pLGYuaHRtbChqLiR0ZW1wbGF0ZT9qLiR0ZW1wbGF0ZTplKTt2YXIgaz1hKGYuY29udGVudHMoKSk7aWYoai4kJGNvbnRyb2xsZXIpe2ouJHNjb3BlPWQ7dmFyIGw9YihqLiQkY29udHJvbGxlcixqKTtqLiQkY29udHJvbGxlckFzJiYoZFtqLiQkY29udHJvbGxlckFzXT1sKSxmLmRhdGEoXCIkbmdDb250cm9sbGVyQ29udHJvbGxlclwiLGwpLGYuY2hpbGRyZW4oKS5kYXRhKFwiJG5nQ29udHJvbGxlckNvbnRyb2xsZXJcIixsKX1rKGQpfX19fX1mdW5jdGlvbiB3KGEsYil7dmFyIGM9YS51aVZpZXd8fGEubmFtZXx8XCJcIjtyZXR1cm4gYy5pbmRleE9mKFwiQFwiKT49MD9jOmMrXCJAXCIrKGI/Yi5zdGF0ZS5uYW1lOlwiXCIpfWZ1bmN0aW9uIHgoYSxiKXt2YXIgYyxkPWEubWF0Y2goL15cXHMqKHtbXn1dKn0pXFxzKiQvKTtpZihkJiYoYT1iK1wiKFwiK2RbMV0rXCIpXCIpLGM9YS5yZXBsYWNlKC9cXG4vZyxcIiBcIikubWF0Y2goL14oW14oXSs/KVxccyooXFwoKC4qKVxcKSk/JC8pLCFjfHw0IT09Yy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZSByZWYgJ1wiK2ErXCInXCIpO3JldHVybntzdGF0ZTpjWzFdLHBhcmFtRXhwcjpjWzNdfHxudWxsfX1mdW5jdGlvbiB5KGEpe3ZhciBiPWEucGFyZW50KCkuaW5oZXJpdGVkRGF0YShcIiR1aVZpZXdcIik7cmV0dXJuIGImJmIuc3RhdGUmJmIuc3RhdGUubmFtZT9iLnN0YXRlOnZvaWQgMH1mdW5jdGlvbiB6KGEsYyl7dmFyIGQ9W1wibG9jYXRpb25cIixcImluaGVyaXRcIixcInJlbG9hZFwiXTtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpbXCI/XnVpU3JlZkFjdGl2ZVwiLFwiP151aVNyZWZBY3RpdmVFcVwiXSxsaW5rOmZ1bmN0aW9uKGUsZixnLGgpe3ZhciBpPXgoZy51aVNyZWYsYS5jdXJyZW50Lm5hbWUpLGo9bnVsbCxrPXkoZil8fGEuJGN1cnJlbnQsbD1cIkZPUk1cIj09PWZbMF0ubm9kZU5hbWUsbT1sP1wiYWN0aW9uXCI6XCJocmVmXCIsbj0hMCxvPXtyZWxhdGl2ZTprLGluaGVyaXQ6ITB9LHA9ZS4kZXZhbChnLnVpU3JlZk9wdHMpfHx7fTtiLmZvckVhY2goZCxmdW5jdGlvbihhKXthIGluIHAmJihvW2FdPXBbYV0pfSk7dmFyIHE9ZnVuY3Rpb24oYil7aWYoYiYmKGo9Yiksbil7dmFyIGM9YS5ocmVmKGkuc3RhdGUsaixvKSxkPWhbMV18fGhbMF07cmV0dXJuIGQmJmQuJCRzZXRTdGF0ZUluZm8oaS5zdGF0ZSxqKSxudWxsPT09Yz8obj0hMSwhMSk6dm9pZChmWzBdW21dPWMpfX07aS5wYXJhbUV4cHImJihlLiR3YXRjaChpLnBhcmFtRXhwcixmdW5jdGlvbihhKXthIT09aiYmcShhKX0sITApLGo9ZS4kZXZhbChpLnBhcmFtRXhwcikpLHEoKSxsfHxmLmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKGIpe3ZhciBkPWIud2hpY2h8fGIuYnV0dG9uO2lmKCEoZD4xfHxiLmN0cmxLZXl8fGIubWV0YUtleXx8Yi5zaGlmdEtleXx8Zi5hdHRyKFwidGFyZ2V0XCIpKSl7dmFyIGU9YyhmdW5jdGlvbigpe2EuZ28oaS5zdGF0ZSxqLG8pfSk7Yi5wcmV2ZW50RGVmYXVsdCgpLGIucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtjLmNhbmNlbChlKX19fSl9fX1mdW5jdGlvbiBBKGEsYixjKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixmdW5jdGlvbihkLGUsZil7ZnVuY3Rpb24gZygpe2goKT9lLmFkZENsYXNzKG0pOmUucmVtb3ZlQ2xhc3MobSl9ZnVuY3Rpb24gaCgpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBmLnVpU3JlZkFjdGl2ZUVxP2EuJGN1cnJlbnQuc2VsZj09PWsmJmkoKTphLmluY2x1ZGVzKGsubmFtZSkmJmkoKX1mdW5jdGlvbiBpKCl7cmV0dXJuIWx8fGoobCxiKX12YXIgayxsLG07bT1jKGYudWlTcmVmQWN0aXZlRXF8fGYudWlTcmVmQWN0aXZlfHxcIlwiLCExKShkKSx0aGlzLiQkc2V0U3RhdGVJbmZvPWZ1bmN0aW9uKGIsYyl7az1hLmdldChiLHkoZSkpLGw9YyxnKCl9LGQuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLGcpfV19fWZ1bmN0aW9uIEIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmlzKGIpfX1mdW5jdGlvbiBDKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5pbmNsdWRlcyhiKX19dmFyIEQ9Yi5pc0RlZmluZWQsRT1iLmlzRnVuY3Rpb24sRj1iLmlzU3RyaW5nLEc9Yi5pc09iamVjdCxIPWIuaXNBcnJheSxJPWIuZm9yRWFjaCxKPWIuZXh0ZW5kLEs9Yi5jb3B5O2IubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIixbXCJuZ1wiXSksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIucm91dGVyXCIsW1widWkucm91dGVyLnV0aWxcIl0pLGIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIsW1widWkucm91dGVyLnJvdXRlclwiLFwidWkucm91dGVyLnV0aWxcIl0pLGIubW9kdWxlKFwidWkucm91dGVyXCIsW1widWkucm91dGVyLnN0YXRlXCJdKSxiLm1vZHVsZShcInVpLnJvdXRlci5jb21wYXRcIixbXCJ1aS5yb3V0ZXJcIl0pLGwuJGluamVjdD1bXCIkcVwiLFwiJGluamVjdG9yXCJdLGIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikuc2VydmljZShcIiRyZXNvbHZlXCIsbCksbS4kaW5qZWN0PVtcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGluamVjdG9yXCJdLGIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikuc2VydmljZShcIiR0ZW1wbGF0ZUZhY3RvcnlcIixtKSxuLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IG4odGhpcy5zb3VyY2VQYXRoK2ErdGhpcy5zb3VyY2VTZWFyY2gsYil9LG4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlfSxuLnByb3RvdHlwZS5leGVjPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWdleHAuZXhlYyhhKTtpZighYylyZXR1cm4gbnVsbDtiPWJ8fHt9O3ZhciBkLGUsZixnPXRoaXMucGFyYW1ldGVycygpLGg9Zy5sZW5ndGgsaT10aGlzLnNlZ21lbnRzLmxlbmd0aC0xLGo9e307aWYoaSE9PWMubGVuZ3RoLTEpdGhyb3cgbmV3IEVycm9yKFwiVW5iYWxhbmNlZCBjYXB0dXJlIGdyb3VwIGluIHJvdXRlICdcIit0aGlzLnNvdXJjZStcIidcIik7Zm9yKGQ9MDtpPmQ7ZCsrKWY9Z1tkXSxlPXRoaXMucGFyYW1zW2ZdLGpbZl09ZS4kdmFsdWUoY1tkKzFdKTtmb3IoO2g+ZDtkKyspZj1nW2RdLGU9dGhpcy5wYXJhbXNbZl0saltmXT1lLiR2YWx1ZShiW2ZdKTtyZXR1cm4gan0sbi5wcm90b3R5cGUucGFyYW1ldGVycz1mdW5jdGlvbihhKXtyZXR1cm4gRChhKT90aGlzLnBhcmFtc1thXXx8bnVsbDpnKHRoaXMucGFyYW1zKX0sbi5wcm90b3R5cGUudmFsaWRhdGVzPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0hMCxlPXRoaXM7cmV0dXJuIEkoYSxmdW5jdGlvbihhLGYpe2UucGFyYW1zW2ZdJiYoYz1lLnBhcmFtc1tmXSxiPSFhJiZEKGMudmFsdWUpLGQ9ZCYmKGJ8fGMudHlwZS5pcyhhKSkpfSksZH0sbi5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VnbWVudHMsYz10aGlzLnBhcmFtZXRlcnMoKTtpZighYSlyZXR1cm4gYi5qb2luKFwiXCIpLnJlcGxhY2UoXCIvL1wiLFwiL1wiKTt2YXIgZCxlLGYsZyxoLGksaj1iLmxlbmd0aC0xLGs9Yy5sZW5ndGgsbD1iWzBdO2lmKCF0aGlzLnZhbGlkYXRlcyhhKSlyZXR1cm4gbnVsbDtmb3IoZD0wO2o+ZDtkKyspZz1jW2RdLGY9YVtnXSxoPXRoaXMucGFyYW1zW2ddLChEKGYpfHxcIi9cIiE9PWJbZF0mJlwiL1wiIT09YltkKzFdKSYmKG51bGwhPWYmJihsKz1lbmNvZGVVUklDb21wb25lbnQoaC50eXBlLmVuY29kZShmKSkpLGwrPWJbZCsxXSk7Zm9yKDtrPmQ7ZCsrKWc9Y1tkXSxmPWFbZ10sbnVsbCE9ZiYmKGk9SChmKSxpJiYoZj1mLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oXCImXCIrZytcIj1cIikpLGwrPShlP1wiJlwiOlwiP1wiKStnK1wiPVwiKyhpP2Y6ZW5jb2RlVVJJQ29tcG9uZW50KGYpKSxlPSEwKTtyZXR1cm4gbH0sbi5wcm90b3R5cGUuJHR5cGVzPXt9LG8ucHJvdG90eXBlLmlzPWZ1bmN0aW9uKCl7cmV0dXJuITB9LG8ucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbihhKXtyZXR1cm4gYX0sby5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxvLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09Yn0sby5wcm90b3R5cGUuJHN1YlBhdHRlcm49ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhdHRlcm4udG9TdHJpbmcoKTtyZXR1cm4gYS5zdWJzdHIoMSxhLmxlbmd0aC0yKX0sby5wcm90b3R5cGUucGF0dGVybj0vLiovLGIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikucHJvdmlkZXIoXCIkdXJsTWF0Y2hlckZhY3RvcnlcIixwKSxxLiRpbmplY3Q9W1wiJGxvY2F0aW9uUHJvdmlkZXJcIixcIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyXCJdLGIubW9kdWxlKFwidWkucm91dGVyLnJvdXRlclwiKS5wcm92aWRlcihcIiR1cmxSb3V0ZXJcIixxKSxyLiRpbmplY3Q9W1wiJHVybFJvdXRlclByb3ZpZGVyXCIsXCIkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlclwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS52YWx1ZShcIiRzdGF0ZVBhcmFtc1wiLHt9KS5wcm92aWRlcihcIiRzdGF0ZVwiLHIpLHMuJGluamVjdD1bXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5wcm92aWRlcihcIiR2aWV3XCIscyksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikucHJvdmlkZXIoXCIkdWlWaWV3U2Nyb2xsXCIsdCksdS4kaW5qZWN0PVtcIiRzdGF0ZVwiLFwiJGluamVjdG9yXCIsXCIkdWlWaWV3U2Nyb2xsXCJdLHYuJGluamVjdD1bXCIkY29tcGlsZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRzdGF0ZVwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVZpZXdcIix1KSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVZpZXdcIix2KSx6LiRpbmplY3Q9W1wiJHN0YXRlXCIsXCIkdGltZW91dFwiXSxBLiRpbmplY3Q9W1wiJHN0YXRlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRpbnRlcnBvbGF0ZVwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVNyZWZcIix6KS5kaXJlY3RpdmUoXCJ1aVNyZWZBY3RpdmVcIixBKS5kaXJlY3RpdmUoXCJ1aVNyZWZBY3RpdmVFcVwiLEEpLEIuJGluamVjdD1bXCIkc3RhdGVcIl0sQy4kaW5qZWN0PVtcIiRzdGF0ZVwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5maWx0ZXIoXCJpc1N0YXRlXCIsQikuZmlsdGVyKFwiaW5jbHVkZWRCeVN0YXRlXCIsQyl9KHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XG4iLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXIgVUkgVHJlZSB2Mi4xLjVcbiAqIChjKSAyMDEwLTIwMTQuIGh0dHBzOi8vZ2l0aHViLmNvbS9KaW1MaXUvYW5ndWxhci11aS10cmVlXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuIWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIsW10pLmNvbnN0YW50KFwidHJlZUNvbmZpZ1wiLHt0cmVlQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWVcIixlbXB0eVRyZWVDbGFzczpcImFuZ3VsYXItdWktdHJlZS1lbXB0eVwiLGhpZGRlbkNsYXNzOlwiYW5ndWxhci11aS10cmVlLWhpZGRlblwiLG5vZGVzQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtbm9kZXNcIixub2RlQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtbm9kZVwiLGhhbmRsZUNsYXNzOlwiYW5ndWxhci11aS10cmVlLWhhbmRsZVwiLHBsYWNlSG9sZGVyQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtcGxhY2Vob2xkZXJcIixkcmFnQ2xhc3M6XCJhbmd1bGFyLXVpLXRyZWUtZHJhZ1wiLGRyYWdUaHJlc2hvbGQ6MyxsZXZlbFRocmVzaG9sZDozMH0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmZhY3RvcnkoXCIkdWlUcmVlSGVscGVyXCIsW1wiJGRvY3VtZW50XCIsXCIkd2luZG93XCIsZnVuY3Rpb24oJGRvY3VtZW50LCR3aW5kb3cpe3JldHVybntub2Rlc0RhdGE6e30sc2V0Tm9kZUF0dHJpYnV0ZTpmdW5jdGlvbihzY29wZSxhdHRyTmFtZSx2YWwpe3ZhciBkYXRhPXRoaXMubm9kZXNEYXRhW3Njb3BlLiRtb2RlbFZhbHVlLiQkaGFzaEtleV07ZGF0YXx8KGRhdGE9e30sdGhpcy5ub2Rlc0RhdGFbc2NvcGUuJG1vZGVsVmFsdWUuJCRoYXNoS2V5XT1kYXRhKSxkYXRhW2F0dHJOYW1lXT12YWx9LGdldE5vZGVBdHRyaWJ1dGU6ZnVuY3Rpb24oc2NvcGUsYXR0ck5hbWUpe3ZhciBkYXRhPXRoaXMubm9kZXNEYXRhW3Njb3BlLiRtb2RlbFZhbHVlLiQkaGFzaEtleV07cmV0dXJuIGRhdGE/ZGF0YVthdHRyTmFtZV06bnVsbH0sbm9kcmFnOmZ1bmN0aW9uKHRhcmdldEVsbSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRhcmdldEVsbS5hdHRyKFwiZGF0YS1ub2RyYWdcIil9LGV2ZW50T2JqOmZ1bmN0aW9uKGUpe3ZhciBvYmo9ZTtyZXR1cm4gdm9pZCAwIT09ZS50YXJnZXRUb3VjaGVzP29iaj1lLnRhcmdldFRvdWNoZXMuaXRlbSgwKTp2b2lkIDAhPT1lLm9yaWdpbmFsRXZlbnQmJnZvaWQgMCE9PWUub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzJiYob2JqPWUub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzLml0ZW0oMCkpLG9ian0sZHJhZ0luZm86ZnVuY3Rpb24obm9kZSl7cmV0dXJue3NvdXJjZTpub2RlLHNvdXJjZUluZm86e25vZGVTY29wZTpub2RlLGluZGV4Om5vZGUuaW5kZXgoKSxub2Rlc1Njb3BlOm5vZGUuJHBhcmVudE5vZGVzU2NvcGV9LGluZGV4Om5vZGUuaW5kZXgoKSxzaWJsaW5nczpub2RlLnNpYmxpbmdzKCkuc2xpY2UoMCkscGFyZW50Om5vZGUuJHBhcmVudE5vZGVzU2NvcGUsbW92ZVRvOmZ1bmN0aW9uKHBhcmVudCxzaWJsaW5ncyxpbmRleCl7dGhpcy5wYXJlbnQ9cGFyZW50LHRoaXMuc2libGluZ3M9c2libGluZ3Muc2xpY2UoMCk7dmFyIGk9dGhpcy5zaWJsaW5ncy5pbmRleE9mKHRoaXMuc291cmNlKTtpPi0xJiYodGhpcy5zaWJsaW5ncy5zcGxpY2UoaSwxKSx0aGlzLnNvdXJjZS5pbmRleCgpPGluZGV4JiZpbmRleC0tKSx0aGlzLnNpYmxpbmdzLnNwbGljZShpbmRleCwwLHRoaXMuc291cmNlKSx0aGlzLmluZGV4PWluZGV4fSxwYXJlbnROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LiRub2RlU2NvcGV9LHByZXY6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleD4wP3RoaXMuc2libGluZ3NbdGhpcy5pbmRleC0xXTpudWxsfSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5kZXg8dGhpcy5zaWJsaW5ncy5sZW5ndGgtMT90aGlzLnNpYmxpbmdzW3RoaXMuaW5kZXgrMV06bnVsbH0saXNEaXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZS4kcGFyZW50Tm9kZXNTY29wZSE9dGhpcy5wYXJlbnR8fHRoaXMuc291cmNlLmluZGV4KCkhPXRoaXMuaW5kZXh9LGV2ZW50QXJnczpmdW5jdGlvbihlbGVtZW50cyxwb3Mpe3JldHVybntzb3VyY2U6dGhpcy5zb3VyY2VJbmZvLGRlc3Q6e2luZGV4OnRoaXMuaW5kZXgsbm9kZXNTY29wZTp0aGlzLnBhcmVudH0sZWxlbWVudHM6ZWxlbWVudHMscG9zOnBvc319LGFwcGx5OmZ1bmN0aW9uKCl7dmFyIG5vZGVEYXRhPXRoaXMuc291cmNlLiRtb2RlbFZhbHVlO3RoaXMuc291cmNlLnJlbW92ZSgpLHRoaXMucGFyZW50Lmluc2VydE5vZGUodGhpcy5pbmRleCxub2RlRGF0YSl9fX0saGVpZ2h0OmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBlbGVtZW50LnByb3AoXCJzY3JvbGxIZWlnaHRcIil9LHdpZHRoOmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBlbGVtZW50LnByb3AoXCJzY3JvbGxXaWR0aFwiKX0sb2Zmc2V0OmZ1bmN0aW9uKGVsZW1lbnQpe3ZhciBib3VuZGluZ0NsaWVudFJlY3Q9ZWxlbWVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57d2lkdGg6ZWxlbWVudC5wcm9wKFwib2Zmc2V0V2lkdGhcIiksaGVpZ2h0OmVsZW1lbnQucHJvcChcIm9mZnNldEhlaWdodFwiKSx0b3A6Ym91bmRpbmdDbGllbnRSZWN0LnRvcCsoJHdpbmRvdy5wYWdlWU9mZnNldHx8JGRvY3VtZW50WzBdLmJvZHkuc2Nyb2xsVG9wfHwkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCksbGVmdDpib3VuZGluZ0NsaWVudFJlY3QubGVmdCsoJHdpbmRvdy5wYWdlWE9mZnNldHx8JGRvY3VtZW50WzBdLmJvZHkuc2Nyb2xsTGVmdHx8JGRvY3VtZW50WzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KX19LHBvc2l0aW9uU3RhcnRlZDpmdW5jdGlvbihlLHRhcmdldCl7dmFyIHBvcz17fTtyZXR1cm4gcG9zLm9mZnNldFg9ZS5wYWdlWC10aGlzLm9mZnNldCh0YXJnZXQpLmxlZnQscG9zLm9mZnNldFk9ZS5wYWdlWS10aGlzLm9mZnNldCh0YXJnZXQpLnRvcCxwb3Muc3RhcnRYPXBvcy5sYXN0WD1lLnBhZ2VYLHBvcy5zdGFydFk9cG9zLmxhc3RZPWUucGFnZVkscG9zLm5vd1g9cG9zLm5vd1k9cG9zLmRpc3RYPXBvcy5kaXN0WT1wb3MuZGlyQXg9MCxwb3MuZGlyWD1wb3MuZGlyWT1wb3MubGFzdERpclg9cG9zLmxhc3REaXJZPXBvcy5kaXN0QXhYPXBvcy5kaXN0QXhZPTAscG9zfSxwb3NpdGlvbk1vdmVkOmZ1bmN0aW9uKGUscG9zLGZpcnN0TW92aW5nKXtwb3MubGFzdFg9cG9zLm5vd1gscG9zLmxhc3RZPXBvcy5ub3dZLHBvcy5ub3dYPWUucGFnZVgscG9zLm5vd1k9ZS5wYWdlWSxwb3MuZGlzdFg9cG9zLm5vd1gtcG9zLmxhc3RYLHBvcy5kaXN0WT1wb3Mubm93WS1wb3MubGFzdFkscG9zLmxhc3REaXJYPXBvcy5kaXJYLHBvcy5sYXN0RGlyWT1wb3MuZGlyWSxwb3MuZGlyWD0wPT09cG9zLmRpc3RYPzA6cG9zLmRpc3RYPjA/MTotMSxwb3MuZGlyWT0wPT09cG9zLmRpc3RZPzA6cG9zLmRpc3RZPjA/MTotMTt2YXIgbmV3QXg9TWF0aC5hYnMocG9zLmRpc3RYKT5NYXRoLmFicyhwb3MuZGlzdFkpPzE6MDtyZXR1cm4gZmlyc3RNb3Zpbmc/KHBvcy5kaXJBeD1uZXdBeCx2b2lkKHBvcy5tb3Zpbmc9ITApKToocG9zLmRpckF4IT09bmV3QXg/KHBvcy5kaXN0QXhYPTAscG9zLmRpc3RBeFk9MCk6KHBvcy5kaXN0QXhYKz1NYXRoLmFicyhwb3MuZGlzdFgpLDAhPT1wb3MuZGlyWCYmcG9zLmRpclghPT1wb3MubGFzdERpclgmJihwb3MuZGlzdEF4WD0wKSxwb3MuZGlzdEF4WSs9TWF0aC5hYnMocG9zLmRpc3RZKSwwIT09cG9zLmRpclkmJnBvcy5kaXJZIT09cG9zLmxhc3REaXJZJiYocG9zLmRpc3RBeFk9MCkpLHZvaWQocG9zLmRpckF4PW5ld0F4KSl9fX1dKX0oKSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2FuZ3VsYXIubW9kdWxlKFwidWkudHJlZVwiKS5jb250cm9sbGVyKFwiVHJlZUNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcInRyZWVDb25maWdcIixmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQpe3RoaXMuc2NvcGU9JHNjb3BlLCRzY29wZS4kZWxlbWVudD0kZWxlbWVudCwkc2NvcGUuJG5vZGVzU2NvcGU9bnVsbCwkc2NvcGUuJHR5cGU9XCJ1aVRyZWVcIiwkc2NvcGUuJGVtcHR5RWxtPW51bGwsJHNjb3BlLiRjYWxsYmFja3M9bnVsbCwkc2NvcGUuZHJhZ0VuYWJsZWQ9ITAsJHNjb3BlLmVtcHR5UGxhY2VIb2xkZXJFbmFibGVkPSEwLCRzY29wZS5tYXhEZXB0aD0wLCRzY29wZS5kcmFnRGVsYXk9MCwkc2NvcGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAkc2NvcGUuJG5vZGVzU2NvcGUmJiRzY29wZS4kbm9kZXNTY29wZS4kbW9kZWxWYWx1ZSYmMD09PSRzY29wZS4kbm9kZXNTY29wZS4kbW9kZWxWYWx1ZS5sZW5ndGh9LCRzY29wZS5wbGFjZT1mdW5jdGlvbihwbGFjZUVsbSl7JHNjb3BlLiRub2Rlc1Njb3BlLiRlbGVtZW50LmFwcGVuZChwbGFjZUVsbSksJHNjb3BlLiRlbXB0eUVsbS5yZW1vdmUoKX0sJHNjb3BlLnJlc2V0RW1wdHlFbGVtZW50PWZ1bmN0aW9uKCl7MD09PSRzY29wZS4kbm9kZXNTY29wZS4kbW9kZWxWYWx1ZS5sZW5ndGgmJiRzY29wZS5lbXB0eVBsYWNlSG9sZGVyRW5hYmxlZD8kZWxlbWVudC5hcHBlbmQoJHNjb3BlLiRlbXB0eUVsbSk6JHNjb3BlLiRlbXB0eUVsbS5yZW1vdmUoKX07dmFyIGNvbGxhcHNlT3JFeHBhbmQ9ZnVuY3Rpb24oc2NvcGUsY29sbGFwc2VkKXtmb3IodmFyIG5vZGVzPXNjb3BlLmNoaWxkTm9kZXMoKSxpPTA7aTxub2Rlcy5sZW5ndGg7aSsrKXtjb2xsYXBzZWQ/bm9kZXNbaV0uY29sbGFwc2UoKTpub2Rlc1tpXS5leHBhbmQoKTt2YXIgc3ViU2NvcGU9bm9kZXNbaV0uJGNoaWxkTm9kZXNTY29wZTtzdWJTY29wZSYmY29sbGFwc2VPckV4cGFuZChzdWJTY29wZSxjb2xsYXBzZWQpfX07JHNjb3BlLmNvbGxhcHNlQWxsPWZ1bmN0aW9uKCl7Y29sbGFwc2VPckV4cGFuZCgkc2NvcGUuJG5vZGVzU2NvcGUsITApfSwkc2NvcGUuZXhwYW5kQWxsPWZ1bmN0aW9uKCl7Y29sbGFwc2VPckV4cGFuZCgkc2NvcGUuJG5vZGVzU2NvcGUsITEpfX1dKX0oKSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2FuZ3VsYXIubW9kdWxlKFwidWkudHJlZVwiKS5jb250cm9sbGVyKFwiVHJlZU5vZGVzQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGVsZW1lbnRcIixcInRyZWVDb25maWdcIixmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQpe3RoaXMuc2NvcGU9JHNjb3BlLCRzY29wZS4kZWxlbWVudD0kZWxlbWVudCwkc2NvcGUuJG1vZGVsVmFsdWU9bnVsbCwkc2NvcGUuJG5vZGVTY29wZT1udWxsLCRzY29wZS4kdHJlZVNjb3BlPW51bGwsJHNjb3BlLiR0eXBlPVwidWlUcmVlTm9kZXNcIiwkc2NvcGUuJG5vZGVzTWFwPXt9LCRzY29wZS5ub2Ryb3A9ITEsJHNjb3BlLm1heERlcHRoPTAsJHNjb3BlLmluaXRTdWJOb2RlPWZ1bmN0aW9uKHN1Yk5vZGUpeyRzY29wZS4kbm9kZXNNYXBbc3ViTm9kZS4kbW9kZWxWYWx1ZS4kJGhhc2hLZXldPXN1Yk5vZGV9LCRzY29wZS5kZXN0cm95U3ViTm9kZT1mdW5jdGlvbihzdWJOb2RlKXskc2NvcGUuJG5vZGVzTWFwW3N1Yk5vZGUuJG1vZGVsVmFsdWUuJCRoYXNoS2V5XT1udWxsfSwkc2NvcGUuYWNjZXB0PWZ1bmN0aW9uKHNvdXJjZU5vZGUsZGVzdEluZGV4KXtyZXR1cm4gJHNjb3BlLiR0cmVlU2NvcGUuJGNhbGxiYWNrcy5hY2NlcHQoc291cmNlTm9kZSwkc2NvcGUsZGVzdEluZGV4KX0sJHNjb3BlLmJlZm9yZURyYWc9ZnVuY3Rpb24oc291cmNlTm9kZSl7cmV0dXJuICRzY29wZS4kdHJlZVNjb3BlLiRjYWxsYmFja3MuYmVmb3JlRHJhZyhzb3VyY2VOb2RlKX0sJHNjb3BlLmlzUGFyZW50PWZ1bmN0aW9uKG5vZGUpe3JldHVybiBub2RlLiRwYXJlbnROb2Rlc1Njb3BlPT0kc2NvcGV9LCRzY29wZS5oYXNDaGlsZD1mdW5jdGlvbigpe3JldHVybiAkc2NvcGUuJG1vZGVsVmFsdWUubGVuZ3RoPjB9LCRzY29wZS5zYWZlQXBwbHk9ZnVuY3Rpb24oZm4pe3ZhciBwaGFzZT10aGlzLiRyb290LiQkcGhhc2U7XCIkYXBwbHlcIj09cGhhc2V8fFwiJGRpZ2VzdFwiPT1waGFzZT9mbiYmXCJmdW5jdGlvblwiPT10eXBlb2YgZm4mJmZuKCk6dGhpcy4kYXBwbHkoZm4pfSwkc2NvcGUucmVtb3ZlTm9kZT1mdW5jdGlvbihub2RlKXt2YXIgaW5kZXg9JHNjb3BlLiRtb2RlbFZhbHVlLmluZGV4T2Yobm9kZS4kbW9kZWxWYWx1ZSk7cmV0dXJuIGluZGV4Pi0xPygkc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCl7JHNjb3BlLiRtb2RlbFZhbHVlLnNwbGljZShpbmRleCwxKVswXX0pLG5vZGUpOm51bGx9LCRzY29wZS5pbnNlcnROb2RlPWZ1bmN0aW9uKGluZGV4LG5vZGVEYXRhKXskc2NvcGUuc2FmZUFwcGx5KGZ1bmN0aW9uKCl7JHNjb3BlLiRtb2RlbFZhbHVlLnNwbGljZShpbmRleCwwLG5vZGVEYXRhKX0pfSwkc2NvcGUuY2hpbGROb2Rlcz1mdW5jdGlvbigpe3ZhciBub2Rlcz1bXTtpZigkc2NvcGUuJG1vZGVsVmFsdWUpZm9yKHZhciBpPTA7aTwkc2NvcGUuJG1vZGVsVmFsdWUubGVuZ3RoO2krKylub2Rlcy5wdXNoKCRzY29wZS4kbm9kZXNNYXBbJHNjb3BlLiRtb2RlbFZhbHVlW2ldLiQkaGFzaEtleV0pO3JldHVybiBub2Rlc30sJHNjb3BlLmRlcHRoPWZ1bmN0aW9uKCl7cmV0dXJuICRzY29wZS4kbm9kZVNjb3BlPyRzY29wZS4kbm9kZVNjb3BlLmRlcHRoKCk6MH0sJHNjb3BlLm91dE9mRGVwdGg9ZnVuY3Rpb24oc291cmNlTm9kZSl7dmFyIG1heERlcHRoPSRzY29wZS5tYXhEZXB0aHx8JHNjb3BlLiR0cmVlU2NvcGUubWF4RGVwdGg7cmV0dXJuIG1heERlcHRoPjA/JHNjb3BlLmRlcHRoKCkrc291cmNlTm9kZS5tYXhTdWJEZXB0aCgpKzE+bWF4RGVwdGg6ITF9fV0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmNvbnRyb2xsZXIoXCJUcmVlTm9kZUNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcInRyZWVDb25maWdcIixmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQpe3RoaXMuc2NvcGU9JHNjb3BlLCRzY29wZS4kZWxlbWVudD0kZWxlbWVudCwkc2NvcGUuJG1vZGVsVmFsdWU9bnVsbCwkc2NvcGUuJHBhcmVudE5vZGVTY29wZT1udWxsLCRzY29wZS4kY2hpbGROb2Rlc1Njb3BlPW51bGwsJHNjb3BlLiRwYXJlbnROb2Rlc1Njb3BlPW51bGwsJHNjb3BlLiR0cmVlU2NvcGU9bnVsbCwkc2NvcGUuJGhhbmRsZVNjb3BlPW51bGwsJHNjb3BlLiR0eXBlPVwidWlUcmVlTm9kZVwiLCRzY29wZS4kJGFwcGx5PSExLCRzY29wZS5jb2xsYXBzZWQ9ITEsJHNjb3BlLmluaXQ9ZnVuY3Rpb24oY29udHJvbGxlcnNBcnIpe3ZhciB0cmVlTm9kZXNDdHJsPWNvbnRyb2xsZXJzQXJyWzBdOyRzY29wZS4kdHJlZVNjb3BlPWNvbnRyb2xsZXJzQXJyWzFdP2NvbnRyb2xsZXJzQXJyWzFdLnNjb3BlOm51bGwsJHNjb3BlLiRwYXJlbnROb2RlU2NvcGU9dHJlZU5vZGVzQ3RybC5zY29wZS4kbm9kZVNjb3BlLCRzY29wZS4kbW9kZWxWYWx1ZT10cmVlTm9kZXNDdHJsLnNjb3BlLiRtb2RlbFZhbHVlWyRzY29wZS4kaW5kZXhdLCRzY29wZS4kcGFyZW50Tm9kZXNTY29wZT10cmVlTm9kZXNDdHJsLnNjb3BlLHRyZWVOb2Rlc0N0cmwuc2NvcGUuaW5pdFN1Yk5vZGUoJHNjb3BlKSwkZWxlbWVudC5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXt0cmVlTm9kZXNDdHJsLnNjb3BlLmRlc3Ryb3lTdWJOb2RlKCRzY29wZSl9KX0sJHNjb3BlLmluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuICRzY29wZS4kcGFyZW50Tm9kZXNTY29wZS4kbW9kZWxWYWx1ZS5pbmRleE9mKCRzY29wZS4kbW9kZWxWYWx1ZSl9LCRzY29wZS5kcmFnRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiEoJHNjb3BlLiR0cmVlU2NvcGUmJiEkc2NvcGUuJHRyZWVTY29wZS5kcmFnRW5hYmxlZCl9LCRzY29wZS5pc1NpYmxpbmc9ZnVuY3Rpb24odGFyZ2V0Tm9kZSl7cmV0dXJuICRzY29wZS4kcGFyZW50Tm9kZXNTY29wZT09dGFyZ2V0Tm9kZS4kcGFyZW50Tm9kZXNTY29wZX0sJHNjb3BlLmlzQ2hpbGQ9ZnVuY3Rpb24odGFyZ2V0Tm9kZSl7dmFyIG5vZGVzPSRzY29wZS5jaGlsZE5vZGVzKCk7cmV0dXJuIG5vZGVzJiZub2Rlcy5pbmRleE9mKHRhcmdldE5vZGUpPi0xfSwkc2NvcGUucHJldj1mdW5jdGlvbigpe3ZhciBpbmRleD0kc2NvcGUuaW5kZXgoKTtyZXR1cm4gaW5kZXg+MD8kc2NvcGUuc2libGluZ3MoKVtpbmRleC0xXTpudWxsfSwkc2NvcGUuc2libGluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gJHNjb3BlLiRwYXJlbnROb2Rlc1Njb3BlLmNoaWxkTm9kZXMoKX0sJHNjb3BlLmNoaWxkTm9kZXNDb3VudD1mdW5jdGlvbigpe3JldHVybiAkc2NvcGUuY2hpbGROb2RlcygpPyRzY29wZS5jaGlsZE5vZGVzKCkubGVuZ3RoOjB9LCRzY29wZS5oYXNDaGlsZD1mdW5jdGlvbigpe3JldHVybiAkc2NvcGUuY2hpbGROb2Rlc0NvdW50KCk+MH0sJHNjb3BlLmNoaWxkTm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4gJHNjb3BlLiRjaGlsZE5vZGVzU2NvcGUmJiRzY29wZS4kY2hpbGROb2Rlc1Njb3BlLiRtb2RlbFZhbHVlPyRzY29wZS4kY2hpbGROb2Rlc1Njb3BlLmNoaWxkTm9kZXMoKTpudWxsfSwkc2NvcGUuYWNjZXB0PWZ1bmN0aW9uKHNvdXJjZU5vZGUsZGVzdEluZGV4KXtyZXR1cm4gJHNjb3BlLiRjaGlsZE5vZGVzU2NvcGUmJiRzY29wZS4kY2hpbGROb2Rlc1Njb3BlLiRtb2RlbFZhbHVlJiYkc2NvcGUuJGNoaWxkTm9kZXNTY29wZS5hY2NlcHQoc291cmNlTm9kZSxkZXN0SW5kZXgpfSwkc2NvcGUucmVtb3ZlTm9kZT1mdW5jdGlvbigpe3ZhciBub2RlPSRzY29wZS5yZW1vdmUoKTtyZXR1cm4gJHNjb3BlLiRjYWxsYmFja3MucmVtb3ZlZChub2RlKSxub2RlfSwkc2NvcGUucmVtb3ZlPWZ1bmN0aW9uKCl7cmV0dXJuICRzY29wZS4kcGFyZW50Tm9kZXNTY29wZS5yZW1vdmVOb2RlKCRzY29wZSl9LCRzY29wZS50b2dnbGU9ZnVuY3Rpb24oKXskc2NvcGUuY29sbGFwc2VkPSEkc2NvcGUuY29sbGFwc2VkfSwkc2NvcGUuY29sbGFwc2U9ZnVuY3Rpb24oKXskc2NvcGUuY29sbGFwc2VkPSEwfSwkc2NvcGUuZXhwYW5kPWZ1bmN0aW9uKCl7JHNjb3BlLmNvbGxhcHNlZD0hMX0sJHNjb3BlLmRlcHRoPWZ1bmN0aW9uKCl7dmFyIHBhcmVudE5vZGU9JHNjb3BlLiRwYXJlbnROb2RlU2NvcGU7cmV0dXJuIHBhcmVudE5vZGU/cGFyZW50Tm9kZS5kZXB0aCgpKzE6MX07dmFyIHN1YkRlcHRoPTAsY291bnRTdWJEZXB0aD1mdW5jdGlvbihzY29wZSl7Zm9yKHZhciBjb3VudD0wLG5vZGVzPXNjb3BlLmNoaWxkTm9kZXMoKSxpPTA7aTxub2Rlcy5sZW5ndGg7aSsrKXt2YXIgY2hpbGROb2Rlcz1ub2Rlc1tpXS4kY2hpbGROb2Rlc1Njb3BlO2NoaWxkTm9kZXMmJihjb3VudD0xLGNvdW50U3ViRGVwdGgoY2hpbGROb2RlcykpfXN1YkRlcHRoKz1jb3VudH07JHNjb3BlLm1heFN1YkRlcHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHN1YkRlcHRoPTAsJHNjb3BlLiRjaGlsZE5vZGVzU2NvcGUmJmNvdW50U3ViRGVwdGgoJHNjb3BlLiRjaGlsZE5vZGVzU2NvcGUpLHN1YkRlcHRofX1dKX0oKSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2FuZ3VsYXIubW9kdWxlKFwidWkudHJlZVwiKS5jb250cm9sbGVyKFwiVHJlZUhhbmRsZUNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcInRyZWVDb25maWdcIixmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQpe3RoaXMuc2NvcGU9JHNjb3BlLCRzY29wZS4kZWxlbWVudD0kZWxlbWVudCwkc2NvcGUuJG5vZGVTY29wZT1udWxsLCRzY29wZS4kdHlwZT1cInVpVHJlZUhhbmRsZVwifV0pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7YW5ndWxhci5tb2R1bGUoXCJ1aS50cmVlXCIpLmRpcmVjdGl2ZShcInVpVHJlZVwiLFtcInRyZWVDb25maWdcIixcIiR3aW5kb3dcIixmdW5jdGlvbih0cmVlQ29uZmlnLCR3aW5kb3cpe3JldHVybntyZXN0cmljdDpcIkFcIixzY29wZTohMCxjb250cm9sbGVyOlwiVHJlZUNvbnRyb2xsZXJcIixsaW5rOmZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cnMpe3ZhciBjYWxsYmFja3M9e2FjY2VwdDpudWxsLGJlZm9yZURyYWc6bnVsbH0sY29uZmlnPXt9O2FuZ3VsYXIuZXh0ZW5kKGNvbmZpZyx0cmVlQ29uZmlnKSxjb25maWcudHJlZUNsYXNzJiZlbGVtZW50LmFkZENsYXNzKGNvbmZpZy50cmVlQ2xhc3MpLHNjb3BlLiRlbXB0eUVsbT1hbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxjb25maWcuZW1wdHlUcmVlQ2xhc3MmJnNjb3BlLiRlbXB0eUVsbS5hZGRDbGFzcyhjb25maWcuZW1wdHlUcmVlQ2xhc3MpLHNjb3BlLiR3YXRjaChcIiRub2Rlc1Njb3BlLiRtb2RlbFZhbHVlLmxlbmd0aFwiLGZ1bmN0aW9uKCl7c2NvcGUuJG5vZGVzU2NvcGUuJG1vZGVsVmFsdWUmJnNjb3BlLnJlc2V0RW1wdHlFbGVtZW50KCl9LCEwKSxzY29wZS4kd2F0Y2goYXR0cnMuZHJhZ0VuYWJsZWQsZnVuY3Rpb24odmFsKXtcImJvb2xlYW5cIj09dHlwZW9mIHZhbCYmKHNjb3BlLmRyYWdFbmFibGVkPXZhbCl9KSxzY29wZS4kd2F0Y2goYXR0cnMuZW1wdHlQbGFjZUhvbGRlckVuYWJsZWQsZnVuY3Rpb24odmFsKXtcImJvb2xlYW5cIj09dHlwZW9mIHZhbCYmKHNjb3BlLmVtcHR5UGxhY2VIb2xkZXJFbmFibGVkPXZhbCl9KSxzY29wZS4kd2F0Y2goYXR0cnMubWF4RGVwdGgsZnVuY3Rpb24odmFsKXtcIm51bWJlclwiPT10eXBlb2YgdmFsJiYoc2NvcGUubWF4RGVwdGg9dmFsKX0pLHNjb3BlLiR3YXRjaChhdHRycy5kcmFnRGVsYXksZnVuY3Rpb24odmFsKXtcIm51bWJlclwiPT10eXBlb2YgdmFsJiYoc2NvcGUuZHJhZ0RlbGF5PXZhbCl9KSxjYWxsYmFja3MuYWNjZXB0PWZ1bmN0aW9uKHNvdXJjZU5vZGVTY29wZSxkZXN0Tm9kZXNTY29wZSl7cmV0dXJuIGRlc3ROb2Rlc1Njb3BlLm5vZHJvcHx8ZGVzdE5vZGVzU2NvcGUub3V0T2ZEZXB0aChzb3VyY2VOb2RlU2NvcGUpPyExOiEwfSxjYWxsYmFja3MuYmVmb3JlRHJhZz1mdW5jdGlvbigpe3JldHVybiEwfSxjYWxsYmFja3MucmVtb3ZlZD1mdW5jdGlvbigpe30sY2FsbGJhY2tzLmRyb3BwZWQ9ZnVuY3Rpb24oKXt9LGNhbGxiYWNrcy5kcmFnU3RhcnQ9ZnVuY3Rpb24oKXt9LGNhbGxiYWNrcy5kcmFnTW92ZT1mdW5jdGlvbigpe30sY2FsbGJhY2tzLmRyYWdTdG9wPWZ1bmN0aW9uKCl7fSxjYWxsYmFja3MuYmVmb3JlRHJvcD1mdW5jdGlvbigpe30sc2NvcGUuJHdhdGNoKGF0dHJzLnVpVHJlZSxmdW5jdGlvbihuZXdWYWwpe2FuZ3VsYXIuZm9yRWFjaChuZXdWYWwsZnVuY3Rpb24odmFsdWUsa2V5KXtjYWxsYmFja3Nba2V5XSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdmFsdWUmJihjYWxsYmFja3Nba2V5XT12YWx1ZSl9KSxzY29wZS4kY2FsbGJhY2tzPWNhbGxiYWNrc30sITApfX19XSl9KCksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjthbmd1bGFyLm1vZHVsZShcInVpLnRyZWVcIikuZGlyZWN0aXZlKFwidWlUcmVlTm9kZXNcIixbXCJ0cmVlQ29uZmlnXCIsXCIkd2luZG93XCIsZnVuY3Rpb24odHJlZUNvbmZpZyl7cmV0dXJue3JlcXVpcmU6W1wibmdNb2RlbFwiLFwiP151aVRyZWVOb2RlXCIsXCJedWlUcmVlXCJdLHJlc3RyaWN0OlwiQVwiLHNjb3BlOiEwLGNvbnRyb2xsZXI6XCJUcmVlTm9kZXNDb250cm9sbGVyXCIsbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzLGNvbnRyb2xsZXJzQXJyKXt2YXIgY29uZmlnPXt9O2FuZ3VsYXIuZXh0ZW5kKGNvbmZpZyx0cmVlQ29uZmlnKSxjb25maWcubm9kZXNDbGFzcyYmZWxlbWVudC5hZGRDbGFzcyhjb25maWcubm9kZXNDbGFzcyk7dmFyIG5nTW9kZWw9Y29udHJvbGxlcnNBcnJbMF0sdHJlZU5vZGVDdHJsPWNvbnRyb2xsZXJzQXJyWzFdLHRyZWVDdHJsPWNvbnRyb2xsZXJzQXJyWzJdO3RyZWVOb2RlQ3RybD8odHJlZU5vZGVDdHJsLnNjb3BlLiRjaGlsZE5vZGVzU2NvcGU9c2NvcGUsc2NvcGUuJG5vZGVTY29wZT10cmVlTm9kZUN0cmwuc2NvcGUpOnRyZWVDdHJsLnNjb3BlLiRub2Rlc1Njb3BlPXNjb3BlLHNjb3BlLiR0cmVlU2NvcGU9dHJlZUN0cmwuc2NvcGUsbmdNb2RlbCYmKG5nTW9kZWwuJHJlbmRlcj1mdW5jdGlvbigpe25nTW9kZWwuJG1vZGVsVmFsdWUmJmFuZ3VsYXIuaXNBcnJheShuZ01vZGVsLiRtb2RlbFZhbHVlKXx8KHNjb3BlLiRtb2RlbFZhbHVlPVtdKSxzY29wZS4kbW9kZWxWYWx1ZT1uZ01vZGVsLiRtb2RlbFZhbHVlfSksc2NvcGUuJHdhdGNoKGF0dHJzLm1heERlcHRoLGZ1bmN0aW9uKHZhbCl7XCJudW1iZXJcIj09dHlwZW9mIHZhbCYmKHNjb3BlLm1heERlcHRoPXZhbCl9KSxhdHRycy4kb2JzZXJ2ZShcIm5vZHJvcFwiLGZ1bmN0aW9uKHZhbCl7c2NvcGUubm9kcm9wPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB2YWx9KSxhdHRycy4kb2JzZXJ2ZShcImhvcml6b250YWxcIixmdW5jdGlvbih2YWwpe3Njb3BlLmhvcml6b250YWw9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHZhbH0pfX19XSl9KCksZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjthbmd1bGFyLm1vZHVsZShcInVpLnRyZWVcIikuZGlyZWN0aXZlKFwidWlUcmVlTm9kZVwiLFtcInRyZWVDb25maWdcIixcIiR1aVRyZWVIZWxwZXJcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbih0cmVlQ29uZmlnLCR1aVRyZWVIZWxwZXIsJHdpbmRvdywkZG9jdW1lbnQsJHRpbWVvdXQpe3JldHVybntyZXF1aXJlOltcIl51aVRyZWVOb2Rlc1wiLFwiXnVpVHJlZVwiXSxyZXN0cmljdDpcIkFcIixjb250cm9sbGVyOlwiVHJlZU5vZGVDb250cm9sbGVyXCIsbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzLGNvbnRyb2xsZXJzQXJyKXt2YXIgY29uZmlnPXt9O2FuZ3VsYXIuZXh0ZW5kKGNvbmZpZyx0cmVlQ29uZmlnKSxjb25maWcubm9kZUNsYXNzJiZlbGVtZW50LmFkZENsYXNzKGNvbmZpZy5ub2RlQ2xhc3MpLHNjb3BlLmluaXQoY29udHJvbGxlcnNBcnIpLHNjb3BlLmNvbGxhcHNlZD0hISR1aVRyZWVIZWxwZXIuZ2V0Tm9kZUF0dHJpYnV0ZShzY29wZSxcImNvbGxhcHNlZFwiKSxzY29wZS4kd2F0Y2goYXR0cnMuY29sbGFwc2VkLGZ1bmN0aW9uKHZhbCl7XCJib29sZWFuXCI9PXR5cGVvZiB2YWwmJihzY29wZS5jb2xsYXBzZWQ9dmFsKX0pLHNjb3BlLiR3YXRjaChcImNvbGxhcHNlZFwiLGZ1bmN0aW9uKHZhbCl7JHVpVHJlZUhlbHBlci5zZXROb2RlQXR0cmlidXRlKHNjb3BlLFwiY29sbGFwc2VkXCIsdmFsKSxhdHRycy4kc2V0KFwiY29sbGFwc2VkXCIsdmFsKX0pO3ZhciBmaXJzdE1vdmluZyxkcmFnSW5mbyxwb3MscGxhY2VFbG0saGlkZGVuUGxhY2VFbG0sZHJhZ0VsbSxlbGVtZW50cyxkb2N1bWVudF9oZWlnaHQsZG9jdW1lbnRfd2lkdGgsaGFzVG91Y2g9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyx0cmVlU2NvcGU9bnVsbCxkcmFnRGVsYXlpbmc9ITAsZHJhZ1N0YXJ0ZWQ9ITEsZHJhZ1RpbWVyPW51bGwsYm9keT1kb2N1bWVudC5ib2R5LGh0bWw9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGRyYWdTdGFydD1mdW5jdGlvbihlKXtpZigoaGFzVG91Y2h8fDIhPWUuYnV0dG9uJiYzIT1lLndoaWNoKSYmIShlLnVpVHJlZURyYWdnaW5nfHxlLm9yaWdpbmFsRXZlbnQmJmUub3JpZ2luYWxFdmVudC51aVRyZWVEcmFnZ2luZykpe3ZhciBldmVudEVsbT1hbmd1bGFyLmVsZW1lbnQoZS50YXJnZXQpLGV2ZW50U2NvcGU9ZXZlbnRFbG0uc2NvcGUoKTtpZihldmVudFNjb3BlJiZldmVudFNjb3BlLiR0eXBlJiYhKFwidWlUcmVlTm9kZVwiIT1ldmVudFNjb3BlLiR0eXBlJiZcInVpVHJlZUhhbmRsZVwiIT1ldmVudFNjb3BlLiR0eXBlfHxcInVpVHJlZU5vZGVcIj09ZXZlbnRTY29wZS4kdHlwZSYmZXZlbnRTY29wZS4kaGFuZGxlU2NvcGUpKXt2YXIgZXZlbnRFbG1UYWdOYW1lPWV2ZW50RWxtLnByb3AoXCJ0YWdOYW1lXCIpLnRvTG93ZXJDYXNlKCk7aWYoXCJpbnB1dFwiIT1ldmVudEVsbVRhZ05hbWUmJlwidGV4dGFyZWFcIiE9ZXZlbnRFbG1UYWdOYW1lJiZcImJ1dHRvblwiIT1ldmVudEVsbVRhZ05hbWUmJlwic2VsZWN0XCIhPWV2ZW50RWxtVGFnTmFtZSl7Zm9yKDtldmVudEVsbSYmZXZlbnRFbG1bMF0mJmV2ZW50RWxtWzBdIT1lbGVtZW50Oyl7aWYoJHVpVHJlZUhlbHBlci5ub2RyYWcoZXZlbnRFbG0pKXJldHVybjtldmVudEVsbT1ldmVudEVsbS5wYXJlbnQoKX1pZihzY29wZS5iZWZvcmVEcmFnKHNjb3BlKSl7ZS51aVRyZWVEcmFnZ2luZz0hMCxlLm9yaWdpbmFsRXZlbnQmJihlLm9yaWdpbmFsRXZlbnQudWlUcmVlRHJhZ2dpbmc9ITApLGUucHJldmVudERlZmF1bHQoKTt2YXIgZXZlbnRPYmo9JHVpVHJlZUhlbHBlci5ldmVudE9iaihlKTtmaXJzdE1vdmluZz0hMCxkcmFnSW5mbz0kdWlUcmVlSGVscGVyLmRyYWdJbmZvKHNjb3BlKTt2YXIgdGFnTmFtZT1zY29wZS4kZWxlbWVudC5wcm9wKFwidGFnTmFtZVwiKTtpZihcInRyXCI9PT10YWdOYW1lLnRvTG93ZXJDYXNlKCkpe3BsYWNlRWxtPWFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSkpO3ZhciB0ZEVsbT1hbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIikpLmFkZENsYXNzKGNvbmZpZy5wbGFjZUhvbGRlckNsYXNzKTtwbGFjZUVsbS5hcHBlbmQodGRFbG0pfWVsc2UgcGxhY2VFbG09YW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKSkuYWRkQ2xhc3MoY29uZmlnLnBsYWNlSG9sZGVyQ2xhc3MpO2hpZGRlblBsYWNlRWxtPWFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSkpLGNvbmZpZy5oaWRkZW5DbGFzcyYmaGlkZGVuUGxhY2VFbG0uYWRkQ2xhc3MoY29uZmlnLmhpZGRlbkNsYXNzKSxwb3M9JHVpVHJlZUhlbHBlci5wb3NpdGlvblN0YXJ0ZWQoZXZlbnRPYmosc2NvcGUuJGVsZW1lbnQpLHBsYWNlRWxtLmNzcyhcImhlaWdodFwiLCR1aVRyZWVIZWxwZXIuaGVpZ2h0KHNjb3BlLiRlbGVtZW50KStcInB4XCIpLHBsYWNlRWxtLmNzcyhcIndpZHRoXCIsJHVpVHJlZUhlbHBlci53aWR0aChzY29wZS4kZWxlbWVudCkrXCJweFwiKSxkcmFnRWxtPWFuZ3VsYXIuZWxlbWVudCgkd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoc2NvcGUuJHBhcmVudE5vZGVzU2NvcGUuJGVsZW1lbnQucHJvcChcInRhZ05hbWVcIikpKS5hZGRDbGFzcyhzY29wZS4kcGFyZW50Tm9kZXNTY29wZS4kZWxlbWVudC5hdHRyKFwiY2xhc3NcIikpLmFkZENsYXNzKGNvbmZpZy5kcmFnQ2xhc3MpLGRyYWdFbG0uY3NzKFwid2lkdGhcIiwkdWlUcmVlSGVscGVyLndpZHRoKHNjb3BlLiRlbGVtZW50KStcInB4XCIpLGRyYWdFbG0uY3NzKFwiei1pbmRleFwiLDk5OTkpO3ZhciBoU3R5bGU9KHNjb3BlLiRlbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoXCIuYW5ndWxhci11aS10cmVlLWhhbmRsZVwiKXx8c2NvcGUuJGVsZW1lbnRbMF0pLmN1cnJlbnRTdHlsZTtoU3R5bGUmJihkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZShcInVpLXRyZWUtY3Vyc29yXCIsJGRvY3VtZW50LmZpbmQoXCJib2R5XCIpLmNzcyhcImN1cnNvclwiKXx8XCJcIiksJGRvY3VtZW50LmZpbmQoXCJib2R5XCIpLmNzcyh7Y3Vyc29yOmhTdHlsZS5jdXJzb3IrXCIhaW1wb3J0YW50XCJ9KSksc2NvcGUuJGVsZW1lbnQuYWZ0ZXIocGxhY2VFbG0pLHNjb3BlLiRlbGVtZW50LmFmdGVyKGhpZGRlblBsYWNlRWxtKSxkcmFnRWxtLmFwcGVuZChzY29wZS4kZWxlbWVudCksJGRvY3VtZW50LmZpbmQoXCJib2R5XCIpLmFwcGVuZChkcmFnRWxtKSxkcmFnRWxtLmNzcyh7bGVmdDpldmVudE9iai5wYWdlWC1wb3Mub2Zmc2V0WCtcInB4XCIsdG9wOmV2ZW50T2JqLnBhZ2VZLXBvcy5vZmZzZXRZK1wicHhcIn0pLGVsZW1lbnRzPXtwbGFjZWhvbGRlcjpwbGFjZUVsbSxkcmFnZ2luZzpkcmFnRWxtfSxhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5iaW5kKFwidG91Y2hlbmRcIixkcmFnRW5kRXZlbnQpLGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLmJpbmQoXCJ0b3VjaGNhbmNlbFwiLGRyYWdFbmRFdmVudCksYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuYmluZChcInRvdWNobW92ZVwiLGRyYWdNb3ZlRXZlbnQpLGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLmJpbmQoXCJtb3VzZXVwXCIsZHJhZ0VuZEV2ZW50KSxhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5iaW5kKFwibW91c2Vtb3ZlXCIsZHJhZ01vdmVFdmVudCksYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuYmluZChcIm1vdXNlbGVhdmVcIixkcmFnQ2FuY2VsRXZlbnQpLGRvY3VtZW50X2hlaWdodD1NYXRoLm1heChib2R5LnNjcm9sbEhlaWdodCxib2R5Lm9mZnNldEhlaWdodCxodG1sLmNsaWVudEhlaWdodCxodG1sLnNjcm9sbEhlaWdodCxodG1sLm9mZnNldEhlaWdodCksZG9jdW1lbnRfd2lkdGg9TWF0aC5tYXgoYm9keS5zY3JvbGxXaWR0aCxib2R5Lm9mZnNldFdpZHRoLGh0bWwuY2xpZW50V2lkdGgsaHRtbC5zY3JvbGxXaWR0aCxodG1sLm9mZnNldFdpZHRoKX19fX19LGRyYWdNb3ZlPWZ1bmN0aW9uKGUpe2lmKCFkcmFnU3RhcnRlZClyZXR1cm4gdm9pZChkcmFnRGVsYXlpbmd8fChkcmFnU3RhcnRlZD0hMCxzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtzY29wZS4kY2FsbGJhY2tzLmRyYWdTdGFydChkcmFnSW5mby5ldmVudEFyZ3MoZWxlbWVudHMscG9zKSl9KSkpO3ZhciBwcmV2LGxlZnRFbG1Qb3MsdG9wRWxtUG9zLGV2ZW50T2JqPSR1aVRyZWVIZWxwZXIuZXZlbnRPYmooZSk7aWYoZHJhZ0VsbSl7ZS5wcmV2ZW50RGVmYXVsdCgpLCR3aW5kb3cuZ2V0U2VsZWN0aW9uPyR3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk6JHdpbmRvdy5kb2N1bWVudC5zZWxlY3Rpb24mJiR3aW5kb3cuZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCksbGVmdEVsbVBvcz1ldmVudE9iai5wYWdlWC1wb3Mub2Zmc2V0WCx0b3BFbG1Qb3M9ZXZlbnRPYmoucGFnZVktcG9zLm9mZnNldFksMD5sZWZ0RWxtUG9zJiYobGVmdEVsbVBvcz0wKSwwPnRvcEVsbVBvcyYmKHRvcEVsbVBvcz0wKSx0b3BFbG1Qb3MrMTA+ZG9jdW1lbnRfaGVpZ2h0JiYodG9wRWxtUG9zPWRvY3VtZW50X2hlaWdodC0xMCksbGVmdEVsbVBvcysxMD5kb2N1bWVudF93aWR0aCYmKGxlZnRFbG1Qb3M9ZG9jdW1lbnRfd2lkdGgtMTApLGRyYWdFbG0uY3NzKHtsZWZ0OmxlZnRFbG1Qb3MrXCJweFwiLHRvcDp0b3BFbG1Qb3MrXCJweFwifSk7dmFyIHRvcF9zY3JvbGw9d2luZG93LnBhZ2VZT2Zmc2V0fHwkd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsYm90dG9tX3Njcm9sbD10b3Bfc2Nyb2xsKyh3aW5kb3cuaW5uZXJIZWlnaHR8fCR3aW5kb3cuZG9jdW1lbnQuY2xpZW50SGVpZ2h0fHwkd2luZG93LmRvY3VtZW50LmNsaWVudEhlaWdodCk7aWYoYm90dG9tX3Njcm9sbDxldmVudE9iai5wYWdlWSYmZG9jdW1lbnRfaGVpZ2h0Pj1ib3R0b21fc2Nyb2xsJiZ3aW5kb3cuc2Nyb2xsQnkoMCwxMCksdG9wX3Njcm9sbD5ldmVudE9iai5wYWdlWSYmd2luZG93LnNjcm9sbEJ5KDAsLTEwKSwkdWlUcmVlSGVscGVyLnBvc2l0aW9uTW92ZWQoZSxwb3MsZmlyc3RNb3ZpbmcpLGZpcnN0TW92aW5nKXJldHVybiB2b2lkKGZpcnN0TW92aW5nPSExKTtpZihwb3MuZGlyQXgmJnBvcy5kaXN0QXhYPj1jb25maWcubGV2ZWxUaHJlc2hvbGQmJihwb3MuZGlzdEF4WD0wLHBvcy5kaXN0WD4wJiYocHJldj1kcmFnSW5mby5wcmV2KCkscHJldiYmIXByZXYuY29sbGFwc2VkJiZwcmV2LmFjY2VwdChzY29wZSxwcmV2LmNoaWxkTm9kZXNDb3VudCgpKSYmKHByZXYuJGNoaWxkTm9kZXNTY29wZS4kZWxlbWVudC5hcHBlbmQocGxhY2VFbG0pLGRyYWdJbmZvLm1vdmVUbyhwcmV2LiRjaGlsZE5vZGVzU2NvcGUscHJldi5jaGlsZE5vZGVzKCkscHJldi5jaGlsZE5vZGVzQ291bnQoKSkpKSxwb3MuZGlzdFg8MCkpe3ZhciBuZXh0PWRyYWdJbmZvLm5leHQoKTtpZighbmV4dCl7dmFyIHRhcmdldD1kcmFnSW5mby5wYXJlbnROb2RlKCk7dGFyZ2V0JiZ0YXJnZXQuJHBhcmVudE5vZGVzU2NvcGUuYWNjZXB0KHNjb3BlLHRhcmdldC5pbmRleCgpKzEpJiYodGFyZ2V0LiRlbGVtZW50LmFmdGVyKHBsYWNlRWxtKSxkcmFnSW5mby5tb3ZlVG8odGFyZ2V0LiRwYXJlbnROb2Rlc1Njb3BlLHRhcmdldC5zaWJsaW5ncygpLHRhcmdldC5pbmRleCgpKzEpKX19dmFyIGRpc3BsYXlFbG0sdGFyZ2V0WD0oJHVpVHJlZUhlbHBlci5vZmZzZXQoZHJhZ0VsbSkubGVmdC0kdWlUcmVlSGVscGVyLm9mZnNldChwbGFjZUVsbSkubGVmdD49Y29uZmlnLnRocmVzaG9sZCxldmVudE9iai5wYWdlWC0kd2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCksdGFyZ2V0WT1ldmVudE9iai5wYWdlWS0od2luZG93LnBhZ2VZT2Zmc2V0fHwkd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApO2FuZ3VsYXIuaXNGdW5jdGlvbihkcmFnRWxtLmhpZGUpP2RyYWdFbG0uaGlkZSgpOihkaXNwbGF5RWxtPWRyYWdFbG1bMF0uc3R5bGUuZGlzcGxheSxkcmFnRWxtWzBdLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLCR3aW5kb3cuZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0YXJnZXRYLHRhcmdldFkpO3ZhciB0YXJnZXRFbG09YW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0YXJnZXRYLHRhcmdldFkpKTtpZihhbmd1bGFyLmlzRnVuY3Rpb24oZHJhZ0VsbS5zaG93KT9kcmFnRWxtLnNob3coKTpkcmFnRWxtWzBdLnN0eWxlLmRpc3BsYXk9ZGlzcGxheUVsbSwhcG9zLmRpckF4KXt2YXIgdGFyZ2V0QmVmb3JlLHRhcmdldE5vZGU7dGFyZ2V0Tm9kZT10YXJnZXRFbG0uc2NvcGUoKTt2YXIgaXNFbXB0eT0hMTtpZighdGFyZ2V0Tm9kZSlyZXR1cm47aWYoXCJ1aVRyZWVcIj09dGFyZ2V0Tm9kZS4kdHlwZSYmdGFyZ2V0Tm9kZS5kcmFnRW5hYmxlZCYmKGlzRW1wdHk9dGFyZ2V0Tm9kZS5pc0VtcHR5KCkpLFwidWlUcmVlSGFuZGxlXCI9PXRhcmdldE5vZGUuJHR5cGUmJih0YXJnZXROb2RlPXRhcmdldE5vZGUuJG5vZGVTY29wZSksXCJ1aVRyZWVOb2RlXCIhPXRhcmdldE5vZGUuJHR5cGUmJiFpc0VtcHR5KXJldHVybjtpZih0cmVlU2NvcGUmJnBsYWNlRWxtLnBhcmVudCgpWzBdIT10cmVlU2NvcGUuJGVsZW1lbnRbMF0mJih0cmVlU2NvcGUucmVzZXRFbXB0eUVsZW1lbnQoKSx0cmVlU2NvcGU9bnVsbCksaXNFbXB0eSl0cmVlU2NvcGU9dGFyZ2V0Tm9kZSx0YXJnZXROb2RlLiRub2Rlc1Njb3BlLmFjY2VwdChzY29wZSwwKSYmKHRhcmdldE5vZGUucGxhY2UocGxhY2VFbG0pLGRyYWdJbmZvLm1vdmVUbyh0YXJnZXROb2RlLiRub2Rlc1Njb3BlLHRhcmdldE5vZGUuJG5vZGVzU2NvcGUuY2hpbGROb2RlcygpLDApKTtlbHNlIGlmKHRhcmdldE5vZGUuZHJhZ0VuYWJsZWQoKSl7dGFyZ2V0RWxtPXRhcmdldE5vZGUuJGVsZW1lbnQ7dmFyIHRhcmdldE9mZnNldD0kdWlUcmVlSGVscGVyLm9mZnNldCh0YXJnZXRFbG0pO3RhcmdldEJlZm9yZT10YXJnZXROb2RlLmhvcml6b250YWw/ZXZlbnRPYmoucGFnZVg8dGFyZ2V0T2Zmc2V0LmxlZnQrJHVpVHJlZUhlbHBlci53aWR0aCh0YXJnZXRFbG0pLzI6ZXZlbnRPYmoucGFnZVk8dGFyZ2V0T2Zmc2V0LnRvcCskdWlUcmVlSGVscGVyLmhlaWdodCh0YXJnZXRFbG0pLzIsdGFyZ2V0Tm9kZS4kcGFyZW50Tm9kZXNTY29wZS5hY2NlcHQoc2NvcGUsdGFyZ2V0Tm9kZS5pbmRleCgpKT90YXJnZXRCZWZvcmU/KHRhcmdldEVsbVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShwbGFjZUVsbVswXSx0YXJnZXRFbG1bMF0pLGRyYWdJbmZvLm1vdmVUbyh0YXJnZXROb2RlLiRwYXJlbnROb2Rlc1Njb3BlLHRhcmdldE5vZGUuc2libGluZ3MoKSx0YXJnZXROb2RlLmluZGV4KCkpKToodGFyZ2V0RWxtLmFmdGVyKHBsYWNlRWxtKSxkcmFnSW5mby5tb3ZlVG8odGFyZ2V0Tm9kZS4kcGFyZW50Tm9kZXNTY29wZSx0YXJnZXROb2RlLnNpYmxpbmdzKCksdGFyZ2V0Tm9kZS5pbmRleCgpKzEpKTohdGFyZ2V0QmVmb3JlJiZ0YXJnZXROb2RlLmFjY2VwdChzY29wZSx0YXJnZXROb2RlLmNoaWxkTm9kZXNDb3VudCgpKSYmKHRhcmdldE5vZGUuJGNoaWxkTm9kZXNTY29wZS4kZWxlbWVudC5hcHBlbmQocGxhY2VFbG0pLGRyYWdJbmZvLm1vdmVUbyh0YXJnZXROb2RlLiRjaGlsZE5vZGVzU2NvcGUsdGFyZ2V0Tm9kZS5jaGlsZE5vZGVzKCksdGFyZ2V0Tm9kZS5jaGlsZE5vZGVzQ291bnQoKSkpfX1zY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtzY29wZS4kY2FsbGJhY2tzLmRyYWdNb3ZlKGRyYWdJbmZvLmV2ZW50QXJncyhlbGVtZW50cyxwb3MpKX0pfX0sZHJhZ0VuZD1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZHJhZ0VsbSYmKHNjb3BlLiR0cmVlU2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7c2NvcGUuJGNhbGxiYWNrcy5iZWZvcmVEcm9wKGRyYWdJbmZvLmV2ZW50QXJncyhlbGVtZW50cyxwb3MpKX0pLGhpZGRlblBsYWNlRWxtLnJlcGxhY2VXaXRoKHNjb3BlLiRlbGVtZW50KSxwbGFjZUVsbS5yZW1vdmUoKSxkcmFnRWxtLnJlbW92ZSgpLGRyYWdFbG09bnVsbCxzY29wZS4kJGFwcGx5PyhkcmFnSW5mby5hcHBseSgpLHNjb3BlLiR0cmVlU2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7c2NvcGUuJGNhbGxiYWNrcy5kcm9wcGVkKGRyYWdJbmZvLmV2ZW50QXJncyhlbGVtZW50cyxwb3MpKX0pKTpiaW5kRHJhZygpLHNjb3BlLiR0cmVlU2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7c2NvcGUuJGNhbGxiYWNrcy5kcmFnU3RvcChkcmFnSW5mby5ldmVudEFyZ3MoZWxlbWVudHMscG9zKSl9KSxzY29wZS4kJGFwcGx5PSExLGRyYWdJbmZvPW51bGwpO3ZhciBvbGRDdXI9ZG9jdW1lbnQuYm9keS5nZXRBdHRyaWJ1dGUoXCJ1aS10cmVlLWN1cnNvclwiKTtudWxsIT09b2xkQ3VyJiYoJGRvY3VtZW50LmZpbmQoXCJib2R5XCIpLmNzcyh7Y3Vyc29yOm9sZEN1cn0pLGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKFwidWktdHJlZS1jdXJzb3JcIikpLGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnVuYmluZChcInRvdWNoZW5kXCIsZHJhZ0VuZEV2ZW50KSxhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS51bmJpbmQoXCJ0b3VjaGNhbmNlbFwiLGRyYWdFbmRFdmVudCksYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkudW5iaW5kKFwidG91Y2htb3ZlXCIsZHJhZ01vdmVFdmVudCksYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkudW5iaW5kKFwibW91c2V1cFwiLGRyYWdFbmRFdmVudCksYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkudW5iaW5kKFwibW91c2Vtb3ZlXCIsZHJhZ01vdmVFdmVudCksYW5ndWxhci5lbGVtZW50KCR3aW5kb3cuZG9jdW1lbnQuYm9keSkudW5iaW5kKFwibW91c2VsZWF2ZVwiLGRyYWdDYW5jZWxFdmVudCl9LGRyYWdTdGFydEV2ZW50PWZ1bmN0aW9uKGUpe3Njb3BlLmRyYWdFbmFibGVkKCkmJmRyYWdTdGFydChlKX0sZHJhZ01vdmVFdmVudD1mdW5jdGlvbihlKXtkcmFnTW92ZShlKX0sZHJhZ0VuZEV2ZW50PWZ1bmN0aW9uKGUpe3Njb3BlLiQkYXBwbHk9ITAsZHJhZ0VuZChlKX0sZHJhZ0NhbmNlbEV2ZW50PWZ1bmN0aW9uKGUpe2RyYWdFbmQoZSl9LGJpbmREcmFnPWZ1bmN0aW9uKCl7ZWxlbWVudC5iaW5kKFwidG91Y2hzdGFydCBtb3VzZWRvd25cIixmdW5jdGlvbihlKXtkcmFnRGVsYXlpbmc9ITAsZHJhZ1N0YXJ0ZWQ9ITEsZHJhZ1N0YXJ0RXZlbnQoZSksZHJhZ1RpbWVyPSR0aW1lb3V0KGZ1bmN0aW9uKCl7ZHJhZ0RlbGF5aW5nPSExfSxzY29wZS5kcmFnRGVsYXkpfSksZWxlbWVudC5iaW5kKFwidG91Y2hlbmQgdG91Y2hjYW5jZWwgbW91c2V1cFwiLGZ1bmN0aW9uKCl7JHRpbWVvdXQuY2FuY2VsKGRyYWdUaW1lcil9KX07YmluZERyYWcoKSxhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdy5kb2N1bWVudC5ib2R5KS5iaW5kKFwia2V5ZG93blwiLGZ1bmN0aW9uKGUpezI3PT1lLmtleUNvZGUmJihzY29wZS4kJGFwcGx5PSExLGRyYWdFbmQoZSkpfSl9fX1dKX0oKSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2FuZ3VsYXIubW9kdWxlKFwidWkudHJlZVwiKS5kaXJlY3RpdmUoXCJ1aVRyZWVIYW5kbGVcIixbXCJ0cmVlQ29uZmlnXCIsXCIkd2luZG93XCIsZnVuY3Rpb24odHJlZUNvbmZpZyl7cmV0dXJue3JlcXVpcmU6XCJedWlUcmVlTm9kZVwiLHJlc3RyaWN0OlwiQVwiLHNjb3BlOiEwLGNvbnRyb2xsZXI6XCJUcmVlSGFuZGxlQ29udHJvbGxlclwiLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRycyx0cmVlTm9kZUN0cmwpe3ZhciBjb25maWc9e307YW5ndWxhci5leHRlbmQoY29uZmlnLHRyZWVDb25maWcpLGNvbmZpZy5oYW5kbGVDbGFzcyYmZWxlbWVudC5hZGRDbGFzcyhjb25maWcuaGFuZGxlQ2xhc3MpLHNjb3BlIT10cmVlTm9kZUN0cmwuc2NvcGUmJihzY29wZS4kbm9kZVNjb3BlPXRyZWVOb2RlQ3RybC5zY29wZSx0cmVlTm9kZUN0cmwuc2NvcGUuJGhhbmRsZVNjb3BlPXNjb3BlKX19fV0pfSgpOyIsIi8qXG4gQW5ndWxhckpTIHYxLjIuMjZcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihXLFgsdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIEMoYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdLGMsYT1cIltcIisoYj9iK1wiOlwiOlwiXCIpK2ErXCJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjIuMjYvXCIrKGI/YitcIi9cIjpcIlwiKSthO2ZvcihjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylhPWErKDE9PWM/XCI/XCI6XCImXCIpK1wicFwiKyhjLTEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbY10/YXJndW1lbnRzW2NdLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLFwiXCIpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBhcmd1bWVudHNbY10/XCJ1bmRlZmluZWRcIjpcInN0cmluZ1wiIT10eXBlb2YgYXJndW1lbnRzW2NdP0pTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1tjXSk6YXJndW1lbnRzW2NdKTtyZXR1cm4gRXJyb3IoYSl9fWZ1bmN0aW9uIFBhKGIpe2lmKG51bGw9PWJ8fEdhKGIpKXJldHVybiExO1xudmFyIGE9Yi5sZW5ndGg7cmV0dXJuIDE9PT1iLm5vZGVUeXBlJiZhPyEwOnYoYil8fEooYil8fDA9PT1hfHxcIm51bWJlclwiPT09dHlwZW9mIGEmJjA8YSYmYS0xIGluIGJ9ZnVuY3Rpb24gcihiLGEsYyl7dmFyIGQ7aWYoYilpZihQKGIpKWZvcihkIGluIGIpXCJwcm90b3R5cGVcIj09ZHx8KFwibGVuZ3RoXCI9PWR8fFwibmFtZVwiPT1kfHxiLmhhc093blByb3BlcnR5JiYhYi5oYXNPd25Qcm9wZXJ0eShkKSl8fGEuY2FsbChjLGJbZF0sZCk7ZWxzZSBpZihKKGIpfHxQYShiKSlmb3IoZD0wO2Q8Yi5sZW5ndGg7ZCsrKWEuY2FsbChjLGJbZF0sZCk7ZWxzZSBpZihiLmZvckVhY2gmJmIuZm9yRWFjaCE9PXIpYi5mb3JFYWNoKGEsYyk7ZWxzZSBmb3IoZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJmEuY2FsbChjLGJbZF0sZCk7cmV0dXJuIGJ9ZnVuY3Rpb24gWmIoYil7dmFyIGE9W10sYztmb3IoYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJmEucHVzaChjKTtyZXR1cm4gYS5zb3J0KCl9ZnVuY3Rpb24gVGMoYixcbmEsYyl7Zm9yKHZhciBkPVpiKGIpLGU9MDtlPGQubGVuZ3RoO2UrKylhLmNhbGwoYyxiW2RbZV1dLGRbZV0pO3JldHVybiBkfWZ1bmN0aW9uICRiKGIpe3JldHVybiBmdW5jdGlvbihhLGMpe2IoYyxhKX19ZnVuY3Rpb24gaGIoKXtmb3IodmFyIGI9bWEubGVuZ3RoLGE7Yjspe2ItLTthPW1hW2JdLmNoYXJDb2RlQXQoMCk7aWYoNTc9PWEpcmV0dXJuIG1hW2JdPVwiQVwiLG1hLmpvaW4oXCJcIik7aWYoOTA9PWEpbWFbYl09XCIwXCI7ZWxzZSByZXR1cm4gbWFbYl09U3RyaW5nLmZyb21DaGFyQ29kZShhKzEpLG1hLmpvaW4oXCJcIil9bWEudW5zaGlmdChcIjBcIik7cmV0dXJuIG1hLmpvaW4oXCJcIil9ZnVuY3Rpb24gYWMoYixhKXthP2IuJCRoYXNoS2V5PWE6ZGVsZXRlIGIuJCRoYXNoS2V5fWZ1bmN0aW9uIEQoYil7dmFyIGE9Yi4kJGhhc2hLZXk7cihhcmd1bWVudHMsZnVuY3Rpb24oYSl7YSE9PWImJnIoYSxmdW5jdGlvbihhLGMpe2JbY109YX0pfSk7YWMoYixhKTtyZXR1cm4gYn1mdW5jdGlvbiBVKGIpe3JldHVybiBwYXJzZUludChiLFxuMTApfWZ1bmN0aW9uIGJjKGIsYSl7cmV0dXJuIEQobmV3IChEKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmJ9KSksYSl9ZnVuY3Rpb24gRSgpe31mdW5jdGlvbiBRYShiKXtyZXR1cm4gYn1mdW5jdGlvbiBiYShiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYn19ZnVuY3Rpb24geChiKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24geShiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT09dHlwZW9mIGJ9ZnVuY3Rpb24gVChiKXtyZXR1cm4gbnVsbCE9YiYmXCJvYmplY3RcIj09PXR5cGVvZiBifWZ1bmN0aW9uIHYoYil7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBifWZ1bmN0aW9uIGliKGIpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgYn1mdW5jdGlvbiB0YShiKXtyZXR1cm5cIltvYmplY3QgRGF0ZV1cIj09PXphLmNhbGwoYil9ZnVuY3Rpb24gUChiKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT10eXBlb2YgYn1mdW5jdGlvbiBqYihiKXtyZXR1cm5cIltvYmplY3QgUmVnRXhwXVwiPT09emEuY2FsbChiKX1cbmZ1bmN0aW9uIEdhKGIpe3JldHVybiBiJiZiLmRvY3VtZW50JiZiLmxvY2F0aW9uJiZiLmFsZXJ0JiZiLnNldEludGVydmFsfWZ1bmN0aW9uIFVjKGIpe3JldHVybiEoIWJ8fCEoYi5ub2RlTmFtZXx8Yi5wcm9wJiZiLmF0dHImJmIuZmluZCkpfWZ1bmN0aW9uIFZjKGIsYSxjKXt2YXIgZD1bXTtyKGIsZnVuY3Rpb24oYixmLGcpe2QucHVzaChhLmNhbGwoYyxiLGYsZykpfSk7cmV0dXJuIGR9ZnVuY3Rpb24gUmEoYixhKXtpZihiLmluZGV4T2YpcmV0dXJuIGIuaW5kZXhPZihhKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihhPT09YltjXSlyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBTYShiLGEpe3ZhciBjPVJhKGIsYSk7MDw9YyYmYi5zcGxpY2UoYywxKTtyZXR1cm4gYX1mdW5jdGlvbiBIYShiLGEsYyxkKXtpZihHYShiKXx8YiYmYi4kZXZhbEFzeW5jJiZiLiR3YXRjaCl0aHJvdyBUYShcImNwd3NcIik7aWYoYSl7aWYoYj09PWEpdGhyb3cgVGEoXCJjcGlcIik7Yz1jfHxbXTtcbmQ9ZHx8W107aWYoVChiKSl7dmFyIGU9UmEoYyxiKTtpZigtMSE9PWUpcmV0dXJuIGRbZV07Yy5wdXNoKGIpO2QucHVzaChhKX1pZihKKGIpKWZvcih2YXIgZj1hLmxlbmd0aD0wO2Y8Yi5sZW5ndGg7ZisrKWU9SGEoYltmXSxudWxsLGMsZCksVChiW2ZdKSYmKGMucHVzaChiW2ZdKSxkLnB1c2goZSkpLGEucHVzaChlKTtlbHNle3ZhciBnPWEuJCRoYXNoS2V5O0ooYSk/YS5sZW5ndGg9MDpyKGEsZnVuY3Rpb24oYixjKXtkZWxldGUgYVtjXX0pO2ZvcihmIGluIGIpZT1IYShiW2ZdLG51bGwsYyxkKSxUKGJbZl0pJiYoYy5wdXNoKGJbZl0pLGQucHVzaChlKSksYVtmXT1lO2FjKGEsZyl9fWVsc2UgaWYoYT1iKUooYik/YT1IYShiLFtdLGMsZCk6dGEoYik/YT1uZXcgRGF0ZShiLmdldFRpbWUoKSk6amIoYik/KGE9UmVnRXhwKGIuc291cmNlLGIudG9TdHJpbmcoKS5tYXRjaCgvW15cXC9dKiQvKVswXSksYS5sYXN0SW5kZXg9Yi5sYXN0SW5kZXgpOlQoYikmJihhPUhhKGIse30sYyxkKSk7XG5yZXR1cm4gYX1mdW5jdGlvbiBoYShiLGEpe2lmKEooYikpe2E9YXx8W107Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspYVtjXT1iW2NdfWVsc2UgaWYoVChiKSlmb3IoYyBpbiBhPWF8fHt9LGIpIWtiLmNhbGwoYixjKXx8XCIkXCI9PT1jLmNoYXJBdCgwKSYmXCIkXCI9PT1jLmNoYXJBdCgxKXx8KGFbY109YltjXSk7cmV0dXJuIGF8fGJ9ZnVuY3Rpb24gQWEoYixhKXtpZihiPT09YSlyZXR1cm4hMDtpZihudWxsPT09Ynx8bnVsbD09PWEpcmV0dXJuITE7aWYoYiE9PWImJmEhPT1hKXJldHVybiEwO3ZhciBjPXR5cGVvZiBiLGQ7aWYoYz09dHlwZW9mIGEmJlwib2JqZWN0XCI9PWMpaWYoSihiKSl7aWYoIUooYSkpcmV0dXJuITE7aWYoKGM9Yi5sZW5ndGgpPT1hLmxlbmd0aCl7Zm9yKGQ9MDtkPGM7ZCsrKWlmKCFBYShiW2RdLGFbZF0pKXJldHVybiExO3JldHVybiEwfX1lbHNle2lmKHRhKGIpKXJldHVybiB0YShhKT9pc05hTihiLmdldFRpbWUoKSkmJmlzTmFOKGEuZ2V0VGltZSgpKXx8Yi5nZXRUaW1lKCk9PT1cbmEuZ2V0VGltZSgpOiExO2lmKGpiKGIpJiZqYihhKSlyZXR1cm4gYi50b1N0cmluZygpPT1hLnRvU3RyaW5nKCk7aWYoYiYmYi4kZXZhbEFzeW5jJiZiLiR3YXRjaHx8YSYmYS4kZXZhbEFzeW5jJiZhLiR3YXRjaHx8R2EoYil8fEdhKGEpfHxKKGEpKXJldHVybiExO2M9e307Zm9yKGQgaW4gYilpZihcIiRcIiE9PWQuY2hhckF0KDApJiYhUChiW2RdKSl7aWYoIUFhKGJbZF0sYVtkXSkpcmV0dXJuITE7Y1tkXT0hMH1mb3IoZCBpbiBhKWlmKCFjLmhhc093blByb3BlcnR5KGQpJiZcIiRcIiE9PWQuY2hhckF0KDApJiZhW2RdIT09dCYmIVAoYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gQmIoYixhKXt2YXIgYz0yPGFyZ3VtZW50cy5sZW5ndGg/QmEuY2FsbChhcmd1bWVudHMsMik6W107cmV0dXJuIVAoYSl8fGEgaW5zdGFuY2VvZiBSZWdFeHA/YTpjLmxlbmd0aD9mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2EuYXBwbHkoYixjLmNvbmNhdChCYS5jYWxsKGFyZ3VtZW50cyxcbjApKSk6YS5hcHBseShiLGMpfTpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2EuYXBwbHkoYixhcmd1bWVudHMpOmEuY2FsbChiKX19ZnVuY3Rpb24gV2MoYixhKXt2YXIgYz1hO1wic3RyaW5nXCI9PT10eXBlb2YgYiYmXCIkXCI9PT1iLmNoYXJBdCgwKT9jPXQ6R2EoYSk/Yz1cIiRXSU5ET1dcIjphJiZYPT09YT9jPVwiJERPQ1VNRU5UXCI6YSYmKGEuJGV2YWxBc3luYyYmYS4kd2F0Y2gpJiYoYz1cIiRTQ09QRVwiKTtyZXR1cm4gY31mdW5jdGlvbiBuYShiLGEpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYj90OkpTT04uc3RyaW5naWZ5KGIsV2MsYT9cIiAgXCI6bnVsbCl9ZnVuY3Rpb24gY2MoYil7cmV0dXJuIHYoYik/SlNPTi5wYXJzZShiKTpifWZ1bmN0aW9uIFVhKGIpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiBiP2I9ITA6YiYmMCE9PWIubGVuZ3RoPyhiPUsoXCJcIitiKSxiPSEoXCJmXCI9PWJ8fFwiMFwiPT1ifHxcImZhbHNlXCI9PWJ8fFwibm9cIj09Ynx8XCJuXCI9PWJ8fFwiW11cIj09YikpOmI9ITE7XG5yZXR1cm4gYn1mdW5jdGlvbiBpYShiKXtiPXcoYikuY2xvbmUoKTt0cnl7Yi5lbXB0eSgpfWNhdGNoKGEpe312YXIgYz13KFwiPGRpdj5cIikuYXBwZW5kKGIpLmh0bWwoKTt0cnl7cmV0dXJuIDM9PT1iWzBdLm5vZGVUeXBlP0soYyk6Yy5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcXHdcXC1dKykvLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCI8XCIrSyhiKX0pfWNhdGNoKGQpe3JldHVybiBLKGMpfX1mdW5jdGlvbiBkYyhiKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChiKX1jYXRjaChhKXt9fWZ1bmN0aW9uIGVjKGIpe3ZhciBhPXt9LGMsZDtyKChifHxcIlwiKS5zcGxpdChcIiZcIiksZnVuY3Rpb24oYil7YiYmKGM9Yi5yZXBsYWNlKC9cXCsvZyxcIiUyMFwiKS5zcGxpdChcIj1cIiksZD1kYyhjWzBdKSx5KGQpJiYoYj15KGNbMV0pP2RjKGNbMV0pOiEwLGtiLmNhbGwoYSxkKT9KKGFbZF0pP2FbZF0ucHVzaChiKTphW2RdPVthW2RdLGJdOmFbZF09YikpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gQ2IoYil7dmFyIGE9XG5bXTtyKGIsZnVuY3Rpb24oYixkKXtKKGIpP3IoYixmdW5jdGlvbihiKXthLnB1c2goQ2EoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK0NhKGIsITApKSl9KTphLnB1c2goQ2EoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK0NhKGIsITApKSl9KTtyZXR1cm4gYS5sZW5ndGg/YS5qb2luKFwiJlwiKTpcIlwifWZ1bmN0aW9uIGxiKGIpe3JldHVybiBDYShiLCEwKS5yZXBsYWNlKC8lMjYvZ2ksXCImXCIpLnJlcGxhY2UoLyUzRC9naSxcIj1cIikucmVwbGFjZSgvJTJCL2dpLFwiK1wiKX1mdW5jdGlvbiBDYShiLGEpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYikucmVwbGFjZSgvJTQwL2dpLFwiQFwiKS5yZXBsYWNlKC8lM0EvZ2ksXCI6XCIpLnJlcGxhY2UoLyUyNC9nLFwiJFwiKS5yZXBsYWNlKC8lMkMvZ2ksXCIsXCIpLnJlcGxhY2UoLyUyMC9nLGE/XCIlMjBcIjpcIitcIil9ZnVuY3Rpb24gWGMoYixhKXtmdW5jdGlvbiBjKGEpe2EmJmQucHVzaChhKX12YXIgZD1bYl0sZSxmLGc9W1wibmc6YXBwXCIsXCJuZy1hcHBcIixcIngtbmctYXBwXCIsXG5cImRhdGEtbmctYXBwXCJdLGs9L1xcc25nWzpcXC1dYXBwKDpcXHMqKFtcXHdcXGRfXSspOz8pP1xccy87cihnLGZ1bmN0aW9uKGEpe2dbYV09ITA7YyhYLmdldEVsZW1lbnRCeUlkKGEpKTthPWEucmVwbGFjZShcIjpcIixcIlxcXFw6XCIpO2IucXVlcnlTZWxlY3RvckFsbCYmKHIoYi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK2EpLGMpLHIoYi5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK2ErXCJcXFxcOlwiKSxjKSxyKGIucXVlcnlTZWxlY3RvckFsbChcIltcIithK1wiXVwiKSxjKSl9KTtyKGQsZnVuY3Rpb24oYSl7aWYoIWUpe3ZhciBiPWsuZXhlYyhcIiBcIithLmNsYXNzTmFtZStcIiBcIik7Yj8oZT1hLGY9KGJbMl18fFwiXCIpLnJlcGxhY2UoL1xccysvZyxcIixcIikpOnIoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGIpeyFlJiZnW2IubmFtZV0mJihlPWEsZj1iLnZhbHVlKX0pfX0pO2UmJmEoZSxmP1tmXTpbXSl9ZnVuY3Rpb24gZmMoYixhKXt2YXIgYz1mdW5jdGlvbigpe2I9dyhiKTtpZihiLmluamVjdG9yKCkpe3ZhciBjPWJbMF09PT1YP1xuXCJkb2N1bWVudFwiOmlhKGIpO3Rocm93IFRhKFwiYnRzdHJwZFwiLGMucmVwbGFjZSgvPC8sXCImbHQ7XCIpLnJlcGxhY2UoLz4vLFwiJmd0O1wiKSk7fWE9YXx8W107YS51bnNoaWZ0KFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS52YWx1ZShcIiRyb290RWxlbWVudFwiLGIpfV0pO2EudW5zaGlmdChcIm5nXCIpO2M9Z2MoYSk7Yy5pbnZva2UoW1wiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkY29tcGlsZVwiLFwiJGluamVjdG9yXCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEsYixjLGQsZSl7YS4kYXBwbHkoZnVuY3Rpb24oKXtiLmRhdGEoXCIkaW5qZWN0b3JcIixkKTtjKGIpKGEpfSl9XSk7cmV0dXJuIGN9LGQ9L15OR19ERUZFUl9CT09UU1RSQVAhLztpZihXJiYhZC50ZXN0KFcubmFtZSkpcmV0dXJuIGMoKTtXLm5hbWU9Vy5uYW1lLnJlcGxhY2UoZCxcIlwiKTtWYS5yZXN1bWVCb290c3RyYXA9ZnVuY3Rpb24oYil7cihiLGZ1bmN0aW9uKGIpe2EucHVzaChiKX0pO2MoKX19ZnVuY3Rpb24gbWIoYixhKXthPVxuYXx8XCJfXCI7cmV0dXJuIGIucmVwbGFjZShZYyxmdW5jdGlvbihiLGQpe3JldHVybihkP2E6XCJcIikrYi50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gRGIoYixhLGMpe2lmKCFiKXRocm93IFRhKFwiYXJlcVwiLGF8fFwiP1wiLGN8fFwicmVxdWlyZWRcIik7cmV0dXJuIGJ9ZnVuY3Rpb24gV2EoYixhLGMpe2MmJkooYikmJihiPWJbYi5sZW5ndGgtMV0pO0RiKFAoYiksYSxcIm5vdCBhIGZ1bmN0aW9uLCBnb3QgXCIrKGImJlwib2JqZWN0XCI9PT10eXBlb2YgYj9iLmNvbnN0cnVjdG9yLm5hbWV8fFwiT2JqZWN0XCI6dHlwZW9mIGIpKTtyZXR1cm4gYn1mdW5jdGlvbiBEYShiLGEpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWIpdGhyb3cgVGEoXCJiYWRuYW1lXCIsYSk7fWZ1bmN0aW9uIGhjKGIsYSxjKXtpZighYSlyZXR1cm4gYjthPWEuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZCxlPWIsZj1hLmxlbmd0aCxnPTA7ZzxmO2crKylkPWFbZ10sYiYmKGI9KGU9YilbZF0pO3JldHVybiFjJiZQKGIpP0JiKGUsYik6Yn1mdW5jdGlvbiBFYihiKXt2YXIgYT1cbmJbMF07Yj1iW2IubGVuZ3RoLTFdO2lmKGE9PT1iKXJldHVybiB3KGEpO3ZhciBjPVthXTtkb3thPWEubmV4dFNpYmxpbmc7aWYoIWEpYnJlYWs7Yy5wdXNoKGEpfXdoaWxlKGEhPT1iKTtyZXR1cm4gdyhjKX1mdW5jdGlvbiBaYyhiKXt2YXIgYT1DKFwiJGluamVjdG9yXCIpLGM9QyhcIm5nXCIpO2I9Yi5hbmd1bGFyfHwoYi5hbmd1bGFyPXt9KTtiLiQkbWluRXJyPWIuJCRtaW5FcnJ8fEM7cmV0dXJuIGIubW9kdWxlfHwoYi5tb2R1bGU9ZnVuY3Rpb24oKXt2YXIgYj17fTtyZXR1cm4gZnVuY3Rpb24oZSxmLGcpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWUpdGhyb3cgYyhcImJhZG5hbWVcIixcIm1vZHVsZVwiKTtmJiZiLmhhc093blByb3BlcnR5KGUpJiYoYltlXT1udWxsKTtyZXR1cm4gYltlXXx8KGJbZV09ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsZCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtjW2V8fFwicHVzaFwiXShbYSxkLGFyZ3VtZW50c10pO3JldHVybiBufX1pZighZil0aHJvdyBhKFwibm9tb2RcIixcbmUpO3ZhciBjPVtdLGQ9W10sbD1iKFwiJGluamVjdG9yXCIsXCJpbnZva2VcIiksbj17X2ludm9rZVF1ZXVlOmMsX3J1bkJsb2NrczpkLHJlcXVpcmVzOmYsbmFtZTplLHByb3ZpZGVyOmIoXCIkcHJvdmlkZVwiLFwicHJvdmlkZXJcIiksZmFjdG9yeTpiKFwiJHByb3ZpZGVcIixcImZhY3RvcnlcIiksc2VydmljZTpiKFwiJHByb3ZpZGVcIixcInNlcnZpY2VcIiksdmFsdWU6YihcIiRwcm92aWRlXCIsXCJ2YWx1ZVwiKSxjb25zdGFudDpiKFwiJHByb3ZpZGVcIixcImNvbnN0YW50XCIsXCJ1bnNoaWZ0XCIpLGFuaW1hdGlvbjpiKFwiJGFuaW1hdGVQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZmlsdGVyOmIoXCIkZmlsdGVyUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGNvbnRyb2xsZXI6YihcIiRjb250cm9sbGVyUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGRpcmVjdGl2ZTpiKFwiJGNvbXBpbGVQcm92aWRlclwiLFwiZGlyZWN0aXZlXCIpLGNvbmZpZzpsLHJ1bjpmdW5jdGlvbihhKXtkLnB1c2goYSk7cmV0dXJuIHRoaXN9fTtnJiZsKGcpO3JldHVybiBufSgpKX19KCkpfVxuZnVuY3Rpb24gJGMoYil7RChiLHtib290c3RyYXA6ZmMsY29weTpIYSxleHRlbmQ6RCxlcXVhbHM6QWEsZWxlbWVudDp3LGZvckVhY2g6cixpbmplY3RvcjpnYyxub29wOkUsYmluZDpCYix0b0pzb246bmEsZnJvbUpzb246Y2MsaWRlbnRpdHk6UWEsaXNVbmRlZmluZWQ6eCxpc0RlZmluZWQ6eSxpc1N0cmluZzp2LGlzRnVuY3Rpb246UCxpc09iamVjdDpULGlzTnVtYmVyOmliLGlzRWxlbWVudDpVYyxpc0FycmF5OkosdmVyc2lvbjphZCxpc0RhdGU6dGEsbG93ZXJjYXNlOkssdXBwZXJjYXNlOklhLGNhbGxiYWNrczp7Y291bnRlcjowfSwkJG1pbkVycjpDLCQkY3NwOlhhfSk7WWE9WmMoVyk7dHJ5e1lhKFwibmdMb2NhbGVcIil9Y2F0Y2goYSl7WWEoXCJuZ0xvY2FsZVwiLFtdKS5wcm92aWRlcihcIiRsb2NhbGVcIixiZCl9WWEoXCJuZ1wiLFtcIm5nTG9jYWxlXCJdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpjZH0pO2EucHJvdmlkZXIoXCIkY29tcGlsZVwiLFxuaWMpLmRpcmVjdGl2ZSh7YTpkZCxpbnB1dDpqYyx0ZXh0YXJlYTpqYyxmb3JtOmVkLHNjcmlwdDpmZCxzZWxlY3Q6Z2Qsc3R5bGU6aGQsb3B0aW9uOmlkLG5nQmluZDpqZCxuZ0JpbmRIdG1sOmtkLG5nQmluZFRlbXBsYXRlOmxkLG5nQ2xhc3M6bWQsbmdDbGFzc0V2ZW46bmQsbmdDbGFzc09kZDpvZCxuZ0Nsb2FrOnBkLG5nQ29udHJvbGxlcjpxZCxuZ0Zvcm06cmQsbmdIaWRlOnNkLG5nSWY6dGQsbmdJbmNsdWRlOnVkLG5nSW5pdDp2ZCxuZ05vbkJpbmRhYmxlOndkLG5nUGx1cmFsaXplOnhkLG5nUmVwZWF0OnlkLG5nU2hvdzp6ZCxuZ1N0eWxlOkFkLG5nU3dpdGNoOkJkLG5nU3dpdGNoV2hlbjpDZCxuZ1N3aXRjaERlZmF1bHQ6RGQsbmdPcHRpb25zOkVkLG5nVHJhbnNjbHVkZTpGZCxuZ01vZGVsOkdkLG5nTGlzdDpIZCxuZ0NoYW5nZTpJZCxyZXF1aXJlZDprYyxuZ1JlcXVpcmVkOmtjLG5nVmFsdWU6SmR9KS5kaXJlY3RpdmUoe25nSW5jbHVkZTpLZH0pLmRpcmVjdGl2ZShGYikuZGlyZWN0aXZlKGxjKTtcbmEucHJvdmlkZXIoeyRhbmNob3JTY3JvbGw6TGQsJGFuaW1hdGU6TWQsJGJyb3dzZXI6TmQsJGNhY2hlRmFjdG9yeTpPZCwkY29udHJvbGxlcjpQZCwkZG9jdW1lbnQ6UWQsJGV4Y2VwdGlvbkhhbmRsZXI6UmQsJGZpbHRlcjptYywkaW50ZXJwb2xhdGU6U2QsJGludGVydmFsOlRkLCRodHRwOlVkLCRodHRwQmFja2VuZDpWZCwkbG9jYXRpb246V2QsJGxvZzpYZCwkcGFyc2U6WWQsJHJvb3RTY29wZTpaZCwkcTokZCwkc2NlOmFlLCRzY2VEZWxlZ2F0ZTpiZSwkc25pZmZlcjpjZSwkdGVtcGxhdGVDYWNoZTpkZSwkdGltZW91dDplZSwkd2luZG93OmZlLCQkckFGOmdlLCQkYXN5bmNDYWxsYmFjazpoZX0pfV0pfWZ1bmN0aW9uIFphKGIpe3JldHVybiBiLnJlcGxhY2UoaWUsZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIGU/ZC50b1VwcGVyQ2FzZSgpOmR9KS5yZXBsYWNlKGplLFwiTW96JDFcIil9ZnVuY3Rpb24gR2IoYixhLGMsZCl7ZnVuY3Rpb24gZShiKXt2YXIgZT1jJiZiP1t0aGlzLmZpbHRlcihiKV06XG5bdGhpc10sbT1hLGgsbCxuLHAscSxzO2lmKCFkfHxudWxsIT1iKWZvcig7ZS5sZW5ndGg7KWZvcihoPWUuc2hpZnQoKSxsPTAsbj1oLmxlbmd0aDtsPG47bCsrKWZvcihwPXcoaFtsXSksbT9wLnRyaWdnZXJIYW5kbGVyKFwiJGRlc3Ryb3lcIik6bT0hbSxxPTAscD0ocz1wLmNoaWxkcmVuKCkpLmxlbmd0aDtxPHA7cSsrKWUucHVzaChFYShzW3FdKSk7cmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBmPUVhLmZuW2JdLGY9Zi4kb3JpZ2luYWx8fGY7ZS4kb3JpZ2luYWw9ZjtFYS5mbltiXT1lfWZ1bmN0aW9uIFMoYil7aWYoYiBpbnN0YW5jZW9mIFMpcmV0dXJuIGI7dihiKSYmKGI9YWEoYikpO2lmKCEodGhpcyBpbnN0YW5jZW9mIFMpKXtpZih2KGIpJiZcIjxcIiE9Yi5jaGFyQXQoMCkpdGhyb3cgSGIoXCJub3NlbFwiKTtyZXR1cm4gbmV3IFMoYil9aWYodihiKSl7dmFyIGE9YjtiPVg7dmFyIGM7aWYoYz1rZS5leGVjKGEpKWI9W2IuY3JlYXRlRWxlbWVudChjWzFdKV07ZWxzZXt2YXIgZD1cbmIsZTtiPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2M9W107aWYoSWIudGVzdChhKSl7ZD1iLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7ZT0obGUuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7ZT1lYVtlXXx8ZWEuX2RlZmF1bHQ7ZC5pbm5lckhUTUw9XCI8ZGl2PiYjMTYwOzwvZGl2PlwiK2VbMV0rYS5yZXBsYWNlKG1lLFwiPCQxPjwvJDI+XCIpK2VbMl07ZC5yZW1vdmVDaGlsZChkLmZpcnN0Q2hpbGQpO2ZvcihhPWVbMF07YS0tOylkPWQubGFzdENoaWxkO2E9MDtmb3IoZT1kLmNoaWxkTm9kZXMubGVuZ3RoO2E8ZTsrK2EpYy5wdXNoKGQuY2hpbGROb2Rlc1thXSk7ZD1iLmZpcnN0Q2hpbGQ7ZC50ZXh0Q29udGVudD1cIlwifWVsc2UgYy5wdXNoKGQuY3JlYXRlVGV4dE5vZGUoYSkpO2IudGV4dENvbnRlbnQ9XCJcIjtiLmlubmVySFRNTD1cIlwiO2I9Y31KYih0aGlzLGIpO3coWC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLmFwcGVuZCh0aGlzKX1lbHNlIEpiKHRoaXMsXG5iKX1mdW5jdGlvbiBLYihiKXtyZXR1cm4gYi5jbG9uZU5vZGUoITApfWZ1bmN0aW9uIEphKGIpe0xiKGIpO3ZhciBhPTA7Zm9yKGI9Yi5jaGlsZE5vZGVzfHxbXTthPGIubGVuZ3RoO2ErKylKYShiW2FdKX1mdW5jdGlvbiBuYyhiLGEsYyxkKXtpZih5KGQpKXRocm93IEhiKFwib2ZmYXJnc1wiKTt2YXIgZT1vYShiLFwiZXZlbnRzXCIpO29hKGIsXCJoYW5kbGVcIikmJih4KGEpP3IoZSxmdW5jdGlvbihhLGMpeyRhKGIsYyxhKTtkZWxldGUgZVtjXX0pOnIoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7eChjKT8oJGEoYixhLGVbYV0pLGRlbGV0ZSBlW2FdKTpTYShlW2FdfHxbXSxjKX0pKX1mdW5jdGlvbiBMYihiLGEpe3ZhciBjPWIubmczMzksZD1hYltjXTtkJiYoYT9kZWxldGUgYWJbY10uZGF0YVthXTooZC5oYW5kbGUmJihkLmV2ZW50cy4kZGVzdHJveSYmZC5oYW5kbGUoe30sXCIkZGVzdHJveVwiKSxuYyhiKSksZGVsZXRlIGFiW2NdLGIubmczMzk9dCkpfWZ1bmN0aW9uIG9hKGIsYSxjKXt2YXIgZD1cbmIubmczMzksZD1hYltkfHwtMV07aWYoeShjKSlkfHwoYi5uZzMzOT1kPSsrbmUsZD1hYltkXT17fSksZFthXT1jO2Vsc2UgcmV0dXJuIGQmJmRbYV19ZnVuY3Rpb24gTWIoYixhLGMpe3ZhciBkPW9hKGIsXCJkYXRhXCIpLGU9eShjKSxmPSFlJiZ5KGEpLGc9ZiYmIVQoYSk7ZHx8Z3x8b2EoYixcImRhdGFcIixkPXt9KTtpZihlKWRbYV09YztlbHNlIGlmKGYpe2lmKGcpcmV0dXJuIGQmJmRbYV07RChkLGEpfWVsc2UgcmV0dXJuIGR9ZnVuY3Rpb24gTmIoYixhKXtyZXR1cm4gYi5nZXRBdHRyaWJ1dGU/LTE8KFwiIFwiKyhiLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikuaW5kZXhPZihcIiBcIithK1wiIFwiKTohMX1mdW5jdGlvbiBuYihiLGEpe2EmJmIuc2V0QXR0cmlidXRlJiZyKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixhYSgoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFxuXCIgXCIpLnJlcGxhY2UoXCIgXCIrYWEoYSkrXCIgXCIsXCIgXCIpKSl9KX1mdW5jdGlvbiBvYihiLGEpe2lmKGEmJmIuc2V0QXR0cmlidXRlKXt2YXIgYz0oXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKTtyKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2E9YWEoYSk7LTE9PT1jLmluZGV4T2YoXCIgXCIrYStcIiBcIikmJihjKz1hK1wiIFwiKX0pO2Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixhYShjKSl9fWZ1bmN0aW9uIEpiKGIsYSl7aWYoYSl7YT1hLm5vZGVOYW1lfHwheShhLmxlbmd0aCl8fEdhKGEpP1thXTphO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaChhW2NdKX19ZnVuY3Rpb24gb2MoYixhKXtyZXR1cm4gcGIoYixcIiRcIisoYXx8XCJuZ0NvbnRyb2xsZXJcIikrXCJDb250cm9sbGVyXCIpfWZ1bmN0aW9uIHBiKGIsYSxjKXs5PT1iLm5vZGVUeXBlJiYoYj1iLmRvY3VtZW50RWxlbWVudCk7Zm9yKGE9SihhKT9hOlthXTtiOyl7Zm9yKHZhciBkPVxuMCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoKGM9dy5kYXRhKGIsYVtkXSkpIT09dClyZXR1cm4gYztiPWIucGFyZW50Tm9kZXx8MTE9PT1iLm5vZGVUeXBlJiZiLmhvc3R9fWZ1bmN0aW9uIHBjKGIpe2Zvcih2YXIgYT0wLGM9Yi5jaGlsZE5vZGVzO2E8Yy5sZW5ndGg7YSsrKUphKGNbYV0pO2Zvcig7Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIuZmlyc3RDaGlsZCl9ZnVuY3Rpb24gcWMoYixhKXt2YXIgYz1xYlthLnRvTG93ZXJDYXNlKCldO3JldHVybiBjJiZyY1tiLm5vZGVOYW1lXSYmY31mdW5jdGlvbiBvZShiLGEpe3ZhciBjPWZ1bmN0aW9uKGMsZSl7Yy5wcmV2ZW50RGVmYXVsdHx8KGMucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtjLnJldHVyblZhbHVlPSExfSk7Yy5zdG9wUHJvcGFnYXRpb258fChjLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2MuY2FuY2VsQnViYmxlPSEwfSk7Yy50YXJnZXR8fChjLnRhcmdldD1jLnNyY0VsZW1lbnR8fFgpO2lmKHgoYy5kZWZhdWx0UHJldmVudGVkKSl7dmFyIGY9XG5jLnByZXZlbnREZWZhdWx0O2MucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtjLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7Zi5jYWxsKGMpfTtjLmRlZmF1bHRQcmV2ZW50ZWQ9ITF9Yy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYy5kZWZhdWx0UHJldmVudGVkfHwhMT09PWMucmV0dXJuVmFsdWV9O3ZhciBnPWhhKGFbZXx8Yy50eXBlXXx8W10pO3IoZyxmdW5jdGlvbihhKXthLmNhbGwoYixjKX0pOzg+PVE/KGMucHJldmVudERlZmF1bHQ9bnVsbCxjLnN0b3BQcm9wYWdhdGlvbj1udWxsLGMuaXNEZWZhdWx0UHJldmVudGVkPW51bGwpOihkZWxldGUgYy5wcmV2ZW50RGVmYXVsdCxkZWxldGUgYy5zdG9wUHJvcGFnYXRpb24sZGVsZXRlIGMuaXNEZWZhdWx0UHJldmVudGVkKX07Yy5lbGVtPWI7cmV0dXJuIGN9ZnVuY3Rpb24gS2EoYixhKXt2YXIgYz10eXBlb2YgYixkO1wiZnVuY3Rpb25cIj09Y3x8XCJvYmplY3RcIj09YyYmbnVsbCE9PWI/XCJmdW5jdGlvblwiPT10eXBlb2YoZD1cbmIuJCRoYXNoS2V5KT9kPWIuJCRoYXNoS2V5KCk6ZD09PXQmJihkPWIuJCRoYXNoS2V5PShhfHxoYikoKSk6ZD1iO3JldHVybiBjK1wiOlwiK2R9ZnVuY3Rpb24gYmIoYixhKXtpZihhKXt2YXIgYz0wO3RoaXMubmV4dFVpZD1mdW5jdGlvbigpe3JldHVybisrY319cihiLHRoaXMucHV0LHRoaXMpfWZ1bmN0aW9uIHNjKGIpe3ZhciBhLGM7XCJmdW5jdGlvblwiPT09dHlwZW9mIGI/KGE9Yi4kaW5qZWN0KXx8KGE9W10sYi5sZW5ndGgmJihjPWIudG9TdHJpbmcoKS5yZXBsYWNlKHBlLFwiXCIpLGM9Yy5tYXRjaChxZSkscihjWzFdLnNwbGl0KHJlKSxmdW5jdGlvbihiKXtiLnJlcGxhY2Uoc2UsZnVuY3Rpb24oYixjLGQpe2EucHVzaChkKX0pfSkpLGIuJGluamVjdD1hKTpKKGIpPyhjPWIubGVuZ3RoLTEsV2EoYltjXSxcImZuXCIpLGE9Yi5zbGljZSgwLGMpKTpXYShiLFwiZm5cIiwhMCk7cmV0dXJuIGF9ZnVuY3Rpb24gZ2MoYil7ZnVuY3Rpb24gYShhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtpZihUKGIpKXIoYixcbiRiKGEpKTtlbHNlIHJldHVybiBhKGIsYyl9fWZ1bmN0aW9uIGMoYSxiKXtEYShhLFwic2VydmljZVwiKTtpZihQKGIpfHxKKGIpKWI9bi5pbnN0YW50aWF0ZShiKTtpZighYi4kZ2V0KXRocm93IGNiKFwicGdldFwiLGEpO3JldHVybiBsW2Era109Yn1mdW5jdGlvbiBkKGEsYil7cmV0dXJuIGMoYSx7JGdldDpifSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1bXSxjLGQsZixrO3IoYSxmdW5jdGlvbihhKXtpZighaC5nZXQoYSkpe2gucHV0KGEsITApO3RyeXtpZih2KGEpKWZvcihjPVlhKGEpLGI9Yi5jb25jYXQoZShjLnJlcXVpcmVzKSkuY29uY2F0KGMuX3J1bkJsb2NrcyksZD1jLl9pbnZva2VRdWV1ZSxmPTAsaz1kLmxlbmd0aDtmPGs7ZisrKXt2YXIgZz1kW2ZdLG09bi5nZXQoZ1swXSk7bVtnWzFdXS5hcHBseShtLGdbMl0pfWVsc2UgUChhKT9iLnB1c2gobi5pbnZva2UoYSkpOkooYSk/Yi5wdXNoKG4uaW52b2tlKGEpKTpXYShhLFwibW9kdWxlXCIpfWNhdGNoKGwpe3Rocm93IEooYSkmJihhPVxuYVthLmxlbmd0aC0xXSksbC5tZXNzYWdlJiYobC5zdGFjayYmLTE9PWwuc3RhY2suaW5kZXhPZihsLm1lc3NhZ2UpKSYmKGw9bC5tZXNzYWdlK1wiXFxuXCIrbC5zdGFjayksY2IoXCJtb2R1bGVyclwiLGEsbC5zdGFja3x8bC5tZXNzYWdlfHxsKTt9fX0pO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiKXtmdW5jdGlvbiBjKGQpe2lmKGEuaGFzT3duUHJvcGVydHkoZCkpe2lmKGFbZF09PT1nKXRocm93IGNiKFwiY2RlcFwiLGQrXCIgPC0gXCIrbS5qb2luKFwiIDwtIFwiKSk7cmV0dXJuIGFbZF19dHJ5e3JldHVybiBtLnVuc2hpZnQoZCksYVtkXT1nLGFbZF09YihkKX1jYXRjaChlKXt0aHJvdyBhW2RdPT09ZyYmZGVsZXRlIGFbZF0sZTt9ZmluYWxseXttLnNoaWZ0KCl9fWZ1bmN0aW9uIGQoYSxiLGUpe3ZhciBmPVtdLGs9c2MoYSksZyxtLGg7bT0wO2ZvcihnPWsubGVuZ3RoO208ZzttKyspe2g9a1ttXTtpZihcInN0cmluZ1wiIT09dHlwZW9mIGgpdGhyb3cgY2IoXCJpdGtuXCIsaCk7Zi5wdXNoKGUmJmUuaGFzT3duUHJvcGVydHkoaCk/XG5lW2hdOmMoaCkpfUooYSkmJihhPWFbZ10pO3JldHVybiBhLmFwcGx5KGIsZil9cmV0dXJue2ludm9rZTpkLGluc3RhbnRpYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9LGU7Yy5wcm90b3R5cGU9KEooYSk/YVthLmxlbmd0aC0xXTphKS5wcm90b3R5cGU7Yz1uZXcgYztlPWQoYSxjLGIpO3JldHVybiBUKGUpfHxQKGUpP2U6Y30sZ2V0OmMsYW5ub3RhdGU6c2MsaGFzOmZ1bmN0aW9uKGIpe3JldHVybiBsLmhhc093blByb3BlcnR5KGIrayl8fGEuaGFzT3duUHJvcGVydHkoYil9fX12YXIgZz17fSxrPVwiUHJvdmlkZXJcIixtPVtdLGg9bmV3IGJiKFtdLCEwKSxsPXskcHJvdmlkZTp7cHJvdmlkZXI6YShjKSxmYWN0b3J5OmEoZCksc2VydmljZTphKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGQoYSxbXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnN0YW50aWF0ZShiKX1dKX0pLHZhbHVlOmEoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZChhLGJhKGIpKX0pLGNvbnN0YW50OmEoZnVuY3Rpb24oYSxcbmIpe0RhKGEsXCJjb25zdGFudFwiKTtsW2FdPWI7cFthXT1ifSksZGVjb3JhdG9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9bi5nZXQoYStrKSxkPWMuJGdldDtjLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgYT1xLmludm9rZShkLGMpO3JldHVybiBxLmludm9rZShiLG51bGwseyRkZWxlZ2F0ZTphfSl9fX19LG49bC4kaW5qZWN0b3I9ZihsLGZ1bmN0aW9uKCl7dGhyb3cgY2IoXCJ1bnByXCIsbS5qb2luKFwiIDwtIFwiKSk7fSkscD17fSxxPXAuJGluamVjdG9yPWYocCxmdW5jdGlvbihhKXthPW4uZ2V0KGErayk7cmV0dXJuIHEuaW52b2tlKGEuJGdldCxhKX0pO3IoZShiKSxmdW5jdGlvbihhKXtxLmludm9rZShhfHxFKX0pO3JldHVybiBxfWZ1bmN0aW9uIExkKCl7dmFyIGI9ITA7dGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZz1mdW5jdGlvbigpe2I9ITF9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9jYXRpb25cIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1udWxsO1xucihhLGZ1bmN0aW9uKGEpe2J8fFwiYVwiIT09SyhhLm5vZGVOYW1lKXx8KGI9YSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBmKCl7dmFyIGI9Yy5oYXNoKCksZDtiPyhkPWcuZ2V0RWxlbWVudEJ5SWQoYikpP2Quc2Nyb2xsSW50b1ZpZXcoKTooZD1lKGcuZ2V0RWxlbWVudHNCeU5hbWUoYikpKT9kLnNjcm9sbEludG9WaWV3KCk6XCJ0b3BcIj09PWImJmEuc2Nyb2xsVG8oMCwwKTphLnNjcm9sbFRvKDAsMCl9dmFyIGc9YS5kb2N1bWVudDtiJiZkLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBjLmhhc2goKX0sZnVuY3Rpb24oKXtkLiRldmFsQXN5bmMoZil9KTtyZXR1cm4gZn1dfWZ1bmN0aW9uIGhlKCl7dGhpcy4kZ2V0PVtcIiQkckFGXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYSl7cmV0dXJuIGIuc3VwcG9ydGVkP2Z1bmN0aW9uKGEpe3JldHVybiBiKGEpfTpmdW5jdGlvbihiKXtyZXR1cm4gYShiLDAsITEpfX1dfWZ1bmN0aW9uIHRlKGIsYSxjLGQpe2Z1bmN0aW9uIGUoYSl7dHJ5e2EuYXBwbHkobnVsbCxcbkJhLmNhbGwoYXJndW1lbnRzLDEpKX1maW5hbGx5e2lmKHMtLSwwPT09cylmb3IoO0YubGVuZ3RoOyl0cnl7Ri5wb3AoKSgpfWNhdGNoKGIpe2MuZXJyb3IoYil9fX1mdW5jdGlvbiBmKGEsYil7KGZ1bmN0aW9uIGZhKCl7cih1LGZ1bmN0aW9uKGEpe2EoKX0pO0E9YihmYSxhKX0pKCl9ZnVuY3Rpb24gZygpe3o9bnVsbDtOIT1rLnVybCgpJiYoTj1rLnVybCgpLHIoY2EsZnVuY3Rpb24oYSl7YShrLnVybCgpKX0pKX12YXIgaz10aGlzLG09YVswXSxoPWIubG9jYXRpb24sbD1iLmhpc3Rvcnksbj1iLnNldFRpbWVvdXQscD1iLmNsZWFyVGltZW91dCxxPXt9O2suaXNNb2NrPSExO3ZhciBzPTAsRj1bXTtrLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9ZTtrLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9ZnVuY3Rpb24oKXtzKyt9O2subm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihhKXtyKHUsZnVuY3Rpb24oYSl7YSgpfSk7MD09PXM/YSgpOkYucHVzaChhKX07XG52YXIgdT1bXSxBO2suYWRkUG9sbEZuPWZ1bmN0aW9uKGEpe3goQSkmJmYoMTAwLG4pO3UucHVzaChhKTtyZXR1cm4gYX07dmFyIE49aC5ocmVmLFI9YS5maW5kKFwiYmFzZVwiKSx6PW51bGw7ay51cmw9ZnVuY3Rpb24oYSxjKXtoIT09Yi5sb2NhdGlvbiYmKGg9Yi5sb2NhdGlvbik7bCE9PWIuaGlzdG9yeSYmKGw9Yi5oaXN0b3J5KTtpZihhKXtpZihOIT1hKXJldHVybiBOPWEsZC5oaXN0b3J5P2M/bC5yZXBsYWNlU3RhdGUobnVsbCxcIlwiLGEpOihsLnB1c2hTdGF0ZShudWxsLFwiXCIsYSksUi5hdHRyKFwiaHJlZlwiLFIuYXR0cihcImhyZWZcIikpKTooej1hLGM/aC5yZXBsYWNlKGEpOmguaHJlZj1hKSxrfWVsc2UgcmV0dXJuIHp8fGguaHJlZi5yZXBsYWNlKC8lMjcvZyxcIidcIil9O3ZhciBjYT1bXSxMPSExO2sub25VcmxDaGFuZ2U9ZnVuY3Rpb24oYSl7aWYoIUwpe2lmKGQuaGlzdG9yeSl3KGIpLm9uKFwicG9wc3RhdGVcIixnKTtpZihkLmhhc2hjaGFuZ2UpdyhiKS5vbihcImhhc2hjaGFuZ2VcIixnKTtcbmVsc2Ugay5hZGRQb2xsRm4oZyk7TD0hMH1jYS5wdXNoKGEpO3JldHVybiBhfTtrLiQkY2hlY2tVcmxDaGFuZ2U9ZztrLmJhc2VIcmVmPWZ1bmN0aW9uKCl7dmFyIGE9Ui5hdHRyKFwiaHJlZlwiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XFw6KT9cXC9cXC9bXlxcL10qLyxcIlwiKTpcIlwifTt2YXIgTz17fSxkYT1cIlwiLEI9ay5iYXNlSHJlZigpO2suY29va2llcz1mdW5jdGlvbihhLGIpe3ZhciBkLGUsZixrO2lmKGEpYj09PXQ/bS5jb29raWU9ZXNjYXBlKGEpK1wiPTtwYXRoPVwiK0IrXCI7ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVFwiOnYoYikmJihkPShtLmNvb2tpZT1lc2NhcGUoYSkrXCI9XCIrZXNjYXBlKGIpK1wiO3BhdGg9XCIrQikubGVuZ3RoKzEsNDA5NjxkJiZjLndhcm4oXCJDb29raWUgJ1wiK2ErXCInIHBvc3NpYmx5IG5vdCBzZXQgb3Igb3ZlcmZsb3dlZCBiZWNhdXNlIGl0IHdhcyB0b28gbGFyZ2UgKFwiK2QrXCIgPiA0MDk2IGJ5dGVzKSFcIikpO2Vsc2V7aWYobS5jb29raWUhPT1cbmRhKWZvcihkYT1tLmNvb2tpZSxkPWRhLnNwbGl0KFwiOyBcIiksTz17fSxmPTA7ZjxkLmxlbmd0aDtmKyspZT1kW2ZdLGs9ZS5pbmRleE9mKFwiPVwiKSwwPGsmJihhPXVuZXNjYXBlKGUuc3Vic3RyaW5nKDAsaykpLE9bYV09PT10JiYoT1thXT11bmVzY2FwZShlLnN1YnN0cmluZyhrKzEpKSkpO3JldHVybiBPfX07ay5kZWZlcj1mdW5jdGlvbihhLGIpe3ZhciBjO3MrKztjPW4oZnVuY3Rpb24oKXtkZWxldGUgcVtjXTtlKGEpfSxifHwwKTtxW2NdPSEwO3JldHVybiBjfTtrLmRlZmVyLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gcVthXT8oZGVsZXRlIHFbYV0scChhKSxlKEUpLCEwKTohMX19ZnVuY3Rpb24gTmQoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGxvZ1wiLFwiJHNuaWZmZXJcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjLGQpe3JldHVybiBuZXcgdGUoYixkLGEsYyl9XX1mdW5jdGlvbiBPZCgpe3RoaXMuJGdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYixkKXtmdW5jdGlvbiBlKGEpe2EhPVxubiYmKHA/cD09YSYmKHA9YS5uKTpwPWEsZihhLm4sYS5wKSxmKGEsbiksbj1hLG4ubj1udWxsKX1mdW5jdGlvbiBmKGEsYil7YSE9YiYmKGEmJihhLnA9YiksYiYmKGIubj1hKSl9aWYoYiBpbiBhKXRocm93IEMoXCIkY2FjaGVGYWN0b3J5XCIpKFwiaWlkXCIsYik7dmFyIGc9MCxrPUQoe30sZCx7aWQ6Yn0pLG09e30saD1kJiZkLmNhcGFjaXR5fHxOdW1iZXIuTUFYX1ZBTFVFLGw9e30sbj1udWxsLHA9bnVsbDtyZXR1cm4gYVtiXT17cHV0OmZ1bmN0aW9uKGEsYil7aWYoaDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYz1sW2FdfHwobFthXT17a2V5OmF9KTtlKGMpfWlmKCF4KGIpKXJldHVybiBhIGluIG18fGcrKyxtW2FdPWIsZz5oJiZ0aGlzLnJlbW92ZShwLmtleSksYn0sZ2V0OmZ1bmN0aW9uKGEpe2lmKGg8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bFthXTtpZighYilyZXR1cm47ZShiKX1yZXR1cm4gbVthXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGg8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9XG5sW2FdO2lmKCFiKXJldHVybjtiPT1uJiYobj1iLnApO2I9PXAmJihwPWIubik7ZihiLm4sYi5wKTtkZWxldGUgbFthXX1kZWxldGUgbVthXTtnLS19LHJlbW92ZUFsbDpmdW5jdGlvbigpe209e307Zz0wO2w9e307bj1wPW51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtsPWs9bT1udWxsO2RlbGV0ZSBhW2JdfSxpbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIEQoe30sayx7c2l6ZTpnfSl9fX12YXIgYT17fTtiLmluZm89ZnVuY3Rpb24oKXt2YXIgYj17fTtyKGEsZnVuY3Rpb24oYSxlKXtiW2VdPWEuaW5mbygpfSk7cmV0dXJuIGJ9O2IuZ2V0PWZ1bmN0aW9uKGIpe3JldHVybiBhW2JdfTtyZXR1cm4gYn19ZnVuY3Rpb24gZGUoKXt0aGlzLiRnZXQ9W1wiJGNhY2hlRmFjdG9yeVwiLGZ1bmN0aW9uKGIpe3JldHVybiBiKFwidGVtcGxhdGVzXCIpfV19ZnVuY3Rpb24gaWMoYixhKXt2YXIgYz17fSxkPVwiRGlyZWN0aXZlXCIsZT0vXlxccypkaXJlY3RpdmVcXDpcXHMqKFtcXGRcXHdfXFwtXSspXFxzKyguKikkLyxmPS8oKFtcXGRcXHdfXFwtXSspKD86XFw6KFteO10rKSk/Oz8pLyxcbmc9L14ob25bYS16XSt8Zm9ybWFjdGlvbikkLzt0aGlzLmRpcmVjdGl2ZT1mdW5jdGlvbiBtKGEsZSl7RGEoYSxcImRpcmVjdGl2ZVwiKTt2KGEpPyhEYihlLFwiZGlyZWN0aXZlRmFjdG9yeVwiKSxjLmhhc093blByb3BlcnR5KGEpfHwoY1thXT1bXSxiLmZhY3RvcnkoYStkLFtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGQpe3ZhciBlPVtdO3IoY1thXSxmdW5jdGlvbihjLGYpe3RyeXt2YXIgZz1iLmludm9rZShjKTtQKGcpP2c9e2NvbXBpbGU6YmEoZyl9OiFnLmNvbXBpbGUmJmcubGluayYmKGcuY29tcGlsZT1iYShnLmxpbmspKTtnLnByaW9yaXR5PWcucHJpb3JpdHl8fDA7Zy5pbmRleD1mO2cubmFtZT1nLm5hbWV8fGE7Zy5yZXF1aXJlPWcucmVxdWlyZXx8Zy5jb250cm9sbGVyJiZnLm5hbWU7Zy5yZXN0cmljdD1nLnJlc3RyaWN0fHxcIkFcIjtlLnB1c2goZyl9Y2F0Y2gobSl7ZChtKX19KTtyZXR1cm4gZX1dKSksY1thXS5wdXNoKGUpKTpyKGEsJGIobSkpO1xucmV0dXJuIHRoaXN9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGEuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGludGVycG9sYXRlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkcGFyc2VcIixcIiRjb250cm9sbGVyXCIsXCIkcm9vdFNjb3BlXCIsXCIkZG9jdW1lbnRcIixcIiRzY2VcIixcIiRhbmltYXRlXCIsXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSxiLGwsbixwLHEscyxGLHUsQSxOLFIpe2Z1bmN0aW9uIHooYSxiLGMsZCxlKXthIGluc3RhbmNlb2Zcbnd8fChhPXcoYSkpO3IoYSxmdW5jdGlvbihiLGMpezM9PWIubm9kZVR5cGUmJmIubm9kZVZhbHVlLm1hdGNoKC9cXFMrLykmJihhW2NdPXcoYikud3JhcChcIjxzcGFuPjwvc3Bhbj5cIikucGFyZW50KClbMF0pfSk7dmFyIGY9TChhLGIsYSxjLGQsZSk7Y2EoYSxcIm5nLXNjb3BlXCIpO3JldHVybiBmdW5jdGlvbihiLGMsZCxlKXtEYihiLFwic2NvcGVcIik7dmFyIGc9Yz9MYS5jbG9uZS5jYWxsKGEpOmE7cihkLGZ1bmN0aW9uKGEsYil7Zy5kYXRhKFwiJFwiK2IrXCJDb250cm9sbGVyXCIsYSl9KTtkPTA7Zm9yKHZhciBtPWcubGVuZ3RoO2Q8bTtkKyspe3ZhciBoPWdbZF0ubm9kZVR5cGU7MSE9PWgmJjkhPT1ofHxnLmVxKGQpLmRhdGEoXCIkc2NvcGVcIixiKX1jJiZjKGcsYik7ZiYmZihiLGcsZyxlKTtyZXR1cm4gZ319ZnVuY3Rpb24gY2EoYSxiKXt0cnl7YS5hZGRDbGFzcyhiKX1jYXRjaChjKXt9fWZ1bmN0aW9uIEwoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxjLGQsZSl7dmFyIGYsaCxsLHEsbixcbnAscztmPWMubGVuZ3RoO3ZhciBNPUFycmF5KGYpO2ZvcihxPTA7cTxmO3ErKylNW3FdPWNbcV07cD1xPTA7Zm9yKG49bS5sZW5ndGg7cTxuO3ArKyloPU1bcF0sYz1tW3ErK10sZj1tW3ErK10sYz8oYy5zY29wZT8obD1hLiRuZXcoKSx3LmRhdGEoaCxcIiRzY29wZVwiLGwpKTpsPWEscz1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P08oYSxjLnRyYW5zY2x1ZGUsZSk6IWMudGVtcGxhdGVPblRoaXNFbGVtZW50JiZlP2U6IWUmJmI/TyhhLGIpOm51bGwsYyhmLGwsaCxkLHMpKTpmJiZmKGEsaC5jaGlsZE5vZGVzLHQsZSl9Zm9yKHZhciBtPVtdLGgsbCxxLG4scD0wO3A8YS5sZW5ndGg7cCsrKWg9bmV3IE9iLGw9ZGEoYVtwXSxbXSxoLDA9PT1wP2Q6dCxlKSwoZj1sLmxlbmd0aD9IKGwsYVtwXSxoLGIsYyxudWxsLFtdLFtdLGYpOm51bGwpJiZmLnNjb3BlJiZjYShoLiQkZWxlbWVudCxcIm5nLXNjb3BlXCIpLGg9ZiYmZi50ZXJtaW5hbHx8IShxPWFbcF0uY2hpbGROb2Rlcyl8fCFxLmxlbmd0aD9cbm51bGw6TChxLGY/KGYudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnR8fCFmLnRlbXBsYXRlT25UaGlzRWxlbWVudCkmJmYudHJhbnNjbHVkZTpiKSxtLnB1c2goZixoKSxuPW58fGZ8fGgsZj1udWxsO3JldHVybiBuP2c6bnVsbH1mdW5jdGlvbiBPKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3ZhciBnPSExO2R8fChkPWEuJG5ldygpLGc9ZC4kJHRyYW5zY2x1ZGVkPSEwKTtlPWIoZCxlLGYsYyk7aWYoZyllLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2QuJGRlc3Ryb3koKX0pO3JldHVybiBlfX1mdW5jdGlvbiBkYShhLGIsYyxkLGcpe3ZhciBtPWMuJGF0dHIsaDtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSAxOmZhKGIscGEoTWEoYSkudG9Mb3dlckNhc2UoKSksXCJFXCIsZCxnKTtmb3IodmFyIGwscSxuLHA9YS5hdHRyaWJ1dGVzLHM9MCxGPXAmJnAubGVuZ3RoO3M8RjtzKyspe3ZhciBBPSExLE49ITE7bD1wW3NdO2lmKCFRfHw4PD1RfHxsLnNwZWNpZmllZCl7aD1sLm5hbWU7cT1cbmFhKGwudmFsdWUpO2w9cGEoaCk7aWYobj1VLnRlc3QobCkpaD1tYihsLnN1YnN0cig2KSxcIi1cIik7dmFyIHU9bC5yZXBsYWNlKC8oU3RhcnR8RW5kKSQvLFwiXCIpO2w9PT11K1wiU3RhcnRcIiYmKEE9aCxOPWguc3Vic3RyKDAsaC5sZW5ndGgtNSkrXCJlbmRcIixoPWguc3Vic3RyKDAsaC5sZW5ndGgtNikpO2w9cGEoaC50b0xvd2VyQ2FzZSgpKTttW2xdPWg7aWYobnx8IWMuaGFzT3duUHJvcGVydHkobCkpY1tsXT1xLHFjKGEsbCkmJihjW2xdPSEwKTtTKGEsYixxLGwpO2ZhKGIsbCxcIkFcIixkLGcsQSxOKX19YT1hLmNsYXNzTmFtZTtpZih2KGEpJiZcIlwiIT09YSlmb3IoO2g9Zi5leGVjKGEpOylsPXBhKGhbMl0pLGZhKGIsbCxcIkNcIixkLGcpJiYoY1tsXT1hYShoWzNdKSksYT1hLnN1YnN0cihoLmluZGV4K2hbMF0ubGVuZ3RoKTticmVhaztjYXNlIDM6SyhiLGEubm9kZVZhbHVlKTticmVhaztjYXNlIDg6dHJ5e2lmKGg9ZS5leGVjKGEubm9kZVZhbHVlKSlsPXBhKGhbMV0pLGZhKGIsbCxcIk1cIixcbmQsZykmJihjW2xdPWFhKGhbMl0pKX1jYXRjaCh6KXt9fWIuc29ydCh4KTtyZXR1cm4gYn1mdW5jdGlvbiBCKGEsYixjKXt2YXIgZD1bXSxlPTA7aWYoYiYmYS5oYXNBdHRyaWJ1dGUmJmEuaGFzQXR0cmlidXRlKGIpKXtkb3tpZighYSl0aHJvdyBqYShcInV0ZXJkaXJcIixiLGMpOzE9PWEubm9kZVR5cGUmJihhLmhhc0F0dHJpYnV0ZShiKSYmZSsrLGEuaGFzQXR0cmlidXRlKGMpJiZlLS0pO2QucHVzaChhKTthPWEubmV4dFNpYmxpbmd9d2hpbGUoMDxlKX1lbHNlIGQucHVzaChhKTtyZXR1cm4gdyhkKX1mdW5jdGlvbiBJKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXtlPUIoZVswXSxiLGMpO3JldHVybiBhKGQsZSxmLGcsaCl9fWZ1bmN0aW9uIEgoYSxjLGQsZSxmLGcsbSxuLHApe2Z1bmN0aW9uIEYoYSxiLGMsZCl7aWYoYSl7YyYmKGE9SShhLGMsZCkpO2EucmVxdWlyZT1HLnJlcXVpcmU7YS5kaXJlY3RpdmVOYW1lPUM7aWYoTD09PUd8fEcuJCRpc29sYXRlU2NvcGUpYT1cbnRjKGEse2lzb2xhdGVTY29wZTohMH0pO20ucHVzaChhKX1pZihiKXtjJiYoYj1JKGIsYyxkKSk7Yi5yZXF1aXJlPUcucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9QztpZihMPT09R3x8Ry4kJGlzb2xhdGVTY29wZSliPXRjKGIse2lzb2xhdGVTY29wZTohMH0pO24ucHVzaChiKX19ZnVuY3Rpb24gQShhLGIsYyxkKXt2YXIgZSxmPVwiZGF0YVwiLGc9ITE7aWYodihiKSl7Zm9yKDtcIl5cIj09KGU9Yi5jaGFyQXQoMCkpfHxcIj9cIj09ZTspYj1iLnN1YnN0cigxKSxcIl5cIj09ZSYmKGY9XCJpbmhlcml0ZWREYXRhXCIpLGc9Z3x8XCI/XCI9PWU7ZT1udWxsO2QmJlwiZGF0YVwiPT09ZiYmKGU9ZFtiXSk7ZT1lfHxjW2ZdKFwiJFwiK2IrXCJDb250cm9sbGVyXCIpO2lmKCFlJiYhZyl0aHJvdyBqYShcImN0cmVxXCIsYixhKTt9ZWxzZSBKKGIpJiYoZT1bXSxyKGIsZnVuY3Rpb24oYil7ZS5wdXNoKEEoYSxiLGMsZCkpfSkpO3JldHVybiBlfWZ1bmN0aW9uIE4oYSxlLGYsZyxwKXtmdW5jdGlvbiBGKGEsYil7dmFyIGM7Mj5hcmd1bWVudHMubGVuZ3RoJiZcbihiPWEsYT10KTtLJiYoYz1kYSk7cmV0dXJuIHAoYSxiLGMpfXZhciB1LE0seixPLEksQixkYT17fSxyYjt1PWM9PT1mP2Q6aGEoZCxuZXcgT2IodyhmKSxkLiRhdHRyKSk7TT11LiQkZWxlbWVudDtpZihMKXt2YXIgTmE9L15cXHMqKFtAPSZdKShcXD8/KVxccyooXFx3KilcXHMqJC87Qj1lLiRuZXcoITApOyFIfHxIIT09TCYmSCE9PUwuJCRvcmlnaW5hbERpcmVjdGl2ZT9NLmRhdGEoXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiLEIpOk0uZGF0YShcIiRpc29sYXRlU2NvcGVcIixCKTtjYShNLFwibmctaXNvbGF0ZS1zY29wZVwiKTtyKEwuc2NvcGUsZnVuY3Rpb24oYSxjKXt2YXIgZD1hLm1hdGNoKE5hKXx8W10sZj1kWzNdfHxjLGc9XCI/XCI9PWRbMl0sZD1kWzFdLG0sbCxuLHA7Qi4kJGlzb2xhdGVCaW5kaW5nc1tjXT1kK2Y7c3dpdGNoKGQpe2Nhc2UgXCJAXCI6dS4kb2JzZXJ2ZShmLGZ1bmN0aW9uKGEpe0JbY109YX0pO3UuJCRvYnNlcnZlcnNbZl0uJCRzY29wZT1lO3VbZl0mJihCW2NdPWIodVtmXSkoZSkpO1xuYnJlYWs7Y2FzZSBcIj1cIjppZihnJiYhdVtmXSlicmVhaztsPXEodVtmXSk7cD1sLmxpdGVyYWw/QWE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ8fGEhPT1hJiZiIT09Yn07bj1sLmFzc2lnbnx8ZnVuY3Rpb24oKXttPUJbY109bChlKTt0aHJvdyBqYShcIm5vbmFzc2lnblwiLHVbZl0sTC5uYW1lKTt9O209QltjXT1sKGUpO0IuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGE9bChlKTtwKGEsQltjXSl8fChwKGEsbSk/bihlLGE9QltjXSk6QltjXT1hKTtyZXR1cm4gbT1hfSxudWxsLGwubGl0ZXJhbCk7YnJlYWs7Y2FzZSBcIiZcIjpsPXEodVtmXSk7QltjXT1mdW5jdGlvbihhKXtyZXR1cm4gbChlLGEpfTticmVhaztkZWZhdWx0OnRocm93IGphKFwiaXNjcFwiLEwubmFtZSxjLGEpO319KX1yYj1wJiZGO1ImJnIoUixmdW5jdGlvbihhKXt2YXIgYj17JHNjb3BlOmE9PT1MfHxhLiQkaXNvbGF0ZVNjb3BlP0I6ZSwkZWxlbWVudDpNLCRhdHRyczp1LCR0cmFuc2NsdWRlOnJifSxjO0k9YS5jb250cm9sbGVyO1xuXCJAXCI9PUkmJihJPXVbYS5uYW1lXSk7Yz1zKEksYik7ZGFbYS5uYW1lXT1jO0t8fE0uZGF0YShcIiRcIithLm5hbWUrXCJDb250cm9sbGVyXCIsYyk7YS5jb250cm9sbGVyQXMmJihiLiRzY29wZVthLmNvbnRyb2xsZXJBc109Yyl9KTtnPTA7Zm9yKHo9bS5sZW5ndGg7Zzx6O2crKyl0cnl7Tz1tW2ddLE8oTy5pc29sYXRlU2NvcGU/QjplLE0sdSxPLnJlcXVpcmUmJkEoTy5kaXJlY3RpdmVOYW1lLE8ucmVxdWlyZSxNLGRhKSxyYil9Y2F0Y2goRyl7bChHLGlhKE0pKX1nPWU7TCYmKEwudGVtcGxhdGV8fG51bGw9PT1MLnRlbXBsYXRlVXJsKSYmKGc9Qik7YSYmYShnLGYuY2hpbGROb2Rlcyx0LHApO2ZvcihnPW4ubGVuZ3RoLTE7MDw9ZztnLS0pdHJ5e089bltnXSxPKE8uaXNvbGF0ZVNjb3BlP0I6ZSxNLHUsTy5yZXF1aXJlJiZBKE8uZGlyZWN0aXZlTmFtZSxPLnJlcXVpcmUsTSxkYSkscmIpfWNhdGNoKHkpe2woeSxpYShNKSl9fXA9cHx8e307Zm9yKHZhciB1PS1OdW1iZXIuTUFYX1ZBTFVFLFxuTyxSPXAuY29udHJvbGxlckRpcmVjdGl2ZXMsTD1wLm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxIPXAudGVtcGxhdGVEaXJlY3RpdmUsZmE9cC5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLHg9ITEsRD0hMSxLPXAuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUsWj1kLiQkZWxlbWVudD13KGMpLEcsQyxWLFM9ZSxRLEZhPTAscWE9YS5sZW5ndGg7RmE8cWE7RmErKyl7Rz1hW0ZhXTt2YXIgVT1HLiQkc3RhcnQsWT1HLiQkZW5kO1UmJihaPUIoYyxVLFkpKTtWPXQ7aWYodT5HLnByaW9yaXR5KWJyZWFrO2lmKFY9Ry5zY29wZSlPPU98fEcsRy50ZW1wbGF0ZVVybHx8KGRiKFwibmV3L2lzb2xhdGVkIHNjb3BlXCIsTCxHLFopLFQoVikmJihMPUcpKTtDPUcubmFtZTshRy50ZW1wbGF0ZVVybCYmRy5jb250cm9sbGVyJiYoVj1HLmNvbnRyb2xsZXIsUj1SfHx7fSxkYihcIidcIitDK1wiJyBjb250cm9sbGVyXCIsUltDXSxHLFopLFJbQ109Ryk7aWYoVj1HLnRyYW5zY2x1ZGUpeD0hMCxHLiQkdGxifHxcbihkYihcInRyYW5zY2x1c2lvblwiLGZhLEcsWiksZmE9RyksXCJlbGVtZW50XCI9PVY/KEs9ITAsdT1HLnByaW9yaXR5LFY9WixaPWQuJCRlbGVtZW50PXcoWC5jcmVhdGVDb21tZW50KFwiIFwiK0MrXCI6IFwiK2RbQ10rXCIgXCIpKSxjPVpbMF0sTmEoZixCYS5jYWxsKFYsMCksYyksUz16KFYsZSx1LGcmJmcubmFtZSx7bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpmYX0pKTooVj13KEtiKGMpKS5jb250ZW50cygpLFouZW1wdHkoKSxTPXooVixlKSk7aWYoRy50ZW1wbGF0ZSlpZihEPSEwLGRiKFwidGVtcGxhdGVcIixILEcsWiksSD1HLFY9UChHLnRlbXBsYXRlKT9HLnRlbXBsYXRlKFosZCk6Ry50ZW1wbGF0ZSxWPVcoViksRy5yZXBsYWNlKXtnPUc7Vj1JYi50ZXN0KFYpP3coYWEoVikpOltdO2M9VlswXTtpZigxIT1WLmxlbmd0aHx8MSE9PWMubm9kZVR5cGUpdGhyb3cgamEoXCJ0cGxydFwiLEMsXCJcIik7TmEoZixaLGMpO3FhPXskYXR0cjp7fX07Vj1kYShjLFtdLHFhKTt2YXIgJD1hLnNwbGljZShGYStcbjEsYS5sZW5ndGgtKEZhKzEpKTtMJiZ5KFYpO2E9YS5jb25jYXQoVikuY29uY2F0KCQpO0UoZCxxYSk7cWE9YS5sZW5ndGh9ZWxzZSBaLmh0bWwoVik7aWYoRy50ZW1wbGF0ZVVybClEPSEwLGRiKFwidGVtcGxhdGVcIixILEcsWiksSD1HLEcucmVwbGFjZSYmKGc9RyksTj11ZShhLnNwbGljZShGYSxhLmxlbmd0aC1GYSksWixkLGYseCYmUyxtLG4se2NvbnRyb2xsZXJEaXJlY3RpdmVzOlIsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlOkwsdGVtcGxhdGVEaXJlY3RpdmU6SCxub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOmZhfSkscWE9YS5sZW5ndGg7ZWxzZSBpZihHLmNvbXBpbGUpdHJ5e1E9Ry5jb21waWxlKFosZCxTKSxQKFEpP0YobnVsbCxRLFUsWSk6USYmRihRLnByZSxRLnBvc3QsVSxZKX1jYXRjaCh2ZSl7bCh2ZSxpYShaKSl9Ry50ZXJtaW5hbCYmKE4udGVybWluYWw9ITAsdT1NYXRoLm1heCh1LEcucHJpb3JpdHkpKX1OLnNjb3BlPU8mJiEwPT09Ty5zY29wZTtOLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50PVxueDtOLnRlbXBsYXRlT25UaGlzRWxlbWVudD1EO04udHJhbnNjbHVkZT1TO3AuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU9SztyZXR1cm4gTn1mdW5jdGlvbiB5KGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylhW2JdPWJjKGFbYl0seyQkaXNvbGF0ZVNjb3BlOiEwfSl9ZnVuY3Rpb24gZmEoYixlLGYsZyxoLHEsbil7aWYoZT09PWgpcmV0dXJuIG51bGw7aD1udWxsO2lmKGMuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBwO2U9YS5nZXQoZStkKTtmb3IodmFyIHM9MCx1PWUubGVuZ3RoO3M8dTtzKyspdHJ5e3A9ZVtzXSwoZz09PXR8fGc+cC5wcmlvcml0eSkmJi0xIT1wLnJlc3RyaWN0LmluZGV4T2YoZikmJihxJiYocD1iYyhwLHskJHN0YXJ0OnEsJCRlbmQ6bn0pKSxiLnB1c2gocCksaD1wKX1jYXRjaChGKXtsKEYpfX1yZXR1cm4gaH1mdW5jdGlvbiBFKGEsYil7dmFyIGM9Yi4kYXR0cixkPWEuJGF0dHIsZT1hLiQkZWxlbWVudDtyKGEsZnVuY3Rpb24oZCxlKXtcIiRcIiE9XG5lLmNoYXJBdCgwKSYmKGJbZV0mJmJbZV0hPT1kJiYoZCs9KFwic3R5bGVcIj09PWU/XCI7XCI6XCIgXCIpK2JbZV0pLGEuJHNldChlLGQsITAsY1tlXSkpfSk7cihiLGZ1bmN0aW9uKGIsZil7XCJjbGFzc1wiPT1mPyhjYShlLGIpLGFbXCJjbGFzc1wiXT0oYVtcImNsYXNzXCJdP2FbXCJjbGFzc1wiXStcIiBcIjpcIlwiKStiKTpcInN0eWxlXCI9PWY/KGUuYXR0cihcInN0eWxlXCIsZS5hdHRyKFwic3R5bGVcIikrXCI7XCIrYiksYS5zdHlsZT0oYS5zdHlsZT9hLnN0eWxlK1wiO1wiOlwiXCIpK2IpOlwiJFwiPT1mLmNoYXJBdCgwKXx8YS5oYXNPd25Qcm9wZXJ0eShmKXx8KGFbZl09YixkW2ZdPWNbZl0pfSl9ZnVuY3Rpb24gdWUoYSxiLGMsZCxlLGYsZyxoKXt2YXIgbT1bXSxsLHEscz1iWzBdLHU9YS5zaGlmdCgpLEY9RCh7fSx1LHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTp1fSksTj1QKHUudGVtcGxhdGVVcmwpP3UudGVtcGxhdGVVcmwoYixjKTp1LnRlbXBsYXRlVXJsO1xuYi5lbXB0eSgpO24uZ2V0KEEuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKE4pLHtjYWNoZTpwfSkuc3VjY2VzcyhmdW5jdGlvbihuKXt2YXIgcCxBO249VyhuKTtpZih1LnJlcGxhY2Upe249SWIudGVzdChuKT93KGFhKG4pKTpbXTtwPW5bMF07aWYoMSE9bi5sZW5ndGh8fDEhPT1wLm5vZGVUeXBlKXRocm93IGphKFwidHBscnRcIix1Lm5hbWUsTik7bj17JGF0dHI6e319O05hKGQsYixwKTt2YXIgej1kYShwLFtdLG4pO1QodS5zY29wZSkmJnkoeik7YT16LmNvbmNhdChhKTtFKGMsbil9ZWxzZSBwPXMsYi5odG1sKG4pO2EudW5zaGlmdChGKTtsPUgoYSxwLGMsZSxiLHUsZixnLGgpO3IoZCxmdW5jdGlvbihhLGMpe2E9PXAmJihkW2NdPWJbMF0pfSk7Zm9yKHE9TChiWzBdLmNoaWxkTm9kZXMsZSk7bS5sZW5ndGg7KXtuPW0uc2hpZnQoKTtBPW0uc2hpZnQoKTt2YXIgUj1tLnNoaWZ0KCksST1tLnNoaWZ0KCksej1iWzBdO2lmKEEhPT1zKXt2YXIgQj1BLmNsYXNzTmFtZTtoLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlJiZcbnUucmVwbGFjZXx8KHo9S2IocCkpO05hKFIsdyhBKSx6KTtjYSh3KHopLEIpfUE9bC50cmFuc2NsdWRlT25UaGlzRWxlbWVudD9PKG4sbC50cmFuc2NsdWRlLEkpOkk7bChxLG4seixkLEEpfW09bnVsbH0pLmVycm9yKGZ1bmN0aW9uKGEsYixjLGQpe3Rocm93IGphKFwidHBsb2FkXCIsZC51cmwpO30pO3JldHVybiBmdW5jdGlvbihhLGIsYyxkLGUpe2E9ZTttPyhtLnB1c2goYiksbS5wdXNoKGMpLG0ucHVzaChkKSxtLnB1c2goYSkpOihsLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50JiYoYT1PKGIsbC50cmFuc2NsdWRlLGUpKSxsKHEsYixjLGQsYSkpfX1mdW5jdGlvbiB4KGEsYil7dmFyIGM9Yi5wcmlvcml0eS1hLnByaW9yaXR5O3JldHVybiAwIT09Yz9jOmEubmFtZSE9PWIubmFtZT9hLm5hbWU8Yi5uYW1lPy0xOjE6YS5pbmRleC1iLmluZGV4fWZ1bmN0aW9uIGRiKGEsYixjLGQpe2lmKGIpdGhyb3cgamEoXCJtdWx0aWRpclwiLGIubmFtZSxjLm5hbWUsYSxpYShkKSk7fWZ1bmN0aW9uIEsoYSxcbmMpe3ZhciBkPWIoYywhMCk7ZCYmYS5wdXNoKHtwcmlvcml0eTowLGNvbXBpbGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQoKS5sZW5ndGg7YiYmY2EoYS5wYXJlbnQoKSxcIm5nLWJpbmRpbmdcIik7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7dmFyIGU9Yy5wYXJlbnQoKSxmPWUuZGF0YShcIiRiaW5kaW5nXCIpfHxbXTtmLnB1c2goZCk7ZS5kYXRhKFwiJGJpbmRpbmdcIixmKTtifHxjYShlLFwibmctYmluZGluZ1wiKTthLiR3YXRjaChkLGZ1bmN0aW9uKGEpe2NbMF0ubm9kZVZhbHVlPWF9KX19fSl9ZnVuY3Rpb24gQyhhLGIpe2lmKFwic3JjZG9jXCI9PWIpcmV0dXJuIEEuSFRNTDt2YXIgYz1NYShhKTtpZihcInhsaW5rSHJlZlwiPT1ifHxcIkZPUk1cIj09YyYmXCJhY3Rpb25cIj09Ynx8XCJJTUdcIiE9YyYmKFwic3JjXCI9PWJ8fFwibmdTcmNcIj09YikpcmV0dXJuIEEuUkVTT1VSQ0VfVVJMfWZ1bmN0aW9uIFMoYSxjLGQsZSl7dmFyIGY9YihkLCEwKTtpZihmKXtpZihcIm11bHRpcGxlXCI9PT1lJiZcIlNFTEVDVFwiPT09XG5NYShhKSl0aHJvdyBqYShcInNlbG11bHRpXCIsaWEoYSkpO2MucHVzaCh7cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGMsZCxtKXtkPW0uJCRvYnNlcnZlcnN8fChtLiQkb2JzZXJ2ZXJzPXt9KTtpZihnLnRlc3QoZSkpdGhyb3cgamEoXCJub2RvbWV2ZW50c1wiKTtpZihmPWIobVtlXSwhMCxDKGEsZSkpKW1bZV09ZihjKSwoZFtlXXx8KGRbZV09W10pKS4kJGludGVyPSEwLChtLiQkb2JzZXJ2ZXJzJiZtLiQkb2JzZXJ2ZXJzW2VdLiQkc2NvcGV8fGMpLiR3YXRjaChmLGZ1bmN0aW9uKGEsYil7XCJjbGFzc1wiPT09ZSYmYSE9Yj9tLiR1cGRhdGVDbGFzcyhhLGIpOm0uJHNldChlLGEpfSl9fX19KX19ZnVuY3Rpb24gTmEoYSxiLGMpe3ZhciBkPWJbMF0sZT1iLmxlbmd0aCxmPWQucGFyZW50Tm9kZSxnLG07aWYoYSlmb3IoZz0wLG09YS5sZW5ndGg7ZzxtO2crKylpZihhW2ddPT1kKXthW2crK109YzttPWcrZS0xO2Zvcih2YXIgaD1hLmxlbmd0aDtnPFxuaDtnKyssbSsrKW08aD9hW2ddPWFbbV06ZGVsZXRlIGFbZ107YS5sZW5ndGgtPWUtMTticmVha31mJiZmLnJlcGxhY2VDaGlsZChjLGQpO2E9WC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5hcHBlbmRDaGlsZChkKTtjW3cuZXhwYW5kb109ZFt3LmV4cGFuZG9dO2Q9MTtmb3IoZT1iLmxlbmd0aDtkPGU7ZCsrKWY9YltkXSx3KGYpLnJlbW92ZSgpLGEuYXBwZW5kQ2hpbGQoZiksZGVsZXRlIGJbZF07YlswXT1jO2IubGVuZ3RoPTF9ZnVuY3Rpb24gdGMoYSxiKXtyZXR1cm4gRChmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sYSxiKX12YXIgT2I9ZnVuY3Rpb24oYSxiKXt0aGlzLiQkZWxlbWVudD1hO3RoaXMuJGF0dHI9Ynx8e319O09iLnByb3RvdHlwZT17JG5vcm1hbGl6ZTpwYSwkYWRkQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxhLmxlbmd0aCYmTi5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe2EmJjA8XG5hLmxlbmd0aCYmTi5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxhKX0sJHVwZGF0ZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dWMoYSxiKSxkPXVjKGIsYSk7MD09PWMubGVuZ3RoP04ucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsZCk6MD09PWQubGVuZ3RoP04uYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsYyk6Ti5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCxjLGQpfSwkc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXFjKHRoaXMuJCRlbGVtZW50WzBdLGEpO2UmJih0aGlzLiQkZWxlbWVudC5wcm9wKGEsYiksZD1lKTt0aGlzW2FdPWI7ZD90aGlzLiRhdHRyW2FdPWQ6KGQ9dGhpcy4kYXR0clthXSl8fCh0aGlzLiRhdHRyW2FdPWQ9bWIoYSxcIi1cIikpO2U9TWEodGhpcy4kJGVsZW1lbnQpO2lmKFwiQVwiPT09ZSYmXCJocmVmXCI9PT1hfHxcIklNR1wiPT09ZSYmXCJzcmNcIj09PWEpdGhpc1thXT1iPVIoYixcInNyY1wiPT09YSk7ITEhPT1jJiYobnVsbD09PWJ8fGI9PT10P3RoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoZCk6XG50aGlzLiQkZWxlbWVudC5hdHRyKGQsYikpOyhjPXRoaXMuJCRvYnNlcnZlcnMpJiZyKGNbYV0sZnVuY3Rpb24oYSl7dHJ5e2EoYil9Y2F0Y2goYyl7bChjKX19KX0sJG9ic2VydmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy4kJG9ic2VydmVyc3x8KGMuJCRvYnNlcnZlcnM9e30pLGU9ZFthXXx8KGRbYV09W10pO2UucHVzaChiKTtGLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtlLiQkaW50ZXJ8fGIoY1thXSl9KTtyZXR1cm4gYn19O3ZhciBxYT1iLnN0YXJ0U3ltYm9sKCksWj1iLmVuZFN5bWJvbCgpLFc9XCJ7e1wiPT1xYXx8XCJ9fVwiPT1aP1FhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xce1xcey9nLHFhKS5yZXBsYWNlKC99fS9nLFopfSxVPS9ebmdBdHRyW0EtWl0vO3JldHVybiB6fV19ZnVuY3Rpb24gcGEoYil7cmV0dXJuIFphKGIucmVwbGFjZSh3ZSxcIlwiKSl9ZnVuY3Rpb24gdWMoYixhKXt2YXIgYz1cIlwiLGQ9Yi5zcGxpdCgvXFxzKy8pLGU9YS5zcGxpdCgvXFxzKy8pLGY9XG4wO2E6Zm9yKDtmPGQubGVuZ3RoO2YrKyl7Zm9yKHZhciBnPWRbZl0saz0wO2s8ZS5sZW5ndGg7aysrKWlmKGc9PWVba10pY29udGludWUgYTtjKz0oMDxjLmxlbmd0aD9cIiBcIjpcIlwiKStnfXJldHVybiBjfWZ1bmN0aW9uIFBkKCl7dmFyIGI9e30sYT0vXihcXFMrKShcXHMrYXNcXHMrKFxcdyspKT8kLzt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKGEsZCl7RGEoYSxcImNvbnRyb2xsZXJcIik7VChhKT9EKGIsYSk6YlthXT1kfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmKXt2YXIgZyxrLG07dihlKSYmKGc9ZS5tYXRjaChhKSxrPWdbMV0sbT1nWzNdLGU9Yi5oYXNPd25Qcm9wZXJ0eShrKT9iW2tdOmhjKGYuJHNjb3BlLGssITApfHxoYyhkLGssITApLFdhKGUsaywhMCkpO2c9Yy5pbnN0YW50aWF0ZShlLGYpO2lmKG0pe2lmKCFmfHxcIm9iamVjdFwiIT09dHlwZW9mIGYuJHNjb3BlKXRocm93IEMoXCIkY29udHJvbGxlclwiKShcIm5vc2NwXCIsXG5rfHxlLm5hbWUsbSk7Zi4kc2NvcGVbbV09Z31yZXR1cm4gZ319XX1mdW5jdGlvbiBRZCgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oYil7cmV0dXJuIHcoYi5kb2N1bWVudCl9XX1mdW5jdGlvbiBSZCgpe3RoaXMuJGdldD1bXCIkbG9nXCIsZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7Yi5lcnJvci5hcHBseShiLGFyZ3VtZW50cyl9fV19ZnVuY3Rpb24gdmMoYil7dmFyIGE9e30sYyxkLGU7aWYoIWIpcmV0dXJuIGE7cihiLnNwbGl0KFwiXFxuXCIpLGZ1bmN0aW9uKGIpe2U9Yi5pbmRleE9mKFwiOlwiKTtjPUsoYWEoYi5zdWJzdHIoMCxlKSkpO2Q9YWEoYi5zdWJzdHIoZSsxKSk7YyYmKGFbY109YVtjXT9hW2NdK1wiLCBcIitkOmQpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gd2MoYil7dmFyIGE9VChiKT9iOnQ7cmV0dXJuIGZ1bmN0aW9uKGMpe2F8fChhPXZjKGIpKTtyZXR1cm4gYz9hW0soYyldfHxudWxsOmF9fWZ1bmN0aW9uIHhjKGIsYSxjKXtpZihQKGMpKXJldHVybiBjKGIsXG5hKTtyKGMsZnVuY3Rpb24oYyl7Yj1jKGIsYSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBVZCgpe3ZhciBiPS9eXFxzKihcXFt8XFx7W15cXHtdKS8sYT0vW1xcfVxcXV1cXHMqJC8sYz0vXlxcKVxcXVxcfScsP1xcbi8sZD17XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOFwifSxlPXRoaXMuZGVmYXVsdHM9e3RyYW5zZm9ybVJlc3BvbnNlOltmdW5jdGlvbihkKXt2KGQpJiYoZD1kLnJlcGxhY2UoYyxcIlwiKSxiLnRlc3QoZCkmJmEudGVzdChkKSYmKGQ9Y2MoZCkpKTtyZXR1cm4gZH1dLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGEpe3JldHVybiBUKGEpJiZcIltvYmplY3QgRmlsZV1cIiE9PXphLmNhbGwoYSkmJlwiW29iamVjdCBCbG9iXVwiIT09emEuY2FsbChhKT9uYShhKTphfV0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLypcIn0scG9zdDpoYShkKSxwdXQ6aGEoZCkscGF0Y2g6aGEoZCl9LHhzcmZDb29raWVOYW1lOlwiWFNSRi1UT0tFTlwiLFxueHNyZkhlYWRlck5hbWU6XCJYLVhTUkYtVE9LRU5cIn0sZj10aGlzLmludGVyY2VwdG9ycz1bXSxnPXRoaXMucmVzcG9uc2VJbnRlcmNlcHRvcnM9W107dGhpcy4kZ2V0PVtcIiRodHRwQmFja2VuZFwiLFwiJGJyb3dzZXJcIixcIiRjYWNoZUZhY3RvcnlcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyxkLG4scCl7ZnVuY3Rpb24gcShhKXtmdW5jdGlvbiBiKGEpe3ZhciBkPUQoe30sYSx7ZGF0YTp4YyhhLmRhdGEsYS5oZWFkZXJzLGMudHJhbnNmb3JtUmVzcG9uc2UpfSk7cmV0dXJuIDIwMDw9YS5zdGF0dXMmJjMwMD5hLnN0YXR1cz9kOm4ucmVqZWN0KGQpfXZhciBjPXttZXRob2Q6XCJnZXRcIix0cmFuc2Zvcm1SZXF1ZXN0OmUudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTplLnRyYW5zZm9ybVJlc3BvbnNlfSxkPWZ1bmN0aW9uKGEpe3ZhciBiPWUuaGVhZGVycyxjPUQoe30sYS5oZWFkZXJzKSxkLGYsYj1EKHt9LGIuY29tbW9uLGJbSyhhLm1ldGhvZCldKTtcbmE6Zm9yKGQgaW4gYil7YT1LKGQpO2ZvcihmIGluIGMpaWYoSyhmKT09PWEpY29udGludWUgYTtjW2RdPWJbZF19KGZ1bmN0aW9uKGEpe3ZhciBiO3IoYSxmdW5jdGlvbihjLGQpe1AoYykmJihiPWMoKSxudWxsIT1iP2FbZF09YjpkZWxldGUgYVtkXSl9KX0pKGMpO3JldHVybiBjfShhKTtEKGMsYSk7Yy5oZWFkZXJzPWQ7Yy5tZXRob2Q9SWEoYy5tZXRob2QpO3ZhciBmPVtmdW5jdGlvbihhKXtkPWEuaGVhZGVyczt2YXIgYz14YyhhLmRhdGEsd2MoZCksYS50cmFuc2Zvcm1SZXF1ZXN0KTt4KGMpJiZyKGQsZnVuY3Rpb24oYSxiKXtcImNvbnRlbnQtdHlwZVwiPT09SyhiKSYmZGVsZXRlIGRbYl19KTt4KGEud2l0aENyZWRlbnRpYWxzKSYmIXgoZS53aXRoQ3JlZGVudGlhbHMpJiYoYS53aXRoQ3JlZGVudGlhbHM9ZS53aXRoQ3JlZGVudGlhbHMpO3JldHVybiBzKGEsYyxkKS50aGVuKGIsYil9LHRdLGc9bi53aGVuKGMpO2ZvcihyKEEsZnVuY3Rpb24oYSl7KGEucmVxdWVzdHx8YS5yZXF1ZXN0RXJyb3IpJiZcbmYudW5zaGlmdChhLnJlcXVlc3QsYS5yZXF1ZXN0RXJyb3IpOyhhLnJlc3BvbnNlfHxhLnJlc3BvbnNlRXJyb3IpJiZmLnB1c2goYS5yZXNwb25zZSxhLnJlc3BvbnNlRXJyb3IpfSk7Zi5sZW5ndGg7KXthPWYuc2hpZnQoKTt2YXIgbT1mLnNoaWZ0KCksZz1nLnRoZW4oYSxtKX1nLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7Zy50aGVuKGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxjKX0pO3JldHVybiBnfTtnLmVycm9yPWZ1bmN0aW9uKGEpe2cudGhlbihudWxsLGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxjKX0pO3JldHVybiBnfTtyZXR1cm4gZ31mdW5jdGlvbiBzKGMsZixnKXtmdW5jdGlvbiBoKGEsYixjLGUpe0kmJigyMDA8PWEmJjMwMD5hP0kucHV0KHcsW2EsYix2YyhjKSxlXSk6SS5yZW1vdmUodykpO3AoYixhLGMsZSk7ZC4kJHBoYXNlfHxkLiRhcHBseSgpfWZ1bmN0aW9uIHAoYSxiLGQsZSl7Yj1NYXRoLm1heChiLDApOygyMDA8PVxuYiYmMzAwPmI/QS5yZXNvbHZlOkEucmVqZWN0KSh7ZGF0YTphLHN0YXR1czpiLGhlYWRlcnM6d2MoZCksY29uZmlnOmMsc3RhdHVzVGV4dDplfSl9ZnVuY3Rpb24gcygpe3ZhciBhPVJhKHEucGVuZGluZ1JlcXVlc3RzLGMpOy0xIT09YSYmcS5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGEsMSl9dmFyIEE9bi5kZWZlcigpLHI9QS5wcm9taXNlLEksSCx3PUYoYy51cmwsYy5wYXJhbXMpO3EucGVuZGluZ1JlcXVlc3RzLnB1c2goYyk7ci50aGVuKHMscyk7IWMuY2FjaGUmJiFlLmNhY2hlfHwoITE9PT1jLmNhY2hlfHxcIkdFVFwiIT09Yy5tZXRob2QmJlwiSlNPTlBcIiE9PWMubWV0aG9kKXx8KEk9VChjLmNhY2hlKT9jLmNhY2hlOlQoZS5jYWNoZSk/ZS5jYWNoZTp1KTtpZihJKWlmKEg9SS5nZXQodykseShIKSl7aWYoSCYmUChILnRoZW4pKXJldHVybiBILnRoZW4ocyxzKSxIO0ooSCk/cChIWzFdLEhbMF0saGEoSFsyXSksSFszXSk6cChILDIwMCx7fSxcIk9LXCIpfWVsc2UgSS5wdXQodyxyKTt4KEgpJiZcbigoSD1QYihjLnVybCk/Yi5jb29raWVzKClbYy54c3JmQ29va2llTmFtZXx8ZS54c3JmQ29va2llTmFtZV06dCkmJihnW2MueHNyZkhlYWRlck5hbWV8fGUueHNyZkhlYWRlck5hbWVdPUgpLGEoYy5tZXRob2QsdyxmLGgsZyxjLnRpbWVvdXQsYy53aXRoQ3JlZGVudGlhbHMsYy5yZXNwb25zZVR5cGUpKTtyZXR1cm4gcn1mdW5jdGlvbiBGKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGM9W107VGMoYixmdW5jdGlvbihhLGIpe251bGw9PT1hfHx4KGEpfHwoSihhKXx8KGE9W2FdKSxyKGEsZnVuY3Rpb24oYSl7VChhKSYmKGE9dGEoYSk/YS50b0lTT1N0cmluZygpOm5hKGEpKTtjLnB1c2goQ2EoYikrXCI9XCIrQ2EoYSkpfSkpfSk7MDxjLmxlbmd0aCYmKGErPSgtMT09YS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIikrYy5qb2luKFwiJlwiKSk7cmV0dXJuIGF9dmFyIHU9YyhcIiRodHRwXCIpLEE9W107cihmLGZ1bmN0aW9uKGEpe0EudW5zaGlmdCh2KGEpP3AuZ2V0KGEpOnAuaW52b2tlKGEpKX0pO3IoZyxcbmZ1bmN0aW9uKGEsYil7dmFyIGM9dihhKT9wLmdldChhKTpwLmludm9rZShhKTtBLnNwbGljZShiLDAse3Jlc3BvbnNlOmZ1bmN0aW9uKGEpe3JldHVybiBjKG4ud2hlbihhKSl9LHJlc3BvbnNlRXJyb3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGMobi5yZWplY3QoYSkpfX0pfSk7cS5wZW5kaW5nUmVxdWVzdHM9W107KGZ1bmN0aW9uKGEpe3IoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3FbYV09ZnVuY3Rpb24oYixjKXtyZXR1cm4gcShEKGN8fHt9LHttZXRob2Q6YSx1cmw6Yn0pKX19KX0pKFwiZ2V0XCIsXCJkZWxldGVcIixcImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtyKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtxW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gcShEKGR8fHt9LHttZXRob2Q6YSx1cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiKTtxLmRlZmF1bHRzPWU7cmV0dXJuIHF9XX1mdW5jdGlvbiB4ZShiKXtpZig4Pj1RJiYoIWIubWF0Y2goL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pKXx8XG4hVy5YTUxIdHRwUmVxdWVzdCkpcmV0dXJuIG5ldyBXLkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtpZihXLlhNTEh0dHBSZXF1ZXN0KXJldHVybiBuZXcgVy5YTUxIdHRwUmVxdWVzdDt0aHJvdyBDKFwiJGh0dHBCYWNrZW5kXCIpKFwibm94aHJcIik7fWZ1bmN0aW9uIFZkKCl7dGhpcy4kZ2V0PVtcIiRicm93c2VyXCIsXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihiLGEsYyl7cmV0dXJuIHllKGIseGUsYi5kZWZlcixhLmFuZ3VsYXIuY2FsbGJhY2tzLGNbMF0pfV19ZnVuY3Rpb24geWUoYixhLGMsZCxlKXtmdW5jdGlvbiBmKGEsYixjKXt2YXIgZj1lLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksZz1udWxsO2YudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO2Yuc3JjPWE7Zi5hc3luYz0hMDtnPWZ1bmN0aW9uKGEpeyRhKGYsXCJsb2FkXCIsZyk7JGEoZixcImVycm9yXCIsZyk7ZS5ib2R5LnJlbW92ZUNoaWxkKGYpO2Y9bnVsbDt2YXIgaz0tMSxzPVwidW5rbm93blwiO2EmJihcImxvYWRcIiE9PVxuYS50eXBlfHxkW2JdLmNhbGxlZHx8KGE9e3R5cGU6XCJlcnJvclwifSkscz1hLnR5cGUsaz1cImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCk7YyYmYyhrLHMpfTtzYihmLFwibG9hZFwiLGcpO3NiKGYsXCJlcnJvclwiLGcpOzg+PVEmJihmLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3YoZi5yZWFkeVN0YXRlKSYmL2xvYWRlZHxjb21wbGV0ZS8udGVzdChmLnJlYWR5U3RhdGUpJiYoZi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxnKHt0eXBlOlwibG9hZFwifSkpfSk7ZS5ib2R5LmFwcGVuZENoaWxkKGYpO3JldHVybiBnfXZhciBnPS0xO3JldHVybiBmdW5jdGlvbihlLG0saCxsLG4scCxxLHMpe2Z1bmN0aW9uIEYoKXtBPWc7UiYmUigpO3omJnouYWJvcnQoKX1mdW5jdGlvbiB1KGEsZCxlLGYsZyl7TCYmYy5jYW5jZWwoTCk7Uj16PW51bGw7MD09PWQmJihkPWU/MjAwOlwiZmlsZVwiPT11YShtKS5wcm90b2NvbD80MDQ6MCk7YSgxMjIzPT09ZD8yMDQ6ZCxlLGYsZ3x8XCJcIik7Yi4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KEUpfVxudmFyIEE7Yi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50KCk7bT1tfHxiLnVybCgpO2lmKFwianNvbnBcIj09SyhlKSl7dmFyIE49XCJfXCIrKGQuY291bnRlcisrKS50b1N0cmluZygzNik7ZFtOXT1mdW5jdGlvbihhKXtkW05dLmRhdGE9YTtkW05dLmNhbGxlZD0hMH07dmFyIFI9ZihtLnJlcGxhY2UoXCJKU09OX0NBTExCQUNLXCIsXCJhbmd1bGFyLmNhbGxiYWNrcy5cIitOKSxOLGZ1bmN0aW9uKGEsYil7dShsLGEsZFtOXS5kYXRhLFwiXCIsYik7ZFtOXT1FfSl9ZWxzZXt2YXIgej1hKGUpO3oub3BlbihlLG0sITApO3IobixmdW5jdGlvbihhLGIpe3koYSkmJnouc2V0UmVxdWVzdEhlYWRlcihiLGEpfSk7ei5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZih6JiY0PT16LnJlYWR5U3RhdGUpe3ZhciBhPW51bGwsYj1udWxsLGM9XCJcIjtBIT09ZyYmKGE9ei5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxiPVwicmVzcG9uc2VcImluIHo/ei5yZXNwb25zZTp6LnJlc3BvbnNlVGV4dCk7QT09PWcmJlxuMTA+UXx8KGM9ei5zdGF0dXNUZXh0KTt1KGwsQXx8ei5zdGF0dXMsYixhLGMpfX07cSYmKHoud2l0aENyZWRlbnRpYWxzPSEwKTtpZihzKXRyeXt6LnJlc3BvbnNlVHlwZT1zfWNhdGNoKGNhKXtpZihcImpzb25cIiE9PXMpdGhyb3cgY2E7fXouc2VuZChofHxudWxsKX1pZigwPHApdmFyIEw9YyhGLHApO2Vsc2UgcCYmUChwLnRoZW4pJiZwLnRoZW4oRil9fWZ1bmN0aW9uIFNkKCl7dmFyIGI9XCJ7e1wiLGE9XCJ9fVwiO3RoaXMuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGI9YSx0aGlzKTpifTt0aGlzLmVuZFN5bWJvbD1mdW5jdGlvbihiKXtyZXR1cm4gYj8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkc2NlXCIsZnVuY3Rpb24oYyxkLGUpe2Z1bmN0aW9uIGYoZixoLGwpe2Zvcih2YXIgbixwLHE9MCxzPVtdLEY9Zi5sZW5ndGgsdT0hMSxBPVtdO3E8RjspLTEhPShuPWYuaW5kZXhPZihiLHEpKSYmLTEhPShwPWYuaW5kZXhPZihhLFxubitnKSk/KHEhPW4mJnMucHVzaChmLnN1YnN0cmluZyhxLG4pKSxzLnB1c2gocT1jKHU9Zi5zdWJzdHJpbmcobitnLHApKSkscS5leHA9dSxxPXArayx1PSEwKToocSE9RiYmcy5wdXNoKGYuc3Vic3RyaW5nKHEpKSxxPUYpOyhGPXMubGVuZ3RoKXx8KHMucHVzaChcIlwiKSxGPTEpO2lmKGwmJjE8cy5sZW5ndGgpdGhyb3cgeWMoXCJub2NvbmNhdFwiLGYpO2lmKCFofHx1KXJldHVybiBBLmxlbmd0aD1GLHE9ZnVuY3Rpb24oYSl7dHJ5e2Zvcih2YXIgYj0wLGM9RixnO2I8YztiKyspe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGc9c1tiXSkpaWYoZz1nKGEpLGc9bD9lLmdldFRydXN0ZWQobCxnKTplLnZhbHVlT2YoZyksbnVsbD09ZylnPVwiXCI7ZWxzZSBzd2l0Y2godHlwZW9mIGcpe2Nhc2UgXCJzdHJpbmdcIjpicmVhaztjYXNlIFwibnVtYmVyXCI6Zz1cIlwiK2c7YnJlYWs7ZGVmYXVsdDpnPW5hKGcpfUFbYl09Z31yZXR1cm4gQS5qb2luKFwiXCIpfWNhdGNoKGspe2E9eWMoXCJpbnRlcnJcIixmLGsudG9TdHJpbmcoKSksXG5kKGEpfX0scS5leHA9ZixxLnBhcnRzPXMscX12YXIgZz1iLmxlbmd0aCxrPWEubGVuZ3RoO2Yuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYn07Zi5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYX07cmV0dXJuIGZ9XX1mdW5jdGlvbiBUZCgpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsXCIkcVwiLGZ1bmN0aW9uKGIsYSxjKXtmdW5jdGlvbiBkKGQsZyxrLG0pe3ZhciBoPWEuc2V0SW50ZXJ2YWwsbD1hLmNsZWFySW50ZXJ2YWwsbj1jLmRlZmVyKCkscD1uLnByb21pc2UscT0wLHM9eShtKSYmIW07az15KGspP2s6MDtwLnRoZW4obnVsbCxudWxsLGQpO3AuJCRpbnRlcnZhbElkPWgoZnVuY3Rpb24oKXtuLm5vdGlmeShxKyspOzA8ayYmcT49ayYmKG4ucmVzb2x2ZShxKSxsKHAuJCRpbnRlcnZhbElkKSxkZWxldGUgZVtwLiQkaW50ZXJ2YWxJZF0pO3N8fGIuJGFwcGx5KCl9LGcpO2VbcC4kJGludGVydmFsSWRdPW47cmV0dXJuIHB9dmFyIGU9e307ZC5jYW5jZWw9XG5mdW5jdGlvbihiKXtyZXR1cm4gYiYmYi4kJGludGVydmFsSWQgaW4gZT8oZVtiLiQkaW50ZXJ2YWxJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksYS5jbGVhckludGVydmFsKGIuJCRpbnRlcnZhbElkKSxkZWxldGUgZVtiLiQkaW50ZXJ2YWxJZF0sITApOiExfTtyZXR1cm4gZH1dfWZ1bmN0aW9uIGJkKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJue2lkOlwiZW4tdXNcIixOVU1CRVJfRk9STUFUUzp7REVDSU1BTF9TRVA6XCIuXCIsR1JPVVBfU0VQOlwiLFwiLFBBVFRFUk5TOlt7bWluSW50OjEsbWluRnJhYzowLG1heEZyYWM6Myxwb3NQcmU6XCJcIixwb3NTdWY6XCJcIixuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIsZ1NpemU6MyxsZ1NpemU6M30se21pbkludDoxLG1pbkZyYWM6MixtYXhGcmFjOjIscG9zUHJlOlwiXFx1MDBhNFwiLHBvc1N1ZjpcIlwiLG5lZ1ByZTpcIihcXHUwMGE0XCIsbmVnU3VmOlwiKVwiLGdTaXplOjMsbGdTaXplOjN9XSxDVVJSRU5DWV9TWU06XCIkXCJ9LERBVEVUSU1FX0ZPUk1BVFM6e01PTlRIOlwiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlclwiLnNwbGl0KFwiIFwiKSxcblNIT1JUTU9OVEg6XCJKYW4gRmViIE1hciBBcHIgTWF5IEp1biBKdWwgQXVnIFNlcCBPY3QgTm92IERlY1wiLnNwbGl0KFwiIFwiKSxEQVk6XCJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheVwiLnNwbGl0KFwiIFwiKSxTSE9SVERBWTpcIlN1biBNb24gVHVlIFdlZCBUaHUgRnJpIFNhdFwiLnNwbGl0KFwiIFwiKSxBTVBNUzpbXCJBTVwiLFwiUE1cIl0sbWVkaXVtOlwiTU1NIGQsIHkgaDptbTpzcyBhXCIsXCJzaG9ydFwiOlwiTS9kL3l5IGg6bW0gYVwiLGZ1bGxEYXRlOlwiRUVFRSwgTU1NTSBkLCB5XCIsbG9uZ0RhdGU6XCJNTU1NIGQsIHlcIixtZWRpdW1EYXRlOlwiTU1NIGQsIHlcIixzaG9ydERhdGU6XCJNL2QveXlcIixtZWRpdW1UaW1lOlwiaDptbTpzcyBhXCIsc2hvcnRUaW1lOlwiaDptbSBhXCJ9LHBsdXJhbENhdDpmdW5jdGlvbihiKXtyZXR1cm4gMT09PWI/XCJvbmVcIjpcIm90aGVyXCJ9fX19ZnVuY3Rpb24gUWIoYil7Yj1iLnNwbGl0KFwiL1wiKTtmb3IodmFyIGE9Yi5sZW5ndGg7YS0tOyliW2FdPVxubGIoYlthXSk7cmV0dXJuIGIuam9pbihcIi9cIil9ZnVuY3Rpb24gemMoYixhLGMpe2I9dWEoYixjKTthLiQkcHJvdG9jb2w9Yi5wcm90b2NvbDthLiQkaG9zdD1iLmhvc3RuYW1lO2EuJCRwb3J0PVUoYi5wb3J0KXx8emVbYi5wcm90b2NvbF18fG51bGx9ZnVuY3Rpb24gQWMoYixhLGMpe3ZhciBkPVwiL1wiIT09Yi5jaGFyQXQoMCk7ZCYmKGI9XCIvXCIrYik7Yj11YShiLGMpO2EuJCRwYXRoPWRlY29kZVVSSUNvbXBvbmVudChkJiZcIi9cIj09PWIucGF0aG5hbWUuY2hhckF0KDApP2IucGF0aG5hbWUuc3Vic3RyaW5nKDEpOmIucGF0aG5hbWUpO2EuJCRzZWFyY2g9ZWMoYi5zZWFyY2gpO2EuJCRoYXNoPWRlY29kZVVSSUNvbXBvbmVudChiLmhhc2gpO2EuJCRwYXRoJiZcIi9cIiE9YS4kJHBhdGguY2hhckF0KDApJiYoYS4kJHBhdGg9XCIvXCIrYS4kJHBhdGgpfWZ1bmN0aW9uIHJhKGIsYSl7aWYoMD09PWEuaW5kZXhPZihiKSlyZXR1cm4gYS5zdWJzdHIoYi5sZW5ndGgpfWZ1bmN0aW9uIGViKGIpe3ZhciBhPVxuYi5pbmRleE9mKFwiI1wiKTtyZXR1cm4tMT09YT9iOmIuc3Vic3RyKDAsYSl9ZnVuY3Rpb24gUmIoYil7cmV0dXJuIGIuc3Vic3RyKDAsZWIoYikubGFzdEluZGV4T2YoXCIvXCIpKzEpfWZ1bmN0aW9uIEJjKGIsYSl7dGhpcy4kJGh0bWw1PSEwO2E9YXx8XCJcIjt2YXIgYz1SYihiKTt6YyhiLHRoaXMsYik7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKGEpe3ZhciBlPXJhKGMsYSk7aWYoIXYoZSkpdGhyb3cgU2IoXCJpcHRocHJmeFwiLGEsYyk7QWMoZSx0aGlzLGIpO3RoaXMuJCRwYXRofHwodGhpcy4kJHBhdGg9XCIvXCIpO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9Q2IodGhpcy4kJHNlYXJjaCksYj10aGlzLiQkaGFzaD9cIiNcIitsYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPVFiKHRoaXMuJCRwYXRoKSsoYT9cIj9cIithOlwiXCIpK2I7dGhpcy4kJGFic1VybD1jK3RoaXMuJCR1cmwuc3Vic3RyKDEpfTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihkKXt2YXIgZTtcbmlmKChlPXJhKGIsZCkpIT09dClyZXR1cm4gZD1lLChlPXJhKGEsZSkpIT09dD9jKyhyYShcIi9cIixlKXx8ZSk6YitkO2lmKChlPXJhKGMsZCkpIT09dClyZXR1cm4gYytlO2lmKGM9PWQrXCIvXCIpcmV0dXJuIGN9fWZ1bmN0aW9uIFRiKGIsYSl7dmFyIGM9UmIoYik7emMoYix0aGlzLGIpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihkKXt2YXIgZT1yYShiLGQpfHxyYShjLGQpLGU9XCIjXCI9PWUuY2hhckF0KDApP3JhKGEsZSk6dGhpcy4kJGh0bWw1P2U6XCJcIjtpZighdihlKSl0aHJvdyBTYihcImloc2hwcmZ4XCIsZCxhKTtBYyhlLHRoaXMsYik7ZD10aGlzLiQkcGF0aDt2YXIgZj0vXlxcL1tBLVpdOihcXC8uKikvOzA9PT1lLmluZGV4T2YoYikmJihlPWUucmVwbGFjZShiLFwiXCIpKTtmLmV4ZWMoZSl8fChkPShlPWYuZXhlYyhkKSk/ZVsxXTpkKTt0aGlzLiQkcGF0aD1kO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGM9Q2IodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cblwiI1wiK2xiKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9UWIodGhpcy4kJHBhdGgpKyhjP1wiP1wiK2M6XCJcIikrZTt0aGlzLiQkYWJzVXJsPWIrKHRoaXMuJCR1cmw/YSt0aGlzLiQkdXJsOlwiXCIpfTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihhKXtpZihlYihiKT09ZWIoYSkpcmV0dXJuIGF9fWZ1bmN0aW9uIFViKGIsYSl7dGhpcy4kJGh0bWw1PSEwO1RiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYz1SYihiKTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihkKXt2YXIgZTtpZihiPT1lYihkKSlyZXR1cm4gZDtpZihlPXJhKGMsZCkpcmV0dXJuIGIrYStlO2lmKGM9PT1kK1wiL1wiKXJldHVybiBjfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBjPUNiKHRoaXMuJCRzZWFyY2gpLGU9dGhpcy4kJGhhc2g/XCIjXCIrbGIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1RYih0aGlzLiQkcGF0aCkrKGM/XCI/XCIrYzpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YithK3RoaXMuJCR1cmx9fWZ1bmN0aW9uIHRiKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2JdfX1cbmZ1bmN0aW9uIENjKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKHgoYykpcmV0dXJuIHRoaXNbYl07dGhpc1tiXT1hKGMpO3RoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9fWZ1bmN0aW9uIFdkKCl7dmFyIGI9XCJcIixhPSExO3RoaXMuaGFzaFByZWZpeD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFwiJHJvb3RFbGVtZW50XCIsZnVuY3Rpb24oYyxkLGUsZil7ZnVuY3Rpb24gZyhhKXtjLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsay5hYnNVcmwoKSxhKX12YXIgayxtLGg9ZC5iYXNlSHJlZigpLGw9ZC51cmwoKSxuO2E/KG49bC5zdWJzdHJpbmcoMCxsLmluZGV4T2YoXCIvXCIsbC5pbmRleE9mKFwiLy9cIikrMikpKyhofHxcIi9cIiksbT1lLmhpc3Rvcnk/QmM6VWIpOihuPVxuZWIobCksbT1UYik7az1uZXcgbShuLFwiI1wiK2IpO2suJCRwYXJzZShrLiQkcmV3cml0ZShsKSk7dmFyIHA9L15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtmLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtpZighYS5jdHJsS2V5JiYhYS5tZXRhS2V5JiYyIT1hLndoaWNoKXtmb3IodmFyIGU9dyhhLnRhcmdldCk7XCJhXCIhPT1LKGVbMF0ubm9kZU5hbWUpOylpZihlWzBdPT09ZlswXXx8IShlPWUucGFyZW50KCkpWzBdKXJldHVybjt2YXIgZz1lLnByb3AoXCJocmVmXCIpO1QoZykmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWcudG9TdHJpbmcoKSYmKGc9dWEoZy5hbmltVmFsKS5ocmVmKTtpZighcC50ZXN0KGcpKXtpZihtPT09VWIpe3ZhciBoPWUuYXR0cihcImhyZWZcIil8fGUuYXR0cihcInhsaW5rOmhyZWZcIik7aWYoaCYmMD5oLmluZGV4T2YoXCI6Ly9cIikpaWYoZz1cIiNcIitiLFwiL1wiPT1oWzBdKWc9bitnK2g7ZWxzZSBpZihcIiNcIj09aFswXSlnPW4rZysoay5wYXRoKCl8fFwiL1wiKStoO1xuZWxzZXt2YXIgbD1rLnBhdGgoKS5zcGxpdChcIi9cIiksaD1oLnNwbGl0KFwiL1wiKTsyIT09bC5sZW5ndGh8fGxbMV18fChsLmxlbmd0aD0xKTtmb3IodmFyIHE9MDtxPGgubGVuZ3RoO3ErKylcIi5cIiE9aFtxXSYmKFwiLi5cIj09aFtxXT9sLnBvcCgpOmhbcV0ubGVuZ3RoJiZsLnB1c2goaFtxXSkpO2c9bitnK2wuam9pbihcIi9cIil9fWw9ay4kJHJld3JpdGUoZyk7ZyYmKCFlLmF0dHIoXCJ0YXJnZXRcIikmJmwmJiFhLmlzRGVmYXVsdFByZXZlbnRlZCgpKSYmKGEucHJldmVudERlZmF1bHQoKSxsIT1kLnVybCgpJiYoay4kJHBhcnNlKGwpLGMuJGFwcGx5KCksVy5hbmd1bGFyW1wiZmYtNjg0MjA4LXByZXZlbnREZWZhdWx0XCJdPSEwKSl9fX0pO2suYWJzVXJsKCkhPWwmJmQudXJsKGsuYWJzVXJsKCksITApO2Qub25VcmxDaGFuZ2UoZnVuY3Rpb24oYSl7ay5hYnNVcmwoKSE9YSYmKGMuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBiPWsuYWJzVXJsKCk7ay4kJHBhcnNlKGEpO2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsXG5hLGIpLmRlZmF1bHRQcmV2ZW50ZWQ/KGsuJCRwYXJzZShiKSxkLnVybChiKSk6ZyhiKX0pLGMuJCRwaGFzZXx8Yy4kZGlnZXN0KCkpfSk7dmFyIHE9MDtjLiR3YXRjaChmdW5jdGlvbigpe3ZhciBhPWQudXJsKCksYj1rLiQkcmVwbGFjZTtxJiZhPT1rLmFic1VybCgpfHwocSsrLGMuJGV2YWxBc3luYyhmdW5jdGlvbigpe2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsay5hYnNVcmwoKSxhKS5kZWZhdWx0UHJldmVudGVkP2suJCRwYXJzZShhKTooZC51cmwoay5hYnNVcmwoKSxiKSxnKGEpKX0pKTtrLiQkcmVwbGFjZT0hMTtyZXR1cm4gcX0pO3JldHVybiBrfV19ZnVuY3Rpb24gWGQoKXt2YXIgYj0hMCxhPXRoaXM7dGhpcy5kZWJ1Z0VuYWJsZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSk/KGI9YSx0aGlzKTpifTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7YSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz9hPWEubWVzc2FnZSYmXG4tMT09PWEuc3RhY2suaW5kZXhPZihhLm1lc3NhZ2UpP1wiRXJyb3I6IFwiK2EubWVzc2FnZStcIlxcblwiK2Euc3RhY2s6YS5zdGFjazphLnNvdXJjZVVSTCYmKGE9YS5tZXNzYWdlK1wiXFxuXCIrYS5zb3VyY2VVUkwrXCI6XCIrYS5saW5lKSk7cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXt2YXIgYj1jLmNvbnNvbGV8fHt9LGU9YlthXXx8Yi5sb2d8fEU7YT0hMTt0cnl7YT0hIWUuYXBwbHl9Y2F0Y2gobSl7fXJldHVybiBhP2Z1bmN0aW9uKCl7dmFyIGE9W107cihhcmd1bWVudHMsZnVuY3Rpb24oYil7YS5wdXNoKGQoYikpfSk7cmV0dXJuIGUuYXBwbHkoYixhKX06ZnVuY3Rpb24oYSxiKXtlKGEsbnVsbD09Yj9cIlwiOmIpfX1yZXR1cm57bG9nOmUoXCJsb2dcIiksaW5mbzplKFwiaW5mb1wiKSx3YXJuOmUoXCJ3YXJuXCIpLGVycm9yOmUoXCJlcnJvclwiKSxkZWJ1ZzpmdW5jdGlvbigpe3ZhciBjPWUoXCJkZWJ1Z1wiKTtyZXR1cm4gZnVuY3Rpb24oKXtiJiZjLmFwcGx5KGEsYXJndW1lbnRzKX19KCl9fV19ZnVuY3Rpb24ga2EoYixcbmEpe2lmKFwiX19kZWZpbmVHZXR0ZXJfX1wiPT09Ynx8XCJfX2RlZmluZVNldHRlcl9fXCI9PT1ifHxcIl9fbG9va3VwR2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBTZXR0ZXJfX1wiPT09Ynx8XCJfX3Byb3RvX19cIj09PWIpdGhyb3cgbGEoXCJpc2VjZmxkXCIsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gdmEoYixhKXtpZihiKXtpZihiLmNvbnN0cnVjdG9yPT09Yil0aHJvdyBsYShcImlzZWNmblwiLGEpO2lmKGIuZG9jdW1lbnQmJmIubG9jYXRpb24mJmIuYWxlcnQmJmIuc2V0SW50ZXJ2YWwpdGhyb3cgbGEoXCJpc2Vjd2luZG93XCIsYSk7aWYoYi5jaGlsZHJlbiYmKGIubm9kZU5hbWV8fGIucHJvcCYmYi5hdHRyJiZiLmZpbmQpKXRocm93IGxhKFwiaXNlY2RvbVwiLGEpO2lmKGI9PT1PYmplY3QpdGhyb3cgbGEoXCJpc2Vjb2JqXCIsYSk7fXJldHVybiBifWZ1bmN0aW9uIHViKGIsYSxjLGQsZSl7dmEoYixkKTtlPWV8fHt9O2E9YS5zcGxpdChcIi5cIik7Zm9yKHZhciBmLGc9MDsxPGEubGVuZ3RoO2crKyl7Zj1rYShhLnNoaWZ0KCksXG5kKTt2YXIgaz12YShiW2ZdLGQpO2t8fChrPXt9LGJbZl09ayk7Yj1rO2IudGhlbiYmZS51bndyYXBQcm9taXNlcyYmKHdhKGQpLFwiJCR2XCJpbiBifHxmdW5jdGlvbihhKXthLnRoZW4oZnVuY3Rpb24oYil7YS4kJHY9Yn0pfShiKSxiLiQkdj09PXQmJihiLiQkdj17fSksYj1iLiQkdil9Zj1rYShhLnNoaWZ0KCksZCk7dmEoYltmXSxkKTtyZXR1cm4gYltmXT1jfWZ1bmN0aW9uIERjKGIsYSxjLGQsZSxmLGcpe2thKGIsZik7a2EoYSxmKTtrYShjLGYpO2thKGQsZik7a2EoZSxmKTtyZXR1cm4gZy51bndyYXBQcm9taXNlcz9mdW5jdGlvbihnLG0pe3ZhciBoPW0mJm0uaGFzT3duUHJvcGVydHkoYik/bTpnLGw7aWYobnVsbD09aClyZXR1cm4gaDsoaD1oW2JdKSYmaC50aGVuJiYod2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtpZighYSlyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0OyhoPWhbYV0pJiZoLnRoZW4mJlxuKHdhKGYpLFwiJCR2XCJpbiBofHwobD1oLGwuJCR2PXQsbC50aGVuKGZ1bmN0aW9uKGEpe2wuJCR2PWF9KSksaD1oLiQkdik7aWYoIWMpcmV0dXJuIGg7aWYobnVsbD09aClyZXR1cm4gdDsoaD1oW2NdKSYmaC50aGVuJiYod2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtpZighZClyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0OyhoPWhbZF0pJiZoLnRoZW4mJih3YShmKSxcIiQkdlwiaW4gaHx8KGw9aCxsLiQkdj10LGwudGhlbihmdW5jdGlvbihhKXtsLiQkdj1hfSkpLGg9aC4kJHYpO2lmKCFlKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7KGg9aFtlXSkmJmgudGhlbiYmKHdhKGYpLFwiJCR2XCJpbiBofHwobD1oLGwuJCR2PXQsbC50aGVuKGZ1bmN0aW9uKGEpe2wuJCR2PWF9KSksaD1oLiQkdik7cmV0dXJuIGh9OmZ1bmN0aW9uKGYsZyl7dmFyIGg9ZyYmZy5oYXNPd25Qcm9wZXJ0eShiKT9nOmY7aWYobnVsbD09XG5oKXJldHVybiBoO2g9aFtiXTtpZighYSlyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0O2g9aFthXTtpZighYylyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0O2g9aFtjXTtpZighZClyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0O2g9aFtkXTtyZXR1cm4gZT9udWxsPT1oP3Q6aD1oW2VdOmh9fWZ1bmN0aW9uIEVjKGIsYSxjKXtpZihWYi5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4gVmJbYl07dmFyIGQ9Yi5zcGxpdChcIi5cIiksZT1kLmxlbmd0aCxmO2lmKGEuY3NwKWY9Nj5lP0RjKGRbMF0sZFsxXSxkWzJdLGRbM10sZFs0XSxjLGEpOmZ1bmN0aW9uKGIsZil7dmFyIGc9MCxrO2RvIGs9RGMoZFtnKytdLGRbZysrXSxkW2crK10sZFtnKytdLGRbZysrXSxjLGEpKGIsZiksZj10LGI9azt3aGlsZShnPGUpO3JldHVybiBrfTtlbHNle3ZhciBnPVwidmFyIHA7XFxuXCI7cihkLGZ1bmN0aW9uKGIsZCl7a2EoYixjKTtnKz1cImlmKHMgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcXG5zPVwiK1xuKGQ/XCJzXCI6JygoayYmay5oYXNPd25Qcm9wZXJ0eShcIicrYisnXCIpKT9rOnMpJykrJ1tcIicrYisnXCJdO1xcbicrKGEudW53cmFwUHJvbWlzZXM/J2lmIChzICYmIHMudGhlbikge1xcbiBwdyhcIicrYy5yZXBsYWNlKC8oW1wiXFxyXFxuXSkvZyxcIlxcXFwkMVwiKSsnXCIpO1xcbiBpZiAoIShcIiQkdlwiIGluIHMpKSB7XFxuIHA9cztcXG4gcC4kJHYgPSB1bmRlZmluZWQ7XFxuIHAudGhlbihmdW5jdGlvbih2KSB7cC4kJHY9djt9KTtcXG59XFxuIHM9cy4kJHZcXG59XFxuJzpcIlwiKX0pO3ZhciBnPWcrXCJyZXR1cm4gcztcIixrPW5ldyBGdW5jdGlvbihcInNcIixcImtcIixcInB3XCIsZyk7ay50b1N0cmluZz1iYShnKTtmPWEudW53cmFwUHJvbWlzZXM/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gayhhLGIsd2EpfTprfVwiaGFzT3duUHJvcGVydHlcIiE9PWImJihWYltiXT1mKTtyZXR1cm4gZn1mdW5jdGlvbiBZZCgpe3ZhciBiPXt9LGE9e2NzcDohMSx1bndyYXBQcm9taXNlczohMSxsb2dQcm9taXNlV2FybmluZ3M6ITB9O3RoaXMudW53cmFwUHJvbWlzZXM9XG5mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS51bndyYXBQcm9taXNlcz0hIWIsdGhpcyk6YS51bndyYXBQcm9taXNlc307dGhpcy5sb2dQcm9taXNlV2FybmluZ3M9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGEubG9nUHJvbWlzZVdhcm5pbmdzPWIsdGhpcyk6YS5sb2dQcm9taXNlV2FybmluZ3N9O3RoaXMuJGdldD1bXCIkZmlsdGVyXCIsXCIkc25pZmZlclwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGMsZCxlKXthLmNzcD1kLmNzcDt3YT1mdW5jdGlvbihiKXthLmxvZ1Byb21pc2VXYXJuaW5ncyYmIUZjLmhhc093blByb3BlcnR5KGIpJiYoRmNbYl09ITAsZS53YXJuKFwiWyRwYXJzZV0gUHJvbWlzZSBmb3VuZCBpbiB0aGUgZXhwcmVzc2lvbiBgXCIrYitcImAuIEF1dG9tYXRpYyB1bndyYXBwaW5nIG9mIHByb21pc2VzIGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGVwcmVjYXRlZC5cIikpfTtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU7c3dpdGNoKHR5cGVvZiBkKXtjYXNlIFwic3RyaW5nXCI6aWYoYi5oYXNPd25Qcm9wZXJ0eShkKSlyZXR1cm4gYltkXTtcbmU9bmV3IFdiKGEpO2U9KG5ldyBmYihlLGMsYSkpLnBhcnNlKGQpO1wiaGFzT3duUHJvcGVydHlcIiE9PWQmJihiW2RdPWUpO3JldHVybiBlO2Nhc2UgXCJmdW5jdGlvblwiOnJldHVybiBkO2RlZmF1bHQ6cmV0dXJuIEV9fX1dfWZ1bmN0aW9uICRkKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gQWUoZnVuY3Rpb24oYSl7Yi4kZXZhbEFzeW5jKGEpfSxhKX1dfWZ1bmN0aW9uIEFlKGIsYSl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYX1mdW5jdGlvbiBkKGEpe3JldHVybiBnKGEpfXZhciBlPWZ1bmN0aW9uKCl7dmFyIGc9W10saCxsO3JldHVybiBsPXtyZXNvbHZlOmZ1bmN0aW9uKGEpe2lmKGcpe3ZhciBjPWc7Zz10O2g9ZihhKTtjLmxlbmd0aCYmYihmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTAsZD1jLmxlbmd0aDtiPGQ7YisrKWE9Y1tiXSxoLnRoZW4oYVswXSxhWzFdLGFbMl0pfSl9fSxyZWplY3Q6ZnVuY3Rpb24oYSl7bC5yZXNvbHZlKGsoYSkpfSxcbm5vdGlmeTpmdW5jdGlvbihhKXtpZihnKXt2YXIgYz1nO2cubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7Zm9yKHZhciBiLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspYj1jW2RdLGJbMl0oYSl9KX19LHByb21pc2U6e3RoZW46ZnVuY3Rpb24oYixmLGspe3ZhciBsPWUoKSxGPWZ1bmN0aW9uKGQpe3RyeXtsLnJlc29sdmUoKFAoYik/YjpjKShkKSl9Y2F0Y2goZSl7bC5yZWplY3QoZSksYShlKX19LHU9ZnVuY3Rpb24oYil7dHJ5e2wucmVzb2x2ZSgoUChmKT9mOmQpKGIpKX1jYXRjaChjKXtsLnJlamVjdChjKSxhKGMpfX0sQT1mdW5jdGlvbihiKXt0cnl7bC5ub3RpZnkoKFAoayk/azpjKShiKSl9Y2F0Y2goZCl7YShkKX19O2c/Zy5wdXNoKFtGLHUsQV0pOmgudGhlbihGLHUsQSk7cmV0dXJuIGwucHJvbWlzZX0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sXCJmaW5hbGx5XCI6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMpe3ZhciBkPWUoKTtjP2QucmVzb2x2ZShhKTpcbmQucmVqZWN0KGEpO3JldHVybiBkLnByb21pc2V9ZnVuY3Rpb24gZChlLGYpe3ZhciBnPW51bGw7dHJ5e2c9KGF8fGMpKCl9Y2F0Y2goayl7cmV0dXJuIGIoaywhMSl9cmV0dXJuIGcmJlAoZy50aGVuKT9nLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYihlLGYpfSxmdW5jdGlvbihhKXtyZXR1cm4gYihhLCExKX0pOmIoZSxmKX1yZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEsITApfSxmdW5jdGlvbihhKXtyZXR1cm4gZChhLCExKX0pfX19fSxmPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZQKGEudGhlbik/YTp7dGhlbjpmdW5jdGlvbihjKXt2YXIgZD1lKCk7YihmdW5jdGlvbigpe2QucmVzb2x2ZShjKGEpKX0pO3JldHVybiBkLnByb21pc2V9fX0sZz1mdW5jdGlvbihhKXt2YXIgYj1lKCk7Yi5yZWplY3QoYSk7cmV0dXJuIGIucHJvbWlzZX0saz1mdW5jdGlvbihjKXtyZXR1cm57dGhlbjpmdW5jdGlvbihmLGcpe3ZhciBrPWUoKTtiKGZ1bmN0aW9uKCl7dHJ5e2sucmVzb2x2ZSgoUChnKT9cbmc6ZCkoYykpfWNhdGNoKGIpe2sucmVqZWN0KGIpLGEoYil9fSk7cmV0dXJuIGsucHJvbWlzZX19fTtyZXR1cm57ZGVmZXI6ZSxyZWplY3Q6Zyx3aGVuOmZ1bmN0aW9uKGssaCxsLG4pe3ZhciBwPWUoKSxxLHM9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihQKGgpP2g6YykoYil9Y2F0Y2goZCl7cmV0dXJuIGEoZCksZyhkKX19LEY9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihQKGwpP2w6ZCkoYil9Y2F0Y2goYyl7cmV0dXJuIGEoYyksZyhjKX19LHU9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihQKG4pP246YykoYil9Y2F0Y2goZCl7YShkKX19O2IoZnVuY3Rpb24oKXtmKGspLnRoZW4oZnVuY3Rpb24oYSl7cXx8KHE9ITAscC5yZXNvbHZlKGYoYSkudGhlbihzLEYsdSkpKX0sZnVuY3Rpb24oYSl7cXx8KHE9ITAscC5yZXNvbHZlKEYoYSkpKX0sZnVuY3Rpb24oYSl7cXx8cC5ub3RpZnkodShhKSl9KX0pO3JldHVybiBwLnByb21pc2V9LGFsbDpmdW5jdGlvbihhKXt2YXIgYj1lKCksYz0wLGQ9SihhKT9cbltdOnt9O3IoYSxmdW5jdGlvbihhLGUpe2MrKztmKGEpLnRoZW4oZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8KGRbZV09YSwtLWN8fGIucmVzb2x2ZShkKSl9LGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fGIucmVqZWN0KGEpfSl9KTswPT09YyYmYi5yZXNvbHZlKGQpO3JldHVybiBiLnByb21pc2V9fX1mdW5jdGlvbiBnZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9Yi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxiLm1velJlcXVlc3RBbmltYXRpb25GcmFtZSxkPWIuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lLGU9ISFjLGY9ZT9mdW5jdGlvbihhKXt2YXIgYj1jKGEpO3JldHVybiBmdW5jdGlvbigpe2QoYil9fTpcbmZ1bmN0aW9uKGIpe3ZhciBjPWEoYiwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7YS5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gWmQoKXt2YXIgYj0xMCxhPUMoXCIkcm9vdFNjb3BlXCIpLGM9bnVsbDt0aGlzLmRpZ2VzdFR0bD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1hKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRwYXJzZVwiLFwiJGJyb3dzZXJcIixmdW5jdGlvbihkLGUsZixnKXtmdW5jdGlvbiBrKCl7dGhpcy4kaWQ9aGIoKTt0aGlzLiQkcGhhc2U9dGhpcy4kcGFyZW50PXRoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXNbXCJ0aGlzXCJdPXRoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPSExO3RoaXMuJCRhc3luY1F1ZXVlPVtdO3RoaXMuJCRwb3N0RGlnZXN0UXVldWU9XG5bXTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRsaXN0ZW5lckNvdW50PXt9O3RoaXMuJCRpc29sYXRlQmluZGluZ3M9e319ZnVuY3Rpb24gbShiKXtpZihwLiQkcGhhc2UpdGhyb3cgYShcImlucHJvZ1wiLHAuJCRwaGFzZSk7cC4kJHBoYXNlPWJ9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWYoYSk7V2EoYyxiKTtyZXR1cm4gY31mdW5jdGlvbiBsKGEsYixjKXtkbyBhLiQkbGlzdGVuZXJDb3VudFtjXS09YiwwPT09YS4kJGxpc3RlbmVyQ291bnRbY10mJmRlbGV0ZSBhLiQkbGlzdGVuZXJDb3VudFtjXTt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gbigpe31rLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aywkbmV3OmZ1bmN0aW9uKGEpe2E/KGE9bmV3IGssYS4kcm9vdD10aGlzLiRyb290LGEuJCRhc3luY1F1ZXVlPXRoaXMuJCRhc3luY1F1ZXVlLGEuJCRwb3N0RGlnZXN0UXVldWU9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSk6KHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3N8fCh0aGlzLiQkY2hpbGRTY29wZUNsYXNzPVxuZnVuY3Rpb24oKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kaWQ9aGIoKTt0aGlzLiQkY2hpbGRTY29wZUNsYXNzPW51bGx9LHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3MucHJvdG90eXBlPXRoaXMpLGE9bmV3IHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3MpO2FbXCJ0aGlzXCJdPWE7YS4kcGFyZW50PXRoaXM7YS4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZFRhaWw7dGhpcy4kJGNoaWxkSGVhZD90aGlzLiQkY2hpbGRUYWlsPXRoaXMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1hOnRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1hO3JldHVybiBhfSwkd2F0Y2g6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWgoYSxcIndhdGNoXCIpLGY9dGhpcy4kJHdhdGNoZXJzLGc9e2ZuOmIsbGFzdDpuLGdldDplLGV4cDphLFxuZXE6ISFkfTtjPW51bGw7aWYoIVAoYikpe3ZhciBrPWgoYnx8RSxcImxpc3RlbmVyXCIpO2cuZm49ZnVuY3Rpb24oYSxiLGMpe2soYyl9fWlmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZlLmNvbnN0YW50KXt2YXIgbD1nLmZuO2cuZm49ZnVuY3Rpb24oYSxiLGMpe2wuY2FsbCh0aGlzLGEsYixjKTtTYShmLGcpfX1mfHwoZj10aGlzLiQkd2F0Y2hlcnM9W10pO2YudW5zaGlmdChnKTtyZXR1cm4gZnVuY3Rpb24oKXtTYShmLGcpO2M9bnVsbH19LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQsZSxnLGs9MTxiLmxlbmd0aCxoPTAsbD1mKGEpLG09W10scD17fSxuPSEwLHI9MDtyZXR1cm4gdGhpcy4kd2F0Y2goZnVuY3Rpb24oKXtkPWwoYyk7dmFyIGEsYixmO2lmKFQoZCkpaWYoUGEoZCkpZm9yKGUhPT1tJiYoZT1tLHI9ZS5sZW5ndGg9MCxoKyspLGE9ZC5sZW5ndGgsciE9PWEmJihoKyssZS5sZW5ndGg9cj1hKSxiPTA7YjxhO2IrKylmPWVbYl0hPT1lW2JdJiZkW2JdIT09XG5kW2JdLGZ8fGVbYl09PT1kW2JdfHwoaCsrLGVbYl09ZFtiXSk7ZWxzZXtlIT09cCYmKGU9cD17fSxyPTAsaCsrKTthPTA7Zm9yKGIgaW4gZClkLmhhc093blByb3BlcnR5KGIpJiYoYSsrLGUuaGFzT3duUHJvcGVydHkoYik/KGY9ZVtiXSE9PWVbYl0mJmRbYl0hPT1kW2JdLGZ8fGVbYl09PT1kW2JdfHwoaCsrLGVbYl09ZFtiXSkpOihyKyssZVtiXT1kW2JdLGgrKykpO2lmKHI+YSlmb3IoYiBpbiBoKyssZSllLmhhc093blByb3BlcnR5KGIpJiYhZC5oYXNPd25Qcm9wZXJ0eShiKSYmKHItLSxkZWxldGUgZVtiXSl9ZWxzZSBlIT09ZCYmKGU9ZCxoKyspO3JldHVybiBofSxmdW5jdGlvbigpe24/KG49ITEsYihkLGQsYykpOmIoZCxnLGMpO2lmKGspaWYoVChkKSlpZihQYShkKSl7Zz1BcnJheShkLmxlbmd0aCk7Zm9yKHZhciBhPTA7YTxkLmxlbmd0aDthKyspZ1thXT1kW2FdfWVsc2UgZm9yKGEgaW4gZz17fSxkKWtiLmNhbGwoZCxhKSYmKGdbYV09ZFthXSk7ZWxzZSBnPWR9KX0sJGRpZ2VzdDpmdW5jdGlvbigpe3ZhciBkLFxuZixrLGgsbD10aGlzLiQkYXN5bmNRdWV1ZSxyPXRoaXMuJCRwb3N0RGlnZXN0UXVldWUsUix6LHQ9YixMLE89W10sdyxCLEk7bShcIiRkaWdlc3RcIik7Zy4kJGNoZWNrVXJsQ2hhbmdlKCk7Yz1udWxsO2Rve3o9ITE7Zm9yKEw9dGhpcztsLmxlbmd0aDspe3RyeXtJPWwuc2hpZnQoKSxJLnNjb3BlLiRldmFsKEkuZXhwcmVzc2lvbil9Y2F0Y2goSCl7cC4kJHBoYXNlPW51bGwsZShIKX1jPW51bGx9YTpkb3tpZihoPUwuJCR3YXRjaGVycylmb3IoUj1oLmxlbmd0aDtSLS07KXRyeXtpZihkPWhbUl0paWYoKGY9ZC5nZXQoTCkpIT09KGs9ZC5sYXN0KSYmIShkLmVxP0FhKGYsayk6XCJudW1iZXJcIj09PXR5cGVvZiBmJiZcIm51bWJlclwiPT09dHlwZW9mIGsmJmlzTmFOKGYpJiZpc05hTihrKSkpej0hMCxjPWQsZC5sYXN0PWQuZXE/SGEoZixudWxsKTpmLGQuZm4oZixrPT09bj9mOmssTCksNT50JiYodz00LXQsT1t3XXx8KE9bd109W10pLEI9UChkLmV4cCk/XCJmbjogXCIrKGQuZXhwLm5hbWV8fGQuZXhwLnRvU3RyaW5nKCkpOlxuZC5leHAsQis9XCI7IG5ld1ZhbDogXCIrbmEoZikrXCI7IG9sZFZhbDogXCIrbmEoayksT1t3XS5wdXNoKEIpKTtlbHNlIGlmKGQ9PT1jKXt6PSExO2JyZWFrIGF9fWNhdGNoKHkpe3AuJCRwaGFzZT1udWxsLGUoeSl9aWYoIShoPUwuJCRjaGlsZEhlYWR8fEwhPT10aGlzJiZMLiQkbmV4dFNpYmxpbmcpKWZvcig7TCE9PXRoaXMmJiEoaD1MLiQkbmV4dFNpYmxpbmcpOylMPUwuJHBhcmVudH13aGlsZShMPWgpO2lmKCh6fHxsLmxlbmd0aCkmJiF0LS0pdGhyb3cgcC4kJHBoYXNlPW51bGwsYShcImluZmRpZ1wiLGIsbmEoTykpO313aGlsZSh6fHxsLmxlbmd0aCk7Zm9yKHAuJCRwaGFzZT1udWxsO3IubGVuZ3RoOyl0cnl7ci5zaGlmdCgpKCl9Y2F0Y2godil7ZSh2KX19LCRkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMuJCRkZXN0cm95ZWQpe3ZhciBhPXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoXCIkZGVzdHJveVwiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXMhPT1wJiYocih0aGlzLiQkbGlzdGVuZXJDb3VudCxcbkJiKG51bGwsbCx0aGlzKSksYS4kJGNoaWxkSGVhZD09dGhpcyYmKGEuJCRjaGlsZEhlYWQ9dGhpcy4kJG5leHRTaWJsaW5nKSxhLiQkY2hpbGRUYWlsPT10aGlzJiYoYS4kJGNoaWxkVGFpbD10aGlzLiQkcHJldlNpYmxpbmcpLHRoaXMuJCRwcmV2U2libGluZyYmKHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nPXRoaXMuJCRuZXh0U2libGluZyksdGhpcy4kJG5leHRTaWJsaW5nJiYodGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nKSx0aGlzLiRwYXJlbnQ9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRwcmV2U2libGluZz10aGlzLiQkY2hpbGRIZWFkPXRoaXMuJCRjaGlsZFRhaWw9dGhpcy4kcm9vdD1udWxsLHRoaXMuJCRsaXN0ZW5lcnM9e30sdGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRhc3luY1F1ZXVlPXRoaXMuJCRwb3N0RGlnZXN0UXVldWU9W10sdGhpcy4kZGVzdHJveT10aGlzLiRkaWdlc3Q9dGhpcy4kYXBwbHk9RSx0aGlzLiRvbj1cbnRoaXMuJHdhdGNoPWZ1bmN0aW9uKCl7cmV0dXJuIEV9KX19LCRldmFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSkodGhpcyxiKX0sJGV2YWxBc3luYzpmdW5jdGlvbihhKXtwLiQkcGhhc2V8fHAuJCRhc3luY1F1ZXVlLmxlbmd0aHx8Zy5kZWZlcihmdW5jdGlvbigpe3AuJCRhc3luY1F1ZXVlLmxlbmd0aCYmcC4kZGlnZXN0KCl9KTt0aGlzLiQkYXN5bmNRdWV1ZS5wdXNoKHtzY29wZTp0aGlzLGV4cHJlc3Npb246YX0pfSwkJHBvc3REaWdlc3Q6ZnVuY3Rpb24oYSl7dGhpcy4kJHBvc3REaWdlc3RRdWV1ZS5wdXNoKGEpfSwkYXBwbHk6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBtKFwiJGFwcGx5XCIpLHRoaXMuJGV2YWwoYSl9Y2F0Y2goYil7ZShiKX1maW5hbGx5e3AuJCRwaGFzZT1udWxsO3RyeXtwLiRkaWdlc3QoKX1jYXRjaChjKXt0aHJvdyBlKGMpLGM7fX19LCRvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJCRsaXN0ZW5lcnNbYV07Y3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09XG5jPVtdKTtjLnB1c2goYik7dmFyIGQ9dGhpcztkbyBkLiQkbGlzdGVuZXJDb3VudFthXXx8KGQuJCRsaXN0ZW5lckNvdW50W2FdPTApLGQuJCRsaXN0ZW5lckNvdW50W2FdKys7d2hpbGUoZD1kLiRwYXJlbnQpO3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7Y1tSYShjLGIpXT1udWxsO2woZSwxLGEpfX0sJGVtaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkLGY9dGhpcyxnPSExLGs9e25hbWU6YSx0YXJnZXRTY29wZTpmLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2c9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7ay5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfSxoPVtrXS5jb25jYXQoQmEuY2FsbChhcmd1bWVudHMsMSkpLGwsbTtkb3tkPWYuJCRsaXN0ZW5lcnNbYV18fGM7ay5jdXJyZW50U2NvcGU9ZjtsPTA7Zm9yKG09ZC5sZW5ndGg7bDxtO2wrKylpZihkW2xdKXRyeXtkW2xdLmFwcGx5KG51bGwsaCl9Y2F0Y2gocCl7ZShwKX1lbHNlIGQuc3BsaWNlKGwsXG4xKSxsLS0sbS0tO2lmKGcpYnJlYWs7Zj1mLiRwYXJlbnR9d2hpbGUoZik7cmV0dXJuIGt9LCRicm9hZGNhc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcyxkPXRoaXMsZj17bmFtZTphLHRhcmdldFNjb3BlOnRoaXMscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtmLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LGc9W2ZdLmNvbmNhdChCYS5jYWxsKGFyZ3VtZW50cywxKSksayxoO2M9ZDspe2YuY3VycmVudFNjb3BlPWM7ZD1jLiQkbGlzdGVuZXJzW2FdfHxbXTtrPTA7Zm9yKGg9ZC5sZW5ndGg7azxoO2srKylpZihkW2tdKXRyeXtkW2tdLmFwcGx5KG51bGwsZyl9Y2F0Y2gobCl7ZShsKX1lbHNlIGQuc3BsaWNlKGssMSksay0tLGgtLTtpZighKGQ9Yy4kJGxpc3RlbmVyQ291bnRbYV0mJmMuJCRjaGlsZEhlYWR8fGMhPT10aGlzJiZjLiQkbmV4dFNpYmxpbmcpKWZvcig7YyE9PXRoaXMmJiEoZD1jLiQkbmV4dFNpYmxpbmcpOyljPWMuJHBhcmVudH1yZXR1cm4gZn19O1xudmFyIHA9bmV3IGs7cmV0dXJuIHB9XX1mdW5jdGlvbiBjZCgpe3ZhciBiPS9eXFxzKihodHRwcz98ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxhPS9eXFxzKigoaHR0cHM/fGZ0cHxmaWxlKTp8ZGF0YTppbWFnZVxcLykvO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSk/KGI9YSx0aGlzKTpifTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWQ/YTpiLGY7aWYoIVF8fDg8PVEpaWYoZj11YShjKS5ocmVmLFwiXCIhPT1mJiYhZi5tYXRjaChlKSlyZXR1cm5cInVuc2FmZTpcIitmO3JldHVybiBjfX19ZnVuY3Rpb24gQmUoYil7aWYoXCJzZWxmXCI9PT1iKXJldHVybiBiO2lmKHYoYikpe2lmKC0xPGIuaW5kZXhPZihcIioqKlwiKSl0aHJvdyB4YShcIml3Y2FyZFwiLGIpO2I9Yi5yZXBsYWNlKC8oWy0oKVxcW1xcXXt9Kz8qLiRcXF58LDojPCFcXFxcXSkvZyxcblwiXFxcXCQxXCIpLnJlcGxhY2UoL1xceDA4L2csXCJcXFxceDA4XCIpLnJlcGxhY2UoXCJcXFxcKlxcXFwqXCIsXCIuKlwiKS5yZXBsYWNlKFwiXFxcXCpcIixcIlteOi8uPyY7XSpcIik7cmV0dXJuIFJlZ0V4cChcIl5cIitiK1wiJFwiKX1pZihqYihiKSlyZXR1cm4gUmVnRXhwKFwiXlwiK2Iuc291cmNlK1wiJFwiKTt0aHJvdyB4YShcImltYXRjaGVyXCIpO31mdW5jdGlvbiBHYyhiKXt2YXIgYT1bXTt5KGIpJiZyKGIsZnVuY3Rpb24oYil7YS5wdXNoKEJlKGIpKX0pO3JldHVybiBhfWZ1bmN0aW9uIGJlKCl7dGhpcy5TQ0VfQ09OVEVYVFM9Z2E7dmFyIGI9W1wic2VsZlwiXSxhPVtdO3RoaXMucmVzb3VyY2VVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9R2MoYSkpO3JldHVybiBifTt0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0PWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPUdjKGIpKTtyZXR1cm4gYX07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9XG5mdW5jdGlvbihhKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIGF9fTthJiYoYi5wcm90b3R5cGU9bmV3IGEpO2IucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpfTtiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKX07cmV0dXJuIGJ9dmFyIGU9ZnVuY3Rpb24oYSl7dGhyb3cgeGEoXCJ1bnNhZmVcIik7fTtjLmhhcyhcIiRzYW5pdGl6ZVwiKSYmKGU9Yy5nZXQoXCIkc2FuaXRpemVcIikpO3ZhciBmPWQoKSxnPXt9O2dbZ2EuSFRNTF09ZChmKTtnW2dhLkNTU109ZChmKTtnW2dhLlVSTF09ZChmKTtnW2dhLkpTXT1kKGYpO2dbZ2EuUkVTT1VSQ0VfVVJMXT1kKGdbZ2EuVVJMXSk7cmV0dXJue3RydXN0QXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1nLmhhc093blByb3BlcnR5KGEpP2dbYV06bnVsbDtpZighYyl0aHJvdyB4YShcImljb250ZXh0XCIsXG5hLGIpO2lmKG51bGw9PT1ifHxiPT09dHx8XCJcIj09PWIpcmV0dXJuIGI7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBiKXRocm93IHhhKFwiaXR5cGVcIixhKTtyZXR1cm4gbmV3IGMoYil9LGdldFRydXN0ZWQ6ZnVuY3Rpb24oYyxkKXtpZihudWxsPT09ZHx8ZD09PXR8fFwiXCI9PT1kKXJldHVybiBkO3ZhciBmPWcuaGFzT3duUHJvcGVydHkoYyk/Z1tjXTpudWxsO2lmKGYmJmQgaW5zdGFuY2VvZiBmKXJldHVybiBkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7aWYoYz09PWdhLlJFU09VUkNFX1VSTCl7dmFyIGY9dWEoZC50b1N0cmluZygpKSxsLG4scD0hMTtsPTA7Zm9yKG49Yi5sZW5ndGg7bDxuO2wrKylpZihcInNlbGZcIj09PWJbbF0/UGIoZik6YltsXS5leGVjKGYuaHJlZikpe3A9ITA7YnJlYWt9aWYocClmb3IobD0wLG49YS5sZW5ndGg7bDxuO2wrKylpZihcInNlbGZcIj09PWFbbF0/UGIoZik6YVtsXS5leGVjKGYuaHJlZikpe3A9ITE7YnJlYWt9aWYocClyZXR1cm4gZDt0aHJvdyB4YShcImluc2VjdXJsXCIsXG5kLnRvU3RyaW5nKCkpO31pZihjPT09Z2EuSFRNTClyZXR1cm4gZShkKTt0aHJvdyB4YShcInVuc2FmZVwiKTt9LHZhbHVlT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBmP2EuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTphfX19XX1mdW5jdGlvbiBhZSgpe3ZhciBiPSEwO3RoaXMuZW5hYmxlZD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj0hIWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkc25pZmZlclwiLFwiJHNjZURlbGVnYXRlXCIsZnVuY3Rpb24oYSxjLGQpe2lmKGImJmMubXNpZSYmOD5jLm1zaWVEb2N1bWVudE1vZGUpdGhyb3cgeGEoXCJpZXF1aXJrc1wiKTt2YXIgZT1oYShnYSk7ZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYn07ZS50cnVzdEFzPWQudHJ1c3RBcztlLmdldFRydXN0ZWQ9ZC5nZXRUcnVzdGVkO2UudmFsdWVPZj1kLnZhbHVlT2Y7Ynx8KGUudHJ1c3RBcz1lLmdldFRydXN0ZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0sXG5lLnZhbHVlT2Y9UWEpO2UucGFyc2VBcz1mdW5jdGlvbihiLGMpe3ZhciBkPWEoYyk7cmV0dXJuIGQubGl0ZXJhbCYmZC5jb25zdGFudD9kOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGUuZ2V0VHJ1c3RlZChiLGQoYSxjKSl9fTt2YXIgZj1lLnBhcnNlQXMsZz1lLmdldFRydXN0ZWQsaz1lLnRydXN0QXM7cihnYSxmdW5jdGlvbihhLGIpe3ZhciBjPUsoYik7ZVtaYShcInBhcnNlX2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpfTtlW1phKFwiZ2V0X3RydXN0ZWRfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBnKGEsYil9O2VbWmEoXCJ0cnVzdF9hc19cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGsoYSxiKX19KTtyZXR1cm4gZX1dfWZ1bmN0aW9uIGNlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9e30sZD1VKCgvYW5kcm9pZCAoXFxkKykvLmV4ZWMoSygoYi5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpKXx8W10pWzFdKSxlPS9Cb3hlZS9pLnRlc3QoKGIubmF2aWdhdG9yfHxcbnt9KS51c2VyQWdlbnQpLGY9YVswXXx8e30sZz1mLmRvY3VtZW50TW9kZSxrLG09L14oTW96fHdlYmtpdHxPfG1zKSg/PVtBLVpdKS8saD1mLmJvZHkmJmYuYm9keS5zdHlsZSxsPSExLG49ITE7aWYoaCl7Zm9yKHZhciBwIGluIGgpaWYobD1tLmV4ZWMocCkpe2s9bFswXTtrPWsuc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStrLnN1YnN0cigxKTticmVha31rfHwoaz1cIldlYmtpdE9wYWNpdHlcImluIGgmJlwid2Via2l0XCIpO2w9ISEoXCJ0cmFuc2l0aW9uXCJpbiBofHxrK1wiVHJhbnNpdGlvblwiaW4gaCk7bj0hIShcImFuaW1hdGlvblwiaW4gaHx8aytcIkFuaW1hdGlvblwiaW4gaCk7IWR8fGwmJm58fChsPXYoZi5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb24pLG49dihmLmJvZHkuc3R5bGUud2Via2l0QW5pbWF0aW9uKSl9cmV0dXJue2hpc3Rvcnk6ISghYi5oaXN0b3J5fHwhYi5oaXN0b3J5LnB1c2hTdGF0ZXx8ND5kfHxlKSxoYXNoY2hhbmdlOlwib25oYXNoY2hhbmdlXCJpbiBiJiYoIWd8fDc8XG5nKSxoYXNFdmVudDpmdW5jdGlvbihhKXtpZihcImlucHV0XCI9PWEmJjk9PVEpcmV0dXJuITE7aWYoeChjW2FdKSl7dmFyIGI9Zi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2NbYV09XCJvblwiK2EgaW4gYn1yZXR1cm4gY1thXX0sY3NwOlhhKCksdmVuZG9yUHJlZml4OmssdHJhbnNpdGlvbnM6bCxhbmltYXRpb25zOm4sYW5kcm9pZDpkLG1zaWU6USxtc2llRG9jdW1lbnRNb2RlOmd9fV19ZnVuY3Rpb24gZWUoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRxXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsYSxjLGQpe2Z1bmN0aW9uIGUoZSxrLG0pe3ZhciBoPWMuZGVmZXIoKSxsPWgucHJvbWlzZSxuPXkobSkmJiFtO2s9YS5kZWZlcihmdW5jdGlvbigpe3RyeXtoLnJlc29sdmUoZSgpKX1jYXRjaChhKXtoLnJlamVjdChhKSxkKGEpfWZpbmFsbHl7ZGVsZXRlIGZbbC4kJHRpbWVvdXRJZF19bnx8Yi4kYXBwbHkoKX0sayk7bC4kJHRpbWVvdXRJZD1rO2Zba109aDtcbnJldHVybiBsfXZhciBmPXt9O2UuY2FuY2VsPWZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkdGltZW91dElkIGluIGY/KGZbYi4kJHRpbWVvdXRJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksZGVsZXRlIGZbYi4kJHRpbWVvdXRJZF0sYS5kZWZlci5jYW5jZWwoYi4kJHRpbWVvdXRJZCkpOiExfTtyZXR1cm4gZX1dfWZ1bmN0aW9uIHVhKGIsYSl7dmFyIGM9YjtRJiYoWS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYyksYz1ZLmhyZWYpO1kuc2V0QXR0cmlidXRlKFwiaHJlZlwiLGMpO3JldHVybntocmVmOlkuaHJlZixwcm90b2NvbDpZLnByb3RvY29sP1kucHJvdG9jb2wucmVwbGFjZSgvOiQvLFwiXCIpOlwiXCIsaG9zdDpZLmhvc3Qsc2VhcmNoOlkuc2VhcmNoP1kuc2VhcmNoLnJlcGxhY2UoL15cXD8vLFwiXCIpOlwiXCIsaGFzaDpZLmhhc2g/WS5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKTpcIlwiLGhvc3RuYW1lOlkuaG9zdG5hbWUscG9ydDpZLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1ZLnBhdGhuYW1lLmNoYXJBdCgwKT9ZLnBhdGhuYW1lOlxuXCIvXCIrWS5wYXRobmFtZX19ZnVuY3Rpb24gUGIoYil7Yj12KGIpP3VhKGIpOmI7cmV0dXJuIGIucHJvdG9jb2w9PT1IYy5wcm90b2NvbCYmYi5ob3N0PT09SGMuaG9zdH1mdW5jdGlvbiBmZSgpe3RoaXMuJGdldD1iYShXKX1mdW5jdGlvbiBtYyhiKXtmdW5jdGlvbiBhKGQsZSl7aWYoVChkKSl7dmFyIGY9e307cihkLGZ1bmN0aW9uKGIsYyl7ZltjXT1hKGMsYil9KTtyZXR1cm4gZn1yZXR1cm4gYi5mYWN0b3J5KGQrYyxlKX12YXIgYz1cIkZpbHRlclwiO3RoaXMucmVnaXN0ZXI9YTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmdldChiK2MpfX1dO2EoXCJjdXJyZW5jeVwiLEljKTthKFwiZGF0ZVwiLEpjKTthKFwiZmlsdGVyXCIsQ2UpO2EoXCJqc29uXCIsRGUpO2EoXCJsaW1pdFRvXCIsRWUpO2EoXCJsb3dlcmNhc2VcIixGZSk7YShcIm51bWJlclwiLEtjKTthKFwib3JkZXJCeVwiLExjKTthKFwidXBwZXJjYXNlXCIsR2UpfWZ1bmN0aW9uIENlKCl7cmV0dXJuIGZ1bmN0aW9uKGIsXG5hLGMpe2lmKCFKKGIpKXJldHVybiBiO3ZhciBkPXR5cGVvZiBjLGU9W107ZS5jaGVjaz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGUubGVuZ3RoO2IrKylpZighZVtiXShhKSlyZXR1cm4hMTtyZXR1cm4hMH07XCJmdW5jdGlvblwiIT09ZCYmKGM9XCJib29sZWFuXCI9PT1kJiZjP2Z1bmN0aW9uKGEsYil7cmV0dXJuIFZhLmVxdWFscyhhLGIpfTpmdW5jdGlvbihhLGIpe2lmKGEmJmImJlwib2JqZWN0XCI9PT10eXBlb2YgYSYmXCJvYmplY3RcIj09PXR5cGVvZiBiKXtmb3IodmFyIGQgaW4gYSlpZihcIiRcIiE9PWQuY2hhckF0KDApJiZrYi5jYWxsKGEsZCkmJmMoYVtkXSxiW2RdKSlyZXR1cm4hMDtyZXR1cm4hMX1iPShcIlwiK2IpLnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE8KFwiXCIrYSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGIpfSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYiYmXCIhXCI9PT1iLmNoYXJBdCgwKSlyZXR1cm4hZihhLGIuc3Vic3RyKDEpKTtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJib29sZWFuXCI6Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJzdHJpbmdcIjpyZXR1cm4gYyhhLFxuYik7Y2FzZSBcIm9iamVjdFwiOnN3aXRjaCh0eXBlb2YgYil7Y2FzZSBcIm9iamVjdFwiOnJldHVybiBjKGEsYik7ZGVmYXVsdDpmb3IodmFyIGQgaW4gYSlpZihcIiRcIiE9PWQuY2hhckF0KDApJiZmKGFbZF0sYikpcmV0dXJuITB9cmV0dXJuITE7Y2FzZSBcImFycmF5XCI6Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKylpZihmKGFbZF0sYikpcmV0dXJuITA7cmV0dXJuITE7ZGVmYXVsdDpyZXR1cm4hMX19O3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcInN0cmluZ1wiOmE9eyQ6YX07Y2FzZSBcIm9iamVjdFwiOmZvcih2YXIgZyBpbiBhKShmdW5jdGlvbihiKXtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGFbYl0mJmUucHVzaChmdW5jdGlvbihjKXtyZXR1cm4gZihcIiRcIj09Yj9jOmMmJmNbYl0sYVtiXSl9KX0pKGcpO2JyZWFrO2Nhc2UgXCJmdW5jdGlvblwiOmUucHVzaChhKTticmVhaztkZWZhdWx0OnJldHVybiBifWQ9W107Zm9yKGc9MDtnPGIubGVuZ3RoO2crKyl7dmFyIGs9XG5iW2ddO2UuY2hlY2soaykmJmQucHVzaChrKX1yZXR1cm4gZH19ZnVuY3Rpb24gSWMoYil7dmFyIGE9Yi5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYixkKXt4KGQpJiYoZD1hLkNVUlJFTkNZX1NZTSk7cmV0dXJuIE1jKGIsYS5QQVRURVJOU1sxXSxhLkdST1VQX1NFUCxhLkRFQ0lNQUxfU0VQLDIpLnJlcGxhY2UoL1xcdTAwQTQvZyxkKX19ZnVuY3Rpb24gS2MoYil7dmFyIGE9Yi5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4gTWMoYixhLlBBVFRFUk5TWzBdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsZCl9fWZ1bmN0aW9uIE1jKGIsYSxjLGQsZSl7aWYobnVsbD09Ynx8IWlzRmluaXRlKGIpfHxUKGIpKXJldHVyblwiXCI7dmFyIGY9MD5iO2I9TWF0aC5hYnMoYik7dmFyIGc9YitcIlwiLGs9XCJcIixtPVtdLGg9ITE7aWYoLTEhPT1nLmluZGV4T2YoXCJlXCIpKXt2YXIgbD1nLm1hdGNoKC8oW1xcZFxcLl0rKWUoLT8pKFxcZCspLyk7bCYmXCItXCI9PWxbMl0mJlxubFszXT5lKzE/KGc9XCIwXCIsYj0wKTooaz1nLGg9ITApfWlmKGgpMDxlJiYoLTE8YiYmMT5iKSYmKGs9Yi50b0ZpeGVkKGUpKTtlbHNle2c9KGcuc3BsaXQoTmMpWzFdfHxcIlwiKS5sZW5ndGg7eChlKSYmKGU9TWF0aC5taW4oTWF0aC5tYXgoYS5taW5GcmFjLGcpLGEubWF4RnJhYykpO2I9KyhNYXRoLnJvdW5kKCsoYi50b1N0cmluZygpK1wiZVwiK2UpKS50b1N0cmluZygpK1wiZVwiKy1lKTswPT09YiYmKGY9ITEpO2I9KFwiXCIrYikuc3BsaXQoTmMpO2c9YlswXTtiPWJbMV18fFwiXCI7dmFyIGw9MCxuPWEubGdTaXplLHA9YS5nU2l6ZTtpZihnLmxlbmd0aD49bitwKWZvcihsPWcubGVuZ3RoLW4saD0wO2g8bDtoKyspMD09PShsLWgpJXAmJjAhPT1oJiYoays9Yyksays9Zy5jaGFyQXQoaCk7Zm9yKGg9bDtoPGcubGVuZ3RoO2grKykwPT09KGcubGVuZ3RoLWgpJW4mJjAhPT1oJiYoays9Yyksays9Zy5jaGFyQXQoaCk7Zm9yKDtiLmxlbmd0aDxlOyliKz1cIjBcIjtlJiZcIjBcIiE9PWUmJihrKz1kK2Iuc3Vic3RyKDAsXG5lKSl9bS5wdXNoKGY/YS5uZWdQcmU6YS5wb3NQcmUpO20ucHVzaChrKTttLnB1c2goZj9hLm5lZ1N1ZjphLnBvc1N1Zik7cmV0dXJuIG0uam9pbihcIlwiKX1mdW5jdGlvbiBYYihiLGEsYyl7dmFyIGQ9XCJcIjswPmImJihkPVwiLVwiLGI9LWIpO2ZvcihiPVwiXCIrYjtiLmxlbmd0aDxhOyliPVwiMFwiK2I7YyYmKGI9Yi5zdWJzdHIoYi5sZW5ndGgtYSkpO3JldHVybiBkK2J9ZnVuY3Rpb24gJChiLGEsYyxkKXtjPWN8fDA7cmV0dXJuIGZ1bmN0aW9uKGUpe2U9ZVtcImdldFwiK2JdKCk7aWYoMDxjfHxlPi1jKWUrPWM7MD09PWUmJi0xMj09YyYmKGU9MTIpO3JldHVybiBYYihlLGEsZCl9fWZ1bmN0aW9uIHZiKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9Y1tcImdldFwiK2JdKCksZj1JYShhP1wiU0hPUlRcIitiOmIpO3JldHVybiBkW2ZdW2VdfX1mdW5jdGlvbiBKYyhiKXtmdW5jdGlvbiBhKGEpe3ZhciBiO2lmKGI9YS5tYXRjaChjKSl7YT1uZXcgRGF0ZSgwKTt2YXIgZj0wLGc9MCxrPWJbOF0/XG5hLnNldFVUQ0Z1bGxZZWFyOmEuc2V0RnVsbFllYXIsbT1iWzhdP2Euc2V0VVRDSG91cnM6YS5zZXRIb3VycztiWzldJiYoZj1VKGJbOV0rYlsxMF0pLGc9VShiWzldK2JbMTFdKSk7ay5jYWxsKGEsVShiWzFdKSxVKGJbMl0pLTEsVShiWzNdKSk7Zj1VKGJbNF18fDApLWY7Zz1VKGJbNV18fDApLWc7az1VKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdChcIjAuXCIrKGJbN118fDApKSk7bS5jYWxsKGEsZixnLGssYil9cmV0dXJuIGF9dmFyIGM9L14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87cmV0dXJuIGZ1bmN0aW9uKGMsZSl7dmFyIGY9XCJcIixnPVtdLGssbTtlPWV8fFwibWVkaXVtRGF0ZVwiO2U9Yi5EQVRFVElNRV9GT1JNQVRTW2VdfHxlO3YoYykmJihjPUhlLnRlc3QoYyk/VShjKTphKGMpKTtpYihjKSYmKGM9bmV3IERhdGUoYykpO1xuaWYoIXRhKGMpKXJldHVybiBjO2Zvcig7ZTspKG09SWUuZXhlYyhlKSk/KGc9Zy5jb25jYXQoQmEuY2FsbChtLDEpKSxlPWcucG9wKCkpOihnLnB1c2goZSksZT1udWxsKTtyKGcsZnVuY3Rpb24oYSl7az1KZVthXTtmKz1rP2soYyxiLkRBVEVUSU1FX0ZPUk1BVFMpOmEucmVwbGFjZSgvKF4nfCckKS9nLFwiXCIpLnJlcGxhY2UoLycnL2csXCInXCIpfSk7cmV0dXJuIGZ9fWZ1bmN0aW9uIERlKCl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBuYShiLCEwKX19ZnVuY3Rpb24gRWUoKXtyZXR1cm4gZnVuY3Rpb24oYixhKXtpZighSihiKSYmIXYoYikpcmV0dXJuIGI7YT1JbmZpbml0eT09PU1hdGguYWJzKE51bWJlcihhKSk/TnVtYmVyKGEpOlUoYSk7aWYodihiKSlyZXR1cm4gYT8wPD1hP2Iuc2xpY2UoMCxhKTpiLnNsaWNlKGEsYi5sZW5ndGgpOlwiXCI7dmFyIGM9W10sZCxlO2E+Yi5sZW5ndGg/YT1iLmxlbmd0aDphPC1iLmxlbmd0aCYmKGE9LWIubGVuZ3RoKTswPGE/KGQ9MCxlPWEpOihkPVxuYi5sZW5ndGgrYSxlPWIubGVuZ3RoKTtmb3IoO2Q8ZTtkKyspYy5wdXNoKGJbZF0pO3JldHVybiBjfX1mdW5jdGlvbiBMYyhiKXtyZXR1cm4gZnVuY3Rpb24oYSxjLGQpe2Z1bmN0aW9uIGUoYSxiKXtyZXR1cm4gVWEoYik/ZnVuY3Rpb24oYixjKXtyZXR1cm4gYShjLGIpfTphfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz10eXBlb2YgYSxkPXR5cGVvZiBiO3JldHVybiBjPT1kPyh0YShhKSYmdGEoYikmJihhPWEudmFsdWVPZigpLGI9Yi52YWx1ZU9mKCkpLFwic3RyaW5nXCI9PWMmJihhPWEudG9Mb3dlckNhc2UoKSxiPWIudG9Mb3dlckNhc2UoKSksYT09PWI/MDphPGI/LTE6MSk6YzxkPy0xOjF9aWYoIVBhKGEpfHwhYylyZXR1cm4gYTtjPUooYyk/YzpbY107Yz1WYyhjLGZ1bmN0aW9uKGEpe3ZhciBjPSExLGQ9YXx8UWE7aWYodihhKSl7aWYoXCIrXCI9PWEuY2hhckF0KDApfHxcIi1cIj09YS5jaGFyQXQoMCkpYz1cIi1cIj09YS5jaGFyQXQoMCksYT1hLnN1YnN0cmluZygxKTtkPWIoYSk7aWYoZC5jb25zdGFudCl7dmFyIGc9XG5kKCk7cmV0dXJuIGUoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhW2ddLGJbZ10pfSxjKX19cmV0dXJuIGUoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihkKGEpLGQoYikpfSxjKX0pO2Zvcih2YXIgZz1bXSxrPTA7azxhLmxlbmd0aDtrKyspZy5wdXNoKGFba10pO3JldHVybiBnLnNvcnQoZShmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdKGEsYik7aWYoMCE9PWUpcmV0dXJuIGV9cmV0dXJuIDB9LGQpKX19ZnVuY3Rpb24geWEoYil7UChiKSYmKGI9e2xpbms6Yn0pO2IucmVzdHJpY3Q9Yi5yZXN0cmljdHx8XCJBQ1wiO3JldHVybiBiYShiKX1mdW5jdGlvbiBPYyhiLGEsYyxkKXtmdW5jdGlvbiBlKGEsYyl7Yz1jP1wiLVwiK21iKGMsXCItXCIpOlwiXCI7ZC5zZXRDbGFzcyhiLChhP3diOnhiKStjLChhP3hiOndiKStjKX12YXIgZj10aGlzLGc9Yi5wYXJlbnQoKS5jb250cm9sbGVyKFwiZm9ybVwiKXx8eWIsaz0wLG09Zi4kZXJyb3I9e30saD1bXTtmLiRuYW1lPVxuYS5uYW1lfHxhLm5nRm9ybTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtmLiR2YWxpZD0hMDtmLiRpbnZhbGlkPSExO2cuJGFkZENvbnRyb2woZik7Yi5hZGRDbGFzcyhPYSk7ZSghMCk7Zi4kYWRkQ29udHJvbD1mdW5jdGlvbihhKXtEYShhLiRuYW1lLFwiaW5wdXRcIik7aC5wdXNoKGEpO2EuJG5hbWUmJihmW2EuJG5hbWVdPWEpfTtmLiRyZW1vdmVDb250cm9sPWZ1bmN0aW9uKGEpe2EuJG5hbWUmJmZbYS4kbmFtZV09PT1hJiZkZWxldGUgZlthLiRuYW1lXTtyKG0sZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLCEwLGEpfSk7U2EoaCxhKX07Zi4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW1bYV07aWYoYilkJiYoU2EoZCxjKSxkLmxlbmd0aHx8KGstLSxrfHwoZShiKSxmLiR2YWxpZD0hMCxmLiRpbnZhbGlkPSExKSxtW2FdPSExLGUoITAsYSksZy4kc2V0VmFsaWRpdHkoYSwhMCxmKSkpO2Vsc2V7a3x8ZShiKTtpZihkKXtpZigtMSE9UmEoZCxjKSlyZXR1cm59ZWxzZSBtW2FdPVxuZD1bXSxrKyssZSghMSxhKSxnLiRzZXRWYWxpZGl0eShhLCExLGYpO2QucHVzaChjKTtmLiR2YWxpZD0hMTtmLiRpbnZhbGlkPSEwfX07Zi4kc2V0RGlydHk9ZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKGIsT2EpO2QuYWRkQ2xhc3MoYix6Yik7Zi4kZGlydHk9ITA7Zi4kcHJpc3RpbmU9ITE7Zy4kc2V0RGlydHkoKX07Zi4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKGIsemIpO2QuYWRkQ2xhc3MoYixPYSk7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7cihoLGZ1bmN0aW9uKGEpe2EuJHNldFByaXN0aW5lKCl9KX19ZnVuY3Rpb24gc2EoYixhLGMsZCl7Yi4kc2V0VmFsaWRpdHkoYSxjKTtyZXR1cm4gYz9kOnR9ZnVuY3Rpb24gUGMoYixhKXt2YXIgYyxkO2lmKGEpZm9yKGM9MDtjPGEubGVuZ3RoOysrYylpZihkPWFbY10sYltkXSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBLZShiLGEsYyxkLGUpe1QoZSkmJihiLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz0hMCxcbmIuJHBhcnNlcnMucHVzaChmdW5jdGlvbihmKXtpZihiLiRlcnJvclthXXx8UGMoZSxkKXx8IVBjKGUsYykpcmV0dXJuIGY7Yi4kc2V0VmFsaWRpdHkoYSwhMSl9KSl9ZnVuY3Rpb24gQWIoYixhLGMsZCxlLGYpe3ZhciBnPWEucHJvcChMZSksaz1hWzBdLnBsYWNlaG9sZGVyLG09e30saD1LKGFbMF0udHlwZSk7ZC4kJHZhbGlkaXR5U3RhdGU9ZztpZighZS5hbmRyb2lkKXt2YXIgbD0hMTthLm9uKFwiY29tcG9zaXRpb25zdGFydFwiLGZ1bmN0aW9uKGEpe2w9ITB9KTthLm9uKFwiY29tcG9zaXRpb25lbmRcIixmdW5jdGlvbigpe2w9ITE7bigpfSl9dmFyIG49ZnVuY3Rpb24oZSl7aWYoIWwpe3ZhciBmPWEudmFsKCk7aWYoUSYmXCJpbnB1dFwiPT09KGV8fG0pLnR5cGUmJmFbMF0ucGxhY2Vob2xkZXIhPT1rKWs9YVswXS5wbGFjZWhvbGRlcjtlbHNlIGlmKFwicGFzc3dvcmRcIiE9PWgmJlVhKGMubmdUcmltfHxcIlRcIikmJihmPWFhKGYpKSxlPWcmJmQuJCRoYXNOYXRpdmVWYWxpZGF0b3JzLGQuJHZpZXdWYWx1ZSE9PVxuZnx8XCJcIj09PWYmJmUpYi4kcm9vdC4kJHBoYXNlP2QuJHNldFZpZXdWYWx1ZShmKTpiLiRhcHBseShmdW5jdGlvbigpe2QuJHNldFZpZXdWYWx1ZShmKX0pfX07aWYoZS5oYXNFdmVudChcImlucHV0XCIpKWEub24oXCJpbnB1dFwiLG4pO2Vsc2V7dmFyIHAscT1mdW5jdGlvbigpe3B8fChwPWYuZGVmZXIoZnVuY3Rpb24oKXtuKCk7cD1udWxsfSkpfTthLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe2E9YS5rZXlDb2RlOzkxPT09YXx8KDE1PGEmJjE5PmF8fDM3PD1hJiY0MD49YSl8fHEoKX0pO2lmKGUuaGFzRXZlbnQoXCJwYXN0ZVwiKSlhLm9uKFwicGFzdGUgY3V0XCIscSl9YS5vbihcImNoYW5nZVwiLG4pO2QuJHJlbmRlcj1mdW5jdGlvbigpe2EudmFsKGQuJGlzRW1wdHkoZC4kdmlld1ZhbHVlKT9cIlwiOmQuJHZpZXdWYWx1ZSl9O3ZhciBzPWMubmdQYXR0ZXJuO3MmJigoZT1zLm1hdGNoKC9eXFwvKC4qKVxcLyhbZ2ltXSopJC8pKT8ocz1SZWdFeHAoZVsxXSxlWzJdKSxlPWZ1bmN0aW9uKGEpe3JldHVybiBzYShkLFxuXCJwYXR0ZXJuXCIsZC4kaXNFbXB0eShhKXx8cy50ZXN0KGEpLGEpfSk6ZT1mdW5jdGlvbihjKXt2YXIgZT1iLiRldmFsKHMpO2lmKCFlfHwhZS50ZXN0KXRocm93IEMoXCJuZ1BhdHRlcm5cIikoXCJub3JlZ2V4cFwiLHMsZSxpYShhKSk7cmV0dXJuIHNhKGQsXCJwYXR0ZXJuXCIsZC4kaXNFbXB0eShjKXx8ZS50ZXN0KGMpLGMpfSxkLiRmb3JtYXR0ZXJzLnB1c2goZSksZC4kcGFyc2Vycy5wdXNoKGUpKTtpZihjLm5nTWlubGVuZ3RoKXt2YXIgcj1VKGMubmdNaW5sZW5ndGgpO2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGQsXCJtaW5sZW5ndGhcIixkLiRpc0VtcHR5KGEpfHxhLmxlbmd0aD49cixhKX07ZC4kcGFyc2Vycy5wdXNoKGUpO2QuJGZvcm1hdHRlcnMucHVzaChlKX1pZihjLm5nTWF4bGVuZ3RoKXt2YXIgdT1VKGMubmdNYXhsZW5ndGgpO2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGQsXCJtYXhsZW5ndGhcIixkLiRpc0VtcHR5KGEpfHxhLmxlbmd0aDw9dSxhKX07ZC4kcGFyc2Vycy5wdXNoKGUpO1xuZC4kZm9ybWF0dGVycy5wdXNoKGUpfX1mdW5jdGlvbiBZYihiLGEpe2I9XCJuZ0NsYXNzXCIrYjtyZXR1cm5bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSxiKXt2YXIgYz1bXSxkPTA7YTpmb3IoO2Q8YS5sZW5ndGg7ZCsrKXtmb3IodmFyIGU9YVtkXSxsPTA7bDxiLmxlbmd0aDtsKyspaWYoZT09YltsXSljb250aW51ZSBhO2MucHVzaChlKX1yZXR1cm4gY31mdW5jdGlvbiBlKGEpe2lmKCFKKGEpKXtpZih2KGEpKXJldHVybiBhLnNwbGl0KFwiIFwiKTtpZihUKGEpKXt2YXIgYj1bXTtyKGEsZnVuY3Rpb24oYSxjKXthJiYoYj1iLmNvbmNhdChjLnNwbGl0KFwiIFwiKSkpfSk7cmV0dXJuIGJ9fXJldHVybiBhfXJldHVybntyZXN0cmljdDpcIkFDXCIsbGluazpmdW5jdGlvbihmLGcsayl7ZnVuY3Rpb24gbShhLGIpe3ZhciBjPWcuZGF0YShcIiRjbGFzc0NvdW50c1wiKXx8e30sZD1bXTtyKGEsZnVuY3Rpb24oYSl7aWYoMDxifHxjW2FdKWNbYV09KGNbYV18fDApK2IsY1thXT09PSsoMDxcbmIpJiZkLnB1c2goYSl9KTtnLmRhdGEoXCIkY2xhc3NDb3VudHNcIixjKTtyZXR1cm4gZC5qb2luKFwiIFwiKX1mdW5jdGlvbiBoKGIpe2lmKCEwPT09YXx8Zi4kaW5kZXglMj09PWEpe3ZhciBoPWUoYnx8W10pO2lmKCFsKXt2YXIgcT1tKGgsMSk7ay4kYWRkQ2xhc3MocSl9ZWxzZSBpZighQWEoYixsKSl7dmFyIHM9ZShsKSxxPWQoaCxzKSxoPWQocyxoKSxoPW0oaCwtMSkscT1tKHEsMSk7MD09PXEubGVuZ3RoP2MucmVtb3ZlQ2xhc3MoZyxoKTowPT09aC5sZW5ndGg/Yy5hZGRDbGFzcyhnLHEpOmMuc2V0Q2xhc3MoZyxxLGgpfX1sPWhhKGIpfXZhciBsO2YuJHdhdGNoKGtbYl0saCwhMCk7ay4kb2JzZXJ2ZShcImNsYXNzXCIsZnVuY3Rpb24oYSl7aChmLiRldmFsKGtbYl0pKX0pO1wibmdDbGFzc1wiIT09YiYmZi4kd2F0Y2goXCIkaW5kZXhcIixmdW5jdGlvbihjLGQpe3ZhciBnPWMmMTtpZihnIT09KGQmMSkpe3ZhciBoPWUoZi4kZXZhbChrW2JdKSk7Zz09PWE/KGc9bShoLDEpLGsuJGFkZENsYXNzKGcpKTpcbihnPW0oaCwtMSksay4kcmVtb3ZlQ2xhc3MoZykpfX0pfX19XX12YXIgTGU9XCJ2YWxpZGl0eVwiLEs9ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi50b0xvd2VyQ2FzZSgpOmJ9LGtiPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksSWE9ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi50b1VwcGVyQ2FzZSgpOmJ9LFEsdyxFYSxCYT1bXS5zbGljZSxNZT1bXS5wdXNoLHphPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsVGE9QyhcIm5nXCIpLFZhPVcuYW5ndWxhcnx8KFcuYW5ndWxhcj17fSksWWEsTWEsbWE9W1wiMFwiLFwiMFwiLFwiMFwiXTtRPVUoKC9tc2llIChcXGQrKS8uZXhlYyhLKG5hdmlnYXRvci51c2VyQWdlbnQpKXx8W10pWzFdKTtpc05hTihRKSYmKFE9VSgoL3RyaWRlbnRcXC8uKjsgcnY6KFxcZCspLy5leGVjKEsobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pKTtFLiRpbmplY3Q9W107UWEuJGluamVjdD1bXTt2YXIgSj1mdW5jdGlvbigpe3JldHVybiBQKEFycmF5LmlzQXJyYXkpP1xuQXJyYXkuaXNBcnJheTpmdW5jdGlvbihiKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT16YS5jYWxsKGIpfX0oKSxhYT1mdW5jdGlvbigpe3JldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi50cmltKCk6Yn06ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/Yi5yZXBsYWNlKC9eXFxzXFxzKi8sXCJcIikucmVwbGFjZSgvXFxzXFxzKiQvLFwiXCIpOmJ9fSgpO01hPTk+UT9mdW5jdGlvbihiKXtiPWIubm9kZU5hbWU/YjpiWzBdO3JldHVybiBiLnNjb3BlTmFtZSYmXCJIVE1MXCIhPWIuc2NvcGVOYW1lP0lhKGIuc2NvcGVOYW1lK1wiOlwiK2Iubm9kZU5hbWUpOmIubm9kZU5hbWV9OmZ1bmN0aW9uKGIpe3JldHVybiBiLm5vZGVOYW1lP2Iubm9kZU5hbWU6YlswXS5ub2RlTmFtZX07dmFyIFhhPWZ1bmN0aW9uKCl7aWYoeShYYS5pc0FjdGl2ZV8pKXJldHVybiBYYS5pc0FjdGl2ZV87dmFyIGI9ISghWC5xdWVyeVNlbGVjdG9yKFwiW25nLWNzcF1cIikmJiFYLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1uZy1jc3BdXCIpKTtcbmlmKCFiKXRyeXtuZXcgRnVuY3Rpb24oXCJcIil9Y2F0Y2goYSl7Yj0hMH1yZXR1cm4gWGEuaXNBY3RpdmVfPWJ9LFljPS9bQS1aXS9nLGFkPXtmdWxsOlwiMS4yLjI2XCIsbWFqb3I6MSxtaW5vcjoyLGRvdDoyNixjb2RlTmFtZTpcImNhcHRpdmF0aW5nLWRpc2ludGVyZXN0XCJ9O1MuZXhwYW5kbz1cIm5nMzM5XCI7dmFyIGFiPVMuY2FjaGU9e30sbmU9MSxzYj1XLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYixhLGMpe2IuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITEpfTpmdW5jdGlvbihiLGEsYyl7Yi5hdHRhY2hFdmVudChcIm9uXCIrYSxjKX0sJGE9Vy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGIsYSxjKXtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCExKX06ZnVuY3Rpb24oYixhLGMpe2IuZGV0YWNoRXZlbnQoXCJvblwiK2EsYyl9O1MuX2RhdGE9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY2FjaGVbYlt0aGlzLmV4cGFuZG9dXXx8e319O3ZhciBpZT0vKFtcXDpcXC1cXF9dKyguKSkvZyxcbmplPS9ebW96KFtBLVpdKS8sSGI9QyhcImpxTGl0ZVwiKSxrZT0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sSWI9Lzx8JiM/XFx3KzsvLGxlPS88KFtcXHc6XSspLyxtZT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksZWE9e29wdGlvbjpbMSwnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JyxcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTtlYS5vcHRncm91cD1lYS5vcHRpb247ZWEudGJvZHk9ZWEudGZvb3Q9ZWEuY29sZ3JvdXA9ZWEuY2FwdGlvbj1lYS50aGVhZDtlYS50aD1cbmVhLnRkO3ZhciBMYT1TLnByb3RvdHlwZT17cmVhZHk6ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYSgpe2N8fChjPSEwLGIoKSl9dmFyIGM9ITE7XCJjb21wbGV0ZVwiPT09WC5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYSk6KHRoaXMub24oXCJET01Db250ZW50TG9hZGVkXCIsYSksUyhXKS5vbihcImxvYWRcIixhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGI9W107cih0aGlzLGZ1bmN0aW9uKGEpe2IucHVzaChcIlwiK2EpfSk7cmV0dXJuXCJbXCIrYi5qb2luKFwiLCBcIikrXCJdXCJ9LGVxOmZ1bmN0aW9uKGIpe3JldHVybiAwPD1iP3codGhpc1tiXSk6dyh0aGlzW3RoaXMubGVuZ3RoK2JdKX0sbGVuZ3RoOjAscHVzaDpNZSxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0scWI9e307cihcIm11bHRpcGxlIHNlbGVjdGVkIGNoZWNrZWQgZGlzYWJsZWQgcmVhZE9ubHkgcmVxdWlyZWQgb3BlblwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihiKXtxYltLKGIpXT1ifSk7dmFyIHJjPXt9O3IoXCJpbnB1dCBzZWxlY3Qgb3B0aW9uIHRleHRhcmVhIGJ1dHRvbiBmb3JtIGRldGFpbHNcIi5zcGxpdChcIiBcIiksXG5mdW5jdGlvbihiKXtyY1tJYShiKV09ITB9KTtyKHtkYXRhOk1iLHJlbW92ZURhdGE6TGJ9LGZ1bmN0aW9uKGIsYSl7U1thXT1ifSk7cih7ZGF0YTpNYixpbmhlcml0ZWREYXRhOnBiLHNjb3BlOmZ1bmN0aW9uKGIpe3JldHVybiB3LmRhdGEoYixcIiRzY29wZVwiKXx8cGIoYi5wYXJlbnROb2RlfHxiLFtcIiRpc29sYXRlU2NvcGVcIixcIiRzY29wZVwiXSl9LGlzb2xhdGVTY29wZTpmdW5jdGlvbihiKXtyZXR1cm4gdy5kYXRhKGIsXCIkaXNvbGF0ZVNjb3BlXCIpfHx3LmRhdGEoYixcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIpfSxjb250cm9sbGVyOm9jLGluamVjdG9yOmZ1bmN0aW9uKGIpe3JldHVybiBwYihiLFwiJGluamVjdG9yXCIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGIsYSl7Yi5yZW1vdmVBdHRyaWJ1dGUoYSl9LGhhc0NsYXNzOk5iLGNzczpmdW5jdGlvbihiLGEsYyl7YT1aYShhKTtpZih5KGMpKWIuc3R5bGVbYV09YztlbHNle3ZhciBkOzg+PVEmJihkPWIuY3VycmVudFN0eWxlJiZiLmN1cnJlbnRTdHlsZVthXSxcblwiXCI9PT1kJiYoZD1cImF1dG9cIikpO2Q9ZHx8Yi5zdHlsZVthXTs4Pj1RJiYoZD1cIlwiPT09ZD90OmQpO3JldHVybiBkfX0sYXR0cjpmdW5jdGlvbihiLGEsYyl7dmFyIGQ9SyhhKTtpZihxYltkXSlpZih5KGMpKWM/KGJbYV09ITAsYi5zZXRBdHRyaWJ1dGUoYSxkKSk6KGJbYV09ITEsYi5yZW1vdmVBdHRyaWJ1dGUoZCkpO2Vsc2UgcmV0dXJuIGJbYV18fChiLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGEpfHxFKS5zcGVjaWZpZWQ/ZDp0O2Vsc2UgaWYoeShjKSliLnNldEF0dHJpYnV0ZShhLGMpO2Vsc2UgaWYoYi5nZXRBdHRyaWJ1dGUpcmV0dXJuIGI9Yi5nZXRBdHRyaWJ1dGUoYSwyKSxudWxsPT09Yj90OmJ9LHByb3A6ZnVuY3Rpb24oYixhLGMpe2lmKHkoYykpYlthXT1jO2Vsc2UgcmV0dXJuIGJbYV19LHRleHQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGIsZCl7dmFyIGU9YVtiLm5vZGVUeXBlXTtpZih4KGQpKXJldHVybiBlP2JbZV06XCJcIjtiW2VdPWR9dmFyIGE9W107OT5RPyhhWzFdPVxuXCJpbm5lclRleHRcIixhWzNdPVwibm9kZVZhbHVlXCIpOmFbMV09YVszXT1cInRleHRDb250ZW50XCI7Yi4kZHY9XCJcIjtyZXR1cm4gYn0oKSx2YWw6ZnVuY3Rpb24oYixhKXtpZih4KGEpKXtpZihcIlNFTEVDVFwiPT09TWEoYikmJmIubXVsdGlwbGUpe3ZhciBjPVtdO3IoYi5vcHRpb25zLGZ1bmN0aW9uKGEpe2Euc2VsZWN0ZWQmJmMucHVzaChhLnZhbHVlfHxhLnRleHQpfSk7cmV0dXJuIDA9PT1jLmxlbmd0aD9udWxsOmN9cmV0dXJuIGIudmFsdWV9Yi52YWx1ZT1hfSxodG1sOmZ1bmN0aW9uKGIsYSl7aWYoeChhKSlyZXR1cm4gYi5pbm5lckhUTUw7Zm9yKHZhciBjPTAsZD1iLmNoaWxkTm9kZXM7YzxkLmxlbmd0aDtjKyspSmEoZFtjXSk7Yi5pbm5lckhUTUw9YX0sZW1wdHk6cGN9LGZ1bmN0aW9uKGIsYSl7Uy5wcm90b3R5cGVbYV09ZnVuY3Rpb24oYSxkKXt2YXIgZSxmLGc9dGhpcy5sZW5ndGg7aWYoYiE9PXBjJiYoMj09Yi5sZW5ndGgmJmIhPT1OYiYmYiE9PW9jP2E6ZCk9PT10KXtpZihUKGEpKXtmb3IoZT1cbjA7ZTxnO2UrKylpZihiPT09TWIpYih0aGlzW2VdLGEpO2Vsc2UgZm9yKGYgaW4gYSliKHRoaXNbZV0sZixhW2ZdKTtyZXR1cm4gdGhpc31lPWIuJGR2O2c9ZT09PXQ/TWF0aC5taW4oZywxKTpnO2ZvcihmPTA7ZjxnO2YrKyl7dmFyIGs9Yih0aGlzW2ZdLGEsZCk7ZT1lP2UrazprfXJldHVybiBlfWZvcihlPTA7ZTxnO2UrKyliKHRoaXNbZV0sYSxkKTtyZXR1cm4gdGhpc319KTtyKHtyZW1vdmVEYXRhOkxiLGRlYWxvYzpKYSxvbjpmdW5jdGlvbiBhKGMsZCxlLGYpe2lmKHkoZikpdGhyb3cgSGIoXCJvbmFyZ3NcIik7dmFyIGc9b2EoYyxcImV2ZW50c1wiKSxrPW9hKGMsXCJoYW5kbGVcIik7Z3x8b2EoYyxcImV2ZW50c1wiLGc9e30pO2t8fG9hKGMsXCJoYW5kbGVcIixrPW9lKGMsZykpO3IoZC5zcGxpdChcIiBcIiksZnVuY3Rpb24oZCl7dmFyIGY9Z1tkXTtpZighZil7aWYoXCJtb3VzZWVudGVyXCI9PWR8fFwibW91c2VsZWF2ZVwiPT1kKXt2YXIgbD1YLmJvZHkuY29udGFpbnN8fFguYm9keS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9cbmZ1bmN0aW9uKGEsYyl7dmFyIGQ9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxlPWMmJmMucGFyZW50Tm9kZTtyZXR1cm4gYT09PWV8fCEhKGUmJjE9PT1lLm5vZGVUeXBlJiYoZC5jb250YWlucz9kLmNvbnRhaW5zKGUpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSkmMTYpKX06ZnVuY3Rpb24oYSxjKXtpZihjKWZvcig7Yz1jLnBhcmVudE5vZGU7KWlmKGM9PT1hKXJldHVybiEwO3JldHVybiExfTtnW2RdPVtdO2EoYyx7bW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIsbW91c2VlbnRlcjpcIm1vdXNlb3ZlclwifVtkXSxmdW5jdGlvbihhKXt2YXIgYz1hLnJlbGF0ZWRUYXJnZXQ7YyYmKGM9PT10aGlzfHxsKHRoaXMsYykpfHxrKGEsZCl9KX1lbHNlIHNiKGMsZCxrKSxnW2RdPVtdO2Y9Z1tkXX1mLnB1c2goZSl9KX0sb2ZmOm5jLG9uZTpmdW5jdGlvbihhLGMsZCl7YT13KGEpO2Eub24oYyxmdW5jdGlvbiBmKCl7YS5vZmYoYyxcbmQpO2Eub2ZmKGMsZil9KTthLm9uKGMsZCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEsYyl7dmFyIGQsZT1hLnBhcmVudE5vZGU7SmEoYSk7cihuZXcgUyhjKSxmdW5jdGlvbihjKXtkP2UuaW5zZXJ0QmVmb3JlKGMsZC5uZXh0U2libGluZyk6ZS5yZXBsYWNlQ2hpbGQoYyxhKTtkPWN9KX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7dmFyIGM9W107cihhLmNoaWxkTm9kZXMsZnVuY3Rpb24oYSl7MT09PWEubm9kZVR5cGUmJmMucHVzaChhKX0pO3JldHVybiBjfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fGEuY2hpbGROb2Rlc3x8W119LGFwcGVuZDpmdW5jdGlvbihhLGMpe3IobmV3IFMoYyksZnVuY3Rpb24oYyl7MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8YS5hcHBlbmRDaGlsZChjKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKGEsYyl7aWYoMT09PWEubm9kZVR5cGUpe3ZhciBkPWEuZmlyc3RDaGlsZDtyKG5ldyBTKGMpLGZ1bmN0aW9uKGMpe2EuaW5zZXJ0QmVmb3JlKGMsXG5kKX0pfX0sd3JhcDpmdW5jdGlvbihhLGMpe2M9dyhjKVswXTt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZXBsYWNlQ2hpbGQoYyxhKTtjLmFwcGVuZENoaWxkKGEpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7SmEoYSk7dmFyIGM9YS5wYXJlbnROb2RlO2MmJmMucmVtb3ZlQ2hpbGQoYSl9LGFmdGVyOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YSxlPWEucGFyZW50Tm9kZTtyKG5ldyBTKGMpLGZ1bmN0aW9uKGEpe2UuaW5zZXJ0QmVmb3JlKGEsZC5uZXh0U2libGluZyk7ZD1hfSl9LGFkZENsYXNzOm9iLHJlbW92ZUNsYXNzOm5iLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYyxkKXtjJiZyKGMuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGMpe3ZhciBmPWQ7eChmKSYmKGY9IU5iKGEsYykpOyhmP29iOm5iKShhLGMpfSl9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiYxMSE9PWEubm9kZVR5cGU/YTpudWxsfSxuZXh0OmZ1bmN0aW9uKGEpe2lmKGEubmV4dEVsZW1lbnRTaWJsaW5nKXJldHVybiBhLm5leHRFbGVtZW50U2libGluZztcbmZvcihhPWEubmV4dFNpYmxpbmc7bnVsbCE9YSYmMSE9PWEubm9kZVR5cGU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX0sZmluZDpmdW5jdGlvbihhLGMpe3JldHVybiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYyk6W119LGNsb25lOktiLHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxmO2U9Yy50eXBlfHxjO3ZhciBnPShvYShhLFwiZXZlbnRzXCIpfHx7fSlbZV07ZyYmKGU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuZGVmYXVsdFByZXZlbnRlZH0sc3RvcFByb3BhZ2F0aW9uOkUsdHlwZTplLHRhcmdldDphfSxjLnR5cGUmJihlPUQoZSxjKSksYz1oYShnKSxmPWQ/W2VdLmNvbmNhdChkKTpbZV0scihjLGZ1bmN0aW9uKGMpe2MuYXBwbHkoYSxmKX0pKX19LGZ1bmN0aW9uKGEsYyl7Uy5wcm90b3R5cGVbY109XG5mdW5jdGlvbihjLGUsZil7Zm9yKHZhciBnLGs9MDtrPHRoaXMubGVuZ3RoO2srKyl4KGcpPyhnPWEodGhpc1trXSxjLGUsZikseShnKSYmKGc9dyhnKSkpOkpiKGcsYSh0aGlzW2tdLGMsZSxmKSk7cmV0dXJuIHkoZyk/Zzp0aGlzfTtTLnByb3RvdHlwZS5iaW5kPVMucHJvdG90eXBlLm9uO1MucHJvdG90eXBlLnVuYmluZD1TLnByb3RvdHlwZS5vZmZ9KTtiYi5wcm90b3R5cGU9e3B1dDpmdW5jdGlvbihhLGMpe3RoaXNbS2EoYSx0aGlzLm5leHRVaWQpXT1jfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbS2EoYSx0aGlzLm5leHRVaWQpXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXNbYT1LYShhLHRoaXMubmV4dFVpZCldO2RlbGV0ZSB0aGlzW2FdO3JldHVybiBjfX07dmFyIHFlPS9eZnVuY3Rpb25cXHMqW15cXChdKlxcKFxccyooW15cXCldKilcXCkvbSxyZT0vLC8sc2U9L15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC8scGU9LygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL21nLFxuY2I9QyhcIiRpbmplY3RvclwiKSxOZT1DKFwiJGFuaW1hdGVcIiksTWQ9W1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXt0aGlzLiQkc2VsZWN0b3JzPXt9O3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYyxkKXt2YXIgZT1jK1wiLWFuaW1hdGlvblwiO2lmKGMmJlwiLlwiIT1jLmNoYXJBdCgwKSl0aHJvdyBOZShcIm5vdGNzZWxcIixjKTt0aGlzLiQkc2VsZWN0b3JzW2Muc3Vic3RyKDEpXT1lO2EuZmFjdG9yeShlLGQpfTt0aGlzLmNsYXNzTmFtZUZpbHRlcj1mdW5jdGlvbihhKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmKHRoaXMuJCRjbGFzc05hbWVGaWx0ZXI9YSBpbnN0YW5jZW9mIFJlZ0V4cD9hOm51bGwpO3JldHVybiB0aGlzLiQkY2xhc3NOYW1lRmlsdGVyfTt0aGlzLiRnZXQ9W1wiJHRpbWVvdXRcIixcIiQkYXN5bmNDYWxsYmFja1wiLGZ1bmN0aW9uKGEsZCl7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYyxnLGspe2c/Zy5hZnRlcihhKTooYyYmY1swXXx8KGM9Zy5wYXJlbnQoKSksYy5hcHBlbmQoYSkpO2smJlxuZChrKX0sbGVhdmU6ZnVuY3Rpb24oYSxjKXthLnJlbW92ZSgpO2MmJmQoYyl9LG1vdmU6ZnVuY3Rpb24oYSxjLGQsayl7dGhpcy5lbnRlcihhLGMsZCxrKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxjLGcpe2M9dihjKT9jOkooYyk/Yy5qb2luKFwiIFwiKTpcIlwiO3IoYSxmdW5jdGlvbihhKXtvYihhLGMpfSk7ZyYmZChnKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxjLGcpe2M9dihjKT9jOkooYyk/Yy5qb2luKFwiIFwiKTpcIlwiO3IoYSxmdW5jdGlvbihhKXtuYihhLGMpfSk7ZyYmZChnKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYSxjLGcsayl7cihhLGZ1bmN0aW9uKGEpe29iKGEsYyk7bmIoYSxnKX0pO2smJmQoayl9LGVuYWJsZWQ6RX19XX1dLGphPUMoXCIkY29tcGlsZVwiKTtpYy4kaW5qZWN0PVtcIiRwcm92aWRlXCIsXCIkJHNhbml0aXplVXJpUHJvdmlkZXJcIl07dmFyIHdlPS9eKHhbXFw6XFwtX118ZGF0YVtcXDpcXC1fXSkvaSx5Yz1DKFwiJGludGVycG9sYXRlXCIpLE9lPS9eKFteXFw/I10qKShcXD8oW14jXSopKT8oIyguKikpPyQvLFxuemU9e2h0dHA6ODAsaHR0cHM6NDQzLGZ0cDoyMX0sU2I9QyhcIiRsb2NhdGlvblwiKTtVYi5wcm90b3R5cGU9VGIucHJvdG90eXBlPUJjLnByb3RvdHlwZT17JCRodG1sNTohMSwkJHJlcGxhY2U6ITEsYWJzVXJsOnRiKFwiJCRhYnNVcmxcIiksdXJsOmZ1bmN0aW9uKGEpe2lmKHgoYSkpcmV0dXJuIHRoaXMuJCR1cmw7YT1PZS5leGVjKGEpO2FbMV0mJnRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQoYVsxXSkpOyhhWzJdfHxhWzFdKSYmdGhpcy5zZWFyY2goYVszXXx8XCJcIik7dGhpcy5oYXNoKGFbNV18fFwiXCIpO3JldHVybiB0aGlzfSxwcm90b2NvbDp0YihcIiQkcHJvdG9jb2xcIiksaG9zdDp0YihcIiQkaG9zdFwiKSxwb3J0OnRiKFwiJCRwb3J0XCIpLHBhdGg6Q2MoXCIkJHBhdGhcIixmdW5jdGlvbihhKXthPWE/YS50b1N0cmluZygpOlwiXCI7cmV0dXJuXCIvXCI9PWEuY2hhckF0KDApP2E6XCIvXCIrYX0pLHNlYXJjaDpmdW5jdGlvbihhLGMpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHRoaXMuJCRzZWFyY2g7XG5jYXNlIDE6aWYodihhKXx8aWIoYSkpYT1hLnRvU3RyaW5nKCksdGhpcy4kJHNlYXJjaD1lYyhhKTtlbHNlIGlmKFQoYSkpcihhLGZ1bmN0aW9uKGMsZSl7bnVsbD09YyYmZGVsZXRlIGFbZV19KSx0aGlzLiQkc2VhcmNoPWE7ZWxzZSB0aHJvdyBTYihcImlzcmNoYXJnXCIpO2JyZWFrO2RlZmF1bHQ6eChjKXx8bnVsbD09PWM/ZGVsZXRlIHRoaXMuJCRzZWFyY2hbYV06dGhpcy4kJHNlYXJjaFthXT1jfXRoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9LGhhc2g6Q2MoXCIkJGhhc2hcIixmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnRvU3RyaW5nKCk6XCJcIn0pLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT0hMDtyZXR1cm4gdGhpc319O3ZhciBsYT1DKFwiJHBhcnNlXCIpLEZjPXt9LHdhLFBlPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLFFlPUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSxRYz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCxnYj17XCJudWxsXCI6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sXG5cInRydWVcIjpmdW5jdGlvbigpe3JldHVybiEwfSxcImZhbHNlXCI6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdW5kZWZpbmVkOkUsXCIrXCI6ZnVuY3Rpb24oYSxjLGQsZSl7ZD1kKGEsYyk7ZT1lKGEsYyk7cmV0dXJuIHkoZCk/eShlKT9kK2U6ZDp5KGUpP2U6dH0sXCItXCI6ZnVuY3Rpb24oYSxjLGQsZSl7ZD1kKGEsYyk7ZT1lKGEsYyk7cmV0dXJuKHkoZCk/ZDowKS0oeShlKT9lOjApfSxcIipcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpKmUoYSxjKX0sXCIvXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKS9lKGEsYyl9LFwiJVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyklZShhLGMpfSxcIl5cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpXmUoYSxjKX0sXCI9XCI6RSxcIj09PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk9PT1lKGEsYyl9LFwiIT09XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSE9PWUoYSxjKX0sXCI9PVwiOmZ1bmN0aW9uKGEsXG5jLGQsZSl7cmV0dXJuIGQoYSxjKT09ZShhLGMpfSxcIiE9XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSE9ZShhLGMpfSxcIjxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPGUoYSxjKX0sXCI+XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKT5lKGEsYyl9LFwiPD1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPD1lKGEsYyl9LFwiPj1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPj1lKGEsYyl9LFwiJiZcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpJiZlKGEsYyl9LFwifHxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpfHxlKGEsYyl9LFwiJlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykmZShhLGMpfSxcInxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZShhLGMpKGEsYyxkKGEsYykpfSxcIiFcIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIWQoYSxjKX19LFJlPXtuOlwiXFxuXCIsZjpcIlxcZlwiLHI6XCJcXHJcIixcbnQ6XCJcXHRcIix2OlwiXFx2XCIsXCInXCI6XCInXCIsJ1wiJzonXCInfSxXYj1mdW5jdGlvbihhKXt0aGlzLm9wdGlvbnM9YX07V2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpXYixsZXg6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWE7dGhpcy5pbmRleD0wO3RoaXMuY2g9dDt0aGlzLmxhc3RDaD1cIjpcIjtmb3IodGhpcy50b2tlbnM9W107dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dGhpcy5jaD10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKHRoaXMuaXMoXCJcXFwiJ1wiKSl0aGlzLnJlYWRTdHJpbmcodGhpcy5jaCk7ZWxzZSBpZih0aGlzLmlzTnVtYmVyKHRoaXMuY2gpfHx0aGlzLmlzKFwiLlwiKSYmdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpdGhpcy5yZWFkTnVtYmVyKCk7ZWxzZSBpZih0aGlzLmlzSWRlbnQodGhpcy5jaCkpdGhpcy5yZWFkSWRlbnQoKTtlbHNlIGlmKHRoaXMuaXMoXCIoKXt9W10uLDs6P1wiKSl0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6dGhpcy5jaH0pLFxudGhpcy5pbmRleCsrO2Vsc2UgaWYodGhpcy5pc1doaXRlc3BhY2UodGhpcy5jaCkpe3RoaXMuaW5kZXgrKztjb250aW51ZX1lbHNle2E9dGhpcy5jaCt0aGlzLnBlZWsoKTt2YXIgYz1hK3RoaXMucGVlaygyKSxkPWdiW3RoaXMuY2hdLGU9Z2JbYV0sZj1nYltjXTtmPyh0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YyxmbjpmfSksdGhpcy5pbmRleCs9Myk6ZT8odGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OmEsZm46ZX0pLHRoaXMuaW5kZXgrPTIpOmQ/KHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNoLGZuOmR9KSx0aGlzLmluZGV4Kz0xKTp0aGlzLnRocm93RXJyb3IoXCJVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyIFwiLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKX10aGlzLmxhc3RDaD10aGlzLmNofXJldHVybiB0aGlzLnRva2Vuc30saXM6ZnVuY3Rpb24oYSl7cmV0dXJuLTEhPT1hLmluZGV4T2YodGhpcy5jaCl9LFxud2FzOmZ1bmN0aW9uKGEpe3JldHVybi0xIT09YS5pbmRleE9mKHRoaXMubGFzdENoKX0scGVlazpmdW5jdGlvbihhKXthPWF8fDE7cmV0dXJuIHRoaXMuaW5kZXgrYTx0aGlzLnRleHQubGVuZ3RoP3RoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCthKTohMX0saXNOdW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuXCIwXCI8PWEmJlwiOVwiPj1hfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuXCIgXCI9PT1hfHxcIlxcclwiPT09YXx8XCJcXHRcIj09PWF8fFwiXFxuXCI9PT1hfHxcIlxcdlwiPT09YXx8XCJcXHUwMGEwXCI9PT1hfSxpc0lkZW50OmZ1bmN0aW9uKGEpe3JldHVyblwiYVwiPD1hJiZcInpcIj49YXx8XCJBXCI8PWEmJlwiWlwiPj1hfHxcIl9cIj09PWF8fFwiJFwiPT09YX0saXNFeHBPcGVyYXRvcjpmdW5jdGlvbihhKXtyZXR1cm5cIi1cIj09PWF8fFwiK1wiPT09YXx8dGhpcy5pc051bWJlcihhKX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGMsZCl7ZD1kfHx0aGlzLmluZGV4O2M9eShjKT9cInMgXCIrYytcIi1cIit0aGlzLmluZGV4K1wiIFtcIitcbnRoaXMudGV4dC5zdWJzdHJpbmcoYyxkKStcIl1cIjpcIiBcIitkO3Rocm93IGxhKFwibGV4ZXJyXCIsYSxjLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYz10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPUsodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBlPXRoaXMucGVlaygpO2lmKFwiZVwiPT1kJiZ0aGlzLmlzRXhwT3BlcmF0b3IoZSkpYSs9ZDtlbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihkKSYmZSYmdGhpcy5pc051bWJlcihlKSYmXCJlXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpKWErPWQ7ZWxzZSBpZighdGhpcy5pc0V4cE9wZXJhdG9yKGQpfHxlJiZ0aGlzLmlzTnVtYmVyKGUpfHxcImVcIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkpYnJlYWs7ZWxzZSB0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIGV4cG9uZW50XCIpfXRoaXMuaW5kZXgrK31hKj1cbjE7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmEsbGl0ZXJhbDohMCxjb25zdGFudDohMCxmbjpmdW5jdGlvbigpe3JldHVybiBhfX0pfSxyZWFkSWRlbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcyxjPVwiXCIsZD10aGlzLmluZGV4LGUsZixnLGs7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7az10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKFwiLlwiPT09a3x8dGhpcy5pc0lkZW50KGspfHx0aGlzLmlzTnVtYmVyKGspKVwiLlwiPT09ayYmKGU9dGhpcy5pbmRleCksYys9aztlbHNlIGJyZWFrO3RoaXMuaW5kZXgrK31pZihlKWZvcihmPXRoaXMuaW5kZXg7Zjx0aGlzLnRleHQubGVuZ3RoOyl7az10aGlzLnRleHQuY2hhckF0KGYpO2lmKFwiKFwiPT09ayl7Zz1jLnN1YnN0cihlLWQrMSk7Yz1jLnN1YnN0cigwLGUtZCk7dGhpcy5pbmRleD1mO2JyZWFrfWlmKHRoaXMuaXNXaGl0ZXNwYWNlKGspKWYrKztlbHNlIGJyZWFrfWQ9e2luZGV4OmQsdGV4dDpjfTtpZihnYi5oYXNPd25Qcm9wZXJ0eShjKSlkLmZuPVxuZ2JbY10sZC5saXRlcmFsPSEwLGQuY29uc3RhbnQ9ITA7ZWxzZXt2YXIgbT1FYyhjLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO2QuZm49RChmdW5jdGlvbihhLGMpe3JldHVybiBtKGEsYyl9LHthc3NpZ246ZnVuY3Rpb24oZCxlKXtyZXR1cm4gdWIoZCxjLGUsYS50ZXh0LGEub3B0aW9ucyl9fSl9dGhpcy50b2tlbnMucHVzaChkKTtnJiYodGhpcy50b2tlbnMucHVzaCh7aW5kZXg6ZSx0ZXh0OlwiLlwifSksdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6ZSsxLHRleHQ6Z30pKX0scmVhZFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4O3RoaXMuaW5kZXgrKztmb3IodmFyIGQ9XCJcIixlPWEsZj0hMTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgZz10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLGU9ZStnO2lmKGYpXCJ1XCI9PT1nPyhmPXRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCsxLHRoaXMuaW5kZXgrNSksZi5tYXRjaCgvW1xcZGEtZl17NH0vaSl8fFxudGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHVcIitmK1wiXVwiKSx0aGlzLmluZGV4Kz00LGQrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZiwxNikpKTpkKz1SZVtnXXx8ZyxmPSExO2Vsc2UgaWYoXCJcXFxcXCI9PT1nKWY9ITA7ZWxzZXtpZihnPT09YSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OmMsdGV4dDplLHN0cmluZzpkLGxpdGVyYWw6ITAsY29uc3RhbnQ6ITAsZm46ZnVuY3Rpb24oKXtyZXR1cm4gZH19KTtyZXR1cm59ZCs9Z310aGlzLmluZGV4Kyt9dGhpcy50aHJvd0Vycm9yKFwiVW50ZXJtaW5hdGVkIHF1b3RlXCIsYyl9fTt2YXIgZmI9ZnVuY3Rpb24oYSxjLGQpe3RoaXMubGV4ZXI9YTt0aGlzLiRmaWx0ZXI9Yzt0aGlzLm9wdGlvbnM9ZH07ZmIuWkVSTz1EKGZ1bmN0aW9uKCl7cmV0dXJuIDB9LHtjb25zdGFudDohMH0pO2ZiLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZmIscGFyc2U6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PVxuYTt0aGlzLnRva2Vucz10aGlzLmxleGVyLmxleChhKTthPXRoaXMuc3RhdGVtZW50cygpOzAhPT10aGlzLnRva2Vucy5sZW5ndGgmJnRoaXMudGhyb3dFcnJvcihcImlzIGFuIHVuZXhwZWN0ZWQgdG9rZW5cIix0aGlzLnRva2Vuc1swXSk7YS5saXRlcmFsPSEhYS5saXRlcmFsO2EuY29uc3RhbnQ9ISFhLmNvbnN0YW50O3JldHVybiBhfSxwcmltYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7aWYodGhpcy5leHBlY3QoXCIoXCIpKWE9dGhpcy5maWx0ZXJDaGFpbigpLHRoaXMuY29uc3VtZShcIilcIik7ZWxzZSBpZih0aGlzLmV4cGVjdChcIltcIikpYT10aGlzLmFycmF5RGVjbGFyYXRpb24oKTtlbHNlIGlmKHRoaXMuZXhwZWN0KFwie1wiKSlhPXRoaXMub2JqZWN0KCk7ZWxzZXt2YXIgYz10aGlzLmV4cGVjdCgpOyhhPWMuZm4pfHx0aGlzLnRocm93RXJyb3IoXCJub3QgYSBwcmltYXJ5IGV4cHJlc3Npb25cIixjKTthLmxpdGVyYWw9ISFjLmxpdGVyYWw7YS5jb25zdGFudD0hIWMuY29uc3RhbnR9Zm9yKHZhciBkO2M9XG50aGlzLmV4cGVjdChcIihcIixcIltcIixcIi5cIik7KVwiKFwiPT09Yy50ZXh0PyhhPXRoaXMuZnVuY3Rpb25DYWxsKGEsZCksZD1udWxsKTpcIltcIj09PWMudGV4dD8oZD1hLGE9dGhpcy5vYmplY3RJbmRleChhKSk6XCIuXCI9PT1jLnRleHQ/KGQ9YSxhPXRoaXMuZmllbGRBY2Nlc3MoYSkpOnRoaXMudGhyb3dFcnJvcihcIklNUE9TU0lCTEVcIik7cmV0dXJuIGF9LHRocm93RXJyb3I6ZnVuY3Rpb24oYSxjKXt0aHJvdyBsYShcInN5bnRheFwiLGMudGV4dCxhLGMuaW5kZXgrMSx0aGlzLnRleHQsdGhpcy50ZXh0LnN1YnN0cmluZyhjLmluZGV4KSk7fSxwZWVrVG9rZW46ZnVuY3Rpb24oKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IGxhKFwidWVvZVwiLHRoaXMudGV4dCk7cmV0dXJuIHRoaXMudG9rZW5zWzBdfSxwZWVrOmZ1bmN0aW9uKGEsYyxkLGUpe2lmKDA8dGhpcy50b2tlbnMubGVuZ3RoKXt2YXIgZj10aGlzLnRva2Vuc1swXSxnPWYudGV4dDtpZihnPT09YXx8Zz09PWN8fGc9PT1kfHxnPT09XG5lfHwhKGF8fGN8fGR8fGUpKXJldHVybiBmfXJldHVybiExfSxleHBlY3Q6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuKGE9dGhpcy5wZWVrKGEsYyxkLGUpKT8odGhpcy50b2tlbnMuc2hpZnQoKSxhKTohMX0sY29uc3VtZTpmdW5jdGlvbihhKXt0aGlzLmV4cGVjdChhKXx8dGhpcy50aHJvd0Vycm9yKFwiaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFtcIithK1wiXVwiLHRoaXMucGVlaygpKX0sdW5hcnlGbjpmdW5jdGlvbihhLGMpe3JldHVybiBEKGZ1bmN0aW9uKGQsZSl7cmV0dXJuIGEoZCxlLGMpfSx7Y29uc3RhbnQ6Yy5jb25zdGFudH0pfSx0ZXJuYXJ5Rm46ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBEKGZ1bmN0aW9uKGUsZil7cmV0dXJuIGEoZSxmKT9jKGUsZik6ZChlLGYpfSx7Y29uc3RhbnQ6YS5jb25zdGFudCYmYy5jb25zdGFudCYmZC5jb25zdGFudH0pfSxiaW5hcnlGbjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIEQoZnVuY3Rpb24oZSxmKXtyZXR1cm4gYyhlLGYsYSxkKX0se2NvbnN0YW50OmEuY29uc3RhbnQmJlxuZC5jb25zdGFudH0pfSxzdGF0ZW1lbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdOzspaWYoMDx0aGlzLnRva2Vucy5sZW5ndGgmJiF0aGlzLnBlZWsoXCJ9XCIsXCIpXCIsXCI7XCIsXCJdXCIpJiZhLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKSwhdGhpcy5leHBlY3QoXCI7XCIpKXJldHVybiAxPT09YS5sZW5ndGg/YVswXTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgZSxmPTA7ZjxhLmxlbmd0aDtmKyspe3ZhciBnPWFbZl07ZyYmKGU9ZyhjLGQpKX1yZXR1cm4gZX19LGZpbHRlckNoYWluOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXhwcmVzc2lvbigpLGM7OylpZihjPXRoaXMuZXhwZWN0KFwifFwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMuZmlsdGVyKCkpO2Vsc2UgcmV0dXJuIGF9LGZpbHRlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV4cGVjdCgpLGM9dGhpcy4kZmlsdGVyKGEudGV4dCksZD1bXTs7KWlmKGE9dGhpcy5leHBlY3QoXCI6XCIpKWQucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7XG5lbHNle3ZhciBlPWZ1bmN0aW9uKGEsZSxrKXtrPVtrXTtmb3IodmFyIG09MDttPGQubGVuZ3RoO20rKylrLnB1c2goZFttXShhLGUpKTtyZXR1cm4gYy5hcHBseShhLGspfTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19fSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCksYyxkO3JldHVybihkPXRoaXMuZXhwZWN0KFwiPVwiKSk/KGEuYXNzaWdufHx0aGlzLnRocm93RXJyb3IoXCJpbXBsaWVzIGFzc2lnbm1lbnQgYnV0IFtcIit0aGlzLnRleHQuc3Vic3RyaW5nKDAsZC5pbmRleCkrXCJdIGNhbiBub3QgYmUgYXNzaWduZWQgdG9cIixkKSxjPXRoaXMudGVybmFyeSgpLGZ1bmN0aW9uKGQsZil7cmV0dXJuIGEuYXNzaWduKGQsYyhkLGYpLGYpfSk6YX0sdGVybmFyeTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubG9naWNhbE9SKCksYyxkO2lmKHRoaXMuZXhwZWN0KFwiP1wiKSl7Yz10aGlzLmFzc2lnbm1lbnQoKTtcbmlmKGQ9dGhpcy5leHBlY3QoXCI6XCIpKXJldHVybiB0aGlzLnRlcm5hcnlGbihhLGMsdGhpcy5hc3NpZ25tZW50KCkpO3RoaXMudGhyb3dFcnJvcihcImV4cGVjdGVkIDpcIixkKX1lbHNlIHJldHVybiBhfSxsb2dpY2FsT1I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5sb2dpY2FsQU5EKCksYzs7KWlmKGM9dGhpcy5leHBlY3QoXCJ8fFwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMubG9naWNhbEFORCgpKTtlbHNlIHJldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lcXVhbGl0eSgpLGM7aWYoYz10aGlzLmV4cGVjdChcIiYmXCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5sb2dpY2FsQU5EKCkpO3JldHVybiBhfSxlcXVhbGl0eTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVsYXRpb25hbCgpLGM7aWYoYz10aGlzLmV4cGVjdChcIj09XCIsXCIhPVwiLFwiPT09XCIsXCIhPT1cIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLmVxdWFsaXR5KCkpO3JldHVybiBhfSxcbnJlbGF0aW9uYWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmFkZGl0aXZlKCksYztpZihjPXRoaXMuZXhwZWN0KFwiPFwiLFwiPlwiLFwiPD1cIixcIj49XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5yZWxhdGlvbmFsKCkpO3JldHVybiBhfSxhZGRpdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm11bHRpcGxpY2F0aXZlKCksYztjPXRoaXMuZXhwZWN0KFwiK1wiLFwiLVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLm11bHRpcGxpY2F0aXZlKCkpO3JldHVybiBhfSxtdWx0aXBsaWNhdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnVuYXJ5KCksYztjPXRoaXMuZXhwZWN0KFwiKlwiLFwiL1wiLFwiJVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLnVuYXJ5KCkpO3JldHVybiBhfSx1bmFyeTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiB0aGlzLmV4cGVjdChcIitcIik/dGhpcy5wcmltYXJ5KCk6KGE9dGhpcy5leHBlY3QoXCItXCIpKT90aGlzLmJpbmFyeUZuKGZiLlpFUk8sYS5mbixcbnRoaXMudW5hcnkoKSk6KGE9dGhpcy5leHBlY3QoXCIhXCIpKT90aGlzLnVuYXJ5Rm4oYS5mbix0aGlzLnVuYXJ5KCkpOnRoaXMucHJpbWFyeSgpfSxmaWVsZEFjY2VzczpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGQ9dGhpcy5leHBlY3QoKS50ZXh0LGU9RWMoZCx0aGlzLm9wdGlvbnMsdGhpcy50ZXh0KTtyZXR1cm4gRChmdW5jdGlvbihjLGQsayl7cmV0dXJuIGUoa3x8YShjLGQpKX0se2Fzc2lnbjpmdW5jdGlvbihlLGcsayl7KGs9YShlLGspKXx8YS5hc3NpZ24oZSxrPXt9KTtyZXR1cm4gdWIoayxkLGcsYy50ZXh0LGMub3B0aW9ucyl9fSl9LG9iamVjdEluZGV4OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD10aGlzLmV4cHJlc3Npb24oKTt0aGlzLmNvbnN1bWUoXCJdXCIpO3JldHVybiBEKGZ1bmN0aW9uKGUsZil7dmFyIGc9YShlLGYpLGs9ZChlLGYpLG07a2EoayxjLnRleHQpO2lmKCFnKXJldHVybiB0OyhnPXZhKGdba10sYy50ZXh0KSkmJihnLnRoZW4mJmMub3B0aW9ucy51bndyYXBQcm9taXNlcykmJlxuKG09ZyxcIiQkdlwiaW4gZ3x8KG0uJCR2PXQsbS50aGVuKGZ1bmN0aW9uKGEpe20uJCR2PWF9KSksZz1nLiQkdik7cmV0dXJuIGd9LHthc3NpZ246ZnVuY3Rpb24oZSxmLGcpe3ZhciBrPWthKGQoZSxnKSxjLnRleHQpOyhnPXZhKGEoZSxnKSxjLnRleHQpKXx8YS5hc3NpZ24oZSxnPXt9KTtyZXR1cm4gZ1trXT1mfX0pfSxmdW5jdGlvbkNhbGw6ZnVuY3Rpb24oYSxjKXt2YXIgZD1bXTtpZihcIilcIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG8gZC5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTt3aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIilcIik7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oZixnKXtmb3IodmFyIGs9W10sbT1jP2MoZixnKTpmLGg9MDtoPGQubGVuZ3RoO2grKylrLnB1c2godmEoZFtoXShmLGcpLGUudGV4dCkpO2g9YShmLGcsbSl8fEU7dmEobSxlLnRleHQpO3ZhciBsPWUudGV4dDtpZihoKXtpZihoLmNvbnN0cnVjdG9yPT09aCl0aHJvdyBsYShcImlzZWNmblwiLFxubCk7aWYoaD09PVBlfHxoPT09UWV8fFFjJiZoPT09UWMpdGhyb3cgbGEoXCJpc2VjZmZcIixsKTt9az1oLmFwcGx5P2guYXBwbHkobSxrKTpoKGtbMF0sa1sxXSxrWzJdLGtbM10sa1s0XSk7cmV0dXJuIHZhKGssZS50ZXh0KX19LGFycmF5RGVjbGFyYXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bXSxjPSEwO2lmKFwiXVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoXCJdXCIpKWJyZWFrO3ZhciBkPXRoaXMuZXhwcmVzc2lvbigpO2EucHVzaChkKTtkLmNvbnN0YW50fHwoYz0hMSl9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCJdXCIpO3JldHVybiBEKGZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBnPVtdLGs9MDtrPGEubGVuZ3RoO2srKylnLnB1c2goYVtrXShjLGQpKTtyZXR1cm4gZ30se2xpdGVyYWw6ITAsY29uc3RhbnQ6Y30pfSxvYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1bXSxjPSEwO2lmKFwifVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoXCJ9XCIpKWJyZWFrO1xudmFyIGQ9dGhpcy5leHBlY3QoKSxkPWQuc3RyaW5nfHxkLnRleHQ7dGhpcy5jb25zdW1lKFwiOlwiKTt2YXIgZT10aGlzLmV4cHJlc3Npb24oKTthLnB1c2goe2tleTpkLHZhbHVlOmV9KTtlLmNvbnN0YW50fHwoYz0hMSl9d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKX10aGlzLmNvbnN1bWUoXCJ9XCIpO3JldHVybiBEKGZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBlPXt9LG09MDttPGEubGVuZ3RoO20rKyl7dmFyIGg9YVttXTtlW2gua2V5XT1oLnZhbHVlKGMsZCl9cmV0dXJuIGV9LHtsaXRlcmFsOiEwLGNvbnN0YW50OmN9KX19O3ZhciBWYj17fSx4YT1DKFwiJHNjZVwiKSxnYT17SFRNTDpcImh0bWxcIixDU1M6XCJjc3NcIixVUkw6XCJ1cmxcIixSRVNPVVJDRV9VUkw6XCJyZXNvdXJjZVVybFwiLEpTOlwianNcIn0sWT1YLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLEhjPXVhKFcubG9jYXRpb24uaHJlZiwhMCk7bWMuJGluamVjdD1bXCIkcHJvdmlkZVwiXTtJYy4kaW5qZWN0PVtcIiRsb2NhbGVcIl07S2MuJGluamVjdD1bXCIkbG9jYWxlXCJdO1xudmFyIE5jPVwiLlwiLEplPXt5eXl5OiQoXCJGdWxsWWVhclwiLDQpLHl5OiQoXCJGdWxsWWVhclwiLDIsMCwhMCkseTokKFwiRnVsbFllYXJcIiwxKSxNTU1NOnZiKFwiTW9udGhcIiksTU1NOnZiKFwiTW9udGhcIiwhMCksTU06JChcIk1vbnRoXCIsMiwxKSxNOiQoXCJNb250aFwiLDEsMSksZGQ6JChcIkRhdGVcIiwyKSxkOiQoXCJEYXRlXCIsMSksSEg6JChcIkhvdXJzXCIsMiksSDokKFwiSG91cnNcIiwxKSxoaDokKFwiSG91cnNcIiwyLC0xMiksaDokKFwiSG91cnNcIiwxLC0xMiksbW06JChcIk1pbnV0ZXNcIiwyKSxtOiQoXCJNaW51dGVzXCIsMSksc3M6JChcIlNlY29uZHNcIiwyKSxzOiQoXCJTZWNvbmRzXCIsMSksc3NzOiQoXCJNaWxsaXNlY29uZHNcIiwzKSxFRUVFOnZiKFwiRGF5XCIpLEVFRTp2YihcIkRheVwiLCEwKSxhOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIDEyPmEuZ2V0SG91cnMoKT9jLkFNUE1TWzBdOmMuQU1QTVNbMV19LFo6ZnVuY3Rpb24oYSl7YT0tMSphLmdldFRpbWV6b25lT2Zmc2V0KCk7cmV0dXJuIGE9KDA8PWE/XCIrXCI6XCJcIikrKFhiKE1hdGhbMDxcbmE/XCJmbG9vclwiOlwiY2VpbFwiXShhLzYwKSwyKStYYihNYXRoLmFicyhhJTYwKSwyKSl9fSxJZT0vKCg/OlteeU1kSGhtc2FaRSddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfGQrfEgrfGgrfG0rfHMrfGF8WikpKC4qKS8sSGU9L15cXC0/XFxkKyQvO0pjLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTt2YXIgRmU9YmEoSyksR2U9YmEoSWEpO0xjLiRpbmplY3Q9W1wiJHBhcnNlXCJdO3ZhciBkZD1iYSh7cmVzdHJpY3Q6XCJFXCIsY29tcGlsZTpmdW5jdGlvbihhLGMpezg+PVEmJihjLmhyZWZ8fGMubmFtZXx8Yy4kc2V0KFwiaHJlZlwiLFwiXCIpLGEuYXBwZW5kKFguY3JlYXRlQ29tbWVudChcIklFIGZpeFwiKSkpO2lmKCFjLmhyZWYmJiFjLnhsaW5rSHJlZiYmIWMubmFtZSlyZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZj1cIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT16YS5jYWxsKGMucHJvcChcImhyZWZcIikpP1wieGxpbms6aHJlZlwiOlwiaHJlZlwiO2Mub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2MuYXR0cihmKXx8XG5hLnByZXZlbnREZWZhdWx0KCl9KX19fSksRmI9e307cihxYixmdW5jdGlvbihhLGMpe2lmKFwibXVsdGlwbGVcIiE9YSl7dmFyIGQ9cGEoXCJuZy1cIitjKTtGYltkXT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eToxMDAsbGluazpmdW5jdGlvbihhLGYsZyl7YS4kd2F0Y2goZ1tkXSxmdW5jdGlvbihhKXtnLiRzZXQoYywhIWEpfSl9fX19fSk7cihbXCJzcmNcIixcInNyY3NldFwiLFwiaHJlZlwiXSxmdW5jdGlvbihhKXt2YXIgYz1wYShcIm5nLVwiK2EpO0ZiW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBnPWEsaz1hO1wiaHJlZlwiPT09YSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09emEuY2FsbChlLnByb3AoXCJocmVmXCIpKSYmKGs9XCJ4bGlua0hyZWZcIixmLiRhdHRyW2tdPVwieGxpbms6aHJlZlwiLGc9bnVsbCk7Zi4kb2JzZXJ2ZShjLGZ1bmN0aW9uKGMpe2M/KGYuJHNldChrLGMpLFEmJmcmJmUucHJvcChnLGZba10pKTpcImhyZWZcIj09PVxuYSYmZi4kc2V0KGssbnVsbCl9KX19fX0pO3ZhciB5Yj17JGFkZENvbnRyb2w6RSwkcmVtb3ZlQ29udHJvbDpFLCRzZXRWYWxpZGl0eTpFLCRzZXREaXJ0eTpFLCRzZXRQcmlzdGluZTpFfTtPYy4kaW5qZWN0PVtcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcIiRzY29wZVwiLFwiJGFuaW1hdGVcIl07dmFyIFJjPWZ1bmN0aW9uKGEpe3JldHVybltcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYyl7cmV0dXJue25hbWU6XCJmb3JtXCIscmVzdHJpY3Q6YT9cIkVBQ1wiOlwiRVwiLGNvbnRyb2xsZXI6T2MsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxlLGYsZyl7aWYoIWYuYWN0aW9uKXt2YXIgaz1mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExfTtzYihlWzBdLFwic3VibWl0XCIsayk7ZS5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjKGZ1bmN0aW9uKCl7JGEoZVswXSxcInN1Ym1pdFwiLGspfSwwLCExKX0pfXZhciBtPWUucGFyZW50KCkuY29udHJvbGxlcihcImZvcm1cIiksXG5oPWYubmFtZXx8Zi5uZ0Zvcm07aCYmdWIoYSxoLGcsaCk7aWYobSllLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe20uJHJlbW92ZUNvbnRyb2woZyk7aCYmdWIoYSxoLHQsaCk7RChnLHliKX0pfX19fX1dfSxlZD1SYygpLHJkPVJjKCEwKSxTZT0vXihmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8kLyxUZT0vXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaSxVZT0vXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKVxccyokLyxTYz17dGV4dDpBYixudW1iZXI6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe0FiKGEsYyxkLGUsZixnKTtlLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7dmFyIGM9ZS4kaXNFbXB0eShhKTtpZihjfHxVZS50ZXN0KGEpKXJldHVybiBlLiRzZXRWYWxpZGl0eShcIm51bWJlclwiLFxuITApLFwiXCI9PT1hP251bGw6Yz9hOnBhcnNlRmxvYXQoYSk7ZS4kc2V0VmFsaWRpdHkoXCJudW1iZXJcIiwhMSk7cmV0dXJuIHR9KTtLZShlLFwibnVtYmVyXCIsVmUsbnVsbCxlLiQkdmFsaWRpdHlTdGF0ZSk7ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpP1wiXCI6XCJcIithfSk7ZC5taW4mJihhPWZ1bmN0aW9uKGEpe3ZhciBjPXBhcnNlRmxvYXQoZC5taW4pO3JldHVybiBzYShlLFwibWluXCIsZS4kaXNFbXB0eShhKXx8YT49YyxhKX0sZS4kcGFyc2Vycy5wdXNoKGEpLGUuJGZvcm1hdHRlcnMucHVzaChhKSk7ZC5tYXgmJihhPWZ1bmN0aW9uKGEpe3ZhciBjPXBhcnNlRmxvYXQoZC5tYXgpO3JldHVybiBzYShlLFwibWF4XCIsZS4kaXNFbXB0eShhKXx8YTw9YyxhKX0sZS4kcGFyc2Vycy5wdXNoKGEpLGUuJGZvcm1hdHRlcnMucHVzaChhKSk7ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBzYShlLFwibnVtYmVyXCIsZS4kaXNFbXB0eShhKXx8XG5pYihhKSxhKX0pfSx1cmw6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe0FiKGEsYyxkLGUsZixnKTthPWZ1bmN0aW9uKGEpe3JldHVybiBzYShlLFwidXJsXCIsZS4kaXNFbXB0eShhKXx8U2UudGVzdChhKSxhKX07ZS4kZm9ybWF0dGVycy5wdXNoKGEpO2UuJHBhcnNlcnMucHVzaChhKX0sZW1haWw6ZnVuY3Rpb24oYSxjLGQsZSxmLGcpe0FiKGEsYyxkLGUsZixnKTthPWZ1bmN0aW9uKGEpe3JldHVybiBzYShlLFwiZW1haWxcIixlLiRpc0VtcHR5KGEpfHxUZS50ZXN0KGEpLGEpfTtlLiRmb3JtYXR0ZXJzLnB1c2goYSk7ZS4kcGFyc2Vycy5wdXNoKGEpfSxyYWRpbzpmdW5jdGlvbihhLGMsZCxlKXt4KGQubmFtZSkmJmMuYXR0cihcIm5hbWVcIixoYigpKTtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2NbMF0uY2hlY2tlZCYmYS4kYXBwbHkoZnVuY3Rpb24oKXtlLiRzZXRWaWV3VmFsdWUoZC52YWx1ZSl9KX0pO2UuJHJlbmRlcj1mdW5jdGlvbigpe2NbMF0uY2hlY2tlZD1kLnZhbHVlPT1lLiR2aWV3VmFsdWV9O1xuZC4kb2JzZXJ2ZShcInZhbHVlXCIsZS4kcmVuZGVyKX0sY2hlY2tib3g6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9ZC5uZ1RydWVWYWx1ZSxnPWQubmdGYWxzZVZhbHVlO3YoZil8fChmPSEwKTt2KGcpfHwoZz0hMSk7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe2UuJHNldFZpZXdWYWx1ZShjWzBdLmNoZWNrZWQpfSl9KTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtjWzBdLmNoZWNrZWQ9ZS4kdmlld1ZhbHVlfTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiBhIT09Zn07ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Zn0pO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYT9mOmd9KX0saGlkZGVuOkUsYnV0dG9uOkUsc3VibWl0OkUscmVzZXQ6RSxmaWxlOkV9LFZlPVtcImJhZElucHV0XCJdLGpjPVtcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLGZ1bmN0aW9uKGEsYyl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6XCI/bmdNb2RlbFwiLFxubGluazpmdW5jdGlvbihkLGUsZixnKXtnJiYoU2NbSyhmLnR5cGUpXXx8U2MudGV4dCkoZCxlLGYsZyxjLGEpfX19XSx3Yj1cIm5nLXZhbGlkXCIseGI9XCJuZy1pbnZhbGlkXCIsT2E9XCJuZy1wcmlzdGluZVwiLHpiPVwibmctZGlydHlcIixXZT1bXCIkc2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkYXR0cnNcIixcIiRlbGVtZW50XCIsXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxjLGQsZSxmLGcpe2Z1bmN0aW9uIGsoYSxjKXtjPWM/XCItXCIrbWIoYyxcIi1cIik6XCJcIjtnLnJlbW92ZUNsYXNzKGUsKGE/eGI6d2IpK2MpO2cuYWRkQ2xhc3MoZSwoYT93Yjp4YikrYyl9dGhpcy4kbW9kZWxWYWx1ZT10aGlzLiR2aWV3VmFsdWU9TnVtYmVyLk5hTjt0aGlzLiRwYXJzZXJzPVtdO3RoaXMuJGZvcm1hdHRlcnM9W107dGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycz1bXTt0aGlzLiRwcmlzdGluZT0hMDt0aGlzLiRkaXJ0eT0hMTt0aGlzLiR2YWxpZD0hMDt0aGlzLiRpbnZhbGlkPSExO3RoaXMuJG5hbWU9XG5kLm5hbWU7dmFyIG09ZihkLm5nTW9kZWwpLGg9bS5hc3NpZ247aWYoIWgpdGhyb3cgQyhcIm5nTW9kZWxcIikoXCJub25hc3NpZ25cIixkLm5nTW9kZWwsaWEoZSkpO3RoaXMuJHJlbmRlcj1FO3RoaXMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIHgoYSl8fFwiXCI9PT1hfHxudWxsPT09YXx8YSE9PWF9O3ZhciBsPWUuaW5oZXJpdGVkRGF0YShcIiRmb3JtQ29udHJvbGxlclwiKXx8eWIsbj0wLHA9dGhpcy4kZXJyb3I9e307ZS5hZGRDbGFzcyhPYSk7ayghMCk7dGhpcy4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24oYSxjKXtwW2FdIT09IWMmJihjPyhwW2FdJiZuLS0sbnx8KGsoITApLHRoaXMuJHZhbGlkPSEwLHRoaXMuJGludmFsaWQ9ITEpKTooayghMSksdGhpcy4kaW52YWxpZD0hMCx0aGlzLiR2YWxpZD0hMSxuKyspLHBbYV09IWMsayhjLGEpLGwuJHNldFZhbGlkaXR5KGEsYyx0aGlzKSl9O3RoaXMuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7dGhpcy4kZGlydHk9ITE7dGhpcy4kcHJpc3RpbmU9XG4hMDtnLnJlbW92ZUNsYXNzKGUsemIpO2cuYWRkQ2xhc3MoZSxPYSl9O3RoaXMuJHNldFZpZXdWYWx1ZT1mdW5jdGlvbihkKXt0aGlzLiR2aWV3VmFsdWU9ZDt0aGlzLiRwcmlzdGluZSYmKHRoaXMuJGRpcnR5PSEwLHRoaXMuJHByaXN0aW5lPSExLGcucmVtb3ZlQ2xhc3MoZSxPYSksZy5hZGRDbGFzcyhlLHpiKSxsLiRzZXREaXJ0eSgpKTtyKHRoaXMuJHBhcnNlcnMsZnVuY3Rpb24oYSl7ZD1hKGQpfSk7dGhpcy4kbW9kZWxWYWx1ZSE9PWQmJih0aGlzLiRtb2RlbFZhbHVlPWQsaChhLGQpLHIodGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyxmdW5jdGlvbihhKXt0cnl7YSgpfWNhdGNoKGQpe2MoZCl9fSkpfTt2YXIgcT10aGlzO2EuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGM9bShhKTtpZihxLiRtb2RlbFZhbHVlIT09Yyl7dmFyIGQ9cS4kZm9ybWF0dGVycyxlPWQubGVuZ3RoO2ZvcihxLiRtb2RlbFZhbHVlPWM7ZS0tOyljPWRbZV0oYyk7cS4kdmlld1ZhbHVlIT09YyYmKHEuJHZpZXdWYWx1ZT1cbmMscS4kcmVuZGVyKCkpfXJldHVybiBjfSl9XSxHZD1mdW5jdGlvbigpe3JldHVybntyZXF1aXJlOltcIm5nTW9kZWxcIixcIl4/Zm9ybVwiXSxjb250cm9sbGVyOldlLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9ZVswXSxnPWVbMV18fHliO2cuJGFkZENvbnRyb2woZik7YS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zy4kcmVtb3ZlQ29udHJvbChmKX0pfX19LElkPWJhKHtyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7ZS4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7YS4kZXZhbChkLm5nQ2hhbmdlKX0pfX0pLGtjPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7ZC5yZXF1aXJlZD0hMDt2YXIgZj1mdW5jdGlvbihhKXtpZihkLnJlcXVpcmVkJiZlLiRpc0VtcHR5KGEpKWUuJHNldFZhbGlkaXR5KFwicmVxdWlyZWRcIiwhMSk7ZWxzZSByZXR1cm4gZS4kc2V0VmFsaWRpdHkoXCJyZXF1aXJlZFwiLFxuITApLGF9O2UuJGZvcm1hdHRlcnMucHVzaChmKTtlLiRwYXJzZXJzLnVuc2hpZnQoZik7ZC4kb2JzZXJ2ZShcInJlcXVpcmVkXCIsZnVuY3Rpb24oKXtmKGUuJHZpZXdWYWx1ZSl9KX19fX0sSGQ9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPShhPS9cXC8oLiopXFwvLy5leGVjKGQubmdMaXN0KSkmJlJlZ0V4cChhWzFdKXx8ZC5uZ0xpc3R8fFwiLFwiO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtpZigheChhKSl7dmFyIGM9W107YSYmcihhLnNwbGl0KGYpLGZ1bmN0aW9uKGEpe2EmJmMucHVzaChhYShhKSl9KTtyZXR1cm4gY319KTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIEooYSk/YS5qb2luKFwiLCBcIik6dH0pO2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fCFhLmxlbmd0aH19fX0sWGU9L14odHJ1ZXxmYWxzZXxcXGQrKSQvLEpkPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxcbmNvbXBpbGU6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gWGUudGVzdChjLm5nVmFsdWUpP2Z1bmN0aW9uKGEsYyxmKXtmLiRzZXQoXCJ2YWx1ZVwiLGEuJGV2YWwoZi5uZ1ZhbHVlKSl9OmZ1bmN0aW9uKGEsYyxmKXthLiR3YXRjaChmLm5nVmFsdWUsZnVuY3Rpb24oYSl7Zi4kc2V0KFwidmFsdWVcIixhKX0pfX19fSxqZD15YSh7Y29tcGlsZTpmdW5jdGlvbihhKXthLmFkZENsYXNzKFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oYSxkLGUpe2QuZGF0YShcIiRiaW5kaW5nXCIsZS5uZ0JpbmQpO2EuJHdhdGNoKGUubmdCaW5kLGZ1bmN0aW9uKGEpe2QudGV4dChhPT10P1wiXCI6YSl9KX19fSksbGQ9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtjPWEoZC5hdHRyKGUuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtkLmFkZENsYXNzKFwibmctYmluZGluZ1wiKS5kYXRhKFwiJGJpbmRpbmdcIixjKTtlLiRvYnNlcnZlKFwibmdCaW5kVGVtcGxhdGVcIixmdW5jdGlvbihhKXtkLnRleHQoYSl9KX19XSxcbmtkPVtcIiRzY2VcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYyl7cmV0dXJue2NvbXBpbGU6ZnVuY3Rpb24oZCl7ZC5hZGRDbGFzcyhcIm5nLWJpbmRpbmdcIik7cmV0dXJuIGZ1bmN0aW9uKGQsZixnKXtmLmRhdGEoXCIkYmluZGluZ1wiLGcubmdCaW5kSHRtbCk7dmFyIGs9YyhnLm5nQmluZEh0bWwpO2QuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuKGsoZCl8fFwiXCIpLnRvU3RyaW5nKCl9LGZ1bmN0aW9uKGMpe2YuaHRtbChhLmdldFRydXN0ZWRIdG1sKGsoZCkpfHxcIlwiKX0pfX19fV0sbWQ9WWIoXCJcIiwhMCksb2Q9WWIoXCJPZGRcIiwwKSxuZD1ZYihcIkV2ZW5cIiwxKSxwZD15YSh7Y29tcGlsZTpmdW5jdGlvbihhLGMpe2MuJHNldChcIm5nQ2xvYWtcIix0KTthLnJlbW92ZUNsYXNzKFwibmctY2xvYWtcIil9fSkscWQ9W2Z1bmN0aW9uKCl7cmV0dXJue3Njb3BlOiEwLGNvbnRyb2xsZXI6XCJAXCIscHJpb3JpdHk6NTAwfX1dLGxjPXt9LFllPXtibHVyOiEwLGZvY3VzOiEwfTtyKFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZVwiLnNwbGl0KFwiIFwiKSxcbmZ1bmN0aW9uKGEpe3ZhciBjPXBhKFwibmctXCIrYSk7bGNbY109W1wiJHBhcnNlXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oZCxlKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihmLGcpe3ZhciBrPWQoZ1tjXSk7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7ZC5vbihhLGZ1bmN0aW9uKGQpe3ZhciBmPWZ1bmN0aW9uKCl7ayhjLHskZXZlbnQ6ZH0pfTtZZVthXSYmZS4kJHBoYXNlP2MuJGV2YWxBc3luYyhmKTpjLiRhcHBseShmKX0pfX19fV19KTt2YXIgdGQ9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eTo2MDAsdGVybWluYWw6ITAscmVzdHJpY3Q6XCJBXCIsJCR0bGI6ITAsbGluazpmdW5jdGlvbihjLGQsZSxmLGcpe3ZhciBrLG0saDtjLiR3YXRjaChlLm5nSWYsZnVuY3Rpb24oZil7VWEoZik/bXx8KG09Yy4kbmV3KCksZyhtLGZ1bmN0aW9uKGMpe2NbYy5sZW5ndGgrK109WC5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ0lmOiBcIitlLm5nSWYrXG5cIiBcIik7az17Y2xvbmU6Y307YS5lbnRlcihjLGQucGFyZW50KCksZCl9KSk6KGgmJihoLnJlbW92ZSgpLGg9bnVsbCksbSYmKG0uJGRlc3Ryb3koKSxtPW51bGwpLGsmJihoPUViKGsuY2xvbmUpLGEubGVhdmUoaCxmdW5jdGlvbigpe2g9bnVsbH0pLGs9bnVsbCkpfSl9fX1dLHVkPVtcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGFuY2hvclNjcm9sbFwiLFwiJGFuaW1hdGVcIixcIiRzY2VcIixmdW5jdGlvbihhLGMsZCxlLGYpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLHByaW9yaXR5OjQwMCx0ZXJtaW5hbDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbnRyb2xsZXI6VmEubm9vcCxjb21waWxlOmZ1bmN0aW9uKGcsayl7dmFyIG09ay5uZ0luY2x1ZGV8fGsuc3JjLGg9ay5vbmxvYWR8fFwiXCIsbD1rLmF1dG9zY3JvbGw7cmV0dXJuIGZ1bmN0aW9uKGcsayxxLHIsRil7dmFyIHU9MCx0LHcsUix6PWZ1bmN0aW9uKCl7dyYmKHcucmVtb3ZlKCksdz1udWxsKTt0JiYodC4kZGVzdHJveSgpLHQ9bnVsbCk7XG5SJiYoZS5sZWF2ZShSLGZ1bmN0aW9uKCl7dz1udWxsfSksdz1SLFI9bnVsbCl9O2cuJHdhdGNoKGYucGFyc2VBc1Jlc291cmNlVXJsKG0pLGZ1bmN0aW9uKGYpe3ZhciBtPWZ1bmN0aW9uKCl7IXkobCl8fGwmJiFnLiRldmFsKGwpfHxkKCl9LHE9Kyt1O2Y/KGEuZ2V0KGYse2NhY2hlOmN9KS5zdWNjZXNzKGZ1bmN0aW9uKGEpe2lmKHE9PT11KXt2YXIgYz1nLiRuZXcoKTtyLnRlbXBsYXRlPWE7YT1GKGMsZnVuY3Rpb24oYSl7eigpO2UuZW50ZXIoYSxudWxsLGssbSl9KTt0PWM7Uj1hO3QuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRMb2FkZWRcIik7Zy4kZXZhbChoKX19KS5lcnJvcihmdW5jdGlvbigpe3E9PT11JiZ6KCl9KSxnLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXCIpKTooeigpLHIudGVtcGxhdGU9bnVsbCl9KX19fX1dLEtkPVtcIiRjb21waWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxyZXF1aXJlOlwibmdJbmNsdWRlXCIsXG5saW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2QuaHRtbChmLnRlbXBsYXRlKTthKGQuY29udGVudHMoKSkoYyl9fX1dLHZkPXlhKHtwcmlvcml0eTo0NTAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxjLGQpe2EuJGV2YWwoZC5uZ0luaXQpfX19fSksd2Q9eWEoe3Rlcm1pbmFsOiEwLHByaW9yaXR5OjFFM30pLHhkPVtcIiRsb2NhbGVcIixcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9L3t9L2c7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixsaW5rOmZ1bmN0aW9uKGUsZixnKXt2YXIgaz1nLmNvdW50LG09Zy4kYXR0ci53aGVuJiZmLmF0dHIoZy4kYXR0ci53aGVuKSxoPWcub2Zmc2V0fHwwLGw9ZS4kZXZhbChtKXx8e30sbj17fSxwPWMuc3RhcnRTeW1ib2woKSxxPWMuZW5kU3ltYm9sKCkscz0vXndoZW4oTWludXMpPyguKykkLztyKGcsZnVuY3Rpb24oYSxjKXtzLnRlc3QoYykmJihsW0soYy5yZXBsYWNlKFwid2hlblwiLFwiXCIpLnJlcGxhY2UoXCJNaW51c1wiLFwiLVwiKSldPVxuZi5hdHRyKGcuJGF0dHJbY10pKX0pO3IobCxmdW5jdGlvbihhLGUpe25bZV09YyhhLnJlcGxhY2UoZCxwK2srXCItXCIraCtxKSl9KTtlLiR3YXRjaChmdW5jdGlvbigpe3ZhciBjPXBhcnNlRmxvYXQoZS4kZXZhbChrKSk7aWYoaXNOYU4oYykpcmV0dXJuXCJcIjtjIGluIGx8fChjPWEucGx1cmFsQ2F0KGMtaCkpO3JldHVybiBuW2NdKGUsZiwhMCl9LGZ1bmN0aW9uKGEpe2YudGV4dChhKX0pfX19XSx5ZD1bXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD1DKFwibmdSZXBlYXRcIik7cmV0dXJue3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MUUzLHRlcm1pbmFsOiEwLCQkdGxiOiEwLGxpbms6ZnVuY3Rpb24oZSxmLGcsayxtKXt2YXIgaD1nLm5nUmVwZWF0LGw9aC5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKSxuLHAscSxzLHQsdSxBPXskaWQ6S2F9O2lmKCFsKXRocm93IGQoXCJpZXhwXCIsXG5oKTtnPWxbMV07az1sWzJdOyhsPWxbM10pPyhuPWEobCkscD1mdW5jdGlvbihhLGMsZCl7dSYmKEFbdV09YSk7QVt0XT1jO0EuJGluZGV4PWQ7cmV0dXJuIG4oZSxBKX0pOihxPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIEthKGMpfSxzPWZ1bmN0aW9uKGEpe3JldHVybiBhfSk7bD1nLm1hdGNoKC9eKD86KFtcXCRcXHddKyl8XFwoKFtcXCRcXHddKylcXHMqLFxccyooW1xcJFxcd10rKVxcKSkkLyk7aWYoIWwpdGhyb3cgZChcImlpZGV4cFwiLGcpO3Q9bFszXXx8bFsxXTt1PWxbMl07dmFyIHk9e307ZS4kd2F0Y2hDb2xsZWN0aW9uKGssZnVuY3Rpb24oYSl7dmFyIGcsayxsPWZbMF0sbixBPXt9LEIsSSxILHYsRSxDLHgsSj1bXTtpZihQYShhKSlDPWEsRT1wfHxxO2Vsc2V7RT1wfHxzO0M9W107Zm9yKEggaW4gYSlhLmhhc093blByb3BlcnR5KEgpJiZcIiRcIiE9SC5jaGFyQXQoMCkmJkMucHVzaChIKTtDLnNvcnQoKX1CPUMubGVuZ3RoO2s9Si5sZW5ndGg9Qy5sZW5ndGg7Zm9yKGc9MDtnPGs7ZysrKWlmKEg9YT09PVxuQz9nOkNbZ10sdj1hW0hdLG49RShILHYsZyksRGEobixcImB0cmFjayBieWAgaWRcIikseS5oYXNPd25Qcm9wZXJ0eShuKSl4PXlbbl0sZGVsZXRlIHlbbl0sQVtuXT14LEpbZ109eDtlbHNle2lmKEEuaGFzT3duUHJvcGVydHkobikpdGhyb3cgcihKLGZ1bmN0aW9uKGEpe2EmJmEuc2NvcGUmJih5W2EuaWRdPWEpfSksZChcImR1cGVzXCIsaCxuLG5hKHYpKTtKW2ddPXtpZDpufTtBW25dPSExfWZvcihIIGluIHkpeS5oYXNPd25Qcm9wZXJ0eShIKSYmKHg9eVtIXSxnPUViKHguY2xvbmUpLGMubGVhdmUoZykscihnLGZ1bmN0aW9uKGEpe2EuJCROR19SRU1PVkVEPSEwfSkseC5zY29wZS4kZGVzdHJveSgpKTtnPTA7Zm9yKGs9Qy5sZW5ndGg7ZzxrO2crKyl7SD1hPT09Qz9nOkNbZ107dj1hW0hdO3g9SltnXTtKW2ctMV0mJihsPUpbZy0xXS5jbG9uZVtKW2ctMV0uY2xvbmUubGVuZ3RoLTFdKTtpZih4LnNjb3BlKXtJPXguc2NvcGU7bj1sO2RvIG49bi5uZXh0U2libGluZzt3aGlsZShuJiZuLiQkTkdfUkVNT1ZFRCk7XG54LmNsb25lWzBdIT1uJiZjLm1vdmUoRWIoeC5jbG9uZSksbnVsbCx3KGwpKTtsPXguY2xvbmVbeC5jbG9uZS5sZW5ndGgtMV19ZWxzZSBJPWUuJG5ldygpO0lbdF09djt1JiYoSVt1XT1IKTtJLiRpbmRleD1nO0kuJGZpcnN0PTA9PT1nO0kuJGxhc3Q9Zz09PUItMTtJLiRtaWRkbGU9IShJLiRmaXJzdHx8SS4kbGFzdCk7SS4kb2RkPSEoSS4kZXZlbj0wPT09KGcmMSkpO3guc2NvcGV8fG0oSSxmdW5jdGlvbihhKXthW2EubGVuZ3RoKytdPVguY3JlYXRlQ29tbWVudChcIiBlbmQgbmdSZXBlYXQ6IFwiK2grXCIgXCIpO2MuZW50ZXIoYSxudWxsLHcobCkpO2w9YTt4LnNjb3BlPUk7eC5jbG9uZT1hO0FbeC5pZF09eH0pfXk9QX0pfX19XSx6ZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yy4kd2F0Y2goZS5uZ1Nob3csZnVuY3Rpb24oYyl7YVtVYShjKT9cInJlbW92ZUNsYXNzXCI6XCJhZGRDbGFzc1wiXShkLFwibmctaGlkZVwiKX0pfX1dLHNkPVtcIiRhbmltYXRlXCIsXG5mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2MuJHdhdGNoKGUubmdIaWRlLGZ1bmN0aW9uKGMpe2FbVWEoYyk/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIil9KX19XSxBZD15YShmdW5jdGlvbihhLGMsZCl7YS4kd2F0Y2goZC5uZ1N0eWxlLGZ1bmN0aW9uKGEsZCl7ZCYmYSE9PWQmJnIoZCxmdW5jdGlvbihhLGQpe2MuY3NzKGQsXCJcIil9KTthJiZjLmNzcyhhKX0sITApfSksQmQ9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcXVpcmU6XCJuZ1N3aXRjaFwiLGNvbnRyb2xsZXI6W1wiJHNjb3BlXCIsZnVuY3Rpb24oKXt0aGlzLmNhc2VzPXt9fV0sbGluazpmdW5jdGlvbihjLGQsZSxmKXt2YXIgZz1bXSxrPVtdLG09W10saD1bXTtjLiR3YXRjaChlLm5nU3dpdGNofHxlLm9uLGZ1bmN0aW9uKGQpe3ZhciBuLHA7bj0wO2ZvcihwPW0ubGVuZ3RoO248cDsrK24pbVtuXS5yZW1vdmUoKTtuPW0ubGVuZ3RoPTA7Zm9yKHA9XG5oLmxlbmd0aDtuPHA7KytuKXt2YXIgcT1rW25dO2hbbl0uJGRlc3Ryb3koKTttW25dPXE7YS5sZWF2ZShxLGZ1bmN0aW9uKCl7bS5zcGxpY2UobiwxKX0pfWsubGVuZ3RoPTA7aC5sZW5ndGg9MDtpZihnPWYuY2FzZXNbXCIhXCIrZF18fGYuY2FzZXNbXCI/XCJdKWMuJGV2YWwoZS5jaGFuZ2UpLHIoZyxmdW5jdGlvbihkKXt2YXIgZT1jLiRuZXcoKTtoLnB1c2goZSk7ZC50cmFuc2NsdWRlKGUsZnVuY3Rpb24oYyl7dmFyIGU9ZC5lbGVtZW50O2sucHVzaChjKTthLmVudGVyKGMsZS5wYXJlbnQoKSxlKX0pfSl9KX19fV0sQ2Q9eWEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6ODAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUsZil7ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl09ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl18fFtdO2UuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dLnB1c2goe3RyYW5zY2x1ZGU6ZixlbGVtZW50OmN9KX19KSxEZD1cbnlhKHt0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjgwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2UuY2FzZXNbXCI/XCJdPWUuY2FzZXNbXCI/XCJdfHxbXTtlLmNhc2VzW1wiP1wiXS5wdXNoKHt0cmFuc2NsdWRlOmYsZWxlbWVudDpjfSl9fSksRmQ9eWEoe2xpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtpZighZil0aHJvdyBDKFwibmdUcmFuc2NsdWRlXCIpKFwib3JwaGFuXCIsaWEoYykpO2YoZnVuY3Rpb24oYSl7Yy5lbXB0eSgpO2MuYXBwZW5kKGEpfSl9fSksZmQ9W1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITAsY29tcGlsZTpmdW5jdGlvbihjLGQpe1widGV4dC9uZy10ZW1wbGF0ZVwiPT1kLnR5cGUmJmEucHV0KGQuaWQsY1swXS50ZXh0KX19fV0sWmU9QyhcIm5nT3B0aW9uc1wiKSxFZD1iYSh7dGVybWluYWw6ITB9KSxnZD1bXCIkY29tcGlsZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD1cbi9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC8sZT17JHNldFZpZXdWYWx1ZTpFfTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCJzZWxlY3RcIixcIj9uZ01vZGVsXCJdLGNvbnRyb2xsZXI6W1wiJGVsZW1lbnRcIixcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxjLGQpe3ZhciBtPXRoaXMsaD17fSxsPWUsbjttLmRhdGFib3VuZD1kLm5nTW9kZWw7bS5pbml0PWZ1bmN0aW9uKGEsYyxkKXtsPWE7bj1kfTttLmFkZE9wdGlvbj1mdW5jdGlvbihjKXtEYShjLCdcIm9wdGlvbiB2YWx1ZVwiJyk7aFtjXT0hMDtsLiR2aWV3VmFsdWU9PWMmJihhLnZhbChjKSxuLnBhcmVudCgpJiZuLnJlbW92ZSgpKX07XG5tLnJlbW92ZU9wdGlvbj1mdW5jdGlvbihhKXt0aGlzLmhhc09wdGlvbihhKSYmKGRlbGV0ZSBoW2FdLGwuJHZpZXdWYWx1ZT09YSYmdGhpcy5yZW5kZXJVbmtub3duT3B0aW9uKGEpKX07bS5yZW5kZXJVbmtub3duT3B0aW9uPWZ1bmN0aW9uKGMpe2M9XCI/IFwiK0thKGMpK1wiID9cIjtuLnZhbChjKTthLnByZXBlbmQobik7YS52YWwoYyk7bi5wcm9wKFwic2VsZWN0ZWRcIiwhMCl9O20uaGFzT3B0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBoLmhhc093blByb3BlcnR5KGEpfTtjLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXttLnJlbmRlclVua25vd25PcHRpb249RX0pfV0sbGluazpmdW5jdGlvbihlLGcsayxtKXtmdW5jdGlvbiBoKGEsYyxkLGUpe2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWQuJHZpZXdWYWx1ZTtlLmhhc09wdGlvbihhKT8odi5wYXJlbnQoKSYmdi5yZW1vdmUoKSxjLnZhbChhKSxcIlwiPT09YSYmdS5wcm9wKFwic2VsZWN0ZWRcIiwhMCkpOngoYSkmJnU/Yy52YWwoXCJcIik6ZS5yZW5kZXJVbmtub3duT3B0aW9uKGEpfTtcbmMub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7di5wYXJlbnQoKSYmdi5yZW1vdmUoKTtkLiRzZXRWaWV3VmFsdWUoYy52YWwoKSl9KX0pfWZ1bmN0aW9uIGwoYSxjLGQpe3ZhciBlO2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPW5ldyBiYihkLiR2aWV3VmFsdWUpO3IoYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQ9eShhLmdldChjLnZhbHVlKSl9KX07YS4kd2F0Y2goZnVuY3Rpb24oKXtBYShlLGQuJHZpZXdWYWx1ZSl8fChlPWhhKGQuJHZpZXdWYWx1ZSksZC4kcmVuZGVyKCkpfSk7Yy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgYT1bXTtyKGMuZmluZChcIm9wdGlvblwiKSxmdW5jdGlvbihjKXtjLnNlbGVjdGVkJiZhLnB1c2goYy52YWx1ZSl9KTtkLiRzZXRWaWV3VmFsdWUoYSl9KX0pfWZ1bmN0aW9uIG4oZSxmLGcpe2Z1bmN0aW9uIGsoKXt2YXIgYT17XCJcIjpbXX0sYz1bXCJcIl0sZCxoLFxucyx0LHY7cz1nLiRtb2RlbFZhbHVlO3Q9dyhlKXx8W107dmFyIEU9bj9aYih0KTp0LEksTSxCO009e307Qj0hMTtpZihxKWlmKGg9Zy4kbW9kZWxWYWx1ZSx4JiZKKGgpKWZvcihCPW5ldyBiYihbXSksZD17fSx2PTA7djxoLmxlbmd0aDt2KyspZFttXT1oW3ZdLEIucHV0KHgoZSxkKSxoW3ZdKTtlbHNlIEI9bmV3IGJiKGgpO3Y9Qjt2YXIgRCxLO2ZvcihCPTA7ST1FLmxlbmd0aCxCPEk7QisrKXtoPUI7aWYobil7aD1FW0JdO2lmKFwiJFwiPT09aC5jaGFyQXQoMCkpY29udGludWU7TVtuXT1ofU1bbV09dFtoXTtkPXIoZSxNKXx8XCJcIjsoaD1hW2RdKXx8KGg9YVtkXT1bXSxjLnB1c2goZCkpO3E/ZD15KHYucmVtb3ZlKHg/eChlLE0pOnUoZSxNKSkpOih4PyhkPXt9LGRbbV09cyxkPXgoZSxkKT09PXgoZSxNKSk6ZD1zPT09dShlLE0pLHY9dnx8ZCk7RD1sKGUsTSk7RD15KEQpP0Q6XCJcIjtoLnB1c2goe2lkOng/eChlLE0pOm4/RVtCXTpCLGxhYmVsOkQsc2VsZWN0ZWQ6ZH0pfXF8fChGfHxudWxsPT09XG5zP2FbXCJcIl0udW5zaGlmdCh7aWQ6XCJcIixsYWJlbDpcIlwiLHNlbGVjdGVkOiF2fSk6dnx8YVtcIlwiXS51bnNoaWZ0KHtpZDpcIj9cIixsYWJlbDpcIlwiLHNlbGVjdGVkOiEwfSkpO009MDtmb3IoRT1jLmxlbmd0aDtNPEU7TSsrKXtkPWNbTV07aD1hW2RdO3oubGVuZ3RoPD1NPyhzPXtlbGVtZW50OkMuY2xvbmUoKS5hdHRyKFwibGFiZWxcIixkKSxsYWJlbDpoLmxhYmVsfSx0PVtzXSx6LnB1c2godCksZi5hcHBlbmQocy5lbGVtZW50KSk6KHQ9eltNXSxzPXRbMF0scy5sYWJlbCE9ZCYmcy5lbGVtZW50LmF0dHIoXCJsYWJlbFwiLHMubGFiZWw9ZCkpO0Q9bnVsbDtCPTA7Zm9yKEk9aC5sZW5ndGg7QjxJO0IrKylkPWhbQl0sKHY9dFtCKzFdKT8oRD12LmVsZW1lbnQsdi5sYWJlbCE9PWQubGFiZWwmJkQudGV4dCh2LmxhYmVsPWQubGFiZWwpLHYuaWQhPT1kLmlkJiZELnZhbCh2LmlkPWQuaWQpLERbMF0uc2VsZWN0ZWQhPT1kLnNlbGVjdGVkJiYoRC5wcm9wKFwic2VsZWN0ZWRcIix2LnNlbGVjdGVkPWQuc2VsZWN0ZWQpLFxuUSYmRC5wcm9wKFwic2VsZWN0ZWRcIix2LnNlbGVjdGVkKSkpOihcIlwiPT09ZC5pZCYmRj9LPUY6KEs9QS5jbG9uZSgpKS52YWwoZC5pZCkucHJvcChcInNlbGVjdGVkXCIsZC5zZWxlY3RlZCkuYXR0cihcInNlbGVjdGVkXCIsZC5zZWxlY3RlZCkudGV4dChkLmxhYmVsKSx0LnB1c2goe2VsZW1lbnQ6SyxsYWJlbDpkLmxhYmVsLGlkOmQuaWQsc2VsZWN0ZWQ6ZC5zZWxlY3RlZH0pLHAuYWRkT3B0aW9uKGQubGFiZWwsSyksRD9ELmFmdGVyKEspOnMuZWxlbWVudC5hcHBlbmQoSyksRD1LKTtmb3IoQisrO3QubGVuZ3RoPkI7KWQ9dC5wb3AoKSxwLnJlbW92ZU9wdGlvbihkLmxhYmVsKSxkLmVsZW1lbnQucmVtb3ZlKCl9Zm9yKDt6Lmxlbmd0aD5NOyl6LnBvcCgpWzBdLmVsZW1lbnQucmVtb3ZlKCl9dmFyIGg7aWYoIShoPXMubWF0Y2goZCkpKXRocm93IFplKFwiaWV4cFwiLHMsaWEoZikpO3ZhciBsPWMoaFsyXXx8aFsxXSksbT1oWzRdfHxoWzZdLG49aFs1XSxyPWMoaFszXXx8XCJcIiksdT1jKGhbMl0/XG5oWzFdOm0pLHc9YyhoWzddKSx4PWhbOF0/YyhoWzhdKTpudWxsLHo9W1t7ZWxlbWVudDpmLGxhYmVsOlwiXCJ9XV07RiYmKGEoRikoZSksRi5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpLEYucmVtb3ZlKCkpO2YuZW1wdHkoKTtmLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtlLiRhcHBseShmdW5jdGlvbigpe3ZhciBhLGM9dyhlKXx8W10sZD17fSxoLGwscCxyLHMsdix5O2lmKHEpZm9yKGw9W10scj0wLHY9ei5sZW5ndGg7cjx2O3IrKylmb3IoYT16W3JdLHA9MSxzPWEubGVuZ3RoO3A8cztwKyspe2lmKChoPWFbcF0uZWxlbWVudClbMF0uc2VsZWN0ZWQpe2g9aC52YWwoKTtuJiYoZFtuXT1oKTtpZih4KWZvcih5PTA7eTxjLmxlbmd0aCYmKGRbbV09Y1t5XSx4KGUsZCkhPWgpO3krKyk7ZWxzZSBkW21dPWNbaF07bC5wdXNoKHUoZSxkKSl9fWVsc2UgaWYoaD1mLnZhbCgpLFwiP1wiPT1oKWw9dDtlbHNlIGlmKFwiXCI9PT1oKWw9bnVsbDtlbHNlIGlmKHgpZm9yKHk9MDt5PGMubGVuZ3RoO3krKyl7aWYoZFttXT1cbmNbeV0seChlLGQpPT1oKXtsPXUoZSxkKTticmVha319ZWxzZSBkW21dPWNbaF0sbiYmKGRbbl09aCksbD11KGUsZCk7Zy4kc2V0Vmlld1ZhbHVlKGwpO2soKX0pfSk7Zy4kcmVuZGVyPWs7ZS4kd2F0Y2hDb2xsZWN0aW9uKHcsayk7ZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCl7dmFyIGE9e30sYz13KGUpO2lmKGMpe2Zvcih2YXIgZD1BcnJheShjLmxlbmd0aCksZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKylhW21dPWNbZl0sZFtmXT1sKGUsYSk7cmV0dXJuIGR9fSxrKTtxJiZlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXtyZXR1cm4gZy4kbW9kZWxWYWx1ZX0sayl9aWYobVsxXSl7dmFyIHA9bVswXTttPW1bMV07dmFyIHE9ay5tdWx0aXBsZSxzPWsubmdPcHRpb25zLEY9ITEsdSxBPXcoWC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSxDPXcoWC5jcmVhdGVFbGVtZW50KFwib3B0Z3JvdXBcIikpLHY9QS5jbG9uZSgpO2s9MDtmb3IodmFyIHo9Zy5jaGlsZHJlbigpLEU9ei5sZW5ndGg7azxcbkU7aysrKWlmKFwiXCI9PT16W2tdLnZhbHVlKXt1PUY9ei5lcShrKTticmVha31wLmluaXQobSxGLHYpO3EmJihtLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9KTtzP24oZSxnLG0pOnE/bChlLGcsbSk6aChlLGcsbSxwKX19fX1dLGlkPVtcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEpe3ZhciBjPXthZGRPcHRpb246RSxyZW1vdmVPcHRpb246RX07cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGQsZSl7aWYoeChlLnZhbHVlKSl7dmFyIGY9YShkLnRleHQoKSwhMCk7Znx8ZS4kc2V0KFwidmFsdWVcIixkLnRleHQoKSl9cmV0dXJuIGZ1bmN0aW9uKGEsZCxlKXt2YXIgaD1kLnBhcmVudCgpLGw9aC5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIil8fGgucGFyZW50KCkuZGF0YShcIiRzZWxlY3RDb250cm9sbGVyXCIpO2wmJmwuZGF0YWJvdW5kP2QucHJvcChcInNlbGVjdGVkXCIsITEpOmw9YztmP2EuJHdhdGNoKGYsZnVuY3Rpb24oYSxcbmMpe2UuJHNldChcInZhbHVlXCIsYSk7YSE9PWMmJmwucmVtb3ZlT3B0aW9uKGMpO2wuYWRkT3B0aW9uKGEpfSk6bC5hZGRPcHRpb24oZS52YWx1ZSk7ZC5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtsLnJlbW92ZU9wdGlvbihlLnZhbHVlKX0pfX19fV0saGQ9YmEoe3Jlc3RyaWN0OlwiRVwiLHRlcm1pbmFsOiEwfSk7Vy5hbmd1bGFyLmJvb3RzdHJhcD9jb25zb2xlLmxvZyhcIldBUk5JTkc6IFRyaWVkIHRvIGxvYWQgYW5ndWxhciBtb3JlIHRoYW4gb25jZS5cIik6KChFYT1XLmpRdWVyeSkmJkVhLmZuLm9uPyh3PUVhLEQoRWEuZm4se3Njb3BlOkxhLnNjb3BlLGlzb2xhdGVTY29wZTpMYS5pc29sYXRlU2NvcGUsY29udHJvbGxlcjpMYS5jb250cm9sbGVyLGluamVjdG9yOkxhLmluamVjdG9yLGluaGVyaXRlZERhdGE6TGEuaW5oZXJpdGVkRGF0YX0pLEdiKFwicmVtb3ZlXCIsITAsITAsITEpLEdiKFwiZW1wdHlcIiwhMSwhMSwhMSksR2IoXCJodG1sXCIsITEsITEsITApKTp3PVMsVmEuZWxlbWVudD13LFxuJGMoVmEpLHcoWCkucmVhZHkoZnVuY3Rpb24oKXtYYyhYLGZjKX0pKX0pKHdpbmRvdyxkb2N1bWVudCk7IXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkmJndpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoXCJoZWFkXCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9Lm5nLWFuaW1hdGUtYmxvY2stdHJhbnNpdGlvbnN7dHJhbnNpdGlvbjowcyBhbGwhaW1wb3J0YW50Oy13ZWJraXQtdHJhbnNpdGlvbjowcyBhbGwhaW1wb3J0YW50O30ubmctaGlkZS1hZGQtYWN0aXZlLC5uZy1oaWRlLXJlbW92ZXtkaXNwbGF5OmJsb2NrIWltcG9ydGFudDt9PC9zdHlsZT4nKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXIubWluLmpzLm1hcFxuIiwiLyohIGpRdWVyeSB2Mi4xLjEgfCAoYykgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZSAqL1xuIWZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiBiKGEpfTpiKGEpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1jLnNsaWNlLGU9Yy5jb25jYXQsZj1jLnB1c2gsZz1jLmluZGV4T2YsaD17fSxpPWgudG9TdHJpbmcsaj1oLmhhc093blByb3BlcnR5LGs9e30sbD1hLmRvY3VtZW50LG09XCIyLjEuMVwiLG49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IG4uZm4uaW5pdChhLGIpfSxvPS9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxwPS9eLW1zLS8scT0vLShbXFxkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6XCJcIixsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPzA+YT90aGlzW2ErdGhpcy5sZW5ndGhdOnRoaXNbYV06ZC5jYWxsKHRoaXMpfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSl7dmFyIGI9bi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksYSk7cmV0dXJuIGIucHJldk9iamVjdD10aGlzLGIuY29udGV4dD10aGlzLmNvbnRleHQsYn0sZWFjaDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmVhY2godGhpcyxhLGIpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6Zixzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LG4uZXh0ZW5kPW4uZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSxcIm9iamVjdFwiPT10eXBlb2YgZ3x8bi5pc0Z1bmN0aW9uKGcpfHwoZz17fSksaD09PWkmJihnPXRoaXMsaC0tKTtpPmg7aCsrKWlmKG51bGwhPShhPWFyZ3VtZW50c1toXSkpZm9yKGIgaW4gYSljPWdbYl0sZD1hW2JdLGchPT1kJiYoaiYmZCYmKG4uaXNQbGFpbk9iamVjdChkKXx8KGU9bi5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZuLmlzQXJyYXkoYyk/YzpbXSk6Zj1jJiZuLmlzUGxhaW5PYmplY3QoYyk/Yzp7fSxnW2JdPW4uZXh0ZW5kKGosZixkKSk6dm9pZCAwIT09ZCYmKGdbYl09ZCkpO3JldHVybiBnfSxuLmV4dGVuZCh7ZXhwYW5kbzpcImpRdWVyeVwiKyhtK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xcRC9nLFwiXCIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKGEpfSxub29wOmZ1bmN0aW9uKCl7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiZnVuY3Rpb25cIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0FycmF5KGEpJiZhLXBhcnNlRmxvYXQoYSk+PTB9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9oW2kuY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYz1ldmFsO2E9bi50cmltKGEpLGEmJigxPT09YS5pbmRleE9mKFwidXNlIHN0cmljdFwiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi50ZXh0PWEsbC5oZWFkLmFwcGVuZENoaWxkKGIpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpOmMoYSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLFwibXMtXCIpLnJlcGxhY2UocSxyKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXMoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjooYStcIlwiKS5yZXBsYWNlKG8sXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocyhPYmplY3QoYSkpP24ubWVyZ2UoYyxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxuLmlzRnVuY3Rpb24oYSk/KGU9ZC5jYWxsKGFyZ3VtZW50cywyKSxmPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxlLmNvbmNhdChkLmNhbGwoYXJndW1lbnRzKSkpfSxmLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8bi5ndWlkKyssZik6dm9pZCAwfSxub3c6RGF0ZS5ub3csc3VwcG9ydDprfSksbi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2hbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9YS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiPT09Y3x8bi5pc1dpbmRvdyhhKT8hMToxPT09YS5ub2RlVHlwZSYmYj8hMDpcImFycmF5XCI9PT1jfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT1cInNpenpsZVwiKy1uZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWdiKCksej1nYigpLEE9Z2IoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz1cInVuZGVmaW5lZFwiLEQ9MTw8MzEsRT17fS5oYXNPd25Qcm9wZXJ0eSxGPVtdLEc9Ri5wb3AsSD1GLnB1c2gsST1GLnB1c2gsSj1GLnNsaWNlLEs9Ri5pbmRleE9mfHxmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMubGVuZ3RoO2M+YjtiKyspaWYodGhpc1tiXT09PWEpcmV0dXJuIGI7cmV0dXJuLTF9LEw9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLE09XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLE49XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixPPU4ucmVwbGFjZShcIndcIixcIncjXCIpLFA9XCJcXFxcW1wiK00rXCIqKFwiK04rXCIpKD86XCIrTStcIiooWypeJHwhfl0/PSlcIitNK1wiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIrTytcIikpfClcIitNK1wiKlxcXFxdXCIsUT1cIjooXCIrTitcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrUCtcIikqKXwuKilcXFxcKXwpXCIsUj1uZXcgUmVnRXhwKFwiXlwiK00rXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiK00rXCIrJFwiLFwiZ1wiKSxTPW5ldyBSZWdFeHAoXCJeXCIrTStcIiosXCIrTStcIipcIiksVD1uZXcgUmVnRXhwKFwiXlwiK00rXCIqKFs+K35dfFwiK00rXCIpXCIrTStcIipcIiksVT1uZXcgUmVnRXhwKFwiPVwiK00rXCIqKFteXFxcXF0nXFxcIl0qPylcIitNK1wiKlxcXFxdXCIsXCJnXCIpLFY9bmV3IFJlZ0V4cChRKSxXPW5ldyBSZWdFeHAoXCJeXCIrTytcIiRcIiksWD17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK04rXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrTitcIilcIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK04ucmVwbGFjZShcIndcIixcIncqXCIpK1wiKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrUCksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrUSksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrTStcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK00rXCIqKD86KFsrLV18KVwiK00rXCIqKFxcXFxkKyl8KSlcIitNK1wiKlxcXFwpfClcIixcImlcIiksYm9vbDpuZXcgUmVnRXhwKFwiXig/OlwiK0wrXCIpJFwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitNK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitNK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitNK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxZPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWj0vXmhcXGQkL2ksJD0vXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLF89L14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sYWI9L1srfl0vLGJiPS8nfFxcXFwvZyxjYj1uZXcgUmVnRXhwKFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIrTStcIj98KFwiK00rXCIpfC4pXCIsXCJpZ1wiKSxkYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9XCIweFwiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6MD5kP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfTt0cnl7SS5hcHBseShGPUouY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRlt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYil7ST17YXBwbHk6Ri5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtILmFwcGx5KGEsSi5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmIoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSwhYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIGQ7aWYoMSE9PShrPWIubm9kZVR5cGUpJiY5IT09aylyZXR1cm5bXTtpZihwJiYhZSl7aWYoZj1fLmV4ZWMoYSkpaWYoaj1mWzFdKXtpZig5PT09ayl7aWYoaD1iLmdldEVsZW1lbnRCeUlkKGopLCFofHwhaC5wYXJlbnROb2RlKXJldHVybiBkO2lmKGguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNlIGlmKGIub3duZXJEb2N1bWVudCYmKGg9Yi5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGopKSYmdChiLGgpJiZoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZXtpZihmWzJdKXJldHVybiBJLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoaj1mWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEkuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaikpLGR9aWYoYy5xc2EmJighcXx8IXEudGVzdChhKSkpe2lmKHM9cj11LHc9Yix4PTk9PT1rJiZhLDE9PT1rJiZcIm9iamVjdFwiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtvPWcoYSksKHI9Yi5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk/cz1yLnJlcGxhY2UoYmIsXCJcXFxcJCZcIik6Yi5zZXRBdHRyaWJ1dGUoXCJpZFwiLHMpLHM9XCJbaWQ9J1wiK3MrXCInXSBcIixsPW8ubGVuZ3RoO3doaWxlKGwtLSlvW2xdPXMrcWIob1tsXSk7dz1hYi50ZXN0KGEpJiZvYihiLnBhcmVudE5vZGUpfHxiLHg9by5qb2luKFwiLFwiKX1pZih4KXRyeXtyZXR1cm4gSS5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbCh4KSksZH1jYXRjaCh5KXt9ZmluYWxseXtyfHxiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFIsXCIkMVwiKSxiLGQsZSl9ZnVuY3Rpb24gZ2IoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjK1wiIFwiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYytcIiBcIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBoYihhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGliKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYihhLGIpe3ZhciBjPWEuc3BsaXQoXCJ8XCIpLGU9YS5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGtiKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxEKS0ofmEuc291cmNlSW5kZXh8fEQpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBsYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG1iKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PWN8fFwiYnV0dG9uXCI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmIoYSl7cmV0dXJuIGhiKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGhiKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gb2IoYSl7cmV0dXJuIGEmJnR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09QyYmYX1jPWZiLnN1cHBvcnQ9e30sZj1mYi5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/XCJIVE1MXCIhPT1iLm5vZGVOYW1lOiExfSxtPWZiLnNldERvY3VtZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGU9YT9hLm93bmVyRG9jdW1lbnR8fGE6dixnPWUuZGVmYXVsdFZpZXc7cmV0dXJuIGUhPT1uJiY5PT09ZS5ub2RlVHlwZSYmZS5kb2N1bWVudEVsZW1lbnQ/KG49ZSxvPWUuZG9jdW1lbnRFbGVtZW50LHA9IWYoZSksZyYmZyE9PWcudG9wJiYoZy5hZGRFdmVudExpc3RlbmVyP2cuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLGZ1bmN0aW9uKCl7bSgpfSwhMSk6Zy5hdHRhY2hFdmVudCYmZy5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZnVuY3Rpb24oKXttKCl9KSksYy5hdHRyaWJ1dGVzPWliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT1cImlcIiwhYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKGUuY3JlYXRlQ29tbWVudChcIlwiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT0kLnRlc3QoZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSYmaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj5cIixhLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPVwiaVwiLDI9PT1hLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJpXCIpLmxlbmd0aH0pLGMuZ2V0QnlJZD1pYihmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFlLmdldEVsZW1lbnRzQnlOYW1lfHwhZS5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRCeUlkIT09QyYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYyYmYy5wYXJlbnROb2RlP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImlkXCIpPT09Yn19KTooZGVsZXRlIGQuZmluZC5JRCxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlIT09QyYmYS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiB0eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PUM/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKFwiKlwiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm4gdHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PUMmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT0kLnRlc3QoZS5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYihmdW5jdGlvbihhKXthLmlubmVySFRNTD1cIjxzZWxlY3QgbXNhbGxvd2NsaXA9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NsaXBePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK00rXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK00rXCIqKD86dmFsdWV8XCIrTCtcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxxLnB1c2goXCI6Y2hlY2tlZFwiKX0pLGliKGZ1bmN0aW9uKGEpe3ZhciBiPWUuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Iuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiaGlkZGVuXCIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiRFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGgmJnEucHVzaChcIm5hbWVcIitNK1wiKlsqXiR8IX5dPz1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RofHxxLnB1c2goXCI6ZW5hYmxlZFwiLFwiOmRpc2FibGVkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIiosOnhcIikscS5wdXNoKFwiLC4qOlwiKX0pKSwoYy5tYXRjaGVzU2VsZWN0b3I9JC50ZXN0KHM9by5tYXRjaGVzfHxvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8by5tb3pNYXRjaGVzU2VsZWN0b3J8fG8ub01hdGNoZXNTZWxlY3Rvcnx8by5tc01hdGNoZXNTZWxlY3RvcikpJiZpYihmdW5jdGlvbihhKXtjLmRpc2Nvbm5lY3RlZE1hdGNoPXMuY2FsbChhLFwiZGl2XCIpLHMuY2FsbChhLFwiW3MhPScnXTp4XCIpLHIucHVzaChcIiE9XCIsUSl9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbihcInxcIikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKFwifFwiKSksYj0kLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHwkLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1lfHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PWV8fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/Sy5jYWxsKGssYSktSy5jYWxsKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZj1hLnBhcmVudE5vZGUsZz1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWZ8fCFnKXJldHVybiBhPT09ZT8tMTpiPT09ZT8xOmY/LTE6Zz8xOms/Sy5jYWxsKGssYSktSy5jYWxsKGssYik6MDtpZihmPT09ZylyZXR1cm4ga2IoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSlpLnVuc2hpZnQoYyk7d2hpbGUoaFtkXT09PWlbZF0pZCsrO3JldHVybiBkP2tiKGhbZF0saVtkXSk6aFtkXT09PXY/LTE6aVtkXT09PXY/MTowfSxlKTpufSxmYi5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZiKGEsbnVsbCxudWxsLGIpfSxmYi5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVSxcIj0nJDEnXVwiKSwhKCFjLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fHImJnIudGVzdChiKXx8cSYmcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZmIoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZmIuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxmYi5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRS5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZmIuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrYSl9LGZiLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1mYi5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9XCJcIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWZiLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmhiLG1hdGNoOlgsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoY2IsZGIpLGFbM109KGFbM118fGFbNF18fGFbNV18fFwiXCIpLnJlcGxhY2UoY2IsZGIpLFwifj1cIj09PWFbMl0mJihhWzNdPVwiIFwiK2FbM10rXCIgXCIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGZiLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKFwiZXZlblwiPT09YVszXXx8XCJvZGRcIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHxcIm9kZFwiPT09YVszXSkpOmFbM10mJmZiLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzZdJiZhWzJdO3JldHVybiBYLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXT9hWzJdPWFbNF18fGFbNV18fFwiXCI6YyYmVi50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKFwiKVwiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiKlwiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYStcIiBcIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoXCIoXnxcIitNK1wiKVwiK2ErXCIoXCIrTStcInwkKVwiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KFwic3RyaW5nXCI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fHR5cGVvZiBhLmdldEF0dHJpYnV0ZSE9PUMmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1mYi5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/XCIhPVwiPT09YjpiPyhlKz1cIlwiLFwiPVwiPT09Yj9lPT09YzpcIiE9XCI9PT1iP2UhPT1jOlwiXj1cIj09PWI/YyYmMD09PWUuaW5kZXhPZihjKTpcIio9XCI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMTpcIiQ9XCI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6XCJ+PVwiPT09Yj8oXCIgXCIrZStcIiBcIikuaW5kZXhPZihjKT4tMTpcInw9XCI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jK1wiLVwiOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9XCJudGhcIiE9PWEuc2xpY2UoMCwzKSxnPVwibGFzdFwiIT09YS5zbGljZSgtNCksaD1cIm9mLXR5cGVcIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe2s9cVt1XXx8KHFbdV09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSxtPWpbMF09PT13JiZqWzJdLGw9biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKDE9PT1sLm5vZGVUeXBlJiYrK20mJmw9PT1iKXtrW2FdPVt3LG4sbV07YnJlYWt9fWVsc2UgaWYocyYmKGo9KGJbdV18fChiW3VdPXt9KSlbYV0pJiZqWzBdPT09dyltPWpbMV07ZWxzZSB3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKSYmKyttJiYocyYmKChsW3VdfHwobFt1XT17fSkpW2FdPVt3LG1dKSxsPT09YikpYnJlYWs7cmV0dXJuIG0tPWUsbT09PWR8fG0lZD09PTAmJm0vZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGZiLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hiKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1LLmNhbGwoYSxmW2ddKSxhW2RdPSEoY1tkXT1mW2ddKX0pOmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsMCxjKX0pOmV9fSxwc2V1ZG9zOntub3Q6aGIoZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPWgoYS5yZXBsYWNlKFIsXCIkMVwiKSk7cmV0dXJuIGRbdV0/aGIoZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsZz1kKGEsbnVsbCxlLFtdKSxoPWEubGVuZ3RoO3doaWxlKGgtLSkoZj1nW2hdKSYmKGFbaF09IShiW2hdPWYpKX0pOmZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYlswXT1hLGQoYixudWxsLGYsYyksIWMucG9wKCl9fSksaGFzOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmIoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYihmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhfHxcIlwiKXx8ZmIuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShjYixkYikudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmIoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5iKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYihmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5iKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmIoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYihmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGIoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWIoYik7ZnVuY3Rpb24gcGIoKXt9cGIucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYixnPWZiLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7KCFjfHwoZT1TLmV4ZWMoaCkpKSYmKGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9VC5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShSLFwiIFwiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmIuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9XCJcIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gcmIoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmXCJwYXJlbnROb2RlXCI9PT1kLGY9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxmKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpcmV0dXJuIGEoYixjLGYpfTpmdW5jdGlvbihiLGMsZyl7dmFyIGgsaSxqPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaT1iW3VdfHwoYlt1XT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4galsyXT1oWzJdO2lmKGlbZF09aixqWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gc2IoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdGIoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylmYihhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdWIoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKCFjfHxjKGYsZCxlKSkmJihnLnB1c2goZiksaiYmYi5wdXNoKGgpKTtyZXR1cm4gZ31mdW5jdGlvbiB2YihhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD12YihkKSksZSYmIWVbdV0mJihlPXZiKGUsZikpLGhiKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHRiKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dWIocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXViKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9LLmNhbGwoZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXViKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpJLmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YihhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlW1wiIFwiXSxpPWc/MTowLGs9cmIoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1ifSxoLCEwKSxsPXJiKGZ1bmN0aW9uKGEpe3JldHVybiBLLmNhbGwoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3JldHVybiFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYihzYihtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmIoaT4xJiZzYihtKSxpPjEmJnFiKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUixcIiQxXCIpLGMsZT5pJiZ3YihhLnNsaWNlKGksZSkpLGY+ZSYmd2IoYT1hLnNsaWNlKGUpKSxmPmUmJnFiKGEpKX1tLnB1c2goYyl9cmV0dXJuIHNiKG0pfWZ1bmN0aW9uIHhiKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG0sbyxwPTAscT1cIjBcIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1HLmNhbGwoaSkpO3M9dWIocyl9SS5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmZiLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9oYihmKTpmfXJldHVybiBoPWZiLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXdiKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx4YihlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9ZmIuc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmXCJJRFwiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2IsZGIpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYixkYiksYWIudGVzdChqWzBdLnR5cGUpJiZvYihiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcWIoaiksIWEpcmV0dXJuIEkuYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWIudGVzdChhKSYmb2IoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1pYihmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxqYihcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGpiKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxpYihmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxqYihMLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYn0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLHc9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIHgoYSxiLGMpe2lmKG4uaXNGdW5jdGlvbihiKSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/bi5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpuLmZpbmQubWF0Y2hlcyhhLG4uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sbi5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYobi5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKyluLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9uLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsXCJzdHJpbmdcIj09dHlwZW9mIGEmJnUudGVzdChhKT9uKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHksej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hWzBdJiZcIj5cIj09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP1widW5kZWZpbmVkXCIhPXR5cGVvZiB5LnJlYWR5P3kucmVhZHkoYSk6YShuKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxuLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9bi5mbix5PW4obCk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtuLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxuLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW4oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYobi5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXUudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT9cInN0cmluZ1wiPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG4ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW4ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHxuLnVuaXF1ZShlKSxCLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihiPWEubWVtb3J5JiZsLGM9ITAsZz1lfHwwLGU9MCxmPWgubGVuZ3RoLGQ9ITA7aCYmZj5nO2crKylpZihoW2ddLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yj0hMTticmVha31kPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yj9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGM9aC5sZW5ndGg7IWZ1bmN0aW9uIGcoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1uLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG4uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9uLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG4uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKSxuKGwpLm9mZihcInJlYWR5XCIpKSkpfX0pO2Z1bmN0aW9uIEkoKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpLG4ucmVhZHkoKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7cmV0dXJuIEh8fChIPW4uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1sLnJlYWR5U3RhdGU/c2V0VGltZW91dChuLnJlYWR5KToobC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSkpLEgucHJvbWlzZShiKX0sbi5yZWFkeS5wcm9taXNlKCk7dmFyIEo9bi5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbi5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07bi5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1uLmV4cGFuZG8rTWF0aC5yYW5kb20oKX1LLnVpZD0xLEsuYWNjZXB0cz1uLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxuLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMua2V5KGEpLGc9dGhpcy5jYWNoZVtmXTtpZih2b2lkIDA9PT1iKXRoaXMuY2FjaGVbZl09e307ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZz9kPVtiLGVdOihkPWUsZD1kIGluIGc/W2RdOmQubWF0Y2goRSl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGdbZFtjXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oYSl7YVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfX07dmFyIEw9bmV3IEssTT1uZXcgSyxOPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD1cImRhdGEtXCIrYi5yZXBsYWNlKE8sXCItJDFcIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTS5hY2Nlc3MoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TS5yZW1vdmUoYSxiKVxufSxfZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIEwuYWNjZXNzKGEsYixjKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtMLnJlbW92ZShhLGIpfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9TS5nZXQoZiksMT09PWYubm9kZVR5cGUmJiFMLmdldChmLFwiaGFzRGF0YUF0dHJzXCIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoXCJkYXRhLVwiKSYmKGQ9bi5jYW1lbENhc2UoZC5zbGljZSg1KSksUChmLGQsZVtkXSkpKTtMLnNldChmLFwiaGFzRGF0YUF0dHJzXCIsITApfXJldHVybiBlfXJldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe00uc2V0KHRoaXMsYSl9KTpKKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZD1uLmNhbWVsQ2FzZShhKTtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU0uZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPU0uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVAoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU0uZ2V0KHRoaXMsZCk7TS5zZXQodGhpcyxkLGIpLC0xIT09YS5pbmRleE9mKFwiLVwiKSYmdm9pZCAwIT09YyYmTS5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe00ucmVtb3ZlKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhPyhiPShifHxcImZ4XCIpK1wicXVldWVcIixkPUwuZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1MLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBMLmdldChhLGMpfHxMLmFjY2VzcyhhLGMse2VtcHR5Om4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7TC5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9TC5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUT0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsUj1bXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sUz1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1uLmNzcyhhLFwiZGlzcGxheVwiKXx8IW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfSxUPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pOyFmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGM9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSxjLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcImNoZWNrZWRcIiksYy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLGIuYXBwZW5kQ2hpbGQoYyksay5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLGsubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgVT1cInVuZGVmaW5lZFwiO2suZm9jdXNpbkJ1YmJsZXM9XCJvbmZvY3VzaW5cImluIGE7dmFyIFY9L15rZXkvLFc9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sWD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWT0vXihbXi5dKikoPzpcXC4oLispfCkkLztmdW5jdGlvbiBaKCl7cmV0dXJuITB9ZnVuY3Rpb24gJCgpe3JldHVybiExfWZ1bmN0aW9uIF8oKXt0cnl7cmV0dXJuIGwuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiB0eXBlb2YgbiE9PVUmJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyYmKGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxrPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKFwiLlwiKX0sZiksKG09aVtvXSl8fChtPWlbb109W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxwLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG8sZywhMSkpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxuLmV2ZW50Lmdsb2JhbFtvXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5oYXNEYXRhKGEpJiZMLmdldChhKTtpZihyJiYoaT1yLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitwLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcSE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoXCIqKlwiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGlbb10pfWVsc2UgZm9yKG8gaW4gaSluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChpKSYmKGRlbGV0ZSByLmhhbmRsZSxMLnJlbW92ZShhLFwiZXZlbnRzXCIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxtLG8scD1bZHx8bF0scT1qLmNhbGwoYixcInR5cGVcIik/Yi50eXBlOmIscj1qLmNhbGwoYixcIm5hbWVzcGFjZVwiKT9iLm5hbWVzcGFjZS5zcGxpdChcIi5cIik6W107aWYoZz1oPWQ9ZHx8bCwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiFYLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoXCIuXCIpPj0wJiYocj1xLnNwbGl0KFwiLlwiKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaz1xLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitxLGI9YltuLmV4cGFuZG9dP2I6bmV3IG4uRXZlbnQocSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9ZT8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKFwiLlwiKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrci5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxvPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZXx8IW8udHJpZ2dlcnx8by50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhby5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZCkpe2ZvcihpPW8uZGVsZWdhdGVUeXBlfHxxLFgudGVzdChpK3EpfHwoZz1nLnBhcmVudE5vZGUpO2c7Zz1nLnBhcmVudE5vZGUpcC5wdXNoKGcpLGg9ZztoPT09KGQub3duZXJEb2N1bWVudHx8bCkmJnAucHVzaChoLmRlZmF1bHRWaWV3fHxoLnBhcmVudFdpbmRvd3x8YSl9Zj0wO3doaWxlKChnPXBbZisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWY+MT9pOm8uYmluZFR5cGV8fHEsbT0oTC5nZXQoZyxcImV2ZW50c1wiKXx8e30pW2IudHlwZV0mJkwuZ2V0KGcsXCJoYW5kbGVcIiksbSYmbS5hcHBseShnLGMpLG09ayYmZ1trXSxtJiZtLmFwcGx5JiZuLmFjY2VwdERhdGEoZykmJihiLnJlc3VsdD1tLmFwcGx5KGcsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFuLmFjY2VwdERhdGEoZCl8fGsmJm4uaXNGdW5jdGlvbihkW3FdKSYmIW4uaXNXaW5kb3coZCkmJihoPWRba10saCYmKGRba109bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cSxkW3FdKCksbi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGgmJihkW2tdPWgpKSxiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0oTC5nZXQodGhpcyxcImV2ZW50c1wiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWEubmFtZXNwYWNlX3JlfHxhLm5hbWVzcGFjZV9yZS50ZXN0KGcubmFtZXNwYWNlKSkmJihhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZT0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGEucmVzdWx0PWUpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCFhLmJ1dHRvbnx8XCJjbGlja1wiIT09YS50eXBlKSlmb3IoO2khPT10aGlzO2k9aS5wYXJlbnROb2RlfHx0aGlzKWlmKGkuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09YS50eXBlKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yK1wiIFwiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT49MDpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6XCJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOlwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOlwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWIuYnV0dG9uO3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihjPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGwsZD1jLmRvY3VtZW50RWxlbWVudCxlPWMuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZCYmZC5zY3JvbGxMZWZ0fHxlJiZlLnNjcm9sbExlZnR8fDApLShkJiZkLmNsaWVudExlZnR8fGUmJmUuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGQmJmQuc2Nyb2xsVG9wfHxlJiZlLnNjcm9sbFRvcHx8MCktKGQmJmQuY2xpZW50VG9wfHxlJiZlLmNsaWVudFRvcHx8MCkpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtuLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiLGMsZCxlPWEudHlwZSxmPWEsZz10aGlzLmZpeEhvb2tzW2VdO2d8fCh0aGlzLmZpeEhvb2tzW2VdPWc9Vy50ZXN0KGUpP3RoaXMubW91c2VIb29rczpWLnRlc3QoZSk/dGhpcy5rZXlIb29rczp7fSksZD1nLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGcucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChmKSxiPWQubGVuZ3RoO3doaWxlKGItLSljPWRbYl0sYVtjXT1mW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWwpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGcuZmlsdGVyP2cuZmlsdGVyKGEsZik6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1fKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PV8oKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmbi5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIik/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmV4dGVuZChuZXcgbi5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bi5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpuLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9aOiQpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFuLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLmZvY3VzaW5CdWJibGVzfHxuLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSwhMCl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLEwuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKS0xO2U/TC5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLnJlbW92ZShkLGIpKX19fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWN8fGIsYj12b2lkIDApO2ZvcihnIGluIGEpdGhpcy5vbihnLGIsYyxhW2ddLGUpO3JldHVybiB0aGlzfWlmKG51bGw9PWMmJm51bGw9PWQ/KGQ9YixjPWI9dm9pZCAwKTpudWxsPT1kJiYoXCJzdHJpbmdcIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD0kO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZj1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1mLmd1aWR8fChmLmd1aWQ9bi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZStcIi5cIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4oYj09PSExfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz0kKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP24uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO3ZhciBhYj0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksYmI9LzwoW1xcdzpdKykvLGNiPS88fCYjP1xcdys7LyxkYj0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLGViPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksZmI9L14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxnYj0vXnRydWVcXC8oLiopLyxoYj0vXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2csaWI9e29wdGlvbjpbMSxcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIixcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTtpYi5vcHRncm91cD1pYi5vcHRpb24saWIudGJvZHk9aWIudGZvb3Q9aWIuY29sZ3JvdXA9aWIuY2FwdGlvbj1pYi50aGVhZCxpYi50aD1pYi50ZDtmdW5jdGlvbiBqYihhLGIpe3JldHVybiBuLm5vZGVOYW1lKGEsXCJ0YWJsZVwiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsXCJ0clwiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSk6YX1mdW5jdGlvbiBrYihhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKStcIi9cIithLnR5cGUsYX1mdW5jdGlvbiBsYihhKXt2YXIgYj1nYi5leGVjKGEudHlwZSk7cmV0dXJuIGI/YS50eXBlPWJbMV06YS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLGF9ZnVuY3Rpb24gbWIoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspTC5zZXQoYVtjXSxcImdsb2JhbEV2YWxcIiwhYnx8TC5nZXQoYltjXSxcImdsb2JhbEV2YWxcIikpfWZ1bmN0aW9uIG5iKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZigxPT09Yi5ub2RlVHlwZSl7aWYoTC5oYXNEYXRhKGEpJiYoZj1MLmFjY2VzcyhhKSxnPUwuc2V0KGIsZiksaj1mLmV2ZW50cykpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoZSBpbiBqKWZvcihjPTAsZD1qW2VdLmxlbmd0aDtkPmM7YysrKW4uZXZlbnQuYWRkKGIsZSxqW2VdW2NdKX1NLmhhc0RhdGEoYSkmJihoPU0uYWNjZXNzKGEpLGk9bi5leHRlbmQoe30saCksTS5zZXQoYixpKSl9fWZ1bmN0aW9uIG9iKGEsYil7dmFyIGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTphLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fFwiKlwiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XCJpbnB1dFwiPT09YyYmVC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDooXCJpbnB1dFwiPT09Y3x8XCJ0ZXh0YXJlYVwiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9bi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9b2IoaCksZj1vYihhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXBiKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG9iKGEpLGc9Z3x8b2IoaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyluYihmW2RdLGdbZF0pO2Vsc2UgbmIoYSxoKTtyZXR1cm4gZz1vYihoLFwic2NyaXB0XCIpLGcubGVuZ3RoPjAmJm1iKGcsIWkmJm9iKGEsXCJzY3JpcHRcIikpLGh9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZyxoLGksaixrPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGw9W10sbT0wLG89YS5sZW5ndGg7bz5tO20rKylpZihlPWFbbV0sZXx8MD09PWUpaWYoXCJvYmplY3RcIj09PW4udHlwZShlKSluLm1lcmdlKGwsZS5ub2RlVHlwZT9bZV06ZSk7ZWxzZSBpZihjYi50ZXN0KGUpKXtmPWZ8fGsuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxnPShiYi5leGVjKGUpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxoPWliW2ddfHxpYi5fZGVmYXVsdCxmLmlubmVySFRNTD1oWzFdK2UucmVwbGFjZShhYixcIjwkMT48LyQyPlwiKStoWzJdLGo9aFswXTt3aGlsZShqLS0pZj1mLmxhc3RDaGlsZDtuLm1lcmdlKGwsZi5jaGlsZE5vZGVzKSxmPWsuZmlyc3RDaGlsZCxmLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBsLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShlKSk7ay50ZXh0Q29udGVudD1cIlwiLG09MDt3aGlsZShlPWxbbSsrXSlpZigoIWR8fC0xPT09bi5pbkFycmF5KGUsZCkpJiYoaT1uLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSxmPW9iKGsuYXBwZW5kQ2hpbGQoZSksXCJzY3JpcHRcIiksaSYmbWIoZiksYykpe2o9MDt3aGlsZShlPWZbaisrXSlmYi50ZXN0KGUudHlwZXx8XCJcIikmJmMucHVzaChlKX1yZXR1cm4ga30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZSxmPW4uZXZlbnQuc3BlY2lhbCxnPTA7dm9pZCAwIT09KGM9YVtnXSk7ZysrKXtpZihuLmFjY2VwdERhdGEoYykmJihlPWNbTC5leHBhbmRvXSxlJiYoYj1MLmNhY2hlW2VdKSkpe2lmKGIuZXZlbnRzKWZvcihkIGluIGIuZXZlbnRzKWZbZF0/bi5ldmVudC5yZW1vdmUoYyxkKTpuLnJlbW92ZUV2ZW50KGMsZCxiLmhhbmRsZSk7TC5jYWNoZVtlXSYmZGVsZXRlIEwuY2FjaGVbZV19ZGVsZXRlIE0uY2FjaGVbY1tNLmV4cGFuZG9dXX19fSksbi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiYodGhpcy50ZXh0Q29udGVudD1hKX0pfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amIodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYih0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPWE/bi5maWx0ZXIoYSx0aGlzKTp0aGlzLGU9MDtudWxsIT0oYz1kW2VdKTtlKyspYnx8MSE9PWMubm9kZVR5cGV8fG4uY2xlYW5EYXRhKG9iKGMpKSxjLnBhcmVudE5vZGUmJihiJiZuLmNvbnRhaW5zKGMub3duZXJEb2N1bWVudCxjKSYmbWIob2IoYyxcInNjcmlwdFwiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9iKGEsITEpKSxhLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGw9PWE/ITE6YSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hJiYxPT09Yi5ub2RlVHlwZSlyZXR1cm4gYi5pbm5lckhUTUw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJiFkYi50ZXN0KGEpJiYhaWJbKGJiLmV4ZWMoYSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1hLnJlcGxhY2UoYWIsXCI8JDE+PC8kMj5cIik7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2IoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2E9dGhpcy5wYXJlbnROb2RlLG4uY2xlYW5EYXRhKG9iKHRoaXMpKSxhJiZhLnJlcGxhY2VDaGlsZChiLHRoaXMpfSksYSYmKGEubGVuZ3RofHxhLm5vZGVUeXBlKT90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1lLmFwcGx5KFtdLGEpO3ZhciBjLGQsZixnLGgsaSxqPTAsbD10aGlzLmxlbmd0aCxtPXRoaXMsbz1sLTEscD1hWzBdLHE9bi5pc0Z1bmN0aW9uKHApO2lmKHF8fGw+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmViLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYihjLFwic2NyaXB0XCIpLGtiKSxnPWYubGVuZ3RoO2w+ajtqKyspaD1jLGohPT1vJiYoaD1uLmNsb25lKGgsITAsITApLGcmJm4ubWVyZ2UoZixvYihoLFwic2NyaXB0XCIpKSksYi5jYWxsKHRoaXNbal0saCxqKTtpZihnKWZvcihpPWZbZi5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChmLGxiKSxqPTA7Zz5qO2orKyloPWZbal0sZmIudGVzdChoLnR5cGV8fFwiXCIpJiYhTC5hY2Nlc3MoaCxcImdsb2JhbEV2YWxcIikmJm4uY29udGFpbnMoaSxoKSYmKGguc3JjP24uX2V2YWxVcmwmJm4uX2V2YWxVcmwoaC5zcmMpOm4uZ2xvYmFsRXZhbChoLnRleHRDb250ZW50LnJlcGxhY2UoaGIsXCJcIikpKX1yZXR1cm4gdGhpc319KSxuLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9bihhKSxnPWUubGVuZ3RoLTEsaD0wO2c+PWg7aCsrKWM9aD09PWc/dGhpczp0aGlzLmNsb25lKCEwKSxuKGVbaF0pW2JdKGMpLGYuYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIHFiLHJiPXt9O2Z1bmN0aW9uIHNiKGIsYyl7dmFyIGQsZT1uKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTpuLmNzcyhlWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gZS5kZXRhY2goKSxmfWZ1bmN0aW9uIHRiKGEpe3ZhciBiPWwsYz1yYlthXTtyZXR1cm4gY3x8KGM9c2IoYSxiKSxcIm5vbmVcIiE9PWMmJmN8fChxYj0ocWJ8fG4oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj1xYlswXS5jb250ZW50RG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPXNiKGEsYikscWIuZGV0YWNoKCkpLHJiW2FdPWMpLGN9dmFyIHViPS9ebWFyZ2luLyx2Yj1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLHdiPWZ1bmN0aW9uKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpfTtmdW5jdGlvbiB4YihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fHdiKGEpLGMmJihnPWMuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXSksYyYmKFwiXCIhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSx2Yi50ZXN0KGcpJiZ1Yi50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDAhPT1nP2crXCJcIjpnfWZ1bmN0aW9uIHliKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3JldHVybiBhKCk/dm9pZCBkZWxldGUgdGhpcy5nZXQ6KHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSFmdW5jdGlvbigpe3ZhciBiLGMsZD1sLmRvY3VtZW50RWxlbWVudCxlPWwuY3JlYXRlRWxlbWVudChcImRpdlwiKSxmPWwuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihmLnN0eWxlKXtmLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiY29udGVudC1ib3hcIixmLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJcIixrLmNsZWFyQ2xvbmVTdHlsZT1cImNvbnRlbnQtYm94XCI9PT1mLnN0eWxlLmJhY2tncm91bmRDbGlwLGUuc3R5bGUuY3NzVGV4dD1cImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZS5hcHBlbmRDaGlsZChmKTtmdW5jdGlvbiBnKCl7Zi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIixmLmlubmVySFRNTD1cIlwiLGQuYXBwZW5kQ2hpbGQoZSk7dmFyIGc9YS5nZXRDb21wdXRlZFN0eWxlKGYsbnVsbCk7Yj1cIjElXCIhPT1nLnRvcCxjPVwiNHB4XCI9PT1nLndpZHRoLGQucmVtb3ZlQ2hpbGQoZSl9YS5nZXRDb21wdXRlZFN0eWxlJiZuLmV4dGVuZChrLHtwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoKSxifSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZnKCksY30scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9Zi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO3JldHVybiBjLnN0eWxlLmNzc1RleHQ9Zi5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowXCIsYy5zdHlsZS5tYXJnaW5SaWdodD1jLnN0eWxlLndpZHRoPVwiMFwiLGYuc3R5bGUud2lkdGg9XCIxcHhcIixkLmFwcGVuZENoaWxkKGUpLGI9IXBhcnNlRmxvYXQoYS5nZXRDb21wdXRlZFN0eWxlKGMsbnVsbCkubWFyZ2luUmlnaHQpLGQucmVtb3ZlQ2hpbGQoZSksYn19KX19KCksbi5zd2FwPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTt2YXIgemI9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEFiPW5ldyBSZWdFeHAoXCJeKFwiK1ErXCIpKC4qKSRcIixcImlcIiksQmI9bmV3IFJlZ0V4cChcIl4oWystXSk9KFwiK1ErXCIpXCIsXCJpXCIpLENiPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxEYj17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LEViPVtcIldlYmtpdFwiLFwiT1wiLFwiTW96XCIsXCJtc1wiXTtmdW5jdGlvbiBGYihhLGIpe2lmKGIgaW4gYSlyZXR1cm4gYjt2YXIgYz1iWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1FYi5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9RWJbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gR2IoYSxiLGMpe3ZhciBkPUFiLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fFwicHhcIik6Yn1mdW5jdGlvbiBIYihhLGIsYyxkLGUpe2Zvcih2YXIgZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MCxnPTA7ND5mO2YrPTIpXCJtYXJnaW5cIj09PWMmJihnKz1uLmNzcyhhLGMrUltmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpKSxcIm1hcmdpblwiIT09YyYmKGctPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpOihnKz1uLmNzcyhhLFwicGFkZGluZ1wiK1JbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9bi5jc3MoYSxcImJvcmRlclwiK1JbZl0rXCJXaWR0aFwiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gSWIoYSxiLGMpe3ZhciBkPSEwLGU9XCJ3aWR0aFwiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9d2IoYSksZz1cImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKTtpZigwPj1lfHxudWxsPT1lKXtpZihlPXhiKGEsYixmKSwoMD5lfHxudWxsPT1lKSYmKGU9YS5zdHlsZVtiXSksdmIudGVzdChlKSlyZXR1cm4gZTtkPWcmJihrLmJveFNpemluZ1JlbGlhYmxlKCl8fGU9PT1hLnN0eWxlW2JdKSxlPXBhcnNlRmxvYXQoZSl8fDB9cmV0dXJuIGUrSGIoYSxiLGN8fChnP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLGQsZikrXCJweFwifWZ1bmN0aW9uIEpiKGEsYil7Zm9yKHZhciBjLGQsZSxmPVtdLGc9MCxoPWEubGVuZ3RoO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihmW2ddPUwuZ2V0KGQsXCJvbGRkaXNwbGF5XCIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fFwibm9uZVwiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT1cIlwiKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZTKGQpJiYoZltnXT1MLmFjY2VzcyhkLFwib2xkZGlzcGxheVwiLHRiKGQubm9kZU5hbWUpKSkpOihlPVMoZCksXCJub25lXCI9PT1jJiZlfHxMLnNldChkLFwib2xkZGlzcGxheVwiLGU/YzpuLmNzcyhkLFwiZGlzcGxheVwiKSkpKTtmb3IoZz0wO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihiJiZcIm5vbmVcIiE9PWQuc3R5bGUuZGlzcGxheSYmXCJcIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fFwiXCI6XCJub25lXCIpKTtyZXR1cm4gYX1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPXhiKGEsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1jP1wiMVwiOmN9fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjpcImNzc0Zsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYiksaT1hLnN0eWxlO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZiKGksaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPUJiLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQobi5jc3MoYSxiKSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCIhPT1mfHxuLmNzc051bWJlcltoXXx8KGMrPVwicHhcIiksay5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYihhLnN0eWxlLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmXCJnZXRcImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPXhiKGEsYixkKSksXCJub3JtYWxcIj09PWUmJmIgaW4gRGImJihlPURiW2JdKSxcIlwiPT09Y3x8Yz8oZj1wYXJzZUZsb2F0KGUpLGM9PT0hMHx8bi5pc051bWVyaWMoZik/Znx8MDplKTplfX0pLG4uZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz96Yi50ZXN0KG4uY3NzKGEsXCJkaXNwbGF5XCIpKSYmMD09PWEub2Zmc2V0V2lkdGg/bi5zd2FwKGEsQ2IsZnVuY3Rpb24oKXtyZXR1cm4gSWIoYSxiLGQpfSk6SWIoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kJiZ3YihhKTtyZXR1cm4gR2IoYSxjLGQ/SGIoYSxiLGQsXCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZSksZSk6MCl9fX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9eWIoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bi5zd2FwKGEse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0seGIsW2EsXCJtYXJnaW5SaWdodFwiXSk6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdOzQ+ZDtkKyspZVthK1JbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sdWIudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9R2IpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD13YihhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSmIodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSmIodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtTKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gS2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IEtiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1LYixLYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOktiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fFwic3dpbmdcIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9S2IucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOktiLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPUtiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLnBvcz1iPXRoaXMub3B0aW9ucy5kdXJhdGlvbj9uLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTphLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOktiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LEtiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1LYi5wcm90b3R5cGUsS2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1uLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV18fG4uY3NzSG9va3NbYS5wcm9wXSk/bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sS2IucHJvcEhvb2tzLnNjcm9sbFRvcD1LYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxuLmZ4PUtiLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgTGIsTWIsTmI9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLE9iPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1ErXCIpKFthLXolXSopJFwiLFwiaVwiKSxQYj0vcXVldWVIb29rcyQvLFFiPVtWYl0sUmI9e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1PYi5leGVjKGIpLGY9ZSYmZVszXXx8KG4uY3NzTnVtYmVyW2FdP1wiXCI6XCJweFwiKSxnPShuLmNzc051bWJlclthXXx8XCJweFwiIT09ZiYmK2QpJiZPYi5leGVjKG4uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHxcIi41XCIsZy89aCxuLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBTYigpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7TGI9dm9pZCAwfSksTGI9bi5ub3coKX1mdW5jdGlvbiBUYihhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVJbZF0sZVtcIm1hcmdpblwiK2NdPWVbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGUub3BhY2l0eT1lLndpZHRoPWEpLGV9ZnVuY3Rpb24gVWIoYSxiLGMpe2Zvcih2YXIgZCxlPShSYltiXXx8W10pLmNvbmNhdChSYltcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFZiKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlMoYSkscT1MLmdldChhLFwiZnhzaG93XCIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSxcImZ4XCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLGwuYWx3YXlzKGZ1bmN0aW9uKCl7bC5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLFwiZnhcIikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoXCJoZWlnaHRcImluIGJ8fFwid2lkdGhcImluIGIpJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1uLmNzcyhhLFwiZGlzcGxheVwiKSxrPVwibm9uZVwiPT09aj9MLmdldChhLFwib2xkZGlzcGxheVwiKXx8dGIoYS5ub2RlTmFtZSk6aixcImlubGluZVwiPT09ayYmXCJub25lXCI9PT1uLmNzcyhhLFwiZmxvYXRcIikmJihvLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PVwiaGlkZGVuXCIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLE5iLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8XCJ0b2dnbGVcIj09PWUsZT09PShwP1wiaGlkZVwiOlwic2hvd1wiKSl7aWYoXCJzaG93XCIhPT1lfHwhcXx8dm9pZCAwPT09cVtkXSljb250aW51ZTtwPSEwfW1bZF09cSYmcVtkXXx8bi5zdHlsZShhLGQpfWVsc2Ugaj12b2lkIDA7aWYobi5pc0VtcHR5T2JqZWN0KG0pKVwiaW5saW5lXCI9PT0oXCJub25lXCI9PT1qP3RiKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT9cImhpZGRlblwiaW4gcSYmKHA9cS5oaWRkZW4pOnE9TC5hY2Nlc3MoYSxcImZ4c2hvd1wiLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtMLnJlbW92ZShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9VWIocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gV2IoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhiKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFiLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxifHxTYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGJ8fFNiKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWJbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBuLm1hcChrLFViLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoWGIse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLFJiW2NdPVJiW2NdfHxbXSxSYltjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP1FiLnVuc2hpZnQoYSk6UWIucHVzaChhKX19KSxuLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBuLmZ4LnNwZWVkcz9uLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpuLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihTKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYih0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9bi50aW1lcnMsZz1MLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZQYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9TC5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShUYihiLCEwKSxhLGQsZSl9fSksbi5lYWNoKHtzbGlkZURvd246VGIoXCJzaG93XCIpLHNsaWRlVXA6VGIoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlRiKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG4udGltZXJzPVtdLG4uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW4udGltZXJzO2ZvcihMYj1uLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG4uZnguc3RvcCgpLExiPXZvaWQgMH0sbi5meC50aW1lcj1mdW5jdGlvbihhKXtuLnRpbWVycy5wdXNoKGEpLGEoKT9uLmZ4LnN0YXJ0KCk6bi50aW1lcnMucG9wKCl9LG4uZnguaW50ZXJ2YWw9MTMsbi5meC5zdGFydD1mdW5jdGlvbigpe01ifHwoTWI9c2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChNYiksTWI9bnVsbH0sbi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbi5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW4uZng/bi5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9bC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGM9Yi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2EudHlwZT1cImNoZWNrYm94XCIsay5jaGVja09uPVwiXCIhPT1hLnZhbHVlLGsub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGsub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnZhbHVlPVwidFwiLGEudHlwZT1cInJhZGlvXCIsay5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgWWIsWmIsJGI9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1piOlliKSksdm9pZCAwPT09Yz9kJiZcImdldFwiaW4gZCYmbnVsbCE9PShlPWQuZ2V0KGEsYikpP2U6KGU9bi5maW5kLmF0dHIoYSxiKSxudWxsPT1lP3ZvaWQgMDplKTpudWxsIT09Yz9kJiZcInNldFwiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6dm9pZCBuLnJlbW92ZUF0dHIoYSxiKSlcbn0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT0wLGY9YiYmYi5tYXRjaChFKTtpZihmJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWZbZSsrXSlkPW4ucHJvcEZpeFtjXXx8YyxuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGMpJiYoYVtkXT0hMSksYS5yZW1vdmVBdHRyaWJ1dGUoYyl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWsucmFkaW9WYWx1ZSYmXCJyYWRpb1wiPT09YiYmbi5ub2RlTmFtZShhLFwiaW5wdXRcIikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19fSksWmI9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9uLnJlbW92ZUF0dHIoYSxjKTphLnNldEF0dHJpYnV0ZShjLGMpLGN9fSxuLmVhY2gobi5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9JGJbYl18fG4uZmluZC5hdHRyOyRiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj0kYltiXSwkYltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsJGJbYl09ZiksZX19KTt2YXIgX2I9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTtuLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tuLnByb3BGaXhbYV18fGFdfSl9fSksbi5leHRlbmQoe3Byb3BGaXg6e1wiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW4uaXNYTUxEb2MoYSksZiYmKGI9bi5wcm9wRml4W2JdfHxiLGU9bi5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKXx8X2IudGVzdChhLm5vZGVOYW1lKXx8YS5ocmVmP2EudGFiSW5kZXg6LTF9fX19KSxrLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSxuLmVhY2goW1widGFiSW5kZXhcIixcInJlYWRPbmx5XCIsXCJtYXhMZW5ndGhcIixcImNlbGxTcGFjaW5nXCIsXCJjZWxsUGFkZGluZ1wiLFwicm93U3BhblwiLFwiY29sU3BhblwiLFwidXNlTWFwXCIsXCJmcmFtZUJvcmRlclwiLFwiY29udGVudEVkaXRhYmxlXCJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYz0vW1xcdFxcclxcblxcZl0vZztuLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYyxcIiBcIik6XCIgXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPDAmJihkKz1lK1wiIFwiKTtnPW4udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MD09PWFyZ3VtZW50cy5sZW5ndGh8fFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWMsXCIgXCIpOlwiXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPj0wKWQ9ZC5yZXBsYWNlKFwiIFwiK2UrXCIgXCIsXCIgXCIpO2c9YT9uLnRyaW0oZCk6XCJcIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGImJlwic3RyaW5nXCI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnRoaXMuZWFjaChuLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYyl7bih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHRoaXMuY2xhc3NOYW1lLGIpLGIpfTpmdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PT1jKXt2YXIgYixkPTAsZT1uKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09VXx8XCJib29sZWFuXCI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PSExP1wiXCI6TC5nZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIiBcIithK1wiIFwiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJihcIiBcIit0aGlzW2NdLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYyxcIiBcIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmM9L1xcci9nO24uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1uLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm4uaXNBcnJheShlKSYmKGU9bi5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJjLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksbi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sISghYy5zZWxlY3RlZCYmaSE9PWV8fChrLm9wdERpc2FibGVkP2MuZGlzYWJsZWQ6bnVsbCE9PWMuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpfHxjLnBhcmVudE5vZGUuZGlzYWJsZWQmJm4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KGQudmFsdWUsZik+PTApJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7bi52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uaXNBcnJheShiKT9hLmNoZWNrZWQ9bi5pbkFycmF5KG4oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobi52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjphLnZhbHVlfSl9KSxuLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLFwiKipcIik6dGhpcy5vZmYoYixhfHxcIioqXCIsYyl9fSk7dmFyIGNjPW4ubm93KCksZGM9L1xcPy87bi5wYXJzZUpTT049ZnVuY3Rpb24oYSl7cmV0dXJuIEpTT04ucGFyc2UoYStcIlwiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYixjO2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7Yz1uZXcgRE9NUGFyc2VyLGI9Yy5wYXJzZUZyb21TdHJpbmcoYSxcInRleHQveG1sXCIpfWNhdGNoKGQpe2I9dm9pZCAwfXJldHVybighYnx8Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aCkmJm4uZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrYSksYn07dmFyIGVjLGZjLGdjPS8jLiokLyxoYz0vKFs/Jl0pXz1bXiZdKi8saWM9L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9nbSxqYz0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxrYz0vXig/OkdFVHxIRUFEKSQvLGxjPS9eXFwvXFwvLyxtYz0vXihbXFx3ListXSs6KSg/OlxcL1xcLyg/OlteXFwvPyNdKkB8KShbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxuYz17fSxvYz17fSxwYz1cIiovXCIuY29uY2F0KFwiKlwiKTt0cnl7ZmM9bG9jYXRpb24uaHJlZn1jYXRjaChxYyl7ZmM9bC5jcmVhdGVFbGVtZW50KFwiYVwiKSxmYy5ocmVmPVwiXCIsZmM9ZmMuaHJlZn1lYz1tYy5leGVjKGZjLnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiByYyhhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9YixiPVwiKlwiKTt2YXIgZCxlPTAsZj1iLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFtdO2lmKG4uaXNGdW5jdGlvbihjKSl3aGlsZShkPWZbZSsrXSlcIitcIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8XCIqXCIsKGFbZF09YVtkXXx8W10pLnVuc2hpZnQoYykpOihhW2RdPWFbZF18fFtdKS5wdXNoKGMpfX1mdW5jdGlvbiBzYyhhLGIsYyxkKXt2YXIgZT17fSxmPWE9PT1vYztmdW5jdGlvbiBnKGgpe3ZhciBpO3JldHVybiBlW2hdPSEwLG4uZWFjaChhW2hdfHxbXSxmdW5jdGlvbihhLGgpe3ZhciBqPWgoYixjLGQpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBqfHxmfHxlW2pdP2Y/IShpPWopOnZvaWQgMDooYi5kYXRhVHlwZXMudW5zaGlmdChqKSxnKGopLCExKX0pLGl9cmV0dXJuIGcoYi5kYXRhVHlwZXNbMF0pfHwhZVtcIipcIl0mJmcoXCIqXCIpfWZ1bmN0aW9uIHRjKGEsYil7dmFyIGMsZCxlPW4uYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoYyBpbiBiKXZvaWQgMCE9PWJbY10mJigoZVtjXT9hOmR8fChkPXt9KSlbY109YltjXSk7cmV0dXJuIGQmJm4uZXh0ZW5kKCEwLGEsZCksYX1mdW5jdGlvbiB1YyhhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNvbnRlbnRzLGk9YS5kYXRhVHlwZXM7d2hpbGUoXCIqXCI9PT1pWzBdKWkuc2hpZnQoKSx2b2lkIDA9PT1kJiYoZD1hLm1pbWVUeXBlfHxiLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlK1wiIFwiK2lbMF1dKXtmPWU7YnJlYWt9Z3x8KGc9ZSl9Zj1mfHxnfXJldHVybiBmPyhmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl0pOnZvaWQgMH1mdW5jdGlvbiB2YyhhLGIsYyxkKXt2YXIgZSxmLGcsaCxpLGo9e30saz1hLmRhdGFUeXBlcy5zbGljZSgpO2lmKGtbMV0pZm9yKGcgaW4gYS5jb252ZXJ0ZXJzKWpbZy50b0xvd2VyQ2FzZSgpXT1hLmNvbnZlcnRlcnNbZ107Zj1rLnNoaWZ0KCk7d2hpbGUoZilpZihhLnJlc3BvbnNlRmllbGRzW2ZdJiYoY1thLnJlc3BvbnNlRmllbGRzW2ZdXT1iKSwhaSYmZCYmYS5kYXRhRmlsdGVyJiYoYj1hLmRhdGFGaWx0ZXIoYixhLmRhdGFUeXBlKSksaT1mLGY9ay5zaGlmdCgpKWlmKFwiKlwiPT09ZilmPWk7ZWxzZSBpZihcIipcIiE9PWkmJmkhPT1mKXtpZihnPWpbaStcIiBcIitmXXx8altcIiogXCIrZl0sIWcpZm9yKGUgaW4gailpZihoPWUuc3BsaXQoXCIgXCIpLGhbMV09PT1mJiYoZz1qW2krXCIgXCIraFswXV18fGpbXCIqIFwiK2hbMF1dKSl7Zz09PSEwP2c9altlXTpqW2VdIT09ITAmJihmPWhbMF0say51bnNoaWZ0KGhbMV0pKTticmVha31pZihnIT09ITApaWYoZyYmYVtcInRocm93c1wiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZTpcInBhcnNlcmVycm9yXCIsZXJyb3I6Zz9sOlwiTm8gY29udmVyc2lvbiBmcm9tIFwiK2krXCIgdG8gXCIrZn19fXJldHVybntzdGF0ZTpcInN1Y2Nlc3NcIixkYXRhOmJ9fW4uZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpmYyx0eXBlOlwiR0VUXCIsaXNMb2NhbDpqYy50ZXN0KGVjWzFdKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixhY2NlcHRzOntcIipcIjpwYyx0ZXh0OlwidGV4dC9wbGFpblwiLGh0bWw6XCJ0ZXh0L2h0bWxcIix4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwifSxjb250ZW50czp7eG1sOi94bWwvLGh0bWw6L2h0bWwvLGpzb246L2pzb24vfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCIsanNvbjpcInJlc3BvbnNlSlNPTlwifSxjb252ZXJ0ZXJzOntcIiogdGV4dFwiOlN0cmluZyxcInRleHQgaHRtbFwiOiEwLFwidGV4dCBqc29uXCI6bi5wYXJzZUpTT04sXCJ0ZXh0IHhtbFwiOm4ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP3RjKHRjKGEsbi5hamF4U2V0dGluZ3MpLGIpOnRjKG4uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOnJjKG5jKSxhamF4VHJhbnNwb3J0OnJjKG9jKSxhamF4OmZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGI9Ynx8e307dmFyIGMsZCxlLGYsZyxoLGksaixrPW4uYWpheFNldHVwKHt9LGIpLGw9ay5jb250ZXh0fHxrLG09ay5jb250ZXh0JiYobC5ub2RlVHlwZXx8bC5qcXVlcnkpP24obCk6bi5ldmVudCxvPW4uRGVmZXJyZWQoKSxwPW4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikscT1rLnN0YXR1c0NvZGV8fHt9LHI9e30scz17fSx0PTAsdT1cImNhbmNlbGVkXCIsdj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT10KXtpZighZil7Zj17fTt3aGlsZShiPWljLmV4ZWMoZSkpZltiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1mW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXQ/ZTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB0fHwoYT1zW2NdPXNbY118fGEsclthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB0fHwoay5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj50KWZvcihiIGluIGEpcVtiXT1bcVtiXSxhW2JdXTtlbHNlIHYuYWx3YXlzKGFbdi5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dTtyZXR1cm4gYyYmYy5hYm9ydChiKSx4KDAsYiksdGhpc319O2lmKG8ucHJvbWlzZSh2KS5jb21wbGV0ZT1wLmFkZCx2LnN1Y2Nlc3M9di5kb25lLHYuZXJyb3I9di5mYWlsLGsudXJsPSgoYXx8ay51cmx8fGZjKStcIlwiKS5yZXBsYWNlKGdjLFwiXCIpLnJlcGxhY2UobGMsZWNbMV0rXCIvL1wiKSxrLnR5cGU9Yi5tZXRob2R8fGIudHlwZXx8ay5tZXRob2R8fGsudHlwZSxrLmRhdGFUeXBlcz1uLnRyaW0oay5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRSl8fFtcIlwiXSxudWxsPT1rLmNyb3NzRG9tYWluJiYoaD1tYy5leGVjKGsudXJsLnRvTG93ZXJDYXNlKCkpLGsuY3Jvc3NEb21haW49ISghaHx8aFsxXT09PWVjWzFdJiZoWzJdPT09ZWNbMl0mJihoWzNdfHwoXCJodHRwOlwiPT09aFsxXT9cIjgwXCI6XCI0NDNcIikpPT09KGVjWzNdfHwoXCJodHRwOlwiPT09ZWNbMV0/XCI4MFwiOlwiNDQzXCIpKSkpLGsuZGF0YSYmay5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIGsuZGF0YSYmKGsuZGF0YT1uLnBhcmFtKGsuZGF0YSxrLnRyYWRpdGlvbmFsKSksc2MobmMsayxiLHYpLDI9PT10KXJldHVybiB2O2k9ay5nbG9iYWwsaSYmMD09PW4uYWN0aXZlKysmJm4uZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxrLnR5cGU9ay50eXBlLnRvVXBwZXJDYXNlKCksay5oYXNDb250ZW50PSFrYy50ZXN0KGsudHlwZSksZD1rLnVybCxrLmhhc0NvbnRlbnR8fChrLmRhdGEmJihkPWsudXJsKz0oZGMudGVzdChkKT9cIiZcIjpcIj9cIikray5kYXRhLGRlbGV0ZSBrLmRhdGEpLGsuY2FjaGU9PT0hMSYmKGsudXJsPWhjLnRlc3QoZCk/ZC5yZXBsYWNlKGhjLFwiJDFfPVwiK2NjKyspOmQrKGRjLnRlc3QoZCk/XCImXCI6XCI/XCIpK1wiXz1cIitjYysrKSksay5pZk1vZGlmaWVkJiYobi5sYXN0TW9kaWZpZWRbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsbi5sYXN0TW9kaWZpZWRbZF0pLG4uZXRhZ1tkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLG4uZXRhZ1tkXSkpLChrLmRhdGEmJmsuaGFzQ29udGVudCYmay5jb250ZW50VHlwZSE9PSExfHxiLmNvbnRlbnRUeXBlKSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsay5jb250ZW50VHlwZSksdi5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsay5kYXRhVHlwZXNbMF0mJmsuYWNjZXB0c1trLmRhdGFUeXBlc1swXV0/ay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1rLmRhdGFUeXBlc1swXT9cIiwgXCIrcGMrXCI7IHE9MC4wMVwiOlwiXCIpOmsuYWNjZXB0c1tcIipcIl0pO2ZvcihqIGluIGsuaGVhZGVycyl2LnNldFJlcXVlc3RIZWFkZXIoaixrLmhlYWRlcnNbal0pO2lmKGsuYmVmb3JlU2VuZCYmKGsuYmVmb3JlU2VuZC5jYWxsKGwsdixrKT09PSExfHwyPT09dCkpcmV0dXJuIHYuYWJvcnQoKTt1PVwiYWJvcnRcIjtmb3IoaiBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl2W2pdKGtbal0pO2lmKGM9c2Mob2MsayxiLHYpKXt2LnJlYWR5U3RhdGU9MSxpJiZtLnRyaWdnZXIoXCJhamF4U2VuZFwiLFt2LGtdKSxrLmFzeW5jJiZrLnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoXCJ0aW1lb3V0XCIpfSxrLnRpbWVvdXQpKTt0cnl7dD0xLGMuc2VuZChyLHgpfWNhdGNoKHcpe2lmKCEoMj50KSl0aHJvdyB3O3goLTEsdyl9fWVsc2UgeCgtMSxcIk5vIFRyYW5zcG9ydFwiKTtmdW5jdGlvbiB4KGEsYixmLGgpe3ZhciBqLHIscyx1LHcseD1iOzIhPT10JiYodD0yLGcmJmNsZWFyVGltZW91dChnKSxjPXZvaWQgMCxlPWh8fFwiXCIsdi5yZWFkeVN0YXRlPWE+MD80OjAsaj1hPj0yMDAmJjMwMD5hfHwzMDQ9PT1hLGYmJih1PXVjKGssdixmKSksdT12YyhrLHUsdixqKSxqPyhrLmlmTW9kaWZpZWQmJih3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLHcmJihuLmxhc3RNb2RpZmllZFtkXT13KSx3PXYuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpLHcmJihuLmV0YWdbZF09dykpLDIwND09PWF8fFwiSEVBRFwiPT09ay50eXBlP3g9XCJub2NvbnRlbnRcIjozMDQ9PT1hP3g9XCJub3Rtb2RpZmllZFwiOih4PXUuc3RhdGUscj11LmRhdGEscz11LmVycm9yLGo9IXMpKToocz14LChhfHwheCkmJih4PVwiZXJyb3JcIiwwPmEmJihhPTApKSksdi5zdGF0dXM9YSx2LnN0YXR1c1RleHQ9KGJ8fHgpK1wiXCIsaj9vLnJlc29sdmVXaXRoKGwsW3IseCx2XSk6by5yZWplY3RXaXRoKGwsW3YseCxzXSksdi5zdGF0dXNDb2RlKHEpLHE9dm9pZCAwLGkmJm0udHJpZ2dlcihqP1wiYWpheFN1Y2Nlc3NcIjpcImFqYXhFcnJvclwiLFt2LGssaj9yOnNdKSxwLmZpcmVXaXRoKGwsW3YseF0pLGkmJihtLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIixbdixrXSksLS1uLmFjdGl2ZXx8bi5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKX1yZXR1cm4gdn0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZ2V0KGEsYixjLFwianNvblwiKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsXCJzY3JpcHRcIil9fSksbi5lYWNoKFtcImdldFwiLFwicG9zdFwiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0pfX0pLG4uZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG4uX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uYWpheCh7dXJsOmEsdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwic2NyaXB0XCIsYXN5bmM6ITEsZ2xvYmFsOiExLFwidGhyb3dzXCI6ITB9KX0sbi5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG4uaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pOih0aGlzWzBdJiYoYj1uKGEsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZiLmluc2VydEJlZm9yZSh0aGlzWzBdKSxiLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXM7d2hpbGUoYS5maXJzdEVsZW1lbnRDaGlsZClhPWEuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcykpLHRoaXMpfSx3cmFwSW5uZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChuLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYil7bih0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsYikpfTpmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcyxcImJvZHlcIil8fG4odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG4uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB9LG4uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIW4uZXhwci5maWx0ZXJzLmhpZGRlbihhKX07dmFyIHdjPS8lMjAvZyx4Yz0vXFxbXFxdJC8seWM9L1xccj9cXG4vZyx6Yz0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksQWM9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIEJjKGEsYixjLGQpe3ZhciBlO2lmKG4uaXNBcnJheShiKSluLmVhY2goYixmdW5jdGlvbihiLGUpe2N8fHhjLnRlc3QoYSk/ZChhLGUpOkJjKGErXCJbXCIrKFwib2JqZWN0XCI9PXR5cGVvZiBlP2I6XCJcIikrXCJdXCIsZSxjLGQpfSk7ZWxzZSBpZihjfHxcIm9iamVjdFwiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpQmMoYStcIltcIitlK1wiXVwiLGJbZV0sYyxkKX1uLnBhcmFtPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPWZ1bmN0aW9uKGEsYil7Yj1uLmlzRnVuY3Rpb24oYik/YigpOm51bGw9PWI/XCJcIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoYil9O2lmKHZvaWQgMD09PWImJihiPW4uYWpheFNldHRpbmdzJiZuLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksbi5pc0FycmF5KGEpfHxhLmpxdWVyeSYmIW4uaXNQbGFpbk9iamVjdChhKSluLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IoYyBpbiBhKUJjKGMsYVtjXSxiLGUpO3JldHVybiBkLmpvaW4oXCImXCIpLnJlcGxhY2Uod2MsXCIrXCIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcyxcImVsZW1lbnRzXCIpO3JldHVybiBhP24ubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIW4odGhpcykuaXMoXCI6ZGlzYWJsZWRcIikmJkFjLnRlc3QodGhpcy5ub2RlTmFtZSkmJiF6Yy50ZXN0KGEpJiYodGhpcy5jaGVja2VkfHwhVC50ZXN0KGEpKX0pLm1hcChmdW5jdGlvbihhLGIpe3ZhciBjPW4odGhpcykudmFsKCk7cmV0dXJuIG51bGw9PWM/bnVsbDpuLmlzQXJyYXkoYyk/bi5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHljLFwiXFxyXFxuXCIpfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpjLnJlcGxhY2UoeWMsXCJcXHJcXG5cIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYSl7fX07dmFyIENjPTAsRGM9e30sRWM9ezA6MjAwLDEyMjM6MjA0fSxGYz1uLmFqYXhTZXR0aW5ncy54aHIoKTthLkFjdGl2ZVhPYmplY3QmJm4oYSkub24oXCJ1bmxvYWRcIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBEYylEY1thXSgpfSksay5jb3JzPSEhRmMmJlwid2l0aENyZWRlbnRpYWxzXCJpbiBGYyxrLmFqYXg9RmM9ISFGYyxuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGsuY29yc3x8RmMmJiFhLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hLnhocigpLGc9KytDYztpZihmLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKSxhLnhockZpZWxkcylmb3IoZSBpbiBhLnhockZpZWxkcylmW2VdPWEueGhyRmllbGRzW2VdO2EubWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpLGEuY3Jvc3NEb21haW58fGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoY1tcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKTtmb3IoZSBpbiBjKWYuc2V0UmVxdWVzdEhlYWRlcihlLGNbZV0pO2I9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YiYmKGRlbGV0ZSBEY1tnXSxiPWYub25sb2FkPWYub25lcnJvcj1udWxsLFwiYWJvcnRcIj09PWE/Zi5hYm9ydCgpOlwiZXJyb3JcIj09PWE/ZChmLnN0YXR1cyxmLnN0YXR1c1RleHQpOmQoRWNbZi5zdGF0dXNdfHxmLnN0YXR1cyxmLnN0YXR1c1RleHQsXCJzdHJpbmdcIj09dHlwZW9mIGYucmVzcG9uc2VUZXh0P3t0ZXh0OmYucmVzcG9uc2VUZXh0fTp2b2lkIDAsZi5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sZi5vbmxvYWQ9YigpLGYub25lcnJvcj1iKFwiZXJyb3JcIiksYj1EY1tnXT1iKFwiYWJvcnRcIik7dHJ5e2Yuc2VuZChhLmhhc0NvbnRlbnQmJmEuZGF0YXx8bnVsbCl9Y2F0Y2goaCl7aWYoYil0aHJvdyBofX0sYWJvcnQ6ZnVuY3Rpb24oKXtiJiZiKCl9fTp2b2lkIDB9KSxuLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OlwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIn0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6e1widGV4dCBzY3JpcHRcIjpmdW5jdGlvbihhKXtyZXR1cm4gbi5nbG9iYWxFdmFsKGEpLGF9fX0pLG4uYWpheFByZWZpbHRlcihcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPVwiR0VUXCIpfSksbi5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7aWYoYS5jcm9zc0RvbWFpbil7dmFyIGIsYztyZXR1cm57c2VuZDpmdW5jdGlvbihkLGUpe2I9bihcIjxzY3JpcHQ+XCIpLnByb3Aoe2FzeW5jOiEwLGNoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKFwibG9hZCBlcnJvclwiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZShcImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCxhLnR5cGUpfSksbC5oZWFkLmFwcGVuZENoaWxkKGJbMF0pfSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fX0pO3ZhciBHYz1bXSxIYz0vKD0pXFw/KD89JnwkKXxcXD9cXD8vO24uYWpheFNldHVwKHtqc29ucDpcImNhbGxiYWNrXCIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPUdjLnBvcCgpfHxuLmV4cGFuZG8rXCJfXCIrY2MrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIixmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9Yi5qc29ucCE9PSExJiYoSGMudGVzdChiLnVybCk/XCJ1cmxcIjpcInN0cmluZ1wiPT10eXBlb2YgYi5kYXRhJiYhKGIuY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJkhjLnRlc3QoYi5kYXRhKSYmXCJkYXRhXCIpO3JldHVybiBofHxcImpzb25wXCI9PT1iLmRhdGFUeXBlc1swXT8oZT1iLmpzb25wQ2FsbGJhY2s9bi5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoSGMsXCIkMVwiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0oZGMudGVzdChiLnVybCk/XCImXCI6XCI/XCIpK2IuanNvbnArXCI9XCIrZSksYi5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlK1wiIHdhcyBub3QgY2FsbGVkXCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPVwianNvblwiLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLEdjLnB1c2goZSkpLGcmJm4uaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksXCJzY3JpcHRcIik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDtcImJvb2xlYW5cIj09dHlwZW9mIGImJihjPWIsYj0hMSksYj1ifHxsO3ZhciBkPXYuZXhlYyhhKSxlPSFjJiZbXTtyZXR1cm4gZD9bYi5jcmVhdGVFbGVtZW50KGRbMV0pXTooZD1uLmJ1aWxkRnJhZ21lbnQoW2FdLGIsZSksZSYmZS5sZW5ndGgmJm4oZSkucmVtb3ZlKCksbi5tZXJnZShbXSxkLmNoaWxkTm9kZXMpKX07dmFyIEljPW4uZm4ubG9hZDtuLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhJiZJYylyZXR1cm4gSWMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoXCIgXCIpO3JldHVybiBoPj0wJiYoZD1uLnRyaW0oYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiZcIm9iamVjdFwiPT10eXBlb2YgYiYmKGU9XCJQT1NUXCIpLGcubGVuZ3RoPjAmJm4uYWpheCh7dXJsOmEsdHlwZTplLGRhdGFUeXBlOlwiaHRtbFwiLGRhdGE6Yn0pLmRvbmUoZnVuY3Rpb24oYSl7Zj1hcmd1bWVudHMsZy5odG1sKGQ/bihcIjxkaXY+XCIpLmFwcGVuZChuLnBhcnNlSFRNTChhKSkuZmluZChkKTphKX0pLmNvbXBsZXRlKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGMsZnx8W2EucmVzcG9uc2VUZXh0LGIsYV0pfSksdGhpc30sbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07dmFyIEpjPWEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2Z1bmN0aW9uIEtjKGEpe3JldHVybiBuLmlzV2luZG93KGEpP2E6OT09PWEubm9kZVR5cGUmJmEuZGVmYXVsdFZpZXd9bi5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1uLmNzcyhhLFwicG9zaXRpb25cIiksbD1uKGEpLG09e307XCJzdGF0aWNcIj09PWsmJihhLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksaD1sLm9mZnNldCgpLGY9bi5jc3MoYSxcInRvcFwiKSxpPW4uY3NzKGEsXCJsZWZ0XCIpLGo9KFwiYWJzb2x1dGVcIj09PWt8fFwiZml4ZWRcIj09PWspJiYoZitpKS5pbmRleE9mKFwiYXV0b1wiKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLGgpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLFwidXNpbmdcImluIGI/Yi51c2luZy5jYWxsKGEsbSk6bC5jc3MobSl9fSxuLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWE/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oYil7bi5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxiKX0pO3ZhciBiLGMsZD10aGlzWzBdLGU9e3RvcDowLGxlZnQ6MH0sZj1kJiZkLm93bmVyRG9jdW1lbnQ7aWYoZilyZXR1cm4gYj1mLmRvY3VtZW50RWxlbWVudCxuLmNvbnRhaW5zKGIsZCk/KHR5cGVvZiBkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PVUmJihlPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGM9S2MoZikse3RvcDplLnRvcCtjLnBhZ2VZT2Zmc2V0LWIuY2xpZW50VG9wLGxlZnQ6ZS5sZWZ0K2MucGFnZVhPZmZzZXQtYi5jbGllbnRMZWZ0fSk6ZX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9dGhpc1swXSxkPXt0b3A6MCxsZWZ0OjB9O3JldHVyblwiZml4ZWRcIj09PW4uY3NzKGMsXCJwb3NpdGlvblwiKT9iPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLFwiaHRtbFwiKXx8KGQ9YS5vZmZzZXQoKSksZC50b3ArPW4uY3NzKGFbMF0sXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCkpLHt0b3A6Yi50b3AtZC50b3Atbi5jc3MoYyxcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OmIubGVmdC1kLmxlZnQtbi5jc3MoYyxcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnR8fEpjO3doaWxlKGEmJiFuLm5vZGVOYW1lKGEsXCJodG1sXCIpJiZcInN0YXRpY1wiPT09bi5jc3MoYSxcInBvc2l0aW9uXCIpKWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fEpjfSl9fSksbi5lYWNoKHtzY3JvbGxMZWZ0OlwicGFnZVhPZmZzZXRcIixzY3JvbGxUb3A6XCJwYWdlWU9mZnNldFwifSxmdW5jdGlvbihiLGMpe3ZhciBkPVwicGFnZVlPZmZzZXRcIj09PWM7bi5mbltiXT1mdW5jdGlvbihlKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsZSxmKXt2YXIgZz1LYyhiKTtyZXR1cm4gdm9pZCAwPT09Zj9nP2dbY106YltlXTp2b2lkKGc/Zy5zY3JvbGxUbyhkP2EucGFnZVhPZmZzZXQ6ZixkP2Y6YS5wYWdlWU9mZnNldCk6YltlXT1mKX0sYixlLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFtcInRvcFwiLFwibGVmdFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09eWIoay5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGM/KGM9eGIoYSxiKSx2Yi50ZXN0KGMpP24oYSkucG9zaXRpb24oKVtiXStcInB4XCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDpcImhlaWdodFwiLFdpZHRoOlwid2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmVhY2goe3BhZGRpbmc6XCJpbm5lclwiK2EsY29udGVudDpiLFwiXCI6XCJvdXRlclwiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHxcImJvb2xlYW5cIiE9dHlwZW9mIGQpLGc9Y3x8KGQ9PT0hMHx8ZT09PSEwP1wibWFyZ2luXCI6XCJib3JkZXJcIik7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbXCJjbGllbnRcIithXTo5PT09Yi5ub2RlVHlwZT8oZT1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbXCJzY3JvbGxcIithXSxlW1wic2Nyb2xsXCIrYV0sYi5ib2R5W1wib2Zmc2V0XCIrYV0sZVtcIm9mZnNldFwiK2FdLGVbXCJjbGllbnRcIithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSxuLmZuLmFuZFNlbGY9bi5mbi5hZGRCYWNrLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwianF1ZXJ5XCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBMYz1hLmpRdWVyeSxNYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1NYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9TGMpLG59LHR5cGVvZiBiPT09VSYmKGEualF1ZXJ5PWEuJD1uKSxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qcXVlcnkubWluLm1hcCIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcbi8qKlxuICogQGxpY2Vuc2VcbiAqIExvLURhc2ggMi40LjEgKEN1c3RvbSBCdWlsZCkgbG9kYXNoLmNvbS9saWNlbnNlIHwgVW5kZXJzY29yZS5qcyAxLjUuMiB1bmRlcnNjb3JlanMub3JnL0xJQ0VOU0VcbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiAtbyAuL2Rpc3QvbG9kYXNoLmpzYFxuICovXG47KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHQsZSl7ZT0oZXx8MCktMTtmb3IodmFyIHI9bj9uLmxlbmd0aDowOysrZTxyOylpZihuW2VdPT09dClyZXR1cm4gZTtyZXR1cm4tMX1mdW5jdGlvbiB0KHQsZSl7dmFyIHI9dHlwZW9mIGU7aWYodD10LmwsXCJib29sZWFuXCI9PXJ8fG51bGw9PWUpcmV0dXJuIHRbZV0/MDotMTtcIm51bWJlclwiIT1yJiZcInN0cmluZ1wiIT1yJiYocj1cIm9iamVjdFwiKTt2YXIgdT1cIm51bWJlclwiPT1yP2U6bStlO3JldHVybiB0PSh0PXRbcl0pJiZ0W3VdLFwib2JqZWN0XCI9PXI/dCYmLTE8bih0LGUpPzA6LTE6dD8wOi0xfWZ1bmN0aW9uIGUobil7dmFyIHQ9dGhpcy5sLGU9dHlwZW9mIG47aWYoXCJib29sZWFuXCI9PWV8fG51bGw9PW4pdFtuXT10cnVlO2Vsc2V7XCJudW1iZXJcIiE9ZSYmXCJzdHJpbmdcIiE9ZSYmKGU9XCJvYmplY3RcIik7dmFyIHI9XCJudW1iZXJcIj09ZT9uOm0rbix0PXRbZV18fCh0W2VdPXt9KTtcIm9iamVjdFwiPT1lPyh0W3JdfHwodFtyXT1bXSkpLnB1c2gobik6dFtyXT10cnVlXG59fWZ1bmN0aW9uIHIobil7cmV0dXJuIG4uY2hhckNvZGVBdCgwKX1mdW5jdGlvbiB1KG4sdCl7Zm9yKHZhciBlPW4ubSxyPXQubSx1PS0xLG89ZS5sZW5ndGg7Kyt1PG87KXt2YXIgaT1lW3VdLGE9clt1XTtpZihpIT09YSl7aWYoaT5hfHx0eXBlb2YgaT09XCJ1bmRlZmluZWRcIilyZXR1cm4gMTtpZihpPGF8fHR5cGVvZiBhPT1cInVuZGVmaW5lZFwiKXJldHVybi0xfX1yZXR1cm4gbi5uLXQubn1mdW5jdGlvbiBvKG4pe3ZhciB0PS0xLHI9bi5sZW5ndGgsdT1uWzBdLG89bltyLzJ8MF0saT1uW3ItMV07aWYodSYmdHlwZW9mIHU9PVwib2JqZWN0XCImJm8mJnR5cGVvZiBvPT1cIm9iamVjdFwiJiZpJiZ0eXBlb2YgaT09XCJvYmplY3RcIilyZXR1cm4gZmFsc2U7Zm9yKHU9ZigpLHVbXCJmYWxzZVwiXT11W1wibnVsbFwiXT11W1widHJ1ZVwiXT11LnVuZGVmaW5lZD1mYWxzZSxvPWYoKSxvLms9bixvLmw9dSxvLnB1c2g9ZTsrK3Q8cjspby5wdXNoKG5bdF0pO3JldHVybiBvfWZ1bmN0aW9uIGkobil7cmV0dXJuXCJcXFxcXCIrVVtuXVxufWZ1bmN0aW9uIGEoKXtyZXR1cm4gaC5wb3AoKXx8W119ZnVuY3Rpb24gZigpe3JldHVybiBnLnBvcCgpfHx7azpudWxsLGw6bnVsbCxtOm51bGwsXCJmYWxzZVwiOmZhbHNlLG46MCxcIm51bGxcIjpmYWxzZSxudW1iZXI6bnVsbCxvYmplY3Q6bnVsbCxwdXNoOm51bGwsc3RyaW5nOm51bGwsXCJ0cnVlXCI6ZmFsc2UsdW5kZWZpbmVkOmZhbHNlLG86bnVsbH19ZnVuY3Rpb24gbChuKXtuLmxlbmd0aD0wLGgubGVuZ3RoPF8mJmgucHVzaChuKX1mdW5jdGlvbiBjKG4pe3ZhciB0PW4ubDt0JiZjKHQpLG4uaz1uLmw9bi5tPW4ub2JqZWN0PW4ubnVtYmVyPW4uc3RyaW5nPW4ubz1udWxsLGcubGVuZ3RoPF8mJmcucHVzaChuKX1mdW5jdGlvbiBwKG4sdCxlKXt0fHwodD0wKSx0eXBlb2YgZT09XCJ1bmRlZmluZWRcIiYmKGU9bj9uLmxlbmd0aDowKTt2YXIgcj0tMTtlPWUtdHx8MDtmb3IodmFyIHU9QXJyYXkoMD5lPzA6ZSk7KytyPGU7KXVbcl09blt0K3JdO3JldHVybiB1fWZ1bmN0aW9uIHMoZSl7ZnVuY3Rpb24gaChuLHQsZSl7aWYoIW58fCFWW3R5cGVvZiBuXSlyZXR1cm4gbjtcbnQ9dCYmdHlwZW9mIGU9PVwidW5kZWZpbmVkXCI/dDp0dCh0LGUsMyk7Zm9yKHZhciByPS0xLHU9Vlt0eXBlb2Ygbl0mJkZlKG4pLG89dT91Lmxlbmd0aDowOysrcjxvJiYoZT11W3JdLGZhbHNlIT09dChuW2VdLGUsbikpOyk7cmV0dXJuIG59ZnVuY3Rpb24gZyhuLHQsZSl7dmFyIHI7aWYoIW58fCFWW3R5cGVvZiBuXSlyZXR1cm4gbjt0PXQmJnR5cGVvZiBlPT1cInVuZGVmaW5lZFwiP3Q6dHQodCxlLDMpO2ZvcihyIGluIG4paWYoZmFsc2U9PT10KG5bcl0scixuKSlicmVhaztyZXR1cm4gbn1mdW5jdGlvbiBfKG4sdCxlKXt2YXIgcix1PW4sbz11O2lmKCF1KXJldHVybiBvO2Zvcih2YXIgaT1hcmd1bWVudHMsYT0wLGY9dHlwZW9mIGU9PVwibnVtYmVyXCI/MjppLmxlbmd0aDsrK2E8ZjspaWYoKHU9aVthXSkmJlZbdHlwZW9mIHVdKWZvcih2YXIgbD0tMSxjPVZbdHlwZW9mIHVdJiZGZSh1KSxwPWM/Yy5sZW5ndGg6MDsrK2w8cDspcj1jW2xdLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBvW3JdJiYob1tyXT11W3JdKTtcbnJldHVybiBvfWZ1bmN0aW9uIFUobix0LGUpe3ZhciByLHU9bixvPXU7aWYoIXUpcmV0dXJuIG87dmFyIGk9YXJndW1lbnRzLGE9MCxmPXR5cGVvZiBlPT1cIm51bWJlclwiPzI6aS5sZW5ndGg7aWYoMzxmJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpW2YtMl0pdmFyIGw9dHQoaVstLWYtMV0saVtmLS1dLDIpO2Vsc2UgMjxmJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpW2YtMV0mJihsPWlbLS1mXSk7Zm9yKDsrK2E8ZjspaWYoKHU9aVthXSkmJlZbdHlwZW9mIHVdKWZvcih2YXIgYz0tMSxwPVZbdHlwZW9mIHVdJiZGZSh1KSxzPXA/cC5sZW5ndGg6MDsrK2M8czspcj1wW2NdLG9bcl09bD9sKG9bcl0sdVtyXSk6dVtyXTtyZXR1cm4gb31mdW5jdGlvbiBIKG4pe3ZhciB0LGU9W107aWYoIW58fCFWW3R5cGVvZiBuXSlyZXR1cm4gZTtmb3IodCBpbiBuKW1lLmNhbGwobix0KSYmZS5wdXNoKHQpO3JldHVybiBlfWZ1bmN0aW9uIEoobil7cmV0dXJuIG4mJnR5cGVvZiBuPT1cIm9iamVjdFwiJiYhVGUobikmJm1lLmNhbGwobixcIl9fd3JhcHBlZF9fXCIpP246bmV3IFEobilcbn1mdW5jdGlvbiBRKG4sdCl7dGhpcy5fX2NoYWluX189ISF0LHRoaXMuX193cmFwcGVkX189bn1mdW5jdGlvbiBYKG4pe2Z1bmN0aW9uIHQoKXtpZihyKXt2YXIgbj1wKHIpO2JlLmFwcGx5KG4sYXJndW1lbnRzKX1pZih0aGlzIGluc3RhbmNlb2YgdCl7dmFyIG89bnQoZS5wcm90b3R5cGUpLG49ZS5hcHBseShvLG58fGFyZ3VtZW50cyk7cmV0dXJuIHd0KG4pP246b31yZXR1cm4gZS5hcHBseSh1LG58fGFyZ3VtZW50cyl9dmFyIGU9blswXSxyPW5bMl0sdT1uWzRdO3JldHVybiAkZSh0LG4pLHR9ZnVuY3Rpb24gWihuLHQsZSxyLHUpe2lmKGUpe3ZhciBvPWUobik7aWYodHlwZW9mIG8hPVwidW5kZWZpbmVkXCIpcmV0dXJuIG99aWYoIXd0KG4pKXJldHVybiBuO3ZhciBpPWNlLmNhbGwobik7aWYoIUtbaV0pcmV0dXJuIG47dmFyIGY9QWVbaV07c3dpdGNoKGkpe2Nhc2UgVDpjYXNlIEY6cmV0dXJuIG5ldyBmKCtuKTtjYXNlIFc6Y2FzZSBQOnJldHVybiBuZXcgZihuKTtjYXNlIHo6cmV0dXJuIG89ZihuLnNvdXJjZSxDLmV4ZWMobikpLG8ubGFzdEluZGV4PW4ubGFzdEluZGV4LG9cbn1pZihpPVRlKG4pLHQpe3ZhciBjPSFyO3J8fChyPWEoKSksdXx8KHU9YSgpKTtmb3IodmFyIHM9ci5sZW5ndGg7cy0tOylpZihyW3NdPT1uKXJldHVybiB1W3NdO289aT9mKG4ubGVuZ3RoKTp7fX1lbHNlIG89aT9wKG4pOlUoe30sbik7cmV0dXJuIGkmJihtZS5jYWxsKG4sXCJpbmRleFwiKSYmKG8uaW5kZXg9bi5pbmRleCksbWUuY2FsbChuLFwiaW5wdXRcIikmJihvLmlucHV0PW4uaW5wdXQpKSx0PyhyLnB1c2gobiksdS5wdXNoKG8pLChpP1N0OmgpKG4sZnVuY3Rpb24obixpKXtvW2ldPVoobix0LGUscix1KX0pLGMmJihsKHIpLGwodSkpLG8pOm99ZnVuY3Rpb24gbnQobil7cmV0dXJuIHd0KG4pP2tlKG4pOnt9fWZ1bmN0aW9uIHR0KG4sdCxlKXtpZih0eXBlb2YgbiE9XCJmdW5jdGlvblwiKXJldHVybiBVdDtpZih0eXBlb2YgdD09XCJ1bmRlZmluZWRcInx8IShcInByb3RvdHlwZVwiaW4gbikpcmV0dXJuIG47dmFyIHI9bi5fX2JpbmREYXRhX187aWYodHlwZW9mIHI9PVwidW5kZWZpbmVkXCImJihEZS5mdW5jTmFtZXMmJihyPSFuLm5hbWUpLHI9cnx8IURlLmZ1bmNEZWNvbXAsIXIpKXt2YXIgdT1nZS5jYWxsKG4pO1xuRGUuZnVuY05hbWVzfHwocj0hTy50ZXN0KHUpKSxyfHwocj1FLnRlc3QodSksJGUobixyKSl9aWYoZmFsc2U9PT1yfHx0cnVlIT09ciYmMSZyWzFdKXJldHVybiBuO3N3aXRjaChlKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwodCxlKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBuLmNhbGwodCxlLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKGUscix1KXtyZXR1cm4gbi5jYWxsKHQsZSxyLHUpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKGUscix1LG8pe3JldHVybiBuLmNhbGwodCxlLHIsdSxvKX19cmV0dXJuIE10KG4sdCl9ZnVuY3Rpb24gZXQobil7ZnVuY3Rpb24gdCgpe3ZhciBuPWY/aTp0aGlzO2lmKHUpe3ZhciBoPXAodSk7YmUuYXBwbHkoaCxhcmd1bWVudHMpfXJldHVybihvfHxjKSYmKGh8fChoPXAoYXJndW1lbnRzKSksbyYmYmUuYXBwbHkoaCxvKSxjJiZoLmxlbmd0aDxhKT8ocnw9MTYsZXQoW2Uscz9yOi00JnIsaCxudWxsLGksYV0pKTooaHx8KGg9YXJndW1lbnRzKSxsJiYoZT1uW3ZdKSx0aGlzIGluc3RhbmNlb2YgdD8obj1udChlLnByb3RvdHlwZSksaD1lLmFwcGx5KG4saCksd3QoaCk/aDpuKTplLmFwcGx5KG4saCkpXG59dmFyIGU9blswXSxyPW5bMV0sdT1uWzJdLG89blszXSxpPW5bNF0sYT1uWzVdLGY9MSZyLGw9MiZyLGM9NCZyLHM9OCZyLHY9ZTtyZXR1cm4gJGUodCxuKSx0fWZ1bmN0aW9uIHJ0KGUscil7dmFyIHU9LTEsaT1zdCgpLGE9ZT9lLmxlbmd0aDowLGY9YT49YiYmaT09PW4sbD1bXTtpZihmKXt2YXIgcD1vKHIpO3A/KGk9dCxyPXApOmY9ZmFsc2V9Zm9yKDsrK3U8YTspcD1lW3VdLDA+aShyLHApJiZsLnB1c2gocCk7cmV0dXJuIGYmJmMociksbH1mdW5jdGlvbiB1dChuLHQsZSxyKXtyPShyfHwwKS0xO2Zvcih2YXIgdT1uP24ubGVuZ3RoOjAsbz1bXTsrK3I8dTspe3ZhciBpPW5bcl07aWYoaSYmdHlwZW9mIGk9PVwib2JqZWN0XCImJnR5cGVvZiBpLmxlbmd0aD09XCJudW1iZXJcIiYmKFRlKGkpfHx5dChpKSkpe3R8fChpPXV0KGksdCxlKSk7dmFyIGE9LTEsZj1pLmxlbmd0aCxsPW8ubGVuZ3RoO2ZvcihvLmxlbmd0aCs9ZjsrK2E8Zjspb1tsKytdPWlbYV19ZWxzZSBlfHxvLnB1c2goaSl9cmV0dXJuIG9cbn1mdW5jdGlvbiBvdChuLHQsZSxyLHUsbyl7aWYoZSl7dmFyIGk9ZShuLHQpO2lmKHR5cGVvZiBpIT1cInVuZGVmaW5lZFwiKXJldHVybiEhaX1pZihuPT09dClyZXR1cm4gMCE9PW58fDEvbj09MS90O2lmKG49PT1uJiYhKG4mJlZbdHlwZW9mIG5dfHx0JiZWW3R5cGVvZiB0XSkpcmV0dXJuIGZhbHNlO2lmKG51bGw9PW58fG51bGw9PXQpcmV0dXJuIG49PT10O3ZhciBmPWNlLmNhbGwobiksYz1jZS5jYWxsKHQpO2lmKGY9PUQmJihmPXEpLGM9PUQmJihjPXEpLGYhPWMpcmV0dXJuIGZhbHNlO3N3aXRjaChmKXtjYXNlIFQ6Y2FzZSBGOnJldHVybituPT0rdDtjYXNlIFc6cmV0dXJuIG4hPStuP3QhPSt0OjA9PW4/MS9uPT0xL3Q6bj09K3Q7Y2FzZSB6OmNhc2UgUDpyZXR1cm4gbj09b2UodCl9aWYoYz1mPT0kLCFjKXt2YXIgcD1tZS5jYWxsKG4sXCJfX3dyYXBwZWRfX1wiKSxzPW1lLmNhbGwodCxcIl9fd3JhcHBlZF9fXCIpO2lmKHB8fHMpcmV0dXJuIG90KHA/bi5fX3dyYXBwZWRfXzpuLHM/dC5fX3dyYXBwZWRfXzp0LGUscix1LG8pO1xuaWYoZiE9cSlyZXR1cm4gZmFsc2U7aWYoZj1uLmNvbnN0cnVjdG9yLHA9dC5jb25zdHJ1Y3RvcixmIT1wJiYhKGR0KGYpJiZmIGluc3RhbmNlb2YgZiYmZHQocCkmJnAgaW5zdGFuY2VvZiBwKSYmXCJjb25zdHJ1Y3RvclwiaW4gbiYmXCJjb25zdHJ1Y3RvclwiaW4gdClyZXR1cm4gZmFsc2V9Zm9yKGY9IXUsdXx8KHU9YSgpKSxvfHwobz1hKCkpLHA9dS5sZW5ndGg7cC0tOylpZih1W3BdPT1uKXJldHVybiBvW3BdPT10O3ZhciB2PTAsaT10cnVlO2lmKHUucHVzaChuKSxvLnB1c2godCksYyl7aWYocD1uLmxlbmd0aCx2PXQubGVuZ3RoLChpPXY9PXApfHxyKWZvcig7di0tOylpZihjPXAscz10W3ZdLHIpZm9yKDtjLS0mJiEoaT1vdChuW2NdLHMsZSxyLHUsbykpOyk7ZWxzZSBpZighKGk9b3Qoblt2XSxzLGUscix1LG8pKSlicmVha31lbHNlIGcodCxmdW5jdGlvbih0LGEsZil7cmV0dXJuIG1lLmNhbGwoZixhKT8odisrLGk9bWUuY2FsbChuLGEpJiZvdChuW2FdLHQsZSxyLHUsbykpOnZvaWQgMH0pLGkmJiFyJiZnKG4sZnVuY3Rpb24obix0LGUpe3JldHVybiBtZS5jYWxsKGUsdCk/aT0tMTwtLXY6dm9pZCAwXG59KTtyZXR1cm4gdS5wb3AoKSxvLnBvcCgpLGYmJihsKHUpLGwobykpLGl9ZnVuY3Rpb24gaXQobix0LGUscix1KXsoVGUodCk/U3Q6aCkodCxmdW5jdGlvbih0LG8pe3ZhciBpLGEsZj10LGw9bltvXTtpZih0JiYoKGE9VGUodCkpfHxQZSh0KSkpe2ZvcihmPXIubGVuZ3RoO2YtLTspaWYoaT1yW2ZdPT10KXtsPXVbZl07YnJlYWt9aWYoIWkpe3ZhciBjO2UmJihmPWUobCx0KSxjPXR5cGVvZiBmIT1cInVuZGVmaW5lZFwiKSYmKGw9ZiksY3x8KGw9YT9UZShsKT9sOltdOlBlKGwpP2w6e30pLHIucHVzaCh0KSx1LnB1c2gobCksY3x8aXQobCx0LGUscix1KX19ZWxzZSBlJiYoZj1lKGwsdCksdHlwZW9mIGY9PVwidW5kZWZpbmVkXCImJihmPXQpKSx0eXBlb2YgZiE9XCJ1bmRlZmluZWRcIiYmKGw9Zik7bltvXT1sfSl9ZnVuY3Rpb24gYXQobix0KXtyZXR1cm4gbitoZShSZSgpKih0LW4rMSkpfWZ1bmN0aW9uIGZ0KGUscix1KXt2YXIgaT0tMSxmPXN0KCkscD1lP2UubGVuZ3RoOjAscz1bXSx2PSFyJiZwPj1iJiZmPT09bixoPXV8fHY/YSgpOnM7XG5mb3IodiYmKGg9byhoKSxmPXQpOysraTxwOyl7dmFyIGc9ZVtpXSx5PXU/dShnLGksZSk6Zzsocj8haXx8aFtoLmxlbmd0aC0xXSE9PXk6MD5mKGgseSkpJiYoKHV8fHYpJiZoLnB1c2goeSkscy5wdXNoKGcpKX1yZXR1cm4gdj8obChoLmspLGMoaCkpOnUmJmwoaCksc31mdW5jdGlvbiBsdChuKXtyZXR1cm4gZnVuY3Rpb24odCxlLHIpe3ZhciB1PXt9O2U9Si5jcmVhdGVDYWxsYmFjayhlLHIsMykscj0tMTt2YXIgbz10P3QubGVuZ3RoOjA7aWYodHlwZW9mIG89PVwibnVtYmVyXCIpZm9yKDsrK3I8bzspe3ZhciBpPXRbcl07bih1LGksZShpLHIsdCksdCl9ZWxzZSBoKHQsZnVuY3Rpb24odCxyLG8pe24odSx0LGUodCxyLG8pLG8pfSk7cmV0dXJuIHV9fWZ1bmN0aW9uIGN0KG4sdCxlLHIsdSxvKXt2YXIgaT0xJnQsYT00JnQsZj0xNiZ0LGw9MzImdDtpZighKDImdHx8ZHQobikpKXRocm93IG5ldyBpZTtmJiYhZS5sZW5ndGgmJih0Jj0tMTcsZj1lPWZhbHNlKSxsJiYhci5sZW5ndGgmJih0Jj0tMzMsbD1yPWZhbHNlKTtcbnZhciBjPW4mJm4uX19iaW5kRGF0YV9fO3JldHVybiBjJiZ0cnVlIT09Yz8oYz1wKGMpLGNbMl0mJihjWzJdPXAoY1syXSkpLGNbM10mJihjWzNdPXAoY1szXSkpLCFpfHwxJmNbMV18fChjWzRdPXUpLCFpJiYxJmNbMV0mJih0fD04KSwhYXx8NCZjWzFdfHwoY1s1XT1vKSxmJiZiZS5hcHBseShjWzJdfHwoY1syXT1bXSksZSksbCYmd2UuYXBwbHkoY1szXXx8KGNbM109W10pLHIpLGNbMV18PXQsY3QuYXBwbHkobnVsbCxjKSk6KDE9PXR8fDE3PT09dD9YOmV0KShbbix0LGUscix1LG9dKX1mdW5jdGlvbiBwdChuKXtyZXR1cm4gQmVbbl19ZnVuY3Rpb24gc3QoKXt2YXIgdD0odD1KLmluZGV4T2YpPT09V3Q/bjp0O3JldHVybiB0fWZ1bmN0aW9uIHZ0KG4pe3JldHVybiB0eXBlb2Ygbj09XCJmdW5jdGlvblwiJiZwZS50ZXN0KG4pfWZ1bmN0aW9uIGh0KG4pe3ZhciB0LGU7cmV0dXJuIG4mJmNlLmNhbGwobik9PXEmJih0PW4uY29uc3RydWN0b3IsIWR0KHQpfHx0IGluc3RhbmNlb2YgdCk/KGcobixmdW5jdGlvbihuLHQpe2U9dFxufSksdHlwZW9mIGU9PVwidW5kZWZpbmVkXCJ8fG1lLmNhbGwobixlKSk6ZmFsc2V9ZnVuY3Rpb24gZ3Qobil7cmV0dXJuIFdlW25dfWZ1bmN0aW9uIHl0KG4pe3JldHVybiBuJiZ0eXBlb2Ygbj09XCJvYmplY3RcIiYmdHlwZW9mIG4ubGVuZ3RoPT1cIm51bWJlclwiJiZjZS5jYWxsKG4pPT1EfHxmYWxzZX1mdW5jdGlvbiBtdChuLHQsZSl7dmFyIHI9RmUobiksdT1yLmxlbmd0aDtmb3IodD10dCh0LGUsMyk7dS0tJiYoZT1yW3VdLGZhbHNlIT09dChuW2VdLGUsbikpOyk7cmV0dXJuIG59ZnVuY3Rpb24gYnQobil7dmFyIHQ9W107cmV0dXJuIGcobixmdW5jdGlvbihuLGUpe2R0KG4pJiZ0LnB1c2goZSl9KSx0LnNvcnQoKX1mdW5jdGlvbiBfdChuKXtmb3IodmFyIHQ9LTEsZT1GZShuKSxyPWUubGVuZ3RoLHU9e307Kyt0PHI7KXt2YXIgbz1lW3RdO3VbbltvXV09b31yZXR1cm4gdX1mdW5jdGlvbiBkdChuKXtyZXR1cm4gdHlwZW9mIG49PVwiZnVuY3Rpb25cIn1mdW5jdGlvbiB3dChuKXtyZXR1cm4hKCFufHwhVlt0eXBlb2Ygbl0pXG59ZnVuY3Rpb24ganQobil7cmV0dXJuIHR5cGVvZiBuPT1cIm51bWJlclwifHxuJiZ0eXBlb2Ygbj09XCJvYmplY3RcIiYmY2UuY2FsbChuKT09V3x8ZmFsc2V9ZnVuY3Rpb24ga3Qobil7cmV0dXJuIHR5cGVvZiBuPT1cInN0cmluZ1wifHxuJiZ0eXBlb2Ygbj09XCJvYmplY3RcIiYmY2UuY2FsbChuKT09UHx8ZmFsc2V9ZnVuY3Rpb24geHQobil7Zm9yKHZhciB0PS0xLGU9RmUobikscj1lLmxlbmd0aCx1PVh0KHIpOysrdDxyOyl1W3RdPW5bZVt0XV07cmV0dXJuIHV9ZnVuY3Rpb24gQ3Qobix0LGUpe3ZhciByPS0xLHU9c3QoKSxvPW4/bi5sZW5ndGg6MCxpPWZhbHNlO3JldHVybiBlPSgwPmU/SWUoMCxvK2UpOmUpfHwwLFRlKG4pP2k9LTE8dShuLHQsZSk6dHlwZW9mIG89PVwibnVtYmVyXCI/aT0tMTwoa3Qobik/bi5pbmRleE9mKHQsZSk6dShuLHQsZSkpOmgobixmdW5jdGlvbihuKXtyZXR1cm4rK3I8ZT92b2lkIDA6IShpPW49PT10KX0pLGl9ZnVuY3Rpb24gT3Qobix0LGUpe3ZhciByPXRydWU7dD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSxlPS0xO1xudmFyIHU9bj9uLmxlbmd0aDowO2lmKHR5cGVvZiB1PT1cIm51bWJlclwiKWZvcig7KytlPHUmJihyPSEhdChuW2VdLGUsbikpOyk7ZWxzZSBoKG4sZnVuY3Rpb24obixlLHUpe3JldHVybiByPSEhdChuLGUsdSl9KTtyZXR1cm4gcn1mdW5jdGlvbiBOdChuLHQsZSl7dmFyIHI9W107dD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSxlPS0xO3ZhciB1PW4/bi5sZW5ndGg6MDtpZih0eXBlb2YgdT09XCJudW1iZXJcIilmb3IoOysrZTx1Oyl7dmFyIG89bltlXTt0KG8sZSxuKSYmci5wdXNoKG8pfWVsc2UgaChuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmci5wdXNoKG4pfSk7cmV0dXJuIHJ9ZnVuY3Rpb24gSXQobix0LGUpe3Q9Si5jcmVhdGVDYWxsYmFjayh0LGUsMyksZT0tMTt2YXIgcj1uP24ubGVuZ3RoOjA7aWYodHlwZW9mIHIhPVwibnVtYmVyXCIpe3ZhciB1O3JldHVybiBoKG4sZnVuY3Rpb24obixlLHIpe3JldHVybiB0KG4sZSxyKT8odT1uLGZhbHNlKTp2b2lkIDB9KSx1fWZvcig7KytlPHI7KXt2YXIgbz1uW2VdO1xuaWYodChvLGUsbikpcmV0dXJuIG99fWZ1bmN0aW9uIFN0KG4sdCxlKXt2YXIgcj0tMSx1PW4/bi5sZW5ndGg6MDtpZih0PXQmJnR5cGVvZiBlPT1cInVuZGVmaW5lZFwiP3Q6dHQodCxlLDMpLHR5cGVvZiB1PT1cIm51bWJlclwiKWZvcig7KytyPHUmJmZhbHNlIT09dChuW3JdLHIsbik7KTtlbHNlIGgobix0KTtyZXR1cm4gbn1mdW5jdGlvbiBFdChuLHQsZSl7dmFyIHI9bj9uLmxlbmd0aDowO2lmKHQ9dCYmdHlwZW9mIGU9PVwidW5kZWZpbmVkXCI/dDp0dCh0LGUsMyksdHlwZW9mIHI9PVwibnVtYmVyXCIpZm9yKDtyLS0mJmZhbHNlIT09dChuW3JdLHIsbik7KTtlbHNle3ZhciB1PUZlKG4pLHI9dS5sZW5ndGg7aChuLGZ1bmN0aW9uKG4sZSxvKXtyZXR1cm4gZT11P3VbLS1yXTotLXIsdChvW2VdLGUsbyl9KX1yZXR1cm4gbn1mdW5jdGlvbiBSdChuLHQsZSl7dmFyIHI9LTEsdT1uP24ubGVuZ3RoOjA7aWYodD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSx0eXBlb2YgdT09XCJudW1iZXJcIilmb3IodmFyIG89WHQodSk7KytyPHU7KW9bcl09dChuW3JdLHIsbik7XG5lbHNlIG89W10saChuLGZ1bmN0aW9uKG4sZSx1KXtvWysrcl09dChuLGUsdSl9KTtyZXR1cm4gb31mdW5jdGlvbiBBdChuLHQsZSl7dmFyIHU9LTEvMCxvPXU7aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIiYmZSYmZVt0XT09PW4mJih0PW51bGwpLG51bGw9PXQmJlRlKG4pKXtlPS0xO2Zvcih2YXIgaT1uLmxlbmd0aDsrK2U8aTspe3ZhciBhPW5bZV07YT5vJiYobz1hKX19ZWxzZSB0PW51bGw9PXQmJmt0KG4pP3I6Si5jcmVhdGVDYWxsYmFjayh0LGUsMyksU3QobixmdW5jdGlvbihuLGUscil7ZT10KG4sZSxyKSxlPnUmJih1PWUsbz1uKX0pO3JldHVybiBvfWZ1bmN0aW9uIER0KG4sdCxlLHIpe2lmKCFuKXJldHVybiBlO3ZhciB1PTM+YXJndW1lbnRzLmxlbmd0aDt0PUouY3JlYXRlQ2FsbGJhY2sodCxyLDQpO3ZhciBvPS0xLGk9bi5sZW5ndGg7aWYodHlwZW9mIGk9PVwibnVtYmVyXCIpZm9yKHUmJihlPW5bKytvXSk7KytvPGk7KWU9dChlLG5bb10sbyxuKTtlbHNlIGgobixmdW5jdGlvbihuLHIsbyl7ZT11Pyh1PWZhbHNlLG4pOnQoZSxuLHIsbylcbn0pO3JldHVybiBlfWZ1bmN0aW9uICR0KG4sdCxlLHIpe3ZhciB1PTM+YXJndW1lbnRzLmxlbmd0aDtyZXR1cm4gdD1KLmNyZWF0ZUNhbGxiYWNrKHQsciw0KSxFdChuLGZ1bmN0aW9uKG4scixvKXtlPXU/KHU9ZmFsc2Usbik6dChlLG4scixvKX0pLGV9ZnVuY3Rpb24gVHQobil7dmFyIHQ9LTEsZT1uP24ubGVuZ3RoOjAscj1YdCh0eXBlb2YgZT09XCJudW1iZXJcIj9lOjApO3JldHVybiBTdChuLGZ1bmN0aW9uKG4pe3ZhciBlPWF0KDAsKyt0KTtyW3RdPXJbZV0scltlXT1ufSkscn1mdW5jdGlvbiBGdChuLHQsZSl7dmFyIHI7dD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSxlPS0xO3ZhciB1PW4/bi5sZW5ndGg6MDtpZih0eXBlb2YgdT09XCJudW1iZXJcIilmb3IoOysrZTx1JiYhKHI9dChuW2VdLGUsbikpOyk7ZWxzZSBoKG4sZnVuY3Rpb24obixlLHUpe3JldHVybiEocj10KG4sZSx1KSl9KTtyZXR1cm4hIXJ9ZnVuY3Rpb24gQnQobix0LGUpe3ZhciByPTAsdT1uP24ubGVuZ3RoOjA7aWYodHlwZW9mIHQhPVwibnVtYmVyXCImJm51bGwhPXQpe3ZhciBvPS0xO1xuZm9yKHQ9Si5jcmVhdGVDYWxsYmFjayh0LGUsMyk7KytvPHUmJnQobltvXSxvLG4pOylyKyt9ZWxzZSBpZihyPXQsbnVsbD09cnx8ZSlyZXR1cm4gbj9uWzBdOnY7cmV0dXJuIHAobiwwLFNlKEllKDAsciksdSkpfWZ1bmN0aW9uIFd0KHQsZSxyKXtpZih0eXBlb2Ygcj09XCJudW1iZXJcIil7dmFyIHU9dD90Lmxlbmd0aDowO3I9MD5yP0llKDAsdStyKTpyfHwwfWVsc2UgaWYocilyZXR1cm4gcj16dCh0LGUpLHRbcl09PT1lP3I6LTE7cmV0dXJuIG4odCxlLHIpfWZ1bmN0aW9uIHF0KG4sdCxlKXtpZih0eXBlb2YgdCE9XCJudW1iZXJcIiYmbnVsbCE9dCl7dmFyIHI9MCx1PS0xLG89bj9uLmxlbmd0aDowO2Zvcih0PUouY3JlYXRlQ2FsbGJhY2sodCxlLDMpOysrdTxvJiZ0KG5bdV0sdSxuKTspcisrfWVsc2Ugcj1udWxsPT10fHxlPzE6SWUoMCx0KTtyZXR1cm4gcChuLHIpfWZ1bmN0aW9uIHp0KG4sdCxlLHIpe3ZhciB1PTAsbz1uP24ubGVuZ3RoOnU7Zm9yKGU9ZT9KLmNyZWF0ZUNhbGxiYWNrKGUsciwxKTpVdCx0PWUodCk7dTxvOylyPXUrbz4+PjEsZShuW3JdKTx0P3U9cisxOm89cjtcbnJldHVybiB1fWZ1bmN0aW9uIFB0KG4sdCxlLHIpe3JldHVybiB0eXBlb2YgdCE9XCJib29sZWFuXCImJm51bGwhPXQmJihyPWUsZT10eXBlb2YgdCE9XCJmdW5jdGlvblwiJiZyJiZyW3RdPT09bj9udWxsOnQsdD1mYWxzZSksbnVsbCE9ZSYmKGU9Si5jcmVhdGVDYWxsYmFjayhlLHIsMykpLGZ0KG4sdCxlKX1mdW5jdGlvbiBLdCgpe2Zvcih2YXIgbj0xPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzOmFyZ3VtZW50c1swXSx0PS0xLGU9bj9BdChWZShuLFwibGVuZ3RoXCIpKTowLHI9WHQoMD5lPzA6ZSk7Kyt0PGU7KXJbdF09VmUobix0KTtyZXR1cm4gcn1mdW5jdGlvbiBMdChuLHQpe3ZhciBlPS0xLHI9bj9uLmxlbmd0aDowLHU9e307Zm9yKHR8fCFyfHxUZShuWzBdKXx8KHQ9W10pOysrZTxyOyl7dmFyIG89bltlXTt0P3Vbb109dFtlXTpvJiYodVtvWzBdXT1vWzFdKX1yZXR1cm4gdX1mdW5jdGlvbiBNdChuLHQpe3JldHVybiAyPGFyZ3VtZW50cy5sZW5ndGg/Y3QobiwxNyxwKGFyZ3VtZW50cywyKSxudWxsLHQpOmN0KG4sMSxudWxsLG51bGwsdClcbn1mdW5jdGlvbiBWdChuLHQsZSl7ZnVuY3Rpb24gcigpe2MmJnZlKGMpLGk9Yz1wPXYsKGd8fGghPT10KSYmKHM9VWUoKSxhPW4uYXBwbHkobCxvKSxjfHxpfHwobz1sPW51bGwpKX1mdW5jdGlvbiB1KCl7dmFyIGU9dC0oVWUoKS1mKTswPGU/Yz1fZSh1LGUpOihpJiZ2ZShpKSxlPXAsaT1jPXA9dixlJiYocz1VZSgpLGE9bi5hcHBseShsLG8pLGN8fGl8fChvPWw9bnVsbCkpKX12YXIgbyxpLGEsZixsLGMscCxzPTAsaD1mYWxzZSxnPXRydWU7aWYoIWR0KG4pKXRocm93IG5ldyBpZTtpZih0PUllKDAsdCl8fDAsdHJ1ZT09PWUpdmFyIHk9dHJ1ZSxnPWZhbHNlO2Vsc2Ugd3QoZSkmJih5PWUubGVhZGluZyxoPVwibWF4V2FpdFwiaW4gZSYmKEllKHQsZS5tYXhXYWl0KXx8MCksZz1cInRyYWlsaW5nXCJpbiBlP2UudHJhaWxpbmc6Zyk7cmV0dXJuIGZ1bmN0aW9uKCl7aWYobz1hcmd1bWVudHMsZj1VZSgpLGw9dGhpcyxwPWcmJihjfHwheSksZmFsc2U9PT1oKXZhciBlPXkmJiFjO2Vsc2V7aXx8eXx8KHM9Zik7dmFyIHY9aC0oZi1zKSxtPTA+PXY7XG5tPyhpJiYoaT12ZShpKSkscz1mLGE9bi5hcHBseShsLG8pKTppfHwoaT1fZShyLHYpKX1yZXR1cm4gbSYmYz9jPXZlKGMpOmN8fHQ9PT1ofHwoYz1fZSh1LHQpKSxlJiYobT10cnVlLGE9bi5hcHBseShsLG8pKSwhbXx8Y3x8aXx8KG89bD1udWxsKSxhfX1mdW5jdGlvbiBVdChuKXtyZXR1cm4gbn1mdW5jdGlvbiBHdChuLHQsZSl7dmFyIHI9dHJ1ZSx1PXQmJmJ0KHQpO3QmJihlfHx1Lmxlbmd0aCl8fChudWxsPT1lJiYoZT10KSxvPVEsdD1uLG49Six1PWJ0KHQpKSxmYWxzZT09PWU/cj1mYWxzZTp3dChlKSYmXCJjaGFpblwiaW4gZSYmKHI9ZS5jaGFpbik7dmFyIG89bixpPWR0KG8pO1N0KHUsZnVuY3Rpb24oZSl7dmFyIHU9bltlXT10W2VdO2kmJihvLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX19jaGFpbl9fLGU9dGhpcy5fX3dyYXBwZWRfXyxpPVtlXTtpZihiZS5hcHBseShpLGFyZ3VtZW50cyksaT11LmFwcGx5KG4saSkscnx8dCl7aWYoZT09PWkmJnd0KGkpKXJldHVybiB0aGlzO1xuaT1uZXcgbyhpKSxpLl9fY2hhaW5fXz10fXJldHVybiBpfSl9KX1mdW5jdGlvbiBIdCgpe31mdW5jdGlvbiBKdChuKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHRbbl19fWZ1bmN0aW9uIFF0KCl7cmV0dXJuIHRoaXMuX193cmFwcGVkX199ZT1lP1kuZGVmYXVsdHMoRy5PYmplY3QoKSxlLFkucGljayhHLEEpKTpHO3ZhciBYdD1lLkFycmF5LFl0PWUuQm9vbGVhbixadD1lLkRhdGUsbmU9ZS5GdW5jdGlvbix0ZT1lLk1hdGgsZWU9ZS5OdW1iZXIscmU9ZS5PYmplY3QsdWU9ZS5SZWdFeHAsb2U9ZS5TdHJpbmcsaWU9ZS5UeXBlRXJyb3IsYWU9W10sZmU9cmUucHJvdG90eXBlLGxlPWUuXyxjZT1mZS50b1N0cmluZyxwZT11ZShcIl5cIitvZShjZSkucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csXCJcXFxcJCZcIikucmVwbGFjZSgvdG9TdHJpbmd8IGZvciBbXlxcXV0rL2csXCIuKj9cIikrXCIkXCIpLHNlPXRlLmNlaWwsdmU9ZS5jbGVhclRpbWVvdXQsaGU9dGUuZmxvb3IsZ2U9bmUucHJvdG90eXBlLnRvU3RyaW5nLHllPXZ0KHllPXJlLmdldFByb3RvdHlwZU9mKSYmeWUsbWU9ZmUuaGFzT3duUHJvcGVydHksYmU9YWUucHVzaCxfZT1lLnNldFRpbWVvdXQsZGU9YWUuc3BsaWNlLHdlPWFlLnVuc2hpZnQsamU9ZnVuY3Rpb24oKXt0cnl7dmFyIG49e30sdD12dCh0PXJlLmRlZmluZVByb3BlcnR5KSYmdCxlPXQobixuLG4pJiZ0XG59Y2F0Y2gocil7fXJldHVybiBlfSgpLGtlPXZ0KGtlPXJlLmNyZWF0ZSkmJmtlLHhlPXZ0KHhlPVh0LmlzQXJyYXkpJiZ4ZSxDZT1lLmlzRmluaXRlLE9lPWUuaXNOYU4sTmU9dnQoTmU9cmUua2V5cykmJk5lLEllPXRlLm1heCxTZT10ZS5taW4sRWU9ZS5wYXJzZUludCxSZT10ZS5yYW5kb20sQWU9e307QWVbJF09WHQsQWVbVF09WXQsQWVbRl09WnQsQWVbQl09bmUsQWVbcV09cmUsQWVbV109ZWUsQWVbel09dWUsQWVbUF09b2UsUS5wcm90b3R5cGU9Si5wcm90b3R5cGU7dmFyIERlPUouc3VwcG9ydD17fTtEZS5mdW5jRGVjb21wPSF2dChlLmEpJiZFLnRlc3QocyksRGUuZnVuY05hbWVzPXR5cGVvZiBuZS5uYW1lPT1cInN0cmluZ1wiLEoudGVtcGxhdGVTZXR0aW5ncz17ZXNjYXBlOi88JS0oW1xcc1xcU10rPyklPi9nLGV2YWx1YXRlOi88JShbXFxzXFxTXSs/KSU+L2csaW50ZXJwb2xhdGU6Tix2YXJpYWJsZTpcIlwiLGltcG9ydHM6e186Sn19LGtlfHwobnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7fXJldHVybiBmdW5jdGlvbih0KXtpZih3dCh0KSl7bi5wcm90b3R5cGU9dDtcbnZhciByPW5ldyBuO24ucHJvdG90eXBlPW51bGx9cmV0dXJuIHJ8fGUuT2JqZWN0KCl9fSgpKTt2YXIgJGU9amU/ZnVuY3Rpb24obix0KXtNLnZhbHVlPXQsamUobixcIl9fYmluZERhdGFfX1wiLE0pfTpIdCxUZT14ZXx8ZnVuY3Rpb24obil7cmV0dXJuIG4mJnR5cGVvZiBuPT1cIm9iamVjdFwiJiZ0eXBlb2Ygbi5sZW5ndGg9PVwibnVtYmVyXCImJmNlLmNhbGwobik9PSR8fGZhbHNlfSxGZT1OZT9mdW5jdGlvbihuKXtyZXR1cm4gd3Qobik/TmUobik6W119OkgsQmU9e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImIzM5O1wifSxXZT1fdChCZSkscWU9dWUoXCIoXCIrRmUoV2UpLmpvaW4oXCJ8XCIpK1wiKVwiLFwiZ1wiKSx6ZT11ZShcIltcIitGZShCZSkuam9pbihcIlwiKStcIl1cIixcImdcIiksUGU9eWU/ZnVuY3Rpb24obil7aWYoIW58fGNlLmNhbGwobikhPXEpcmV0dXJuIGZhbHNlO3ZhciB0PW4udmFsdWVPZixlPXZ0KHQpJiYoZT15ZSh0KSkmJnllKGUpO3JldHVybiBlP249PWV8fHllKG4pPT1lOmh0KG4pXG59Omh0LEtlPWx0KGZ1bmN0aW9uKG4sdCxlKXttZS5jYWxsKG4sZSk/bltlXSsrOm5bZV09MX0pLExlPWx0KGZ1bmN0aW9uKG4sdCxlKXsobWUuY2FsbChuLGUpP25bZV06bltlXT1bXSkucHVzaCh0KX0pLE1lPWx0KGZ1bmN0aW9uKG4sdCxlKXtuW2VdPXR9KSxWZT1SdCxVZT12dChVZT1adC5ub3cpJiZVZXx8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFp0KS5nZXRUaW1lKCl9LEdlPTg9PUVlKGQrXCIwOFwiKT9FZTpmdW5jdGlvbihuLHQpe3JldHVybiBFZShrdChuKT9uLnJlcGxhY2UoSSxcIlwiKTpuLHR8fDApfTtyZXR1cm4gSi5hZnRlcj1mdW5jdGlvbihuLHQpe2lmKCFkdCh0KSl0aHJvdyBuZXcgaWU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIDE+LS1uP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19LEouYXNzaWduPVUsSi5hdD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9YXJndW1lbnRzLGU9LTEscj11dCh0LHRydWUsZmFsc2UsMSksdD10WzJdJiZ0WzJdW3RbMV1dPT09bj8xOnIubGVuZ3RoLHU9WHQodCk7KytlPHQ7KXVbZV09bltyW2VdXTtcbnJldHVybiB1fSxKLmJpbmQ9TXQsSi5iaW5kQWxsPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD0xPGFyZ3VtZW50cy5sZW5ndGg/dXQoYXJndW1lbnRzLHRydWUsZmFsc2UsMSk6YnQobiksZT0tMSxyPXQubGVuZ3RoOysrZTxyOyl7dmFyIHU9dFtlXTtuW3VdPWN0KG5bdV0sMSxudWxsLG51bGwsbil9cmV0dXJuIG59LEouYmluZEtleT1mdW5jdGlvbihuLHQpe3JldHVybiAyPGFyZ3VtZW50cy5sZW5ndGg/Y3QodCwxOSxwKGFyZ3VtZW50cywyKSxudWxsLG4pOmN0KHQsMyxudWxsLG51bGwsbil9LEouY2hhaW49ZnVuY3Rpb24obil7cmV0dXJuIG49bmV3IFEobiksbi5fX2NoYWluX189dHJ1ZSxufSxKLmNvbXBhY3Q9ZnVuY3Rpb24obil7Zm9yKHZhciB0PS0xLGU9bj9uLmxlbmd0aDowLHI9W107Kyt0PGU7KXt2YXIgdT1uW3RdO3UmJnIucHVzaCh1KX1yZXR1cm4gcn0sSi5jb21wb3NlPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cyx0PW4ubGVuZ3RoO3QtLTspaWYoIWR0KG5bdF0pKXRocm93IG5ldyBpZTtcbnJldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMsZT1uLmxlbmd0aDtlLS07KXQ9W25bZV0uYXBwbHkodGhpcyx0KV07cmV0dXJuIHRbMF19fSxKLmNvbnN0YW50PWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBufX0sSi5jb3VudEJ5PUtlLEouY3JlYXRlPWZ1bmN0aW9uKG4sdCl7dmFyIGU9bnQobik7cmV0dXJuIHQ/VShlLHQpOmV9LEouY3JlYXRlQ2FsbGJhY2s9ZnVuY3Rpb24obix0LGUpe3ZhciByPXR5cGVvZiBuO2lmKG51bGw9PW58fFwiZnVuY3Rpb25cIj09cilyZXR1cm4gdHQobix0LGUpO2lmKFwib2JqZWN0XCIhPXIpcmV0dXJuIEp0KG4pO3ZhciB1PUZlKG4pLG89dVswXSxpPW5bb107cmV0dXJuIDEhPXUubGVuZ3RofHxpIT09aXx8d3QoaSk/ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXUubGVuZ3RoLHI9ZmFsc2U7ZS0tJiYocj1vdCh0W3VbZV1dLG5bdVtlXV0sbnVsbCx0cnVlKSk7KTtyZXR1cm4gcn06ZnVuY3Rpb24obil7cmV0dXJuIG49bltvXSxpPT09biYmKDAhPT1pfHwxL2k9PTEvbilcbn19LEouY3Vycnk9ZnVuY3Rpb24obix0KXtyZXR1cm4gdD10eXBlb2YgdD09XCJudW1iZXJcIj90Oit0fHxuLmxlbmd0aCxjdChuLDQsbnVsbCxudWxsLG51bGwsdCl9LEouZGVib3VuY2U9VnQsSi5kZWZhdWx0cz1fLEouZGVmZXI9ZnVuY3Rpb24obil7aWYoIWR0KG4pKXRocm93IG5ldyBpZTt2YXIgdD1wKGFyZ3VtZW50cywxKTtyZXR1cm4gX2UoZnVuY3Rpb24oKXtuLmFwcGx5KHYsdCl9LDEpfSxKLmRlbGF5PWZ1bmN0aW9uKG4sdCl7aWYoIWR0KG4pKXRocm93IG5ldyBpZTt2YXIgZT1wKGFyZ3VtZW50cywyKTtyZXR1cm4gX2UoZnVuY3Rpb24oKXtuLmFwcGx5KHYsZSl9LHQpfSxKLmRpZmZlcmVuY2U9ZnVuY3Rpb24obil7cmV0dXJuIHJ0KG4sdXQoYXJndW1lbnRzLHRydWUsdHJ1ZSwxKSl9LEouZmlsdGVyPU50LEouZmxhdHRlbj1mdW5jdGlvbihuLHQsZSxyKXtyZXR1cm4gdHlwZW9mIHQhPVwiYm9vbGVhblwiJiZudWxsIT10JiYocj1lLGU9dHlwZW9mIHQhPVwiZnVuY3Rpb25cIiYmciYmclt0XT09PW4/bnVsbDp0LHQ9ZmFsc2UpLG51bGwhPWUmJihuPVJ0KG4sZSxyKSksdXQobix0KVxufSxKLmZvckVhY2g9U3QsSi5mb3JFYWNoUmlnaHQ9RXQsSi5mb3JJbj1nLEouZm9ySW5SaWdodD1mdW5jdGlvbihuLHQsZSl7dmFyIHI9W107ZyhuLGZ1bmN0aW9uKG4sdCl7ci5wdXNoKHQsbil9KTt2YXIgdT1yLmxlbmd0aDtmb3IodD10dCh0LGUsMyk7dS0tJiZmYWxzZSE9PXQoclt1LS1dLHJbdV0sbik7KTtyZXR1cm4gbn0sSi5mb3JPd249aCxKLmZvck93blJpZ2h0PW10LEouZnVuY3Rpb25zPWJ0LEouZ3JvdXBCeT1MZSxKLmluZGV4Qnk9TWUsSi5pbml0aWFsPWZ1bmN0aW9uKG4sdCxlKXt2YXIgcj0wLHU9bj9uLmxlbmd0aDowO2lmKHR5cGVvZiB0IT1cIm51bWJlclwiJiZudWxsIT10KXt2YXIgbz11O2Zvcih0PUouY3JlYXRlQ2FsbGJhY2sodCxlLDMpO28tLSYmdChuW29dLG8sbik7KXIrK31lbHNlIHI9bnVsbD09dHx8ZT8xOnR8fHI7cmV0dXJuIHAobiwwLFNlKEllKDAsdS1yKSx1KSl9LEouaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHI9LTEsdT1hcmd1bWVudHMubGVuZ3RoLGk9YSgpLGY9c3QoKSxwPWY9PT1uLHM9YSgpOysrcjx1Oyl7dmFyIHY9YXJndW1lbnRzW3JdO1xuKFRlKHYpfHx5dCh2KSkmJihlLnB1c2godiksaS5wdXNoKHAmJnYubGVuZ3RoPj1iJiZvKHI/ZVtyXTpzKSkpfXZhciBwPWVbMF0saD0tMSxnPXA/cC5sZW5ndGg6MCx5PVtdO246Zm9yKDsrK2g8Zzspe3ZhciBtPWlbMF0sdj1wW2hdO2lmKDA+KG0/dChtLHYpOmYocyx2KSkpe2ZvcihyPXUsKG18fHMpLnB1c2godik7LS1yOylpZihtPWlbcl0sMD4obT90KG0sdik6ZihlW3JdLHYpKSljb250aW51ZSBuO3kucHVzaCh2KX19Zm9yKDt1LS07KShtPWlbdV0pJiZjKG0pO3JldHVybiBsKGkpLGwocykseX0sSi5pbnZlcnQ9X3QsSi5pbnZva2U9ZnVuY3Rpb24obix0KXt2YXIgZT1wKGFyZ3VtZW50cywyKSxyPS0xLHU9dHlwZW9mIHQ9PVwiZnVuY3Rpb25cIixvPW4/bi5sZW5ndGg6MCxpPVh0KHR5cGVvZiBvPT1cIm51bWJlclwiP286MCk7cmV0dXJuIFN0KG4sZnVuY3Rpb24obil7aVsrK3JdPSh1P3Q6blt0XSkuYXBwbHkobixlKX0pLGl9LEoua2V5cz1GZSxKLm1hcD1SdCxKLm1hcFZhbHVlcz1mdW5jdGlvbihuLHQsZSl7dmFyIHI9e307XG5yZXR1cm4gdD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSxoKG4sZnVuY3Rpb24obixlLHUpe3JbZV09dChuLGUsdSl9KSxyfSxKLm1heD1BdCxKLm1lbW9pemU9ZnVuY3Rpb24obix0KXtmdW5jdGlvbiBlKCl7dmFyIHI9ZS5jYWNoZSx1PXQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6bSthcmd1bWVudHNbMF07cmV0dXJuIG1lLmNhbGwocix1KT9yW3VdOnJbdV09bi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9aWYoIWR0KG4pKXRocm93IG5ldyBpZTtyZXR1cm4gZS5jYWNoZT17fSxlfSxKLm1lcmdlPWZ1bmN0aW9uKG4pe3ZhciB0PWFyZ3VtZW50cyxlPTI7aWYoIXd0KG4pKXJldHVybiBuO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0WzJdJiYoZT10Lmxlbmd0aCksMzxlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W2UtMl0pdmFyIHI9dHQodFstLWUtMV0sdFtlLS1dLDIpO2Vsc2UgMjxlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W2UtMV0mJihyPXRbLS1lXSk7Zm9yKHZhciB0PXAoYXJndW1lbnRzLDEsZSksdT0tMSxvPWEoKSxpPWEoKTsrK3U8ZTspaXQobix0W3VdLHIsbyxpKTtcbnJldHVybiBsKG8pLGwoaSksbn0sSi5taW49ZnVuY3Rpb24obix0LGUpe3ZhciB1PTEvMCxvPXU7aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIiYmZSYmZVt0XT09PW4mJih0PW51bGwpLG51bGw9PXQmJlRlKG4pKXtlPS0xO2Zvcih2YXIgaT1uLmxlbmd0aDsrK2U8aTspe3ZhciBhPW5bZV07YTxvJiYobz1hKX19ZWxzZSB0PW51bGw9PXQmJmt0KG4pP3I6Si5jcmVhdGVDYWxsYmFjayh0LGUsMyksU3QobixmdW5jdGlvbihuLGUscil7ZT10KG4sZSxyKSxlPHUmJih1PWUsbz1uKX0pO3JldHVybiBvfSxKLm9taXQ9ZnVuY3Rpb24obix0LGUpe3ZhciByPXt9O2lmKHR5cGVvZiB0IT1cImZ1bmN0aW9uXCIpe3ZhciB1PVtdO2cobixmdW5jdGlvbihuLHQpe3UucHVzaCh0KX0pO2Zvcih2YXIgdT1ydCh1LHV0KGFyZ3VtZW50cyx0cnVlLGZhbHNlLDEpKSxvPS0xLGk9dS5sZW5ndGg7KytvPGk7KXt2YXIgYT11W29dO3JbYV09blthXX19ZWxzZSB0PUouY3JlYXRlQ2FsbGJhY2sodCxlLDMpLGcobixmdW5jdGlvbihuLGUsdSl7dChuLGUsdSl8fChyW2VdPW4pXG59KTtyZXR1cm4gcn0sSi5vbmNlPWZ1bmN0aW9uKG4pe3ZhciB0LGU7aWYoIWR0KG4pKXRocm93IG5ldyBpZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdD9lOih0PXRydWUsZT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxuPW51bGwsZSl9fSxKLnBhaXJzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD0tMSxlPUZlKG4pLHI9ZS5sZW5ndGgsdT1YdChyKTsrK3Q8cjspe3ZhciBvPWVbdF07dVt0XT1bbyxuW29dXX1yZXR1cm4gdX0sSi5wYXJ0aWFsPWZ1bmN0aW9uKG4pe3JldHVybiBjdChuLDE2LHAoYXJndW1lbnRzLDEpKX0sSi5wYXJ0aWFsUmlnaHQ9ZnVuY3Rpb24obil7cmV0dXJuIGN0KG4sMzIsbnVsbCxwKGFyZ3VtZW50cywxKSl9LEoucGljaz1mdW5jdGlvbihuLHQsZSl7dmFyIHI9e307aWYodHlwZW9mIHQhPVwiZnVuY3Rpb25cIilmb3IodmFyIHU9LTEsbz11dChhcmd1bWVudHMsdHJ1ZSxmYWxzZSwxKSxpPXd0KG4pP28ubGVuZ3RoOjA7Kyt1PGk7KXt2YXIgYT1vW3VdO2EgaW4gbiYmKHJbYV09blthXSlcbn1lbHNlIHQ9Si5jcmVhdGVDYWxsYmFjayh0LGUsMyksZyhuLGZ1bmN0aW9uKG4sZSx1KXt0KG4sZSx1KSYmKHJbZV09bil9KTtyZXR1cm4gcn0sSi5wbHVjaz1WZSxKLnByb3BlcnR5PUp0LEoucHVsbD1mdW5jdGlvbihuKXtmb3IodmFyIHQ9YXJndW1lbnRzLGU9MCxyPXQubGVuZ3RoLHU9bj9uLmxlbmd0aDowOysrZTxyOylmb3IodmFyIG89LTEsaT10W2VdOysrbzx1OyluW29dPT09aSYmKGRlLmNhbGwobixvLS0sMSksdS0tKTtyZXR1cm4gbn0sSi5yYW5nZT1mdW5jdGlvbihuLHQsZSl7bj0rbnx8MCxlPXR5cGVvZiBlPT1cIm51bWJlclwiP2U6K2V8fDEsbnVsbD09dCYmKHQ9bixuPTApO3ZhciByPS0xO3Q9SWUoMCxzZSgodC1uKS8oZXx8MSkpKTtmb3IodmFyIHU9WHQodCk7KytyPHQ7KXVbcl09bixuKz1lO3JldHVybiB1fSxKLnJlamVjdD1mdW5jdGlvbihuLHQsZSl7cmV0dXJuIHQ9Si5jcmVhdGVDYWxsYmFjayh0LGUsMyksTnQobixmdW5jdGlvbihuLGUscil7cmV0dXJuIXQobixlLHIpXG59KX0sSi5yZW1vdmU9ZnVuY3Rpb24obix0LGUpe3ZhciByPS0xLHU9bj9uLmxlbmd0aDowLG89W107Zm9yKHQ9Si5jcmVhdGVDYWxsYmFjayh0LGUsMyk7KytyPHU7KWU9bltyXSx0KGUscixuKSYmKG8ucHVzaChlKSxkZS5jYWxsKG4sci0tLDEpLHUtLSk7cmV0dXJuIG99LEoucmVzdD1xdCxKLnNodWZmbGU9VHQsSi5zb3J0Qnk9ZnVuY3Rpb24obix0LGUpe3ZhciByPS0xLG89VGUodCksaT1uP24ubGVuZ3RoOjAscD1YdCh0eXBlb2YgaT09XCJudW1iZXJcIj9pOjApO2ZvcihvfHwodD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSksU3QobixmdW5jdGlvbihuLGUsdSl7dmFyIGk9cFsrK3JdPWYoKTtvP2kubT1SdCh0LGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSk6KGkubT1hKCkpWzBdPXQobixlLHUpLGkubj1yLGkubz1ufSksaT1wLmxlbmd0aCxwLnNvcnQodSk7aS0tOyluPXBbaV0scFtpXT1uLm8sb3x8bChuLm0pLGMobik7cmV0dXJuIHB9LEoudGFwPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQobiksblxufSxKLnRocm90dGxlPWZ1bmN0aW9uKG4sdCxlKXt2YXIgcj10cnVlLHU9dHJ1ZTtpZighZHQobikpdGhyb3cgbmV3IGllO3JldHVybiBmYWxzZT09PWU/cj1mYWxzZTp3dChlKSYmKHI9XCJsZWFkaW5nXCJpbiBlP2UubGVhZGluZzpyLHU9XCJ0cmFpbGluZ1wiaW4gZT9lLnRyYWlsaW5nOnUpLEwubGVhZGluZz1yLEwubWF4V2FpdD10LEwudHJhaWxpbmc9dSxWdChuLHQsTCl9LEoudGltZXM9ZnVuY3Rpb24obix0LGUpe249LTE8KG49K24pP246MDt2YXIgcj0tMSx1PVh0KG4pO2Zvcih0PXR0KHQsZSwxKTsrK3I8bjspdVtyXT10KHIpO3JldHVybiB1fSxKLnRvQXJyYXk9ZnVuY3Rpb24obil7cmV0dXJuIG4mJnR5cGVvZiBuLmxlbmd0aD09XCJudW1iZXJcIj9wKG4pOnh0KG4pfSxKLnRyYW5zZm9ybT1mdW5jdGlvbihuLHQsZSxyKXt2YXIgdT1UZShuKTtpZihudWxsPT1lKWlmKHUpZT1bXTtlbHNle3ZhciBvPW4mJm4uY29uc3RydWN0b3I7ZT1udChvJiZvLnByb3RvdHlwZSl9cmV0dXJuIHQmJih0PUouY3JlYXRlQ2FsbGJhY2sodCxyLDQpLCh1P1N0OmgpKG4sZnVuY3Rpb24obixyLHUpe3JldHVybiB0KGUsbixyLHUpXG59KSksZX0sSi51bmlvbj1mdW5jdGlvbigpe3JldHVybiBmdCh1dChhcmd1bWVudHMsdHJ1ZSx0cnVlKSl9LEoudW5pcT1QdCxKLnZhbHVlcz14dCxKLndoZXJlPU50LEoud2l0aG91dD1mdW5jdGlvbihuKXtyZXR1cm4gcnQobixwKGFyZ3VtZW50cywxKSl9LEoud3JhcD1mdW5jdGlvbihuLHQpe3JldHVybiBjdCh0LDE2LFtuXSl9LEoueG9yPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPS0xLHQ9YXJndW1lbnRzLmxlbmd0aDsrK248dDspe3ZhciBlPWFyZ3VtZW50c1tuXTtpZihUZShlKXx8eXQoZSkpdmFyIHI9cj9mdChydChyLGUpLmNvbmNhdChydChlLHIpKSk6ZX1yZXR1cm4gcnx8W119LEouemlwPUt0LEouemlwT2JqZWN0PUx0LEouY29sbGVjdD1SdCxKLmRyb3A9cXQsSi5lYWNoPVN0LEouZWFjaFJpZ2h0PUV0LEouZXh0ZW5kPVUsSi5tZXRob2RzPWJ0LEoub2JqZWN0PUx0LEouc2VsZWN0PU50LEoudGFpbD1xdCxKLnVuaXF1ZT1QdCxKLnVuemlwPUt0LEd0KEopLEouY2xvbmU9ZnVuY3Rpb24obix0LGUscil7cmV0dXJuIHR5cGVvZiB0IT1cImJvb2xlYW5cIiYmbnVsbCE9dCYmKHI9ZSxlPXQsdD1mYWxzZSksWihuLHQsdHlwZW9mIGU9PVwiZnVuY3Rpb25cIiYmdHQoZSxyLDEpKVxufSxKLmNsb25lRGVlcD1mdW5jdGlvbihuLHQsZSl7cmV0dXJuIFoobix0cnVlLHR5cGVvZiB0PT1cImZ1bmN0aW9uXCImJnR0KHQsZSwxKSl9LEouY29udGFpbnM9Q3QsSi5lc2NhcGU9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PW4/XCJcIjpvZShuKS5yZXBsYWNlKHplLHB0KX0sSi5ldmVyeT1PdCxKLmZpbmQ9SXQsSi5maW5kSW5kZXg9ZnVuY3Rpb24obix0LGUpe3ZhciByPS0xLHU9bj9uLmxlbmd0aDowO2Zvcih0PUouY3JlYXRlQ2FsbGJhY2sodCxlLDMpOysrcjx1OylpZih0KG5bcl0scixuKSlyZXR1cm4gcjtyZXR1cm4tMX0sSi5maW5kS2V5PWZ1bmN0aW9uKG4sdCxlKXt2YXIgcjtyZXR1cm4gdD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSxoKG4sZnVuY3Rpb24obixlLHUpe3JldHVybiB0KG4sZSx1KT8ocj1lLGZhbHNlKTp2b2lkIDB9KSxyfSxKLmZpbmRMYXN0PWZ1bmN0aW9uKG4sdCxlKXt2YXIgcjtyZXR1cm4gdD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSxFdChuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gdChuLGUsdSk/KHI9bixmYWxzZSk6dm9pZCAwXG59KSxyfSxKLmZpbmRMYXN0SW5kZXg9ZnVuY3Rpb24obix0LGUpe3ZhciByPW4/bi5sZW5ndGg6MDtmb3IodD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKTtyLS07KWlmKHQobltyXSxyLG4pKXJldHVybiByO3JldHVybi0xfSxKLmZpbmRMYXN0S2V5PWZ1bmN0aW9uKG4sdCxlKXt2YXIgcjtyZXR1cm4gdD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKSxtdChuLGZ1bmN0aW9uKG4sZSx1KXtyZXR1cm4gdChuLGUsdSk/KHI9ZSxmYWxzZSk6dm9pZCAwfSkscn0sSi5oYXM9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj9tZS5jYWxsKG4sdCk6ZmFsc2V9LEouaWRlbnRpdHk9VXQsSi5pbmRleE9mPVd0LEouaXNBcmd1bWVudHM9eXQsSi5pc0FycmF5PVRlLEouaXNCb29sZWFuPWZ1bmN0aW9uKG4pe3JldHVybiB0cnVlPT09bnx8ZmFsc2U9PT1ufHxuJiZ0eXBlb2Ygbj09XCJvYmplY3RcIiYmY2UuY2FsbChuKT09VHx8ZmFsc2V9LEouaXNEYXRlPWZ1bmN0aW9uKG4pe3JldHVybiBuJiZ0eXBlb2Ygbj09XCJvYmplY3RcIiYmY2UuY2FsbChuKT09Rnx8ZmFsc2Vcbn0sSi5pc0VsZW1lbnQ9ZnVuY3Rpb24obil7cmV0dXJuIG4mJjE9PT1uLm5vZGVUeXBlfHxmYWxzZX0sSi5pc0VtcHR5PWZ1bmN0aW9uKG4pe3ZhciB0PXRydWU7aWYoIW4pcmV0dXJuIHQ7dmFyIGU9Y2UuY2FsbChuKSxyPW4ubGVuZ3RoO3JldHVybiBlPT0kfHxlPT1QfHxlPT1EfHxlPT1xJiZ0eXBlb2Ygcj09XCJudW1iZXJcIiYmZHQobi5zcGxpY2UpPyFyOihoKG4sZnVuY3Rpb24oKXtyZXR1cm4gdD1mYWxzZX0pLHQpfSxKLmlzRXF1YWw9ZnVuY3Rpb24obix0LGUscil7cmV0dXJuIG90KG4sdCx0eXBlb2YgZT09XCJmdW5jdGlvblwiJiZ0dChlLHIsMikpfSxKLmlzRmluaXRlPWZ1bmN0aW9uKG4pe3JldHVybiBDZShuKSYmIU9lKHBhcnNlRmxvYXQobikpfSxKLmlzRnVuY3Rpb249ZHQsSi5pc05hTj1mdW5jdGlvbihuKXtyZXR1cm4ganQobikmJm4hPStufSxKLmlzTnVsbD1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09PW59LEouaXNOdW1iZXI9anQsSi5pc09iamVjdD13dCxKLmlzUGxhaW5PYmplY3Q9UGUsSi5pc1JlZ0V4cD1mdW5jdGlvbihuKXtyZXR1cm4gbiYmdHlwZW9mIG49PVwib2JqZWN0XCImJmNlLmNhbGwobik9PXp8fGZhbHNlXG59LEouaXNTdHJpbmc9a3QsSi5pc1VuZGVmaW5lZD1mdW5jdGlvbihuKXtyZXR1cm4gdHlwZW9mIG49PVwidW5kZWZpbmVkXCJ9LEoubGFzdEluZGV4T2Y9ZnVuY3Rpb24obix0LGUpe3ZhciByPW4/bi5sZW5ndGg6MDtmb3IodHlwZW9mIGU9PVwibnVtYmVyXCImJihyPSgwPmU/SWUoMCxyK2UpOlNlKGUsci0xKSkrMSk7ci0tOylpZihuW3JdPT09dClyZXR1cm4gcjtyZXR1cm4tMX0sSi5taXhpbj1HdCxKLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5fPWxlLHRoaXN9LEoubm9vcD1IdCxKLm5vdz1VZSxKLnBhcnNlSW50PUdlLEoucmFuZG9tPWZ1bmN0aW9uKG4sdCxlKXt2YXIgcj1udWxsPT1uLHU9bnVsbD09dDtyZXR1cm4gbnVsbD09ZSYmKHR5cGVvZiBuPT1cImJvb2xlYW5cIiYmdT8oZT1uLG49MSk6dXx8dHlwZW9mIHQhPVwiYm9vbGVhblwifHwoZT10LHU9dHJ1ZSkpLHImJnUmJih0PTEpLG49K258fDAsdT8odD1uLG49MCk6dD0rdHx8MCxlfHxuJTF8fHQlMT8oZT1SZSgpLFNlKG4rZSoodC1uK3BhcnNlRmxvYXQoXCIxZS1cIisoKGUrXCJcIikubGVuZ3RoLTEpKSksdCkpOmF0KG4sdClcbn0sSi5yZWR1Y2U9RHQsSi5yZWR1Y2VSaWdodD0kdCxKLnJlc3VsdD1mdW5jdGlvbihuLHQpe2lmKG4pe3ZhciBlPW5bdF07cmV0dXJuIGR0KGUpP25bdF0oKTplfX0sSi5ydW5JbkNvbnRleHQ9cyxKLnNpemU9ZnVuY3Rpb24obil7dmFyIHQ9bj9uLmxlbmd0aDowO3JldHVybiB0eXBlb2YgdD09XCJudW1iZXJcIj90OkZlKG4pLmxlbmd0aH0sSi5zb21lPUZ0LEouc29ydGVkSW5kZXg9enQsSi50ZW1wbGF0ZT1mdW5jdGlvbihuLHQsZSl7dmFyIHI9Si50ZW1wbGF0ZVNldHRpbmdzO249b2Uobnx8XCJcIiksZT1fKHt9LGUscik7dmFyIHUsbz1fKHt9LGUuaW1wb3J0cyxyLmltcG9ydHMpLHI9RmUobyksbz14dChvKSxhPTAsZj1lLmludGVycG9sYXRlfHxTLGw9XCJfX3ArPSdcIixmPXVlKChlLmVzY2FwZXx8Uykuc291cmNlK1wifFwiK2Yuc291cmNlK1wifFwiKyhmPT09Tj94OlMpLnNvdXJjZStcInxcIisoZS5ldmFsdWF0ZXx8Uykuc291cmNlK1wifCRcIixcImdcIik7bi5yZXBsYWNlKGYsZnVuY3Rpb24odCxlLHIsbyxmLGMpe3JldHVybiByfHwocj1vKSxsKz1uLnNsaWNlKGEsYykucmVwbGFjZShSLGkpLGUmJihsKz1cIicrX19lKFwiK2UrXCIpKydcIiksZiYmKHU9dHJ1ZSxsKz1cIic7XCIrZitcIjtcXG5fX3ArPSdcIiksciYmKGwrPVwiJysoKF9fdD0oXCIrcitcIikpPT1udWxsPycnOl9fdCkrJ1wiKSxhPWMrdC5sZW5ndGgsdFxufSksbCs9XCInO1wiLGY9ZT1lLnZhcmlhYmxlLGZ8fChlPVwib2JqXCIsbD1cIndpdGgoXCIrZStcIil7XCIrbCtcIn1cIiksbD0odT9sLnJlcGxhY2UodyxcIlwiKTpsKS5yZXBsYWNlKGosXCIkMVwiKS5yZXBsYWNlKGssXCIkMTtcIiksbD1cImZ1bmN0aW9uKFwiK2UrXCIpe1wiKyhmP1wiXCI6ZStcInx8KFwiK2UrXCI9e30pO1wiKStcInZhciBfX3QsX19wPScnLF9fZT1fLmVzY2FwZVwiKyh1P1wiLF9faj1BcnJheS5wcm90b3R5cGUuam9pbjtmdW5jdGlvbiBwcmludCgpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKX1cIjpcIjtcIikrbCtcInJldHVybiBfX3B9XCI7dHJ5e3ZhciBjPW5lKHIsXCJyZXR1cm4gXCIrbCkuYXBwbHkodixvKX1jYXRjaChwKXt0aHJvdyBwLnNvdXJjZT1sLHB9cmV0dXJuIHQ/Yyh0KTooYy5zb3VyY2U9bCxjKX0sSi51bmVzY2FwZT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj9cIlwiOm9lKG4pLnJlcGxhY2UocWUsZ3QpfSxKLnVuaXF1ZUlkPWZ1bmN0aW9uKG4pe3ZhciB0PSsreTtyZXR1cm4gb2UobnVsbD09bj9cIlwiOm4pK3Rcbn0sSi5hbGw9T3QsSi5hbnk9RnQsSi5kZXRlY3Q9SXQsSi5maW5kV2hlcmU9SXQsSi5mb2xkbD1EdCxKLmZvbGRyPSR0LEouaW5jbHVkZT1DdCxKLmluamVjdD1EdCxHdChmdW5jdGlvbigpe3ZhciBuPXt9O3JldHVybiBoKEosZnVuY3Rpb24odCxlKXtKLnByb3RvdHlwZVtlXXx8KG5bZV09dCl9KSxufSgpLGZhbHNlKSxKLmZpcnN0PUJ0LEoubGFzdD1mdW5jdGlvbihuLHQsZSl7dmFyIHI9MCx1PW4/bi5sZW5ndGg6MDtpZih0eXBlb2YgdCE9XCJudW1iZXJcIiYmbnVsbCE9dCl7dmFyIG89dTtmb3IodD1KLmNyZWF0ZUNhbGxiYWNrKHQsZSwzKTtvLS0mJnQobltvXSxvLG4pOylyKyt9ZWxzZSBpZihyPXQsbnVsbD09cnx8ZSlyZXR1cm4gbj9uW3UtMV06djtyZXR1cm4gcChuLEllKDAsdS1yKSl9LEouc2FtcGxlPWZ1bmN0aW9uKG4sdCxlKXtyZXR1cm4gbiYmdHlwZW9mIG4ubGVuZ3RoIT1cIm51bWJlclwiJiYobj14dChuKSksbnVsbD09dHx8ZT9uP25bYXQoMCxuLmxlbmd0aC0xKV06djoobj1UdChuKSxuLmxlbmd0aD1TZShJZSgwLHQpLG4ubGVuZ3RoKSxuKVxufSxKLnRha2U9QnQsSi5oZWFkPUJ0LGgoSixmdW5jdGlvbihuLHQpe3ZhciBlPVwic2FtcGxlXCIhPT10O0oucHJvdG90eXBlW3RdfHwoSi5wcm90b3R5cGVbdF09ZnVuY3Rpb24odCxyKXt2YXIgdT10aGlzLl9fY2hhaW5fXyxvPW4odGhpcy5fX3dyYXBwZWRfXyx0LHIpO3JldHVybiB1fHxudWxsIT10JiYoIXJ8fGUmJnR5cGVvZiB0PT1cImZ1bmN0aW9uXCIpP25ldyBRKG8sdSk6b30pfSksSi5WRVJTSU9OPVwiMi40LjFcIixKLnByb3RvdHlwZS5jaGFpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9fY2hhaW5fXz10cnVlLHRoaXN9LEoucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIG9lKHRoaXMuX193cmFwcGVkX18pfSxKLnByb3RvdHlwZS52YWx1ZT1RdCxKLnByb3RvdHlwZS52YWx1ZU9mPVF0LFN0KFtcImpvaW5cIixcInBvcFwiLFwic2hpZnRcIl0sZnVuY3Rpb24obil7dmFyIHQ9YWVbbl07Si5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fY2hhaW5fXyxlPXQuYXBwbHkodGhpcy5fX3dyYXBwZWRfXyxhcmd1bWVudHMpO1xucmV0dXJuIG4/bmV3IFEoZSxuKTplfX0pLFN0KFtcInB1c2hcIixcInJldmVyc2VcIixcInNvcnRcIixcInVuc2hpZnRcIl0sZnVuY3Rpb24obil7dmFyIHQ9YWVbbl07Si5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLGFyZ3VtZW50cyksdGhpc319KSxTdChbXCJjb25jYXRcIixcInNsaWNlXCIsXCJzcGxpY2VcIl0sZnVuY3Rpb24obil7dmFyIHQ9YWVbbl07Si5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFEodC5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLGFyZ3VtZW50cyksdGhpcy5fX2NoYWluX18pfX0pLEp9dmFyIHYsaD1bXSxnPVtdLHk9MCxtPStuZXcgRGF0ZStcIlwiLGI9NzUsXz00MCxkPVwiIFxcdFxceDBCXFxmXFx4YTBcXHVmZWZmXFxuXFxyXFx1MjAyOFxcdTIwMjlcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXCIsdz0vXFxiX19wXFwrPScnOy9nLGo9L1xcYihfX3BcXCs9KScnXFwrL2csaz0vKF9fZVxcKC4qP1xcKXxcXGJfX3RcXCkpXFwrJyc7L2cseD0vXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2csQz0vXFx3KiQvLE89L15cXHMqZnVuY3Rpb25bIFxcblxcclxcdF0rXFx3LyxOPS88JT0oW1xcc1xcU10rPyklPi9nLEk9UmVnRXhwKFwiXltcIitkK1wiXSowKyg/PS4kKVwiKSxTPS8oJF4pLyxFPS9cXGJ0aGlzXFxiLyxSPS9bJ1xcblxcclxcdFxcdTIwMjhcXHUyMDI5XFxcXF0vZyxBPVwiQXJyYXkgQm9vbGVhbiBEYXRlIEZ1bmN0aW9uIE1hdGggTnVtYmVyIE9iamVjdCBSZWdFeHAgU3RyaW5nIF8gYXR0YWNoRXZlbnQgY2xlYXJUaW1lb3V0IGlzRmluaXRlIGlzTmFOIHBhcnNlSW50IHNldFRpbWVvdXRcIi5zcGxpdChcIiBcIiksRD1cIltvYmplY3QgQXJndW1lbnRzXVwiLCQ9XCJbb2JqZWN0IEFycmF5XVwiLFQ9XCJbb2JqZWN0IEJvb2xlYW5dXCIsRj1cIltvYmplY3QgRGF0ZV1cIixCPVwiW29iamVjdCBGdW5jdGlvbl1cIixXPVwiW29iamVjdCBOdW1iZXJdXCIscT1cIltvYmplY3QgT2JqZWN0XVwiLHo9XCJbb2JqZWN0IFJlZ0V4cF1cIixQPVwiW29iamVjdCBTdHJpbmddXCIsSz17fTtcbktbQl09ZmFsc2UsS1tEXT1LWyRdPUtbVF09S1tGXT1LW1ddPUtbcV09S1t6XT1LW1BdPXRydWU7dmFyIEw9e2xlYWRpbmc6ZmFsc2UsbWF4V2FpdDowLHRyYWlsaW5nOmZhbHNlfSxNPXtjb25maWd1cmFibGU6ZmFsc2UsZW51bWVyYWJsZTpmYWxzZSx2YWx1ZTpudWxsLHdyaXRhYmxlOmZhbHNlfSxWPXtcImJvb2xlYW5cIjpmYWxzZSxcImZ1bmN0aW9uXCI6dHJ1ZSxvYmplY3Q6dHJ1ZSxudW1iZXI6ZmFsc2Usc3RyaW5nOmZhbHNlLHVuZGVmaW5lZDpmYWxzZX0sVT17XCJcXFxcXCI6XCJcXFxcXCIsXCInXCI6XCInXCIsXCJcXG5cIjpcIm5cIixcIlxcclwiOlwiclwiLFwiXFx0XCI6XCJ0XCIsXCJcXHUyMDI4XCI6XCJ1MjAyOFwiLFwiXFx1MjAyOVwiOlwidTIwMjlcIn0sRz1WW3R5cGVvZiB3aW5kb3ddJiZ3aW5kb3d8fHRoaXMsSD1WW3R5cGVvZiBleHBvcnRzXSYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHMsSj1WW3R5cGVvZiBtb2R1bGVdJiZtb2R1bGUmJiFtb2R1bGUubm9kZVR5cGUmJm1vZHVsZSxRPUomJkouZXhwb3J0cz09PUgmJkgsWD1WW3R5cGVvZiBnbG9iYWxdJiZnbG9iYWw7IVh8fFguZ2xvYmFsIT09WCYmWC53aW5kb3chPT1YfHwoRz1YKTtcbnZhciBZPXMoKTt0eXBlb2YgZGVmaW5lPT1cImZ1bmN0aW9uXCImJnR5cGVvZiBkZWZpbmUuYW1kPT1cIm9iamVjdFwiJiZkZWZpbmUuYW1kPyhHLl89WSwgZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIFl9KSk6SCYmSj9RPyhKLmV4cG9ydHM9WSkuXz1ZOkguXz1ZOkcuXz1ZfSkuY2FsbCh0aGlzKTtcbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIi8qISAxLjYuMTIgKi9cbiFmdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKCl7dHJ5e3ZhciBhPW5ldyBBY3RpdmVYT2JqZWN0KFwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2hcIik7aWYoYSlyZXR1cm4hMH1jYXRjaChiKXtpZih2b2lkIDAhPW5hdmlnYXRvci5taW1lVHlwZXNbXCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiXSlyZXR1cm4hMH1yZXR1cm4hMX0sYj1mdW5jdGlvbihhLGIpe3dpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGVbYV09Yih3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlW2FdKX07aWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KXtpZighd2luZG93LkZvcm1EYXRhfHx3aW5kb3cuRmlsZUFQSSYmRmlsZUFQSS5mb3JjZUxvYWQpe3ZhciBjPWZ1bmN0aW9uKGEpe2lmKCFhLl9fbGlzdGVuZXJzKXthLnVwbG9hZHx8KGEudXBsb2FkPXt9KSxhLl9fbGlzdGVuZXJzPVtdO3ZhciBiPWEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXI7YS51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihjLGQpe2EuX19saXN0ZW5lcnNbY109ZCxiJiZiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fTtiKFwib3BlblwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGQsZSl7Yyh0aGlzKSx0aGlzLl9fdXJsPWQ7dHJ5e2EuYXBwbHkodGhpcyxbYixkLGVdKX1jYXRjaChmKXtmLm1lc3NhZ2UuaW5kZXhPZihcIkFjY2VzcyBpcyBkZW5pZWRcIik+LTEmJmEuYXBwbHkodGhpcyxbYixcIl9maXhfZm9yX2llX2Nyb3NzZG9tYWluX19cIixlXSl9fX0pLGIoXCJnZXRSZXNwb25zZUhlYWRlclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5fX2ZpbGVBcGlYSFImJnRoaXMuX19maWxlQXBpWEhSLmdldFJlc3BvbnNlSGVhZGVyP3RoaXMuX19maWxlQXBpWEhSLmdldFJlc3BvbnNlSGVhZGVyKGIpOm51bGw9PWE/bnVsbDphLmFwcGx5KHRoaXMsW2JdKX19KSxiKFwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19maWxlQXBpWEhSJiZ0aGlzLl9fZmlsZUFwaVhIUi5nZXRBbGxSZXNwb25zZUhlYWRlcnM/dGhpcy5fX2ZpbGVBcGlYSFIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk6bnVsbD09YT9udWxsOmEuYXBwbHkodGhpcyl9fSksYihcImFib3J0XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19maWxlQXBpWEhSJiZ0aGlzLl9fZmlsZUFwaVhIUi5hYm9ydD90aGlzLl9fZmlsZUFwaVhIUi5hYm9ydCgpOm51bGw9PWE/bnVsbDphLmFwcGx5KHRoaXMpfX0pLGIoXCJzZXRSZXF1ZXN0SGVhZGVyXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsZCl7aWYoXCJfX3NldFhIUl9cIj09PWIpe2ModGhpcyk7dmFyIGU9ZCh0aGlzKTtlIGluc3RhbmNlb2YgRnVuY3Rpb24mJmUodGhpcyl9ZWxzZSB0aGlzLl9fcmVxdWVzdEhlYWRlcnM9dGhpcy5fX3JlcXVlc3RIZWFkZXJzfHx7fSx0aGlzLl9fcmVxdWVzdEhlYWRlcnNbYl09ZCxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxiKFwic2VuZFwiLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPXRoaXM7aWYoYXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0uX19pc1NoaW0pe3ZhciBkPWFyZ3VtZW50c1swXSxlPXt1cmw6Yy5fX3VybCxqc29ucDohMSxjYWNoZTohMCxjb21wbGV0ZTpmdW5jdGlvbihhLGIpe2MuX19jb21wbGV0ZWQ9ITAsIWEmJmMuX19saXN0ZW5lcnMubG9hZCYmYy5fX2xpc3RlbmVycy5sb2FkKHt0eXBlOlwibG9hZFwiLGxvYWRlZDpjLl9fbG9hZGVkLHRvdGFsOmMuX190b3RhbCx0YXJnZXQ6YyxsZW5ndGhDb21wdXRhYmxlOiEwfSksIWEmJmMuX19saXN0ZW5lcnMubG9hZGVuZCYmYy5fX2xpc3RlbmVycy5sb2FkZW5kKHt0eXBlOlwibG9hZGVuZFwiLGxvYWRlZDpjLl9fbG9hZGVkLHRvdGFsOmMuX190b3RhbCx0YXJnZXQ6YyxsZW5ndGhDb21wdXRhYmxlOiEwfSksXCJhYm9ydFwiPT09YSYmYy5fX2xpc3RlbmVycy5hYm9ydCYmYy5fX2xpc3RlbmVycy5hYm9ydCh7dHlwZTpcImFib3J0XCIsbG9hZGVkOmMuX19sb2FkZWQsdG90YWw6Yy5fX3RvdGFsLHRhcmdldDpjLGxlbmd0aENvbXB1dGFibGU6ITB9KSx2b2lkIDAhPT1iLnN0YXR1cyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsXCJzdGF0dXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PWIuc3RhdHVzJiZhJiZcImFib3J0XCIhPT1hPzUwMDpiLnN0YXR1c319KSx2b2lkIDAhPT1iLnN0YXR1c1RleHQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLFwic3RhdHVzVGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYi5zdGF0dXNUZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLFwicmVhZHlTdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gNH19KSx2b2lkIDAhPT1iLnJlc3BvbnNlJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxcInJlc3BvbnNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBiLnJlc3BvbnNlfX0pO3ZhciBkPWIucmVzcG9uc2VUZXh0fHwoYSYmMD09Yi5zdGF0dXMmJlwiYWJvcnRcIiE9PWE/YTp2b2lkIDApO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLFwicmVzcG9uc2VUZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiBkfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLFwicmVzcG9uc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGR9fSksYSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsXCJlcnJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9fSksYy5fX2ZpbGVBcGlYSFI9YixjLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYy5vbnJlYWR5c3RhdGVjaGFuZ2UoKX0sZmlsZXByb2dyZXNzOmZ1bmN0aW9uKGEpe2lmKGEudGFyZ2V0PWMsYy5fX2xpc3RlbmVycy5wcm9ncmVzcyYmYy5fX2xpc3RlbmVycy5wcm9ncmVzcyhhKSxjLl9fdG90YWw9YS50b3RhbCxjLl9fbG9hZGVkPWEubG9hZGVkLGEudG90YWw9PT1hLmxvYWRlZCl7dmFyIGI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5fX2NvbXBsZXRlZHx8KGMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7fSxiLmNvbXBsZXRlKG51bGwse3N0YXR1czoyMDQsc3RhdHVzVGV4dDpcIk5vIENvbnRlbnRcIn0pKX0sMWU0KX19LGhlYWRlcnM6Yy5fX3JlcXVlc3RIZWFkZXJzfTtlLmRhdGE9e30sZS5maWxlcz17fTtmb3IodmFyIGY9MDtmPGQuZGF0YS5sZW5ndGg7ZisrKXt2YXIgZz1kLmRhdGFbZl07bnVsbCE9Zy52YWwmJm51bGwhPWcudmFsLm5hbWUmJm51bGwhPWcudmFsLnNpemUmJm51bGwhPWcudmFsLnR5cGU/ZS5maWxlc1tnLmtleV09Zy52YWw6ZS5kYXRhW2cua2V5XT1nLnZhbH1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoIWEoKSl0aHJvdydBZG9kZSBGbGFzaCBQbGF5ZXIgbmVlZCB0byBiZSBpbnN0YWxsZWQuIFRvIGNoZWNrIGFoZWFkIHVzZSBcIkZpbGVBUEkuaGFzRmxhc2hcIic7Yy5fX2ZpbGVBcGlYSFI9RmlsZUFQSS51cGxvYWQoZSl9LDEpfWVsc2UgYi5hcHBseShjLGFyZ3VtZW50cyl9fSl9ZWxzZSBiKFwic2V0UmVxdWVzdEhlYWRlclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2lmKFwiX19zZXRYSFJfXCI9PT1iKXt2YXIgZD1jKHRoaXMpO2QgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZCh0aGlzKX1lbHNlIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO3dpbmRvdy5YTUxIdHRwUmVxdWVzdC5fX2lzU2hpbT0hMH1pZighd2luZG93LkZvcm1EYXRhfHx3aW5kb3cuRmlsZUFQSSYmRmlsZUFQSS5mb3JjZUxvYWQpe3ZhciBkPWZ1bmN0aW9uKGIpe2lmKCFhKCkpdGhyb3cnQWRvZGUgRmxhc2ggUGxheWVyIG5lZWQgdG8gYmUgaW5zdGFsbGVkLiBUbyBjaGVjayBhaGVhZCB1c2UgXCJGaWxlQVBJLmhhc0ZsYXNoXCInO3ZhciBjPWFuZ3VsYXIuZWxlbWVudChiKTtpZighKGMuYXR0cihcImRpc2FibGVkXCIpfHxjLmhhc0NsYXNzKFwianMtZmlsZWFwaS13cmFwcGVyXCIpfHxudWxsPT1iLmdldEF0dHJpYnV0ZShcIm5nLWZpbGUtc2VsZWN0XCIpJiZudWxsPT1iLmdldEF0dHJpYnV0ZShcImRhdGEtbmctZmlsZS1zZWxlY3RcIikpKWlmKEZpbGVBUEkud3JhcEluc2lkZURpdil7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtkLmlubmVySFRNTD0nPGRpdiBjbGFzcz1cImpzLWZpbGVhcGktd3JhcHBlclwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7IG92ZXJmbG93OmhpZGRlblwiPjwvZGl2PicsZD1kLmZpcnN0Q2hpbGQ7dmFyIGU9Yi5wYXJlbnROb2RlO2UuaW5zZXJ0QmVmb3JlKGQsYiksZS5yZW1vdmVDaGlsZChiKSxkLmFwcGVuZENoaWxkKGIpfWVsc2UgYy5hZGRDbGFzcyhcImpzLWZpbGVhcGktd3JhcHBlclwiKSxjLnBhcmVudCgpWzBdLl9fZmlsZV9jbGlja19mbl9kZWxlZ2F0ZV8mJigoXCJcIj09PWMucGFyZW50KCkuY3NzKFwicG9zaXRpb25cIil8fFwic3RhdGljXCI9PT1jLnBhcmVudCgpLmNzcyhcInBvc2l0aW9uXCIpKSYmYy5wYXJlbnQoKS5jc3MoXCJwb3NpdGlvblwiLFwicmVsYXRpdmVcIiksYy5jc3MoXCJ0b3BcIiwwKS5jc3MoXCJib3R0b21cIiwwKS5jc3MoXCJsZWZ0XCIsMCkuY3NzKFwicmlnaHRcIiwwKS5jc3MoXCJ3aWR0aFwiLFwiMTAwJVwiKS5jc3MoXCJoZWlnaHRcIixcIjEwMCVcIikuY3NzKFwicGFkZGluZ1wiLDApLmNzcyhcIm1hcmdpblwiLDApLGMucGFyZW50KCkudW5iaW5kKFwiY2xpY2tcIixjLnBhcmVudCgpWzBdLl9fZmlsZV9jbGlja19mbl9kZWxlZ2F0ZV8pKX0sZT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPUZpbGVBUEkuZ2V0RmlsZXMoYiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXZvaWQgMD09PWNbZF0uc2l6ZSYmKGNbZF0uc2l6ZT0wKSx2b2lkIDA9PT1jW2RdLm5hbWUmJihjW2RdLm5hbWU9XCJmaWxlXCIpLHZvaWQgMD09PWNbZF0udHlwZSYmKGNbZF0udHlwZT1cInVuZGVmaW5lZFwiKTtiLnRhcmdldHx8KGIudGFyZ2V0PXt9KSxiLnRhcmdldC5maWxlcz1jLGIudGFyZ2V0LmZpbGVzIT1jJiYoYi5fX2ZpbGVzXz1jKSwoYi5fX2ZpbGVzX3x8Yi50YXJnZXQuZmlsZXMpLml0ZW09ZnVuY3Rpb24oYSl7cmV0dXJuKGIuX19maWxlc198fGIudGFyZ2V0LmZpbGVzKVthXXx8bnVsbH0sYSYmYS5hcHBseSh0aGlzLFtiXSl9fSxmPWZ1bmN0aW9uKGEsYil7cmV0dXJuKFwiY2hhbmdlXCI9PT1iLnRvTG93ZXJDYXNlKCl8fFwib25jaGFuZ2VcIj09PWIudG9Mb3dlckNhc2UoKSkmJlwiZmlsZVwiPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIil9O0hUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXImJihIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiLGMsZyxoKXtmKHRoaXMsYik/KGQodGhpcyksYS5hcHBseSh0aGlzLFtiLGUoYyksZyxoXSkpOmEuYXBwbHkodGhpcyxbYixjLGcsaF0pfX0oSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcikpLEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmF0dGFjaEV2ZW50JiYoSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYXR0YWNoRXZlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Zih0aGlzLGIpPyhkKHRoaXMpLHdpbmRvdy5qUXVlcnk/YW5ndWxhci5lbGVtZW50KHRoaXMpLmJpbmQoXCJjaGFuZ2VcIixlKG51bGwpKTphLmFwcGx5KHRoaXMsW2IsZShjKV0pKTphLmFwcGx5KHRoaXMsW2IsY10pfX0oSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYXR0YWNoRXZlbnQpKSx3aW5kb3cuRm9ybURhdGE9Rm9ybURhdGE9ZnVuY3Rpb24oKXtyZXR1cm57YXBwZW5kOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmRhdGEucHVzaCh7a2V5OmEsdmFsOmIsbmFtZTpjfSl9LGRhdGE6W10sX19pc1NoaW06ITB9fSxmdW5jdGlvbigpe2lmKHdpbmRvdy5GaWxlQVBJfHwod2luZG93LkZpbGVBUEk9e30pLEZpbGVBUEkuZm9yY2VMb2FkJiYoRmlsZUFQSS5odG1sNT0hMSksIUZpbGVBUEkudXBsb2FkKXt2YXIgYixjLGQsZSxmLGc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxoPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO2lmKHdpbmRvdy5GaWxlQVBJLmpzVXJsKWI9d2luZG93LkZpbGVBUEkuanNVcmw7ZWxzZSBpZih3aW5kb3cuRmlsZUFQSS5qc1BhdGgpYz13aW5kb3cuRmlsZUFQSS5qc1BhdGg7ZWxzZSBmb3IoZD0wO2Q8aC5sZW5ndGg7ZCsrKWlmKGY9aFtkXS5zcmMsZT1mLmluZGV4T2YoXCJhbmd1bGFyLWZpbGUtdXBsb2FkLXNoaW0uanNcIiksLTE9PWUmJihlPWYuaW5kZXhPZihcImFuZ3VsYXItZmlsZS11cGxvYWQtc2hpbS5taW4uanNcIikpLGU+LTEpe2M9Zi5zdWJzdHJpbmcoMCxlKTticmVha31udWxsPT1GaWxlQVBJLnN0YXRpY1BhdGgmJihGaWxlQVBJLnN0YXRpY1BhdGg9YyksZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIixifHxjK1wiRmlsZUFQSS5taW4uanNcIiksZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGcpLEZpbGVBUEkuaGFzRmxhc2g9YSgpfX0oKSxGaWxlQVBJLmRpc2FibGVGaWxlSW5wdXQ9ZnVuY3Rpb24oYSxiKXtiP2EucmVtb3ZlQ2xhc3MoXCJqcy1maWxlYXBpLXdyYXBwZXJcIik6YS5hZGRDbGFzcyhcImpzLWZpbGVhcGktd3JhcHBlclwiKX19d2luZG93LkZpbGVSZWFkZXJ8fCh3aW5kb3cuRmlsZVJlYWRlcj1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj0hMTt0aGlzLmxpc3RlbmVycz17fSx0aGlzLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYixjKXthLmxpc3RlbmVyc1tiXT1hLmxpc3RlbmVyc1tiXXx8W10sYS5saXN0ZW5lcnNbYl0ucHVzaChjKX0sdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGIsYyl7YS5saXN0ZW5lcnNbYl0mJmEubGlzdGVuZXJzW2JdLnNwbGljZShhLmxpc3RlbmVyc1tiXS5pbmRleE9mKGMpLDEpfSx0aGlzLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYil7dmFyIGM9YS5saXN0ZW5lcnNbYi50eXBlXTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWNbZF0uY2FsbChhLGIpfSx0aGlzLm9uYWJvcnQ9dGhpcy5vbmVycm9yPXRoaXMub25sb2FkPXRoaXMub25sb2Fkc3RhcnQ9dGhpcy5vbmxvYWRlbmQ9dGhpcy5vbnByb2dyZXNzPW51bGw7dmFyIGM9ZnVuY3Rpb24oYixjKXt2YXIgZD17dHlwZTpiLHRhcmdldDphLGxvYWRlZDpjLmxvYWRlZCx0b3RhbDpjLnRvdGFsLGVycm9yOmMuZXJyb3J9O3JldHVybiBudWxsIT1jLnJlc3VsdCYmKGQudGFyZ2V0LnJlc3VsdD1jLnJlc3VsdCksZH0sZD1mdW5jdGlvbihkKXtpZihifHwoYj0hMCxhLm9ubG9hZHN0YXJ0JiZ0aGlzLm9ubG9hZHN0YXJ0KGMoXCJsb2Fkc3RhcnRcIixkKSkpLFwibG9hZFwiPT09ZC50eXBlKXthLm9ubG9hZGVuZCYmYS5vbmxvYWRlbmQoYyhcImxvYWRlbmRcIixkKSk7dmFyIGU9YyhcImxvYWRcIixkKTthLm9ubG9hZCYmYS5vbmxvYWQoZSksYS5kaXNwYXRjaEV2ZW50KGUpfWVsc2UgaWYoXCJwcm9ncmVzc1wiPT09ZC50eXBlKXt2YXIgZT1jKFwicHJvZ3Jlc3NcIixkKTthLm9ucHJvZ3Jlc3MmJmEub25wcm9ncmVzcyhlKSxhLmRpc3BhdGNoRXZlbnQoZSl9ZWxzZXt2YXIgZT1jKFwiZXJyb3JcIixkKTthLm9uZXJyb3ImJmEub25lcnJvcihlKSxhLmRpc3BhdGNoRXZlbnQoZSl9fTt0aGlzLnJlYWRBc0FycmF5QnVmZmVyPWZ1bmN0aW9uKGEpe0ZpbGVBUEkucmVhZEFzQmluYXJ5U3RyaW5nKGEsZCl9LHRoaXMucmVhZEFzQmluYXJ5U3RyaW5nPWZ1bmN0aW9uKGEpe0ZpbGVBUEkucmVhZEFzQmluYXJ5U3RyaW5nKGEsZCl9LHRoaXMucmVhZEFzRGF0YVVSTD1mdW5jdGlvbihhKXtGaWxlQVBJLnJlYWRBc0RhdGFVUkwoYSxkKX0sdGhpcy5yZWFkQXNUZXh0PWZ1bmN0aW9uKGEpe0ZpbGVBUEkucmVhZEFzVGV4dChhLGQpfX0pfSgpOyIsIi8qISAxLjYuMTIgKi9cbiFmdW5jdGlvbigpe3ZhciBhPWFuZ3VsYXIubW9kdWxlKFwiYW5ndWxhckZpbGVVcGxvYWRcIixbXSk7YS5zZXJ2aWNlKFwiJHVwbG9hZFwiLFtcIiRodHRwXCIsXCIkcVwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChkKXtkLm1ldGhvZD1kLm1ldGhvZHx8XCJQT1NUXCIsZC5oZWFkZXJzPWQuaGVhZGVyc3x8e30sZC50cmFuc2Zvcm1SZXF1ZXN0PWQudHJhbnNmb3JtUmVxdWVzdHx8ZnVuY3Rpb24oYixjKXtyZXR1cm4gd2luZG93LkFycmF5QnVmZmVyJiZiIGluc3RhbmNlb2Ygd2luZG93LkFycmF5QnVmZmVyP2I6YS5kZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0WzBdKGIsYyl9O3ZhciBlPWIuZGVmZXIoKTt3aW5kb3cuWE1MSHR0cFJlcXVlc3QuX19pc1NoaW0mJihkLmhlYWRlcnMuX19zZXRYSFJfPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2EmJihkLl9fWEhSPWEsZC54aHJGbiYmZC54aHJGbihhKSxhLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihhKXtlLm5vdGlmeShhKX0sITEpLGEudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oYSl7YS5sZW5ndGhDb21wdXRhYmxlJiZlLm5vdGlmeShhKX0sITEpKX19KSxhKGQpLnRoZW4oZnVuY3Rpb24oYSl7ZS5yZXNvbHZlKGEpfSxmdW5jdGlvbihhKXtlLnJlamVjdChhKX0sZnVuY3Rpb24oYSl7ZS5ub3RpZnkoYSl9KTt2YXIgZj1lLnByb21pc2U7cmV0dXJuIGYuc3VjY2Vzcz1mdW5jdGlvbihhKXtyZXR1cm4gZi50aGVuKGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxkKX0pLGZ9LGYuZXJyb3I9ZnVuY3Rpb24oYSl7cmV0dXJuIGYudGhlbihudWxsLGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxkKX0pLGZ9LGYucHJvZ3Jlc3M9ZnVuY3Rpb24oYSl7cmV0dXJuIGYudGhlbihudWxsLG51bGwsZnVuY3Rpb24oYil7YShiKX0pLGZ9LGYuYWJvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gZC5fX1hIUiYmYyhmdW5jdGlvbigpe2QuX19YSFIuYWJvcnQoKX0pLGZ9LGYueGhyPWZ1bmN0aW9uKGEpe3JldHVybiBkLnhockZuPWZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe2ImJmIuYXBwbHkoZixhcmd1bWVudHMpLGEuYXBwbHkoZixhcmd1bWVudHMpfX0oZC54aHJGbiksZn0sZn10aGlzLnVwbG9hZD1mdW5jdGlvbihiKXtiLmhlYWRlcnM9Yi5oZWFkZXJzfHx7fSxiLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09dm9pZCAwLGIudHJhbnNmb3JtUmVxdWVzdD1iLnRyYW5zZm9ybVJlcXVlc3R8fGEuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdDt2YXIgYz1uZXcgRm9ybURhdGEsZT1iLnRyYW5zZm9ybVJlcXVlc3QsZj1iLmRhdGE7cmV0dXJuIGIudHJhbnNmb3JtUmVxdWVzdD1mdW5jdGlvbihhLGMpe2lmKGYpaWYoYi5mb3JtRGF0YUFwcGVuZGVyKWZvcih2YXIgZCBpbiBmKXt2YXIgZz1mW2RdO2IuZm9ybURhdGFBcHBlbmRlcihhLGQsZyl9ZWxzZSBmb3IodmFyIGQgaW4gZil7dmFyIGc9ZltkXTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKWc9ZShnLGMpO2Vsc2UgZm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspe3ZhciBpPWVbaF07XCJmdW5jdGlvblwiPT10eXBlb2YgaSYmKGc9aShnLGMpKX1hLmFwcGVuZChkLGcpfWlmKG51bGwhPWIuZmlsZSl7dmFyIGo9Yi5maWxlRm9ybURhdGFOYW1lfHxcImZpbGVcIjtpZihcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYi5maWxlKSlmb3IodmFyIGs9XCJbb2JqZWN0IFN0cmluZ11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChqKSxoPTA7aDxiLmZpbGUubGVuZ3RoO2grKylhLmFwcGVuZChrP2o6altoXSxiLmZpbGVbaF0sYi5maWxlTmFtZSYmYi5maWxlTmFtZVtoXXx8Yi5maWxlW2hdLm5hbWUpO2Vsc2UgYS5hcHBlbmQoaixiLmZpbGUsYi5maWxlTmFtZXx8Yi5maWxlLm5hbWUpfXJldHVybiBhfSxiLmRhdGE9YyxkKGIpfSx0aGlzLmh0dHA9ZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSl9fV0pLGEuZGlyZWN0aXZlKFwibmdGaWxlU2VsZWN0XCIsW1wiJHBhcnNlXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1hKGUubmdGaWxlU2VsZWN0KTtpZihcImlucHV0XCIhPT1kWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJmaWxlXCIhPT0oZC5hdHRyKFwidHlwZVwiKSYmZC5hdHRyKFwidHlwZVwiKS50b0xvd2VyQ2FzZSgpKSl7Zm9yKHZhciBnPWFuZ3VsYXIuZWxlbWVudCgnPGlucHV0IHR5cGU9XCJmaWxlXCI+JyksaD1kWzBdLmF0dHJpYnV0ZXMsaT0wO2k8aC5sZW5ndGg7aSsrKVwidHlwZVwiIT09aFtpXS5uYW1lLnRvTG93ZXJDYXNlKCkmJmcuYXR0cihoW2ldLm5hbWUsaFtpXS52YWx1ZSk7ZS5tdWx0aXBsZSYmZy5hdHRyKFwibXVsdGlwbGVcIixcInRydWVcIiksZy5jc3MoXCJ3aWR0aFwiLFwiMXB4XCIpLmNzcyhcImhlaWdodFwiLFwiMXB4XCIpLmNzcyhcIm9wYWNpdHlcIiwwKS5jc3MoXCJwb3NpdGlvblwiLFwiYWJzb2x1dGVcIikuY3NzKFwiZmlsdGVyXCIsXCJhbHBoYShvcGFjaXR5PTApXCIpLmNzcyhcInBhZGRpbmdcIiwwKS5jc3MoXCJtYXJnaW5cIiwwKS5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLGcuYXR0cihcIl9fd3JhcHBlcl9mb3JfcGFyZW50X1wiLCEwKSxkLmFwcGVuZChnKSxkWzBdLl9fZmlsZV9jbGlja19mbl9kZWxlZ2F0ZV89ZnVuY3Rpb24oKXtnWzBdLmNsaWNrKCl9LGQuYmluZChcImNsaWNrXCIsZFswXS5fX2ZpbGVfY2xpY2tfZm5fZGVsZWdhdGVfKSxkLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIiksZD1nfWQuYmluZChcImNoYW5nZVwiLGZ1bmN0aW9uKGEpe3ZhciBkLGUsZz1bXTtpZihkPWEuX19maWxlc198fGEudGFyZ2V0LmZpbGVzLG51bGwhPWQpZm9yKGU9MDtlPGQubGVuZ3RoO2UrKylnLnB1c2goZC5pdGVtKGUpKTtiKGZ1bmN0aW9uKCl7ZihjLHskZmlsZXM6ZywkZXZlbnQ6YX0pfSl9KX19XSksYS5kaXJlY3RpdmUoXCJuZ0ZpbGVEcm9wQXZhaWxhYmxlXCIsW1wiJHBhcnNlXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtpZihcImRyYWdnYWJsZVwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpe3ZhciBmPWEoZS5uZ0ZpbGVEcm9wQXZhaWxhYmxlKTtiKGZ1bmN0aW9uKCl7ZihjKX0pfX19XSksYS5kaXJlY3RpdmUoXCJuZ0ZpbGVEcm9wXCIsW1wiJHBhcnNlXCIsXCIkdGltZW91dFwiLFwiJGxvY2F0aW9uXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZil7ZnVuY3Rpb24gZyhhKXtyZXR1cm4vXltcXDAwMC1cXDE3N10qJC8udGVzdChhKX1mdW5jdGlvbiBoKGEsZCl7dmFyIGU9W10sZj1hLmRhdGFUcmFuc2Zlci5pdGVtcztpZihmJiZmLmxlbmd0aD4wJiZmWzBdLndlYmtpdEdldEFzRW50cnkmJlwiZmlsZVwiIT1jLnByb3RvY29sKCkmJmZbMF0ud2Via2l0R2V0QXNFbnRyeSgpLmlzRGlyZWN0b3J5KWZvcih2YXIgaD0wO2g8Zi5sZW5ndGg7aCsrKXt2YXIgaj1mW2hdLndlYmtpdEdldEFzRW50cnkoKTtudWxsIT1qJiYoZyhqLm5hbWUpP2koZSxqKTpmW2hdLndlYmtpdEdldEFzRW50cnkoKS5pc0RpcmVjdG9yeXx8ZS5wdXNoKGZbaF0uZ2V0QXNGaWxlKCkpKX1lbHNle3ZhciBrPWEuZGF0YVRyYW5zZmVyLmZpbGVzO2lmKG51bGwhPWspZm9yKHZhciBoPTA7aDxrLmxlbmd0aDtoKyspZS5wdXNoKGsuaXRlbShoKSl9IWZ1bmN0aW9uIG0oYSl7YihmdW5jdGlvbigpe2w/bSgxMCk6ZChlKX0sYXx8MCl9KCl9ZnVuY3Rpb24gaShhLGIsYyl7aWYobnVsbCE9YilpZihiLmlzRGlyZWN0b3J5KXt2YXIgZD1iLmNyZWF0ZVJlYWRlcigpO2wrKyxkLnJlYWRFbnRyaWVzKGZ1bmN0aW9uKGQpe2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKWkoYSxkW2VdLChjP2M6XCJcIikrYi5uYW1lK1wiL1wiKTtsLS19KX1lbHNlIGwrKyxiLmZpbGUoZnVuY3Rpb24oYil7bC0tLGIuX3JlbGF0aXZlUGF0aD0oYz9jOlwiXCIpK2IubmFtZSxhLnB1c2goYil9KX1pZihcImRyYWdnYWJsZVwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpe3ZhciBqPW51bGw7ZVswXS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIixmdW5jdGlvbihjKXtpZihjLnByZXZlbnREZWZhdWx0KCksYi5jYW5jZWwoaiksIWVbMF0uX19kcmFnX292ZXJfY2xhc3NfKWlmKGYubmdGaWxlRHJhZ092ZXJDbGFzcyYmZi5uZ0ZpbGVEcmFnT3ZlckNsYXNzLnNlYXJjaCgvXFwpICokLyk+LTEpe3ZhciBnPWEoZi5uZ0ZpbGVEcmFnT3ZlckNsYXNzKShkLHskZXZlbnQ6Y30pO2VbMF0uX19kcmFnX292ZXJfY2xhc3NfPWd9ZWxzZSBlWzBdLl9fZHJhZ19vdmVyX2NsYXNzXz1mLm5nRmlsZURyYWdPdmVyQ2xhc3N8fFwiZHJhZ292ZXJcIjtlLmFkZENsYXNzKGVbMF0uX19kcmFnX292ZXJfY2xhc3NfKX0sITEpLGVbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbnRlclwiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKX0sITEpLGVbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLGZ1bmN0aW9uKCl7aj1iKGZ1bmN0aW9uKCl7ZS5yZW1vdmVDbGFzcyhlWzBdLl9fZHJhZ19vdmVyX2NsYXNzXyksZVswXS5fX2RyYWdfb3Zlcl9jbGFzc189bnVsbH0sZi5uZ0ZpbGVEcmFnT3ZlckRlbGF5fHwxKX0sITEpO3ZhciBrPWEoZi5uZ0ZpbGVEcm9wKTtlWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGUucmVtb3ZlQ2xhc3MoZVswXS5fX2RyYWdfb3Zlcl9jbGFzc18pLGVbMF0uX19kcmFnX292ZXJfY2xhc3NfPW51bGwsaChhLGZ1bmN0aW9uKGIpe2soZCx7JGZpbGVzOmIsJGV2ZW50OmF9KX0pfSwhMSk7dmFyIGw9MH19fV0pfSgpOyIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcblxuOyByZXF1aXJlKFwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2FuZ3VsYXItaW5kZXguanNcIik7XG5fID0gZ2xvYmFsLl8gPSByZXF1aXJlKFwiL2hvbWUvdmljdG9yL3dvcmtzcGFjZS9rb250YXBwL2FwcC9zY3JpcHRzL2Jvd2VyX2NvbXBvbmVudHMvbG9kYXNoL2Rpc3QvbG9kYXNoLm1pbi5qc1wiKTtcbjtfX2Jyb3dzZXJpZnlfc2hpbV9yZXF1aXJlX189cmVxdWlyZTsoZnVuY3Rpb24gYnJvd3NlcmlmeVNoaW0obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlLCBkZWZpbmUsIGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKSB7XG4vKipcbiAqIFJlc3RmdWwgUmVzb3VyY2VzIHNlcnZpY2UgZm9yIEFuZ3VsYXJKUyBhcHBzXG4gKiBAdmVyc2lvbiB2MS40LjAgLSAyMDE0LTA0LTI1ICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL21nb250by9yZXN0YW5ndWxhclxuICogQGF1dGhvciBNYXJ0aW4gR29udG92bmlrYXMgPG1hcnRpbkBnb24udG8+XG4gKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqLyFmdW5jdGlvbigpe3ZhciBhPWFuZ3VsYXIubW9kdWxlKFwicmVzdGFuZ3VsYXJcIixbXSk7YS5wcm92aWRlcihcIlJlc3Rhbmd1bGFyXCIsZnVuY3Rpb24oKXt2YXIgYT17fTthLmluaXQ9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYixjLGQpe3ZhciBlPXt9O3JldHVybiBfLmVhY2goXy5rZXlzKGQpLGZ1bmN0aW9uKGYpe3ZhciBnPWRbZl07Zy5wYXJhbXM9Xy5leHRlbmQoe30sZy5wYXJhbXMsYS5kZWZhdWx0UmVxdWVzdFBhcmFtc1tnLm1ldGhvZC50b0xvd2VyQ2FzZSgpXSksXy5pc0VtcHR5KGcucGFyYW1zKSYmZGVsZXRlIGcucGFyYW1zLGVbZl09YS5pc1NhZmUoZy5tZXRob2QpP2Z1bmN0aW9uKCl7cmV0dXJuIGIoXy5leHRlbmQoZyx7dXJsOmN9KSl9OmZ1bmN0aW9uKGEpe3JldHVybiBiKF8uZXh0ZW5kKGcse3VybDpjLGRhdGE6YX0pKX19KSxlfWEuY29uZmlndXJhdGlvbj1iO3ZhciBkPVtcImdldFwiLFwiaGVhZFwiLFwib3B0aW9uc1wiLFwidHJhY2VcIixcImdldGxpc3RcIl07Yi5pc1NhZmU9ZnVuY3Rpb24oYSl7cmV0dXJuIF8uY29udGFpbnMoZCxhLnRvTG93ZXJDYXNlKCkpfTt2YXIgZT0vXmh0dHBzPzpcXC9cXC8vaTtiLmlzQWJzb2x1dGVVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIF8uaXNVbmRlZmluZWQoYi5hYnNvbHV0ZVVybCl8fF8uaXNOdWxsKGIuYWJzb2x1dGVVcmwpP2EmJmUudGVzdChhKTpiLmFic29sdXRlVXJsfSxiLmFic29sdXRlVXJsPV8uaXNVbmRlZmluZWQoYi5hYnNvbHV0ZVVybCk/ITA6Yi5hYnNvbHV0ZVVybCxhLnNldFNlbGZMaW5rQWJzb2x1dGVVcmw9ZnVuY3Rpb24oYSl7Yi5hYnNvbHV0ZVVybD1hfSxiLmJhc2VVcmw9Xy5pc1VuZGVmaW5lZChiLmJhc2VVcmwpP1wiXCI6Yi5iYXNlVXJsLGEuc2V0QmFzZVVybD1mdW5jdGlvbihhKXtyZXR1cm4gYi5iYXNlVXJsPS9cXC8kLy50ZXN0KGEpP2Euc3Vic3RyaW5nKDAsYS5sZW5ndGgtMSk6YSx0aGlzfSxiLmV4dHJhRmllbGRzPWIuZXh0cmFGaWVsZHN8fFtdLGEuc2V0RXh0cmFGaWVsZHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGIuZXh0cmFGaWVsZHM9YSx0aGlzfSxiLmRlZmF1bHRIdHRwRmllbGRzPWIuZGVmYXVsdEh0dHBGaWVsZHN8fHt9LGEuc2V0RGVmYXVsdEh0dHBGaWVsZHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGIuZGVmYXVsdEh0dHBGaWVsZHM9YSx0aGlzfSxiLndpdGhIdHRwVmFsdWVzPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIF8uZGVmYXVsdHMoYyxhLGIuZGVmYXVsdEh0dHBGaWVsZHMpfSxiLmVuY29kZUlkcz1fLmlzVW5kZWZpbmVkKGIuZW5jb2RlSWRzKT8hMDpiLmVuY29kZUlkcyxhLnNldEVuY29kZUlkcz1mdW5jdGlvbihhKXtiLmVuY29kZUlkcz1hfSxiLmRlZmF1bHRSZXF1ZXN0UGFyYW1zPWIuZGVmYXVsdFJlcXVlc3RQYXJhbXN8fHtnZXQ6e30scG9zdDp7fSxwdXQ6e30scmVtb3ZlOnt9LGNvbW1vbjp7fX0sYS5zZXREZWZhdWx0UmVxdWVzdFBhcmFtcz1mdW5jdGlvbihhLGMpe3ZhciBkPVtdLGU9Y3x8YTtyZXR1cm4gXy5pc1VuZGVmaW5lZChjKT9kLnB1c2goXCJjb21tb25cIik6Xy5pc0FycmF5KGEpP2Q9YTpkLnB1c2goYSksXy5lYWNoKGQsZnVuY3Rpb24oYSl7Yi5kZWZhdWx0UmVxdWVzdFBhcmFtc1thXT1lfSksdGhpc30sYS5yZXF1ZXN0UGFyYW1zPWIuZGVmYXVsdFJlcXVlc3RQYXJhbXMsYi5kZWZhdWx0SGVhZGVycz1iLmRlZmF1bHRIZWFkZXJzfHx7fSxhLnNldERlZmF1bHRIZWFkZXJzPWZ1bmN0aW9uKGMpe3JldHVybiBiLmRlZmF1bHRIZWFkZXJzPWMsYS5kZWZhdWx0SGVhZGVycz1iLmRlZmF1bHRIZWFkZXJzLHRoaXN9LGEuZGVmYXVsdEhlYWRlcnM9Yi5kZWZhdWx0SGVhZGVycyxiLm1ldGhvZE92ZXJyaWRlcnM9Yi5tZXRob2RPdmVycmlkZXJzfHxbXSxhLnNldE1ldGhvZE92ZXJyaWRlcnM9ZnVuY3Rpb24oYSl7dmFyIGM9Xy5leHRlbmQoW10sYSk7cmV0dXJuIGIuaXNPdmVycmlkZW5NZXRob2QoXCJkZWxldGVcIixjKSYmYy5wdXNoKFwicmVtb3ZlXCIpLGIubWV0aG9kT3ZlcnJpZGVycz1jLHRoaXN9LGIuanNvbnA9Xy5pc1VuZGVmaW5lZChiLmpzb25wKT8hMTpiLmpzb25wLGEuc2V0SnNvbnA9ZnVuY3Rpb24oYSl7Yi5qc29ucD1hfSxiLmlzT3ZlcnJpZGVuTWV0aG9kPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Y3x8Yi5tZXRob2RPdmVycmlkZXJzO3JldHVybiFfLmlzVW5kZWZpbmVkKF8uZmluZChkLGZ1bmN0aW9uKGIpe3JldHVybiBiLnRvTG93ZXJDYXNlKCk9PT1hLnRvTG93ZXJDYXNlKCl9KSl9LGIudXJsQ3JlYXRvcj1iLnVybENyZWF0b3J8fFwicGF0aFwiLGEuc2V0VXJsQ3JlYXRvcj1mdW5jdGlvbihhKXtpZighXy5oYXMoYi51cmxDcmVhdG9yRmFjdG9yeSxhKSl0aHJvdyBuZXcgRXJyb3IoXCJVUkwgUGF0aCBzZWxlY3RlZCBpc24ndCB2YWxpZFwiKTtyZXR1cm4gYi51cmxDcmVhdG9yPWEsdGhpc30sYi5yZXN0YW5ndWxhckZpZWxkcz1iLnJlc3Rhbmd1bGFyRmllbGRzfHx7aWQ6XCJpZFwiLHJvdXRlOlwicm91dGVcIixwYXJlbnRSZXNvdXJjZTpcInBhcmVudFJlc291cmNlXCIscmVzdGFuZ3VsYXJDb2xsZWN0aW9uOlwicmVzdGFuZ3VsYXJDb2xsZWN0aW9uXCIsY2Fubm9uaWNhbElkOlwiX19jYW5ub25pY2FsSWRcIixldGFnOlwicmVzdGFuZ3VsYXJFdGFnXCIsc2VsZkxpbms6XCJocmVmXCIsZ2V0OlwiZ2V0XCIsZ2V0TGlzdDpcImdldExpc3RcIixwdXQ6XCJwdXRcIixwb3N0OlwicG9zdFwiLHJlbW92ZTpcInJlbW92ZVwiLGhlYWQ6XCJoZWFkXCIsdHJhY2U6XCJ0cmFjZVwiLG9wdGlvbnM6XCJvcHRpb25zXCIscGF0Y2g6XCJwYXRjaFwiLGdldFJlc3Rhbmd1bGFyVXJsOlwiZ2V0UmVzdGFuZ3VsYXJVcmxcIixnZXRSZXF1ZXN0ZWRVcmw6XCJnZXRSZXF1ZXN0ZWRVcmxcIixwdXRFbGVtZW50OlwicHV0RWxlbWVudFwiLGFkZFJlc3Rhbmd1bGFyTWV0aG9kOlwiYWRkUmVzdGFuZ3VsYXJNZXRob2RcIixnZXRQYXJlbnRMaXN0OlwiZ2V0UGFyZW50TGlzdFwiLGNsb25lOlwiY2xvbmVcIixpZHM6XCJpZHNcIixodHRwQ29uZmlnOlwiXyRodHRwQ29uZmlnXCIscmVxUGFyYW1zOlwicmVxUGFyYW1zXCIsb25lOlwib25lXCIsYWxsOlwiYWxsXCIsc2V2ZXJhbDpcInNldmVyYWxcIixvbmVVcmw6XCJvbmVVcmxcIixhbGxVcmw6XCJhbGxVcmxcIixjdXN0b21QVVQ6XCJjdXN0b21QVVRcIixjdXN0b21QT1NUOlwiY3VzdG9tUE9TVFwiLGN1c3RvbURFTEVURTpcImN1c3RvbURFTEVURVwiLGN1c3RvbUdFVDpcImN1c3RvbUdFVFwiLGN1c3RvbUdFVExJU1Q6XCJjdXN0b21HRVRMSVNUXCIsY3VzdG9tT3BlcmF0aW9uOlwiY3VzdG9tT3BlcmF0aW9uXCIsZG9QVVQ6XCJkb1BVVFwiLGRvUE9TVDpcImRvUE9TVFwiLGRvREVMRVRFOlwiZG9ERUxFVEVcIixkb0dFVDpcImRvR0VUXCIsZG9HRVRMSVNUOlwiZG9HRVRMSVNUXCIsZnJvbVNlcnZlcjpcImZyb21TZXJ2ZXJcIix3aXRoQ29uZmlnOlwid2l0aENvbmZpZ1wiLHdpdGhIdHRwQ29uZmlnOlwid2l0aEh0dHBDb25maWdcIixzaW5nbGVPbmU6XCJzaW5nbGVPbmVcIixwbGFpbjpcInBsYWluXCIsc2F2ZTpcInNhdmVcIn0sYS5zZXRSZXN0YW5ndWxhckZpZWxkcz1mdW5jdGlvbihhKXtyZXR1cm4gYi5yZXN0YW5ndWxhckZpZWxkcz1fLmV4dGVuZChiLnJlc3Rhbmd1bGFyRmllbGRzLGEpLHRoaXN9LGIuaXNSZXN0YW5ndWxhcml6ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuISFhW2IucmVzdGFuZ3VsYXJGaWVsZHMub25lXXx8ISFhW2IucmVzdGFuZ3VsYXJGaWVsZHMuYWxsXX0sYi5zZXRGaWVsZFRvRWxlbT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5zcGxpdChcIi5cIiksZT1iO3JldHVybiBfLmVhY2goXy5pbml0aWFsKGQpLGZ1bmN0aW9uKGEpe2VbYV09e30sZT1lW2FdfSksZVtfLmxhc3QoZCldPWMsdGhpc30sYi5nZXRGaWVsZEZyb21FbGVtPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGxpdChcIi5cIiksZD1iO3JldHVybiBfLmVhY2goYyxmdW5jdGlvbihhKXtkJiYoZD1kW2FdKX0pLGFuZ3VsYXIuY29weShkKX0sYi5zZXRJZFRvRWxlbT1mdW5jdGlvbihhLGMpe3JldHVybiBiLnNldEZpZWxkVG9FbGVtKGIucmVzdGFuZ3VsYXJGaWVsZHMuaWQsYSxjKSx0aGlzfSxiLmdldElkRnJvbUVsZW09ZnVuY3Rpb24oYSl7cmV0dXJuIGIuZ2V0RmllbGRGcm9tRWxlbShiLnJlc3Rhbmd1bGFyRmllbGRzLmlkLGEpfSxiLmlzVmFsaWRJZD1mdW5jdGlvbihhKXtyZXR1cm5cIlwiIT09YSYmIV8uaXNVbmRlZmluZWQoYSkmJiFfLmlzTnVsbChhKX0sYi5zZXRVcmxUb0VsZW09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYi5zZXRGaWVsZFRvRWxlbShiLnJlc3Rhbmd1bGFyRmllbGRzLnNlbGZMaW5rLGEsYyksdGhpc30sYi5nZXRVcmxGcm9tRWxlbT1mdW5jdGlvbihhKXtyZXR1cm4gYi5nZXRGaWVsZEZyb21FbGVtKGIucmVzdGFuZ3VsYXJGaWVsZHMuc2VsZkxpbmssYSl9LGIudXNlQ2Fubm9uaWNhbElkPV8uaXNVbmRlZmluZWQoYi51c2VDYW5ub25pY2FsSWQpPyExOmIudXNlQ2Fubm9uaWNhbElkLGEuc2V0VXNlQ2Fubm9uaWNhbElkPWZ1bmN0aW9uKGEpe3JldHVybiBiLnVzZUNhbm5vbmljYWxJZD1hLHRoaXN9LGIuZ2V0Q2Fubm9uaWNhbElkRnJvbUVsZW09ZnVuY3Rpb24oYSl7dmFyIGM9YVtiLnJlc3Rhbmd1bGFyRmllbGRzLmNhbm5vbmljYWxJZF0sZD1iLmlzVmFsaWRJZChjKT9jOmIuZ2V0SWRGcm9tRWxlbShhKTtyZXR1cm4gZH0sYi5yZXNwb25zZUludGVyY2VwdG9ycz1iLnJlc3BvbnNlSW50ZXJjZXB0b3JzfHxbXSxiLmRlZmF1bHRSZXNwb25zZUludGVyY2VwdG9yPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxiLnJlc3BvbnNlRXh0cmFjdG9yPWZ1bmN0aW9uKGEsYyxkLGUsZixnKXt2YXIgaD1hbmd1bGFyLmNvcHkoYi5yZXNwb25zZUludGVyY2VwdG9ycyk7aC5wdXNoKGIuZGVmYXVsdFJlc3BvbnNlSW50ZXJjZXB0b3IpO3ZhciBpPWE7cmV0dXJuIF8uZWFjaChoLGZ1bmN0aW9uKGEpe2k9YShpLGMsZCxlLGYsZyl9KSxpfSxhLmFkZFJlc3BvbnNlSW50ZXJjZXB0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIGIucmVzcG9uc2VJbnRlcmNlcHRvcnMucHVzaChhKSx0aGlzfSxhLnNldFJlc3BvbnNlSW50ZXJjZXB0b3I9YS5hZGRSZXNwb25zZUludGVyY2VwdG9yLGEuc2V0UmVzcG9uc2VFeHRyYWN0b3I9YS5hZGRSZXNwb25zZUludGVyY2VwdG9yLGIucmVxdWVzdEludGVyY2VwdG9ycz1iLnJlcXVlc3RJbnRlcmNlcHRvcnN8fFtdLGIuZGVmYXVsdEludGVyY2VwdG9yPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3JldHVybntlbGVtZW50OmEsaGVhZGVyczplLHBhcmFtczpmLGh0dHBDb25maWc6Z319LGIuZnVsbFJlcXVlc3RJbnRlcmNlcHRvcj1mdW5jdGlvbihhLGMsZCxlLGYsZyxoKXt2YXIgaT1hbmd1bGFyLmNvcHkoYi5yZXF1ZXN0SW50ZXJjZXB0b3JzKSxqPWIuZGVmYXVsdEludGVyY2VwdG9yKGEsYyxkLGUsZixnLGgpO3JldHVybiBfLnJlZHVjZShpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIF8uZXh0ZW5kKGEsYihhLmVsZW1lbnQsYyxkLGUsYS5oZWFkZXJzLGEucGFyYW1zLGEuaHR0cENvbmZpZykpfSxqKX0sYS5hZGRSZXF1ZXN0SW50ZXJjZXB0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIGIucmVxdWVzdEludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKGIsYyxkLGUsZixnLGgpe3JldHVybntoZWFkZXJzOmYscGFyYW1zOmcsZWxlbWVudDphKGIsYyxkLGUpLGh0dHBDb25maWc6aH19KSx0aGlzfSxhLnNldFJlcXVlc3RJbnRlcmNlcHRvcj1hLmFkZFJlcXVlc3RJbnRlcmNlcHRvcixhLmFkZEZ1bGxSZXF1ZXN0SW50ZXJjZXB0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIGIucmVxdWVzdEludGVyY2VwdG9ycy5wdXNoKGEpLHRoaXN9LGEuc2V0RnVsbFJlcXVlc3RJbnRlcmNlcHRvcj1hLmFkZEZ1bGxSZXF1ZXN0SW50ZXJjZXB0b3IsYi5lcnJvckludGVyY2VwdG9yPWIuZXJyb3JJbnRlcmNlcHRvcnx8ZnVuY3Rpb24oKXt9LGEuc2V0RXJyb3JJbnRlcmNlcHRvcj1mdW5jdGlvbihhKXtyZXR1cm4gYi5lcnJvckludGVyY2VwdG9yPWEsdGhpc30sYi5vbkJlZm9yZUVsZW1SZXN0YW5ndWxhcml6ZWQ9Yi5vbkJlZm9yZUVsZW1SZXN0YW5ndWxhcml6ZWR8fGZ1bmN0aW9uKGEpe3JldHVybiBhfSxhLnNldE9uQmVmb3JlRWxlbVJlc3Rhbmd1bGFyaXplZD1mdW5jdGlvbihhKXtyZXR1cm4gYi5vbkJlZm9yZUVsZW1SZXN0YW5ndWxhcml6ZWQ9YSx0aGlzfSxiLm9uRWxlbVJlc3Rhbmd1bGFyaXplZD1iLm9uRWxlbVJlc3Rhbmd1bGFyaXplZHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGEuc2V0T25FbGVtUmVzdGFuZ3VsYXJpemVkPWZ1bmN0aW9uKGEpe3JldHVybiBiLm9uRWxlbVJlc3Rhbmd1bGFyaXplZD1hLHRoaXN9LGIuc2hvdWxkU2F2ZVBhcmVudD1iLnNob3VsZFNhdmVQYXJlbnR8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGEuc2V0UGFyZW50bGVzcz1mdW5jdGlvbihhKXtyZXR1cm4gXy5pc0FycmF5KGEpP2Iuc2hvdWxkU2F2ZVBhcmVudD1mdW5jdGlvbihiKXtyZXR1cm4hXy5jb250YWlucyhhLGIpfTpfLmlzQm9vbGVhbihhKSYmKGIuc2hvdWxkU2F2ZVBhcmVudD1mdW5jdGlvbigpe3JldHVybiFhfSksdGhpc30sYi5zdWZmaXg9Xy5pc1VuZGVmaW5lZChiLnN1ZmZpeCk/bnVsbDpiLnN1ZmZpeCxhLnNldFJlcXVlc3RTdWZmaXg9ZnVuY3Rpb24oYSl7cmV0dXJuIGIuc3VmZml4PWEsdGhpc30sYi50cmFuc2Zvcm1lcnM9Yi50cmFuc2Zvcm1lcnN8fHt9LGEuYWRkRWxlbWVudFRyYW5zZm9ybWVyPWZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1udWxsLGc9bnVsbDsyPT09YXJndW1lbnRzLmxlbmd0aD9nPWQ6KGc9ZSxmPWQpO3ZhciBoPWIudHJhbnNmb3JtZXJzW2NdO3JldHVybiBofHwoaD1iLnRyYW5zZm9ybWVyc1tjXT1bXSksaC5wdXNoKGZ1bmN0aW9uKGEsYil7cmV0dXJuIF8uaXNOdWxsKGYpfHxhPT1mP2coYik6Yn0pLGF9LGEuZXh0ZW5kQ29sbGVjdGlvbj1mdW5jdGlvbihiLGMpe3JldHVybiBhLmFkZEVsZW1lbnRUcmFuc2Zvcm1lcihiLCEwLGMpfSxhLmV4dGVuZE1vZGVsPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuYWRkRWxlbWVudFRyYW5zZm9ybWVyKGIsITEsYyl9LGIudHJhbnNmb3JtRWxlbT1mdW5jdGlvbihhLGMsZCxlLGYpe2lmKCFmJiYhYi50cmFuc2Zvcm1Mb2NhbEVsZW1lbnRzJiYhYVtiLnJlc3Rhbmd1bGFyRmllbGRzLmZyb21TZXJ2ZXJdKXJldHVybiBhO3ZhciBnPWIudHJhbnNmb3JtZXJzW2RdLGg9YTtyZXR1cm4gZyYmXy5lYWNoKGcsZnVuY3Rpb24oYSl7aD1hKGMsaCl9KSxiLm9uRWxlbVJlc3Rhbmd1bGFyaXplZChoLGMsZCxlKX0sYi50cmFuc2Zvcm1Mb2NhbEVsZW1lbnRzPV8uaXNVbmRlZmluZWQoYi50cmFuc2Zvcm1Mb2NhbEVsZW1lbnRzKT8hMTpiLnRyYW5zZm9ybUxvY2FsRWxlbWVudHMsYS5zZXRUcmFuc2Zvcm1Pbmx5U2VydmVyRWxlbWVudHM9ZnVuY3Rpb24oYSl7Yi50cmFuc2Zvcm1Mb2NhbEVsZW1lbnRzPSFhfSxiLmZ1bGxSZXNwb25zZT1fLmlzVW5kZWZpbmVkKGIuZnVsbFJlc3BvbnNlKT8hMTpiLmZ1bGxSZXNwb25zZSxhLnNldEZ1bGxSZXNwb25zZT1mdW5jdGlvbihhKXtyZXR1cm4gYi5mdWxsUmVzcG9uc2U9YSx0aGlzfSxiLnVybENyZWF0b3JGYWN0b3J5PXt9O3ZhciBmPWZ1bmN0aW9uKCl7fTtmLnByb3RvdHlwZS5zZXRDb25maWc9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29uZmlnPWEsdGhpc30sZi5wcm90b3R5cGUucGFyZW50c0FycmF5PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXTthOyliLnB1c2goYSksYT1hW3RoaXMuY29uZmlnLnJlc3Rhbmd1bGFyRmllbGRzLnBhcmVudFJlc291cmNlXTtyZXR1cm4gYi5yZXZlcnNlKCl9LGYucHJvdG90eXBlLnJlc291cmNlPWZ1bmN0aW9uKGEsZCxlLGYsZyxoLGksail7dmFyIGs9Xy5kZWZhdWx0cyhnfHx7fSx0aGlzLmNvbmZpZy5kZWZhdWx0UmVxdWVzdFBhcmFtcy5jb21tb24pLGw9Xy5kZWZhdWx0cyhmfHx7fSx0aGlzLmNvbmZpZy5kZWZhdWx0SGVhZGVycyk7aSYmKGIuaXNTYWZlKGopP2xbXCJJZi1Ob25lLU1hdGNoXCJdPWk6bFtcIklmLU1hdGNoXCJdPWkpO3ZhciBtPXRoaXMuYmFzZShhKTtpZihoKXt2YXIgbj1cIlwiOy9cXC8kLy50ZXN0KG0pfHwobis9XCIvXCIpLG4rPWgsbSs9bn1yZXR1cm4gdGhpcy5jb25maWcuc3VmZml4JiYtMT09PW0uaW5kZXhPZih0aGlzLmNvbmZpZy5zdWZmaXgsbS5sZW5ndGgtdGhpcy5jb25maWcuc3VmZml4Lmxlbmd0aCkmJiF0aGlzLmNvbmZpZy5nZXRVcmxGcm9tRWxlbShhKSYmKG0rPXRoaXMuY29uZmlnLnN1ZmZpeCksYVt0aGlzLmNvbmZpZy5yZXN0YW5ndWxhckZpZWxkcy5odHRwQ29uZmlnXT12b2lkIDAsYyh0aGlzLmNvbmZpZyxkLG0se2dldExpc3Q6dGhpcy5jb25maWcud2l0aEh0dHBWYWx1ZXMoZSx7bWV0aG9kOlwiR0VUXCIscGFyYW1zOmssaGVhZGVyczpsfSksZ2V0OnRoaXMuY29uZmlnLndpdGhIdHRwVmFsdWVzKGUse21ldGhvZDpcIkdFVFwiLHBhcmFtczprLGhlYWRlcnM6bH0pLGpzb25wOnRoaXMuY29uZmlnLndpdGhIdHRwVmFsdWVzKGUse21ldGhvZDpcImpzb25wXCIscGFyYW1zOmssaGVhZGVyczpsfSkscHV0OnRoaXMuY29uZmlnLndpdGhIdHRwVmFsdWVzKGUse21ldGhvZDpcIlBVVFwiLHBhcmFtczprLGhlYWRlcnM6bH0pLHBvc3Q6dGhpcy5jb25maWcud2l0aEh0dHBWYWx1ZXMoZSx7bWV0aG9kOlwiUE9TVFwiLHBhcmFtczprLGhlYWRlcnM6bH0pLHJlbW92ZTp0aGlzLmNvbmZpZy53aXRoSHR0cFZhbHVlcyhlLHttZXRob2Q6XCJERUxFVEVcIixwYXJhbXM6ayxoZWFkZXJzOmx9KSxoZWFkOnRoaXMuY29uZmlnLndpdGhIdHRwVmFsdWVzKGUse21ldGhvZDpcIkhFQURcIixwYXJhbXM6ayxoZWFkZXJzOmx9KSx0cmFjZTp0aGlzLmNvbmZpZy53aXRoSHR0cFZhbHVlcyhlLHttZXRob2Q6XCJUUkFDRVwiLHBhcmFtczprLGhlYWRlcnM6bH0pLG9wdGlvbnM6dGhpcy5jb25maWcud2l0aEh0dHBWYWx1ZXMoZSx7bWV0aG9kOlwiT1BUSU9OU1wiLHBhcmFtczprLGhlYWRlcnM6bH0pLHBhdGNoOnRoaXMuY29uZmlnLndpdGhIdHRwVmFsdWVzKGUse21ldGhvZDpcIlBBVENIXCIscGFyYW1zOmssaGVhZGVyczpsfSl9KX07dmFyIGc9ZnVuY3Rpb24oKXt9O2cucHJvdG90eXBlPW5ldyBmLGcucHJvdG90eXBlLmJhc2U9ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcztyZXR1cm4gXy5yZWR1Y2UodGhpcy5wYXJlbnRzQXJyYXkoYSksZnVuY3Rpb24oYSxkKXt2YXIgZSxmPWMuY29uZmlnLmdldFVybEZyb21FbGVtKGQpO2lmKGYpe2lmKGMuY29uZmlnLmlzQWJzb2x1dGVVcmwoZikpcmV0dXJuIGY7ZT1mfWVsc2UgaWYoZT1kW2MuY29uZmlnLnJlc3Rhbmd1bGFyRmllbGRzLnJvdXRlXSxkW2MuY29uZmlnLnJlc3Rhbmd1bGFyRmllbGRzLnJlc3Rhbmd1bGFyQ29sbGVjdGlvbl0pe3ZhciBnPWRbYy5jb25maWcucmVzdGFuZ3VsYXJGaWVsZHMuaWRzXTtnJiYoZSs9XCIvXCIrZy5qb2luKFwiLFwiKSl9ZWxzZXt2YXIgaDtoPWMuY29uZmlnLnVzZUNhbm5vbmljYWxJZD9jLmNvbmZpZy5nZXRDYW5ub25pY2FsSWRGcm9tRWxlbShkKTpjLmNvbmZpZy5nZXRJZEZyb21FbGVtKGQpLGIuaXNWYWxpZElkKGgpJiYhZC5zaW5nbGVPbmUmJihlKz1cIi9cIisoYy5jb25maWcuZW5jb2RlSWRzP2VuY29kZVVSSUNvbXBvbmVudChoKTpoKSl9cmV0dXJuIGEucmVwbGFjZSgvXFwvJC8sXCJcIikrXCIvXCIrZX0sdGhpcy5jb25maWcuYmFzZVVybCl9LGcucHJvdG90eXBlLmZldGNoVXJsPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5iYXNlKGEpO3JldHVybiBiJiYoYys9XCIvXCIrYiksY30sZy5wcm90b3R5cGUuZmV0Y2hSZXF1ZXN0ZWRVcmw9ZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJmIucHVzaChjKTtyZXR1cm4gYi5zb3J0KCl9ZnVuY3Rpb24gZShhLGIsYyl7Zm9yKHZhciBlPWQoYSksZj0wO2Y8ZS5sZW5ndGg7ZisrKWIuY2FsbChjLGFbZVtmXV0sZVtmXSk7cmV0dXJuIGV9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYSkucmVwbGFjZSgvJTQwL2dpLFwiQFwiKS5yZXBsYWNlKC8lM0EvZ2ksXCI6XCIpLnJlcGxhY2UoLyUyNC9nLFwiJFwiKS5yZXBsYWNlKC8lMkMvZ2ksXCIsXCIpLnJlcGxhY2UoLyUyMC9nLGI/XCIlMjBcIjpcIitcIil9dmFyIGc9dGhpcy5mZXRjaFVybChhLGMpLGg9YVtiLnJlc3Rhbmd1bGFyRmllbGRzLnJlcVBhcmFtc107aWYoIWgpcmV0dXJuIGc7dmFyIGk9W107cmV0dXJuIGUoaCxmdW5jdGlvbihhLGIpe251bGwhPWEmJnZvaWQgMCE9YSYmKGFuZ3VsYXIuaXNBcnJheShhKXx8KGE9W2FdKSxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXthbmd1bGFyLmlzT2JqZWN0KGEpJiYoYT1hbmd1bGFyLnRvSnNvbihhKSksaS5wdXNoKGYoYikrXCI9XCIrZihhKSl9KSl9KSxnKyh0aGlzLmNvbmZpZy5zdWZmaXh8fFwiXCIpKygtMT09PWcuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIpK2kuam9pbihcIiZcIil9LGIudXJsQ3JlYXRvckZhY3RvcnkucGF0aD1nfTt2YXIgYj17fTthLmluaXQodGhpcyxiKSx0aGlzLiRnZXQ9W1wiJGh0dHBcIixcIiRxXCIsZnVuY3Rpb24oYyxkKXtmdW5jdGlvbiBlKGIpe2Z1bmN0aW9uIGYoYSxjLGQsZSxmKXtpZihjW2IucmVzdGFuZ3VsYXJGaWVsZHMucm91dGVdPWQsY1tiLnJlc3Rhbmd1bGFyRmllbGRzLmdldFJlc3Rhbmd1bGFyVXJsXT1fLmJpbmQoUC5mZXRjaFVybCxQLGMpLGNbYi5yZXN0YW5ndWxhckZpZWxkcy5nZXRSZXF1ZXN0ZWRVcmxdPV8uYmluZChQLmZldGNoUmVxdWVzdGVkVXJsLFAsYyksY1tiLnJlc3Rhbmd1bGFyRmllbGRzLmFkZFJlc3Rhbmd1bGFyTWV0aG9kXT1fLmJpbmQoTCxjKSxjW2IucmVzdGFuZ3VsYXJGaWVsZHMuY2xvbmVdPV8uYmluZChyLGMsYyksY1tiLnJlc3Rhbmd1bGFyRmllbGRzLnJlcVBhcmFtc109Xy5pc0VtcHR5KGUpP251bGw6ZSxjW2IucmVzdGFuZ3VsYXJGaWVsZHMud2l0aEh0dHBDb25maWddPV8uYmluZCh6LGMpLGNbYi5yZXN0YW5ndWxhckZpZWxkcy5wbGFpbl09Xy5iaW5kKHAsYyxjKSxjW2IucmVzdGFuZ3VsYXJGaWVsZHMub25lXT1fLmJpbmQoZyxjLGMpLGNbYi5yZXN0YW5ndWxhckZpZWxkcy5hbGxdPV8uYmluZChoLGMsYyksY1tiLnJlc3Rhbmd1bGFyRmllbGRzLnNldmVyYWxdPV8uYmluZChpLGMsYyksY1tiLnJlc3Rhbmd1bGFyRmllbGRzLm9uZVVybF09Xy5iaW5kKGosYyxjKSxjW2IucmVzdGFuZ3VsYXJGaWVsZHMuYWxsVXJsXT1fLmJpbmQoayxjLGMpLGNbYi5yZXN0YW5ndWxhckZpZWxkcy5mcm9tU2VydmVyXT0hIWYsYSYmYi5zaG91bGRTYXZlUGFyZW50KGQpKXt2YXIgbD1iLmdldElkRnJvbUVsZW0oYSksbT1iLmdldFVybEZyb21FbGVtKGEpLG49Xy51bmlvbihfLnZhbHVlcyhfLnBpY2soYi5yZXN0YW5ndWxhckZpZWxkcyxbXCJyb3V0ZVwiLFwic2luZ2xlT25lXCIsXCJwYXJlbnRSZXNvdXJjZVwiXSkpLGIuZXh0cmFGaWVsZHMpLG89Xy5waWNrKGEsbik7Yi5pc1ZhbGlkSWQobCkmJmIuc2V0SWRUb0VsZW0obyxsKSxiLmlzVmFsaWRJZChtKSYmYi5zZXRVcmxUb0VsZW0obyxtKSxjW2IucmVzdGFuZ3VsYXJGaWVsZHMucGFyZW50UmVzb3VyY2VdPW99ZWxzZSBjW2IucmVzdGFuZ3VsYXJGaWVsZHMucGFyZW50UmVzb3VyY2VdPW51bGw7cmV0dXJuIGN9ZnVuY3Rpb24gZyhhLGMsZCxlKXtpZihfLmlzTnVtYmVyKGMpfHxfLmlzTnVtYmVyKGEpKXt2YXIgZj1cIllvdSdyZSBjcmVhdGluZyBhIFJlc3Rhbmd1bGFyIGVudGl0eSB3aXRoIHRoZSBudW1iZXIgXCI7dGhyb3cgZis9XCJpbnN0ZWFkIG9mIHRoZSByb3V0ZSBvciB0aGUgcGFyZW50LiBZb3UgY2FuJ3QgY2FsbCAub25lKDEyKVwiLG5ldyBFcnJvcihmKX12YXIgZz17fTtyZXR1cm4gYi5zZXRJZFRvRWxlbShnLGQpLGIuc2V0RmllbGRUb0VsZW0oYi5yZXN0YW5ndWxhckZpZWxkcy5zaW5nbGVPbmUsZyxlKSxzKGEsZyxjLCExKX1mdW5jdGlvbiBoKGEsYil7cmV0dXJuIHQoYSxbXSxiLCExKX1mdW5jdGlvbiBpKGEsYyl7dmFyIGQ9W107cmV0dXJuIGRbYi5yZXN0YW5ndWxhckZpZWxkcy5pZHNdPUFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsMiksdChhLGQsYywhMSl9ZnVuY3Rpb24gaihhLGMsZCl7aWYoIWMpdGhyb3cgbmV3IEVycm9yKFwiUm91dGUgaXMgbWFuZGF0b3J5IHdoZW4gY3JlYXRpbmcgbmV3IFJlc3Rhbmd1bGFyIG9iamVjdHMuXCIpO3ZhciBlPXt9O3JldHVybiBiLnNldFVybFRvRWxlbShlLGQsYykscyhhLGUsYywhMSl9ZnVuY3Rpb24gayhhLGMsZCl7aWYoIWMpdGhyb3cgbmV3IEVycm9yKFwiUm91dGUgaXMgbWFuZGF0b3J5IHdoZW4gY3JlYXRpbmcgbmV3IFJlc3Rhbmd1bGFyIG9iamVjdHMuXCIpO3ZhciBlPXt9O3JldHVybiBiLnNldFVybFRvRWxlbShlLGQsYyksdChhLGUsYywhMSl9ZnVuY3Rpb24gbChhLGMsZCl7cmV0dXJuIGEuY2FsbD1fLmJpbmQobSxhKSxhLmdldD1fLmJpbmQobixhKSxhW2IucmVzdGFuZ3VsYXJGaWVsZHMucmVzdGFuZ3VsYXJDb2xsZWN0aW9uXT1jLGMmJihhLnB1c2g9Xy5iaW5kKG0sYSxcInB1c2hcIikpLGEuJG9iamVjdD1kLGF9ZnVuY3Rpb24gbShhKXt2YXIgYz1kLmRlZmVyKCksZT1hcmd1bWVudHMsZj17fTtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGIpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUsMSksZz1iW2FdO2cuYXBwbHkoYixkKSxmPWIsYy5yZXNvbHZlKGIpfSksbChjLnByb21pc2UsdGhpc1tiLnJlc3Rhbmd1bGFyRmllbGRzLnJlc3Rhbmd1bGFyQ29sbGVjdGlvbl0sZil9ZnVuY3Rpb24gbihhKXt2YXIgYz1kLmRlZmVyKCksZT17fTtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGIpe2U9YlthXSxjLnJlc29sdmUoZSl9KSxsKGMucHJvbWlzZSx0aGlzW2IucmVzdGFuZ3VsYXJGaWVsZHMucmVzdGFuZ3VsYXJDb2xsZWN0aW9uXSxlKX1mdW5jdGlvbiBvKGEsYyxkLGUpe3JldHVybiBfLmV4dGVuZChlLGQpLGIuZnVsbFJlc3BvbnNlP2EucmVzb2x2ZShfLmV4dGVuZChjLHtkYXRhOmR9KSk6KGEucmVzb2x2ZShkKSx2b2lkIDApfWZ1bmN0aW9uIHAoYSl7aWYoXy5pc0FycmF5KGEpKXt2YXIgYz1bXTtyZXR1cm4gXy5lYWNoKGEsZnVuY3Rpb24oYSl7Yy5wdXNoKHAoYSkpfSksY31yZXR1cm4gXy5vbWl0KGEsXy52YWx1ZXMoXy5vbWl0KGIucmVzdGFuZ3VsYXJGaWVsZHMsXCJpZFwiKSkpfWZ1bmN0aW9uIHEoYSl7YVtiLnJlc3Rhbmd1bGFyRmllbGRzLmN1c3RvbU9wZXJhdGlvbl09Xy5iaW5kKEssYSksXy5lYWNoKFtcInB1dFwiLFwicG9zdFwiLFwiZ2V0XCIsXCJkZWxldGVcIl0sZnVuY3Rpb24oYil7Xy5lYWNoKFtcImRvXCIsXCJjdXN0b21cIl0sZnVuY3Rpb24oYyl7dmFyIGQsZT1cImRlbGV0ZVwiPT09Yj9cInJlbW92ZVwiOmIsZj1jK2IudG9VcHBlckNhc2UoKTtkPVwicHV0XCIhPT1lJiZcInBvc3RcIiE9PWU/SzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBfLmJpbmQoSyx0aGlzKShhLGMsZCxlLGIpfSxhW2ZdPV8uYmluZChkLGEsZSl9KX0pLGFbYi5yZXN0YW5ndWxhckZpZWxkcy5jdXN0b21HRVRMSVNUXT1fLmJpbmQoeSxhKSxhW2IucmVzdGFuZ3VsYXJGaWVsZHMuZG9HRVRMSVNUXT1hW2IucmVzdGFuZ3VsYXJGaWVsZHMuY3VzdG9tR0VUTElTVF19ZnVuY3Rpb24gcihhLGMpe3ZhciBkPWFuZ3VsYXIuY29weShhLGMpO3JldHVybiBzKGRbYi5yZXN0YW5ndWxhckZpZWxkcy5wYXJlbnRSZXNvdXJjZV0sZCxkW2IucmVzdGFuZ3VsYXJGaWVsZHMucm91dGVdLCEwKX1mdW5jdGlvbiBzKGEsYyxkLGUsZyxoKXt2YXIgaT1iLm9uQmVmb3JlRWxlbVJlc3Rhbmd1bGFyaXplZChjLCExLGQpLGo9ZihhLGksZCxoLGUpO3JldHVybiBiLnVzZUNhbm5vbmljYWxJZCYmKGpbYi5yZXN0YW5ndWxhckZpZWxkcy5jYW5ub25pY2FsSWRdPWIuZ2V0SWRGcm9tRWxlbShqKSksZyYmKGpbYi5yZXN0YW5ndWxhckZpZWxkcy5nZXRQYXJlbnRMaXN0XT1mdW5jdGlvbigpe3JldHVybiBnfSksaltiLnJlc3Rhbmd1bGFyRmllbGRzLnJlc3Rhbmd1bGFyQ29sbGVjdGlvbl09ITEsaltiLnJlc3Rhbmd1bGFyRmllbGRzLmdldF09Xy5iaW5kKEMsaiksaltiLnJlc3Rhbmd1bGFyRmllbGRzLmdldExpc3RdPV8uYmluZCh5LGopLGpbYi5yZXN0YW5ndWxhckZpZWxkcy5wdXRdPV8uYmluZChFLGopLGpbYi5yZXN0YW5ndWxhckZpZWxkcy5wb3N0XT1fLmJpbmQoRixqKSxqW2IucmVzdGFuZ3VsYXJGaWVsZHMucmVtb3ZlXT1fLmJpbmQoRCxqKSxqW2IucmVzdGFuZ3VsYXJGaWVsZHMuaGVhZF09Xy5iaW5kKEcsaiksaltiLnJlc3Rhbmd1bGFyRmllbGRzLnRyYWNlXT1fLmJpbmQoSCxqKSxqW2IucmVzdGFuZ3VsYXJGaWVsZHMub3B0aW9uc109Xy5iaW5kKEksaiksaltiLnJlc3Rhbmd1bGFyRmllbGRzLnBhdGNoXT1fLmJpbmQoSixqKSxqW2IucmVzdGFuZ3VsYXJGaWVsZHMuc2F2ZV09Xy5iaW5kKEEsaikscShqKSxiLnRyYW5zZm9ybUVsZW0oaiwhMSxkLE8sITApfWZ1bmN0aW9uIHQoYSxjLGQsZSxnKXt2YXIgaD1iLm9uQmVmb3JlRWxlbVJlc3Rhbmd1bGFyaXplZChjLCEwLGQpLGk9ZihhLGgsZCxnLGUpO3JldHVybiBpW2IucmVzdGFuZ3VsYXJGaWVsZHMucmVzdGFuZ3VsYXJDb2xsZWN0aW9uXT0hMCxpW2IucmVzdGFuZ3VsYXJGaWVsZHMucG9zdF09Xy5iaW5kKEYsaSxudWxsKSxpW2IucmVzdGFuZ3VsYXJGaWVsZHMucmVtb3ZlXT1fLmJpbmQoRCxpKSxpW2IucmVzdGFuZ3VsYXJGaWVsZHMuaGVhZF09Xy5iaW5kKEcsaSksaVtiLnJlc3Rhbmd1bGFyRmllbGRzLnRyYWNlXT1fLmJpbmQoSCxpKSxpW2IucmVzdGFuZ3VsYXJGaWVsZHMucHV0RWxlbWVudF09Xy5iaW5kKHcsaSksaVtiLnJlc3Rhbmd1bGFyRmllbGRzLm9wdGlvbnNdPV8uYmluZChJLGkpLGlbYi5yZXN0YW5ndWxhckZpZWxkcy5wYXRjaF09Xy5iaW5kKEosaSksaVtiLnJlc3Rhbmd1bGFyRmllbGRzLmdldF09Xy5iaW5kKHYsaSksaVtiLnJlc3Rhbmd1bGFyRmllbGRzLmdldExpc3RdPV8uYmluZCh5LGksbnVsbCkscShpKSxiLnRyYW5zZm9ybUVsZW0oaSwhMCxkLE8sITApfWZ1bmN0aW9uIHUoYSxiLGMpe3ZhciBkPXQoYSxiLGMsITEpO3JldHVybiBfLmVhY2goZCxmdW5jdGlvbihiKXtzKGEsYixjLCExKX0pLGR9ZnVuY3Rpb24gdihhLGIsYyl7cmV0dXJuIHRoaXMuY3VzdG9tR0VUKGEudG9TdHJpbmcoKSxiLGMpfWZ1bmN0aW9uIHcoYSxjLGUpe3ZhciBmPXRoaXMsZz10aGlzW2FdLGg9ZC5kZWZlcigpLGk9W107cmV0dXJuIGk9Yi50cmFuc2Zvcm1FbGVtKGksITAsZ1tiLnJlc3Rhbmd1bGFyRmllbGRzLnJvdXRlXSxPKSxnLnB1dChjLGUpLnRoZW4oZnVuY3Rpb24oYil7dmFyIGM9cihmKTtjW2FdPWIsaT1jLGgucmVzb2x2ZShjKX0sZnVuY3Rpb24oYSl7aC5yZWplY3QoYSl9KSxsKGgucHJvbWlzZSwhMCxpKX1mdW5jdGlvbiB4KGEsYyxkLGUsZixnKXt2YXIgaD1iLnJlc3BvbnNlRXh0cmFjdG9yKGEsYyxkLGUsZixnKSxpPWYuaGVhZGVycyhcIkVUYWdcIik7cmV0dXJuIGgmJmkmJihoW2IucmVzdGFuZ3VsYXJGaWVsZHMuZXRhZ109aSksaH1mdW5jdGlvbiB5KGEsZSxmKXt2YXIgZz10aGlzLGg9ZC5kZWZlcigpLGk9XCJnZXRMaXN0XCIsaj1QLmZldGNoVXJsKHRoaXMsYSksaz1hfHxnW2IucmVzdGFuZ3VsYXJGaWVsZHMucm91dGVdLG09Yi5mdWxsUmVxdWVzdEludGVyY2VwdG9yKG51bGwsaSxrLGosZnx8e30sZXx8e30sdGhpc1tiLnJlc3Rhbmd1bGFyRmllbGRzLmh0dHBDb25maWddfHx7fSksbj1bXTtuPWIudHJhbnNmb3JtRWxlbShuLCEwLGssTyk7dmFyIHA9XCJnZXRMaXN0XCI7cmV0dXJuIGIuanNvbnAmJihwPVwianNvbnBcIiksUC5yZXNvdXJjZSh0aGlzLGMsbS5odHRwQ29uZmlnLG0uaGVhZGVycyxtLnBhcmFtcyxhLHRoaXNbYi5yZXN0YW5ndWxhckZpZWxkcy5ldGFnXSxpKVtwXSgpLnRoZW4oZnVuY3Rpb24oYyl7dmFyIGQ9Yy5kYXRhLGU9Yy5jb25maWcucGFyYW1zLGY9eChkLGksayxqLGMsaCk7aWYoKF8uaXNVbmRlZmluZWQoZil8fFwiXCI9PT1mKSYmKGY9W10pLCFfLmlzQXJyYXkoZikpdGhyb3cgbmV3IEVycm9yKFwiUmVzcG9uc2UgZm9yIGdldExpc3QgU0hPVUxEIGJlIGFuIGFycmF5IGFuZCBub3QgYW4gb2JqZWN0IG9yIHNvbWV0aGluZyBlbHNlXCIpO3ZhciBsPV8ubWFwKGYsZnVuY3Rpb24oYyl7cmV0dXJuIGdbYi5yZXN0YW5ndWxhckZpZWxkcy5yZXN0YW5ndWxhckNvbGxlY3Rpb25dP3MoZ1tiLnJlc3Rhbmd1bGFyRmllbGRzLnBhcmVudFJlc291cmNlXSxjLGdbYi5yZXN0YW5ndWxhckZpZWxkcy5yb3V0ZV0sITAsZik6cyhnLGMsYSwhMCxmKX0pO2w9Xy5leHRlbmQoZixsKSxnW2IucmVzdGFuZ3VsYXJGaWVsZHMucmVzdGFuZ3VsYXJDb2xsZWN0aW9uXT9vKGgsYyx0KGdbYi5yZXN0YW5ndWxhckZpZWxkcy5wYXJlbnRSZXNvdXJjZV0sbCxnW2IucmVzdGFuZ3VsYXJGaWVsZHMucm91dGVdLCEwLGUpLG4pOm8oaCxjLHQoZyxsLGEsITAsZSksbil9LGZ1bmN0aW9uKGEpezMwND09PWEuc3RhdHVzJiZnW2IucmVzdGFuZ3VsYXJGaWVsZHMucmVzdGFuZ3VsYXJDb2xsZWN0aW9uXT9vKGgsYSxnLG4pOmIuZXJyb3JJbnRlcmNlcHRvcihhLGgpIT09ITEmJmgucmVqZWN0KGEpfSksbChoLnByb21pc2UsITAsbil9ZnVuY3Rpb24geihhKXtyZXR1cm4gdGhpc1tiLnJlc3Rhbmd1bGFyRmllbGRzLmh0dHBDb25maWddPWEsdGhpc31mdW5jdGlvbiBBKGEsYyl7cmV0dXJuIHRoaXNbYi5yZXN0YW5ndWxhckZpZWxkcy5mcm9tU2VydmVyXT90aGlzW2IucmVzdGFuZ3VsYXJGaWVsZHMucHV0XShhLGMpOl8uYmluZChCLHRoaXMpKFwicG9zdFwiLHZvaWQgMCxhLHZvaWQgMCxjKX1mdW5jdGlvbiBCKGEsZSxmLGcsaCl7dmFyIGk9dGhpcyxqPWQuZGVmZXIoKSxrPWZ8fHt9LG09ZXx8dGhpc1tiLnJlc3Rhbmd1bGFyRmllbGRzLnJvdXRlXSxuPVAuZmV0Y2hVcmwodGhpcyxlKSxxPWd8fHRoaXMscj1xW2IucmVzdGFuZ3VsYXJGaWVsZHMuZXRhZ118fChcInBvc3RcIiE9YT90aGlzW2IucmVzdGFuZ3VsYXJGaWVsZHMuZXRhZ106bnVsbCk7Xy5pc09iamVjdChxKSYmYi5pc1Jlc3Rhbmd1bGFyaXplZChxKSYmKHE9cChxKSk7dmFyIHQ9Yi5mdWxsUmVxdWVzdEludGVyY2VwdG9yKHEsYSxtLG4saHx8e30sa3x8e30sdGhpc1tiLnJlc3Rhbmd1bGFyRmllbGRzLmh0dHBDb25maWddfHx7fSksdT17fTt1PWIudHJhbnNmb3JtRWxlbSh1LCExLG0sTyk7dmFyIHY9ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5kYXRhLGY9Yy5jb25maWcucGFyYW1zLGc9eChkLGEsbSxuLGMsaik7Zz9cInBvc3RcIiE9PWF8fGlbYi5yZXN0YW5ndWxhckZpZWxkcy5yZXN0YW5ndWxhckNvbGxlY3Rpb25dPyhkYXRhPXMoaVtiLnJlc3Rhbmd1bGFyRmllbGRzLnBhcmVudFJlc291cmNlXSxnLGlbYi5yZXN0YW5ndWxhckZpZWxkcy5yb3V0ZV0sITAsbnVsbCxmKSxkYXRhW2IucmVzdGFuZ3VsYXJGaWVsZHMuc2luZ2xlT25lXT1pW2IucmVzdGFuZ3VsYXJGaWVsZHMuc2luZ2xlT25lXSxvKGosYyxkYXRhLHUpKTpvKGosYyxzKGksZyxlLCEwLG51bGwsZiksdSk6byhqLGMsdm9pZCAwLHUpfSx3PWZ1bmN0aW9uKGMpezMwND09PWMuc3RhdHVzJiZiLmlzU2FmZShhKT9vKGosYyxpLHUpOmIuZXJyb3JJbnRlcmNlcHRvcihjLGopIT09ITEmJmoucmVqZWN0KGMpfSx5PWEsej1fLmV4dGVuZCh7fSx0LmhlYWRlcnMpLEE9Yi5pc092ZXJyaWRlbk1ldGhvZChhKTtyZXR1cm4gQT8oeT1cInBvc3RcIix6PV8uZXh0ZW5kKHose1wiWC1IVFRQLU1ldGhvZC1PdmVycmlkZVwiOlwicmVtb3ZlXCI9PT1hP1wiREVMRVRFXCI6YX0pKTpiLmpzb25wJiZcImdldFwiPT09eSYmKHk9XCJqc29ucFwiKSxiLmlzU2FmZShhKT9BP1AucmVzb3VyY2UodGhpcyxjLHQuaHR0cENvbmZpZyx6LHQucGFyYW1zLGUscix5KVt5XSh7fSkudGhlbih2LHcpOlAucmVzb3VyY2UodGhpcyxjLHQuaHR0cENvbmZpZyx6LHQucGFyYW1zLGUscix5KVt5XSgpLnRoZW4odix3KTpQLnJlc291cmNlKHRoaXMsYyx0Lmh0dHBDb25maWcseix0LnBhcmFtcyxlLHIseSlbeV0odC5lbGVtZW50KS50aGVuKHYsdyksbChqLnByb21pc2UsITEsdSl9ZnVuY3Rpb24gQyhhLGIpe3JldHVybiBfLmJpbmQoQix0aGlzKShcImdldFwiLHZvaWQgMCxhLHZvaWQgMCxiKX1mdW5jdGlvbiBEKGEsYil7cmV0dXJuIF8uYmluZChCLHRoaXMpKFwicmVtb3ZlXCIsdm9pZCAwLGEsdm9pZCAwLGIpfWZ1bmN0aW9uIEUoYSxiKXtyZXR1cm4gXy5iaW5kKEIsdGhpcykoXCJwdXRcIix2b2lkIDAsYSx2b2lkIDAsYil9ZnVuY3Rpb24gRihhLGIsYyxkKXtyZXR1cm4gXy5iaW5kKEIsdGhpcykoXCJwb3N0XCIsYSxjLGIsZCl9ZnVuY3Rpb24gRyhhLGIpe3JldHVybiBfLmJpbmQoQix0aGlzKShcImhlYWRcIix2b2lkIDAsYSx2b2lkIDAsYil9ZnVuY3Rpb24gSChhLGIpe3JldHVybiBfLmJpbmQoQix0aGlzKShcInRyYWNlXCIsdm9pZCAwLGEsdm9pZCAwLGIpfWZ1bmN0aW9uIEkoYSxiKXtyZXR1cm4gXy5iaW5kKEIsdGhpcykoXCJvcHRpb25zXCIsdm9pZCAwLGEsdm9pZCAwLGIpfWZ1bmN0aW9uIEooYSxiLGMpe3JldHVybiBfLmJpbmQoQix0aGlzKShcInBhdGNoXCIsdm9pZCAwLGIsYSxjKX1mdW5jdGlvbiBLKGEsYixjLGQsZSl7cmV0dXJuIF8uYmluZChCLHRoaXMpKGEsYixjLGUsZCl9ZnVuY3Rpb24gTChhLGMsZCxlLGYsZyl7dmFyIGg7aD1cImdldExpc3RcIj09PWM/Xy5iaW5kKHksdGhpcyxkKTpfLmJpbmQoSyx0aGlzLGMsZCk7dmFyIGk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPV8uZGVmYXVsdHMoe3BhcmFtczphLGhlYWRlcnM6YixlbGVtOmN9LHtwYXJhbXM6ZSxoZWFkZXJzOmYsZWxlbTpnfSk7cmV0dXJuIGgoZC5wYXJhbXMsZC5oZWFkZXJzLGQuZWxlbSl9O3RoaXNbYV09Yi5pc1NhZmUoYyk/aTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGkoYixjLGEpfX1mdW5jdGlvbiBNKGMpe3ZhciBkPWFuZ3VsYXIuY29weShfLm9taXQoYixcImNvbmZpZ3VyYXRpb25cIikpO3JldHVybiBhLmluaXQoZCxkKSxjKGQpLGUoZCl9ZnVuY3Rpb24gTihhLGIpe3ZhciBjPXt9LGQ9KGJ8fE8pLmFsbChhKTtyZXR1cm4gYy5vbmU9Xy5iaW5kKGcsYnx8TyxiLGEpLGMucG9zdD1fLmJpbmQoZC5wb3N0LGQpLGMuZ2V0TGlzdD1fLmJpbmQoZC5nZXRMaXN0LGQpLGN9dmFyIE89e30sUD1uZXcgYi51cmxDcmVhdG9yRmFjdG9yeVtiLnVybENyZWF0b3JdO3JldHVybiBQLnNldENvbmZpZyhiKSxhLmluaXQoTyxiKSxPLmNvcHk9Xy5iaW5kKHIsTyksTy5zZXJ2aWNlPV8uYmluZChOLE8pLE8ud2l0aENvbmZpZz1fLmJpbmQoTSxPKSxPLm9uZT1fLmJpbmQoZyxPLG51bGwpLE8uYWxsPV8uYmluZChoLE8sbnVsbCksTy5zZXZlcmFsPV8uYmluZChpLE8sbnVsbCksTy5vbmVVcmw9Xy5iaW5kKGosTyxudWxsKSxPLmFsbFVybD1fLmJpbmQoayxPLG51bGwpLE8uc3RyaXBSZXN0YW5ndWxhcj1fLmJpbmQocCxPKSxPLnJlc3Rhbmd1bGFyaXplRWxlbWVudD1fLmJpbmQocyxPKSxPLnJlc3Rhbmd1bGFyaXplQ29sbGVjdGlvbj1fLmJpbmQodSxPKSxPfXJldHVybiBlKGIpfV19KX0oKTtcbjsgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18odHlwZW9mIG51bGwgIT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiB3aW5kb3cubnVsbCk7XG5cbn0pLmNhbGwoZ2xvYmFsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uIGRlZmluZUV4cG9ydChleCkgeyBtb2R1bGUuZXhwb3J0cyA9IGV4OyB9KTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIiwiIWZ1bmN0aW9uKGEsYil7YltcInRydWVcIl09YSxmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGMoKXt0aGlzLiRnZXQ9W1wiJCRzYW5pdGl6ZVVyaVwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1bXTtyZXR1cm4gZihiLGsoYyxmdW5jdGlvbihiLGMpe3JldHVybiEvXnVuc2FmZS8udGVzdChhKGIsYykpfSkpLGMuam9pbihcIlwiKX19XX1mdW5jdGlvbiBkKGEpe3ZhciBjPVtdLGQ9ayhjLGIubm9vcCk7cmV0dXJuIGQuY2hhcnMoYSksYy5qb2luKFwiXCIpfWZ1bmN0aW9uIGUoYSl7dmFyIGIsYz17fSxkPWEuc3BsaXQoXCIsXCIpO2ZvcihiPTA7YjxkLmxlbmd0aDtiKyspY1tkW2JdXT0hMDtyZXR1cm4gY31mdW5jdGlvbiBmKGEsYyl7ZnVuY3Rpb24gZChhLGQsZixoKXtpZihkPWIubG93ZXJjYXNlKGQpLEFbZF0pZm9yKDtqLmxhc3QoKSYmQltqLmxhc3QoKV07KWUoXCJcIixqLmxhc3QoKSk7eltkXSYmai5sYXN0KCk9PWQmJmUoXCJcIixkKSxoPXdbZF18fCEhaCxofHxqLnB1c2goZCk7dmFyIGk9e307Zi5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1jfHxkfHxlfHxcIlwiO2lbYl09ZyhmKX0pLGMuc3RhcnQmJmMuc3RhcnQoZCxpLGgpfWZ1bmN0aW9uIGUoYSxkKXt2YXIgZSxmPTA7aWYoZD1iLmxvd2VyY2FzZShkKSlmb3IoZj1qLmxlbmd0aC0xO2Y+PTAmJmpbZl0hPWQ7Zi0tKTtpZihmPj0wKXtmb3IoZT1qLmxlbmd0aC0xO2U+PWY7ZS0tKWMuZW5kJiZjLmVuZChqW2VdKTtqLmxlbmd0aD1mfX12YXIgZixoLGksaj1bXSxrPWE7Zm9yKGoubGFzdD1mdW5jdGlvbigpe3JldHVybiBqW2oubGVuZ3RoLTFdfTthOyl7aWYoaD0hMCxqLmxhc3QoKSYmQ1tqLmxhc3QoKV0pYT1hLnJlcGxhY2UobmV3IFJlZ0V4cChcIiguKik8XFxcXHMqXFxcXC9cXFxccypcIitqLmxhc3QoKStcIltePl0qPlwiLFwiaVwiKSxmdW5jdGlvbihhLGIpe3JldHVybiBiPWIucmVwbGFjZShyLFwiJDFcIikucmVwbGFjZSh0LFwiJDFcIiksYy5jaGFycyYmYy5jaGFycyhnKGIpKSxcIlwifSksZShcIlwiLGoubGFzdCgpKTtlbHNlIGlmKDA9PT1hLmluZGV4T2YoXCI8IS0tXCIpPyhmPWEuaW5kZXhPZihcIi0tXCIsNCksZj49MCYmYS5sYXN0SW5kZXhPZihcIi0tPlwiLGYpPT09ZiYmKGMuY29tbWVudCYmYy5jb21tZW50KGEuc3Vic3RyaW5nKDQsZikpLGE9YS5zdWJzdHJpbmcoZiszKSxoPSExKSk6cy50ZXN0KGEpPyhpPWEubWF0Y2gocyksaSYmKGE9YS5yZXBsYWNlKGlbMF0sXCJcIiksaD0hMSkpOnEudGVzdChhKT8oaT1hLm1hdGNoKG4pLGkmJihhPWEuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKSxpWzBdLnJlcGxhY2UobixlKSxoPSExKSk6cC50ZXN0KGEpJiYoaT1hLm1hdGNoKG0pLGkmJihhPWEuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKSxpWzBdLnJlcGxhY2UobSxkKSxoPSExKSksaCl7Zj1hLmluZGV4T2YoXCI8XCIpO3ZhciB1PTA+Zj9hOmEuc3Vic3RyaW5nKDAsZik7YT0wPmY/XCJcIjphLnN1YnN0cmluZyhmKSxjLmNoYXJzJiZjLmNoYXJzKGcodSkpfWlmKGE9PWspdGhyb3cgbChcImJhZHBhcnNlXCIsXCJUaGUgc2FuaXRpemVyIHdhcyB1bmFibGUgdG8gcGFyc2UgdGhlIGZvbGxvd2luZyBibG9jayBvZiBodG1sOiB7MH1cIixhKTtrPWF9ZSgpfWZ1bmN0aW9uIGcoYSl7aWYoIWEpcmV0dXJuXCJcIjt2YXIgYj1ILmV4ZWMoYSksYz1iWzFdLGQ9YlszXSxlPWJbMl07cmV0dXJuIGUmJihHLmlubmVySFRNTD1lLnJlcGxhY2UoLzwvZyxcIiZsdDtcIiksZT1cInRleHRDb250ZW50XCJpbiBHP0cudGV4dENvbnRlbnQ6Ry5pbm5lclRleHQpLGMrZStkfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGEucmVwbGFjZSgvJi9nLFwiJmFtcDtcIikucmVwbGFjZSh1LGZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKSxjPWEuY2hhckNvZGVBdCgxKTtyZXR1cm5cIiYjXCIrKDEwMjQqKGItNTUyOTYpKyhjLTU2MzIwKSs2NTUzNikrXCI7XCJ9KS5yZXBsYWNlKHYsZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3JldHVybiAxNTk+PWJ8fDE3Mz09Ynx8Yj49MTUzNiYmMTU0MD49Ynx8MTgwNz09Ynx8NjA2OD09Ynx8NjA2OT09Ynx8Yj49ODIwNCYmODIwNz49Ynx8Yj49ODIzMiYmODIzOT49Ynx8Yj49ODI4OCYmODMwMz49Ynx8NjUyNzk9PWJ8fGI+PTY1NTIwJiY2NTUzNT49Yj9cIiYjXCIrYitcIjtcIjphfSkucmVwbGFjZSgvPC9nLFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csXCImZ3Q7XCIpfWZ1bmN0aW9uIGkoYSl7dmFyIGM9XCJcIixkPWEuc3BsaXQoXCI7XCIpO3JldHVybiBiLmZvckVhY2goZCxmdW5jdGlvbihhKXt2YXIgZD1hLnNwbGl0KFwiOlwiKTtpZigyPT1kLmxlbmd0aCl7dmFyIGU9SShiLmxvd2VyY2FzZShkWzBdKSksYT1JKGIubG93ZXJjYXNlKGRbMV0pKTsoXCJjb2xvclwiPT09ZSYmKGEubWF0Y2goL15yZ2JcXChbMC05JSxcXC4gXSpcXCkkL2kpfHxhLm1hdGNoKC9ecmdiYVxcKFswLTklLFxcLiBdKlxcKSQvaSl8fGEubWF0Y2goL15oc2xcXChbMC05JSxcXC4gXSpcXCkkL2kpfHxhLm1hdGNoKC9eaHNsYVxcKFswLTklLFxcLiBdKlxcKSQvaSl8fGEubWF0Y2goL14jWzAtOWEtZl17Myw2fSQvaSl8fGEubWF0Y2goL15bYS16XSokL2kpKXx8XCJ0ZXh0LWFsaWduXCI9PT1lJiYoXCJsZWZ0XCI9PT1hfHxcInJpZ2h0XCI9PT1hfHxcImNlbnRlclwiPT09YXx8XCJqdXN0aWZ5XCI9PT1hKXx8XCJmbG9hdFwiPT09ZSYmKFwibGVmdFwiPT09YXx8XCJyaWdodFwiPT09YXx8XCJub25lXCI9PT1hKXx8KFwid2lkdGhcIj09PWV8fFwiaGVpZ2h0XCI9PT1lKSYmYS5tYXRjaCgvWzAtOVxcLl0qKHB4fGVtfHJlbXwlKS8pKSYmKGMrPWUrXCI6IFwiK2ErXCI7XCIpfX0pLGN9ZnVuY3Rpb24gaihhLGIsYyxkKXtyZXR1cm5cImltZ1wiPT09YSYmYltcInRhLWluc2VydC12aWRlb1wiXSYmKFwidGEtaW5zZXJ0LXZpZGVvXCI9PT1jfHxcImFsbG93ZnVsbHNjcmVlblwiPT09Y3x8XCJmcmFtZWJvcmRlclwiPT09Y3x8XCJjb250ZW50ZWRpdGJsZVwiPT09YyYmXCJmYWxzZVwiPT09ZCk/ITA6ITF9ZnVuY3Rpb24gayhhLGMpe3ZhciBkPSExLGU9Yi5iaW5kKGEsYS5wdXNoKTtyZXR1cm57c3RhcnQ6ZnVuY3Rpb24oYSxmLGcpe2E9Yi5sb3dlcmNhc2UoYSksIWQmJkNbYV0mJihkPWEpLGR8fERbYV0hPT0hMHx8KGUoXCI8XCIpLGUoYSksYi5mb3JFYWNoKGYsZnVuY3Rpb24oZCxnKXt2YXIgaz1iLmxvd2VyY2FzZShnKSxsPVwiaW1nXCI9PT1hJiZcInNyY1wiPT09a3x8XCJiYWNrZ3JvdW5kXCI9PT1rOyhcInN0eWxlXCI9PT1rJiZcIlwiIT09KGQ9aShkKSl8fGooYSxmLGssZCl8fEZba109PT0hMCYmKEVba10hPT0hMHx8YyhkLGwpKSkmJihlKFwiIFwiKSxlKGcpLGUoJz1cIicpLGUoaChkKSksZSgnXCInKSl9KSxlKGc/XCIvPlwiOlwiPlwiKSl9LGVuZDpmdW5jdGlvbihhKXthPWIubG93ZXJjYXNlKGEpLGR8fERbYV0hPT0hMHx8KGUoXCI8L1wiKSxlKGEpLGUoXCI+XCIpKSxhPT1kJiYoZD0hMSl9LGNoYXJzOmZ1bmN0aW9uKGEpe2R8fGUoaChhKSl9fX12YXIgbD1iLiQkbWluRXJyKFwiJHNhbml0aXplXCIpLG09L148XFxzKihbXFx3Oi1dKykoKD86XFxzK1tcXHc6LV0rKD86XFxzKj1cXHMqKD86KD86XCJbXlwiXSpcIil8KD86J1teJ10qJyl8W14+XFxzXSspKT8pKilcXHMqKFxcLz8pXFxzKj4vLG49L148XFxzKlxcL1xccyooW1xcdzotXSspW14+XSo+LyxvPS8oW1xcdzotXSspKD86XFxzKj1cXHMqKD86KD86XCIoKD86W15cIl0pKilcIil8KD86JygoPzpbXiddKSopJyl8KFtePlxcc10rKSkpPy9nLHA9L148LyxxPS9ePFxccypcXC8vLHI9LzwhLS0oLio/KS0tPi9nLHM9LzwhRE9DVFlQRShbXj5dKj8pPi9pLHQ9LzwhXFxbQ0RBVEFcXFsoLio/KV1dPi9nLHU9L1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0vZyx2PS8oW15cXCMtfnwgfCFdKS9nLHc9ZShcImFyZWEsYnIsY29sLGhyLGltZyx3YnJcIikseD1lKFwiY29sZ3JvdXAsZGQsZHQsbGkscCx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCx0clwiKSx5PWUoXCJycCxydFwiKSx6PWIuZXh0ZW5kKHt9LHkseCksQT1iLmV4dGVuZCh7fSx4LGUoXCJhZGRyZXNzLGFydGljbGUsYXNpZGUsYmxvY2txdW90ZSxjYXB0aW9uLGNlbnRlcixkZWwsZGlyLGRpdixkbCxmaWd1cmUsZmlnY2FwdGlvbixmb290ZXIsaDEsaDIsaDMsaDQsaDUsaDYsaGVhZGVyLGhncm91cCxocixpbnMsbWFwLG1lbnUsbmF2LG9sLHByZSxzY3JpcHQsc2VjdGlvbix0YWJsZSx1bFwiKSksQj1iLmV4dGVuZCh7fSx5LGUoXCJhLGFiYnIsYWNyb255bSxiLGJkaSxiZG8sYmlnLGJyLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbWcsaW5zLGtiZCxsYWJlbCxtYXAsbWFyayxxLHJ1YnkscnAscnQscyxzYW1wLHNtYWxsLHNwYW4sc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHRpbWUsdHQsdSx2YXJcIikpLEM9ZShcInNjcmlwdCxzdHlsZVwiKSxEPWIuZXh0ZW5kKHt9LHcsQSxCLHopLEU9ZShcImJhY2tncm91bmQsY2l0ZSxocmVmLGxvbmdkZXNjLHNyYyx1c2VtYXBcIiksRj1iLmV4dGVuZCh7fSxFLGUoXCJhYmJyLGFsaWduLGFsdCxheGlzLGJnY29sb3IsYm9yZGVyLGNlbGxwYWRkaW5nLGNlbGxzcGFjaW5nLGNsYXNzLGNsZWFyLGNvbG9yLGNvbHMsY29sc3Bhbixjb21wYWN0LGNvb3JkcyxkaXIsZmFjZSxoZWFkZXJzLGhlaWdodCxocmVmbGFuZyxoc3BhY2UsaXNtYXAsbGFuZyxsYW5ndWFnZSxub2hyZWYsbm93cmFwLHJlbCxyZXYscm93cyxyb3dzcGFuLHJ1bGVzLHNjb3BlLHNjcm9sbGluZyxzaGFwZSxzaXplLHNwYW4sc3RhcnQsc3VtbWFyeSx0YXJnZXQsdGl0bGUsdHlwZSx2YWxpZ24sdmFsdWUsdnNwYWNlLHdpZHRoXCIpKSxHPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIiksSD0vXihcXHMqKShbXFxzXFxTXSo/KShcXHMqKSQvLEk9ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBiLmlzU3RyaW5nKGEpP2EudHJpbSgpOmF9OmZ1bmN0aW9uKGEpe3JldHVybiBiLmlzU3RyaW5nKGEpP2EucmVwbGFjZSgvXlxcc1xccyovLFwiXCIpLnJlcGxhY2UoL1xcc1xccyokLyxcIlwiKTphfX0oKTtiLm1vZHVsZShcIm5nU2FuaXRpemVcIixbXSkucHJvdmlkZXIoXCIkc2FuaXRpemVcIixjKSxiLm1vZHVsZShcIm5nU2FuaXRpemVcIikuZmlsdGVyKFwibGlua3lcIixbXCIkc2FuaXRpemVcIixmdW5jdGlvbihhKXt2YXIgYz0vKChmdHB8aHR0cHM/KTpcXC9cXC98KG1haWx0bzopP1tBLVphLXowLTkuXyUrLV0rQClcXFMqW15cXHMuOywoKXt9PD5dLyxlPS9ebWFpbHRvOi87cmV0dXJuIGZ1bmN0aW9uKGYsZyl7ZnVuY3Rpb24gaChhKXthJiZuLnB1c2goZChhKSl9ZnVuY3Rpb24gaShhLGMpe24ucHVzaChcIjxhIFwiKSxiLmlzRGVmaW5lZChnKSYmKG4ucHVzaCgndGFyZ2V0PVwiJyksbi5wdXNoKGcpLG4ucHVzaCgnXCIgJykpLG4ucHVzaCgnaHJlZj1cIicpLG4ucHVzaChhKSxuLnB1c2goJ1wiPicpLGgoYyksbi5wdXNoKFwiPC9hPlwiKX1pZighZilyZXR1cm4gZjtmb3IodmFyIGosayxsLG09ZixuPVtdO2o9bS5tYXRjaChjKTspaz1qWzBdLGpbMl09PWpbM10mJihrPVwibWFpbHRvOlwiK2spLGw9ai5pbmRleCxoKG0uc3Vic3RyKDAsbCkpLGkoayxqWzBdLnJlcGxhY2UoZSxcIlwiKSksbT1tLnN1YnN0cmluZyhsK2pbMF0ubGVuZ3RoKTtyZXR1cm4gaChtKSxhKG4uam9pbihcIlwiKSl9fV0pfSh3aW5kb3csd2luZG93LmFuZ3VsYXIpfSh7fSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKTsiLCIhZnVuY3Rpb24oYSxiKXtiW1widHJ1ZVwiXT1hLGFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXJTZXR1cFwiLFtdKS52YWx1ZShcInRhT3B0aW9uc1wiLHt0b29sYmFyOltbXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCIsXCJwXCIsXCJwcmVcIixcInF1b3RlXCJdLFtcImJvbGRcIixcIml0YWxpY3NcIixcInVuZGVybGluZVwiLFwidWxcIixcIm9sXCIsXCJyZWRvXCIsXCJ1bmRvXCIsXCJjbGVhclwiXSxbXCJqdXN0aWZ5TGVmdFwiLFwianVzdGlmeUNlbnRlclwiLFwianVzdGlmeVJpZ2h0XCIsXCJpbmRlbnRcIixcIm91dGRlbnRcIl0sW1wiaHRtbFwiLFwiaW5zZXJ0SW1hZ2VcIixcImluc2VydExpbmtcIixcImluc2VydFZpZGVvXCJdXSxjbGFzc2VzOntmb2N1c3NlZDpcImZvY3Vzc2VkXCIsdG9vbGJhcjpcImJ0bi10b29sYmFyXCIsdG9vbGJhckdyb3VwOlwiYnRuLWdyb3VwXCIsdG9vbGJhckJ1dHRvbjpcImJ0biBidG4tZGVmYXVsdFwiLHRvb2xiYXJCdXR0b25BY3RpdmU6XCJhY3RpdmVcIixkaXNhYmxlZDpcImRpc2FibGVkXCIsdGV4dEVkaXRvcjpcImZvcm0tY29udHJvbFwiLGh0bWxFZGl0b3I6XCJmb3JtLWNvbnRyb2xcIn0sc2V0dXA6e3RleHRFZGl0b3JTZXR1cDpmdW5jdGlvbigpe30saHRtbEVkaXRvclNldHVwOmZ1bmN0aW9uKCl7fX0sZGVmYXVsdEZpbGVEcm9wSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBGaWxlUmVhZGVyO3JldHVyblwiaW1hZ2VcIj09PWEudHlwZS5zdWJzdHJpbmcoMCw1KT8oYy5vbmxvYWQ9ZnVuY3Rpb24oKXtcIlwiIT09Yy5yZXN1bHQmJmIoXCJpbnNlcnRJbWFnZVwiLGMucmVzdWx0LCEwKX0sYy5yZWFkQXNEYXRhVVJMKGEpLCEwKTohMX19KS52YWx1ZShcInRhU2VsZWN0YWJsZUVsZW1lbnRzXCIsW1wiYVwiLFwiaW1nXCJdKS52YWx1ZShcInRhQ3VzdG9tUmVuZGVyZXJzXCIsW3tzZWxlY3RvcjpcImltZ1wiLGN1c3RvbUF0dHJpYnV0ZTpcInRhLWluc2VydC12aWRlb1wiLHJlbmRlckxvZ2ljOmZ1bmN0aW9uKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxpZnJhbWU+PC9pZnJhbWU+XCIpLGM9YS5wcm9wKFwiYXR0cmlidXRlc1wiKTthbmd1bGFyLmZvckVhY2goYyxmdW5jdGlvbihhKXtiLmF0dHIoYS5uYW1lLGEudmFsdWUpfSksYi5hdHRyKFwic3JjXCIsYi5hdHRyKFwidGEtaW5zZXJ0LXZpZGVvXCIpKSxhLnJlcGxhY2VXaXRoKGIpfX1dKS5jb25zdGFudChcInRhVHJhbnNsYXRpb25zXCIse2h0bWw6e2J1dHRvbnRleHQ6XCJUb2dnbGUgSFRNTFwiLHRvb2x0aXA6XCJUb2dnbGUgaHRtbCAvIFJpY2ggVGV4dFwifSxoZWFkaW5nOnt0b29sdGlwOlwiSGVhZGluZyBcIn0scDp7dG9vbHRpcDpcIlBhcmFncmFwaFwifSxwcmU6e3Rvb2x0aXA6XCJQcmVmb3JtYXR0ZWQgdGV4dFwifSx1bDp7dG9vbHRpcDpcIlVub3JkZXJlZCBMaXN0XCJ9LG9sOnt0b29sdGlwOlwiT3JkZXJlZCBMaXN0XCJ9LHF1b3RlOnt0b29sdGlwOlwiUXVvdGUvdW5xb3V0ZSBzZWxlY3Rpb24gb3IgcGFyYWdyYXBoXCJ9LHVuZG86e3Rvb2x0aXA6XCJVbmRvXCJ9LHJlZG86e3Rvb2x0aXA6XCJSZWRvXCJ9LGJvbGQ6e3Rvb2x0aXA6XCJCb2xkXCJ9LGl0YWxpYzp7dG9vbHRpcDpcIkl0YWxpY1wifSx1bmRlcmxpbmU6e3Rvb2x0aXA6XCJVbmRlcmxpbmVcIn0sanVzdGlmeUxlZnQ6e3Rvb2x0aXA6XCJBbGlnbiB0ZXh0IGxlZnRcIn0sanVzdGlmeVJpZ2h0Ont0b29sdGlwOlwiQWxpZ24gdGV4dCByaWdodFwifSxqdXN0aWZ5Q2VudGVyOnt0b29sdGlwOlwiQ2VudGVyXCJ9LGluZGVudDp7dG9vbHRpcDpcIkluY3JlYXNlIGluZGVudFwifSxvdXRkZW50Ont0b29sdGlwOlwiRGVjcmVhc2UgaW5kZW50XCJ9LGNsZWFyOnt0b29sdGlwOlwiQ2xlYXIgZm9ybWF0dGluZ1wifSxpbnNlcnRJbWFnZTp7ZGlhbG9nUHJvbXB0OlwiUGxlYXNlIGVudGVyIGFuIGltYWdlIFVSTCB0byBpbnNlcnRcIix0b29sdGlwOlwiSW5zZXJ0IGltYWdlXCIsaG90a2V5OlwidGhlIC0gcG9zc2libHkgbGFuZ3VhZ2UgZGVwZW5kZW50IGhvdGtleSAuLi4gZm9yIHNvbWUgZnV0dXJlIGltcGxlbWVudGF0aW9uXCJ9LGluc2VydFZpZGVvOnt0b29sdGlwOlwiSW5zZXJ0IHZpZGVvXCIsZGlhbG9nUHJvbXB0OlwiUGxlYXNlIGVudGVyIGEgeW91dHViZSBVUkwgdG8gZW1iZWRcIn0saW5zZXJ0TGluazp7dG9vbHRpcDpcIkluc2VydCAvIGVkaXQgbGlua1wiLGRpYWxvZ1Byb21wdDpcIlBsZWFzZSBlbnRlciBhIFVSTCB0byBpbnNlcnRcIn19KS5ydW4oW1widGFSZWdpc3RlclRvb2xcIixcIiR3aW5kb3dcIixcInRhVHJhbnNsYXRpb25zXCIsXCJ0YVNlbGVjdGlvblwiLGZ1bmN0aW9uKGEsYixjLGQpe2EoXCJodG1sXCIse2J1dHRvbnRleHQ6Yy5odG1sLmJ1dHRvbnRleHQsdG9vbHRpcHRleHQ6Yy5odG1sLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy4kZWRpdG9yKCkuc3dpdGNoVmlldygpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5zaG93SHRtbH19KTt2YXIgZT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlGb3JtYXRCbG9ja1N0YXRlKGEpfX0sZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiZm9ybWF0QmxvY2tcIixcIjxcIit0aGlzLm5hbWUudG9VcHBlckNhc2UoKStcIj5cIil9O2FuZ3VsYXIuZm9yRWFjaChbXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCJdLGZ1bmN0aW9uKGIpe2EoYi50b0xvd2VyQ2FzZSgpLHtidXR0b250ZXh0OmIudG9VcHBlckNhc2UoKSx0b29sdGlwdGV4dDpjLmhlYWRpbmcudG9vbHRpcCtiLmNoYXJBdCgxKSxhY3Rpb246ZixhY3RpdmVTdGF0ZTplKGIudG9Mb3dlckNhc2UoKSl9KX0pLGEoXCJwXCIse2J1dHRvbnRleHQ6XCJQXCIsdG9vbHRpcHRleHQ6Yy5wLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJmb3JtYXRCbG9ja1wiLFwiPFA+XCIpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUZvcm1hdEJsb2NrU3RhdGUoXCJwXCIpfX0pLGEoXCJwcmVcIix7YnV0dG9udGV4dDpcInByZVwiLHRvb2x0aXB0ZXh0OmMucHJlLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJmb3JtYXRCbG9ja1wiLFwiPFBSRT5cIil9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZShcInByZVwiKX19KSxhKFwidWxcIix7aWNvbmNsYXNzOlwiZmEgZmEtbGlzdC11bFwiLHRvb2x0aXB0ZXh0OmMudWwudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImluc2VydFVub3JkZXJlZExpc3RcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJpbnNlcnRVbm9yZGVyZWRMaXN0XCIpfX0pLGEoXCJvbFwiLHtpY29uY2xhc3M6XCJmYSBmYS1saXN0LW9sXCIsdG9vbHRpcHRleHQ6Yy5vbC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5zZXJ0T3JkZXJlZExpc3RcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJpbnNlcnRPcmRlcmVkTGlzdFwiKX19KSxhKFwicXVvdGVcIix7aWNvbmNsYXNzOlwiZmEgZmEtcXVvdGUtcmlnaHRcIix0b29sdGlwdGV4dDpjLnF1b3RlLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJmb3JtYXRCbG9ja1wiLFwiPEJMT0NLUVVPVEU+XCIpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUZvcm1hdEJsb2NrU3RhdGUoXCJibG9ja3F1b3RlXCIpfX0pLGEoXCJ1bmRvXCIse2ljb25jbGFzczpcImZhIGZhLXVuZG9cIix0b29sdGlwdGV4dDpjLnVuZG8udG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcInVuZG9cIixudWxsKX19KSxhKFwicmVkb1wiLHtpY29uY2xhc3M6XCJmYSBmYS1yZXBlYXRcIix0b29sdGlwdGV4dDpjLnJlZG8udG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcInJlZG9cIixudWxsKX19KSxhKFwiYm9sZFwiLHtpY29uY2xhc3M6XCJmYSBmYS1ib2xkXCIsdG9vbHRpcHRleHQ6Yy5ib2xkLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJib2xkXCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwiYm9sZFwiKX0sY29tbWFuZEtleUNvZGU6OTh9KSxhKFwianVzdGlmeUxlZnRcIix7aWNvbmNsYXNzOlwiZmEgZmEtYWxpZ24tbGVmdFwiLHRvb2x0aXB0ZXh0OmMuanVzdGlmeUxlZnQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImp1c3RpZnlMZWZ0XCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3JldHVybiBhJiYoYj1cImxlZnRcIj09PWEuY3NzKFwidGV4dC1hbGlnblwiKXx8XCJsZWZ0XCI9PT1hLmF0dHIoXCJhbGlnblwiKXx8XCJyaWdodFwiIT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpJiZcImNlbnRlclwiIT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpJiYhdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5UmlnaHRcIikmJiF0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlDZW50ZXJcIikpLGI9Ynx8dGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJqdXN0aWZ5TGVmdFwiKX19KSxhKFwianVzdGlmeVJpZ2h0XCIse2ljb25jbGFzczpcImZhIGZhLWFsaWduLXJpZ2h0XCIsdG9vbHRpcHRleHQ6Yy5qdXN0aWZ5UmlnaHQudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImp1c3RpZnlSaWdodFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYSYmKGI9XCJyaWdodFwiPT09YS5jc3MoXCJ0ZXh0LWFsaWduXCIpKSxiPWJ8fHRoaXMuJGVkaXRvcigpLnF1ZXJ5Q29tbWFuZFN0YXRlKFwianVzdGlmeVJpZ2h0XCIpfX0pLGEoXCJqdXN0aWZ5Q2VudGVyXCIse2ljb25jbGFzczpcImZhIGZhLWFsaWduLWNlbnRlclwiLHRvb2x0aXB0ZXh0OmMuanVzdGlmeUNlbnRlci50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwianVzdGlmeUNlbnRlclwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYSYmKGI9XCJjZW50ZXJcIj09PWEuY3NzKFwidGV4dC1hbGlnblwiKSksYj1ifHx0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcImp1c3RpZnlDZW50ZXJcIil9fSksYShcImluZGVudFwiLHtpY29uY2xhc3M6XCJmYSBmYS1pbmRlbnRcIix0b29sdGlwdGV4dDpjLmluZGVudC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5kZW50XCIsbnVsbCl9LGFjdGl2ZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLnF1ZXJ5Rm9ybWF0QmxvY2tTdGF0ZShcImJsb2NrcXVvdGVcIil9fSksYShcIm91dGRlbnRcIix7aWNvbmNsYXNzOlwiZmEgZmEtb3V0ZGVudFwiLHRvb2x0aXB0ZXh0OmMub3V0ZGVudC50b29sdGlwLGFjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwib3V0ZGVudFwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiExfX0pLGEoXCJpdGFsaWNzXCIse2ljb25jbGFzczpcImZhIGZhLWl0YWxpY1wiLHRvb2x0aXB0ZXh0OmMuaXRhbGljLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVkaXRvcigpLndyYXBTZWxlY3Rpb24oXCJpdGFsaWNcIixudWxsKX0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkucXVlcnlDb21tYW5kU3RhdGUoXCJpdGFsaWNcIil9LGNvbW1hbmRLZXlDb2RlOjEwNX0pLGEoXCJ1bmRlcmxpbmVcIix7aWNvbmNsYXNzOlwiZmEgZmEtdW5kZXJsaW5lXCIsdG9vbHRpcHRleHQ6Yy51bmRlcmxpbmUudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcInVuZGVybGluZVwiLG51bGwpfSxhY3RpdmVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlZGl0b3IoKS5xdWVyeUNvbW1hbmRTdGF0ZShcInVuZGVybGluZVwiKX0sY29tbWFuZEtleUNvZGU6MTE3fSksYShcImNsZWFyXCIse2ljb25jbGFzczpcImZhIGZhLWJhblwiLHRvb2x0aXB0ZXh0OmMuY2xlYXIudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oYSxiKXt0aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwicmVtb3ZlRm9ybWF0XCIsbnVsbCk7dmFyIGM9YW5ndWxhci5lbGVtZW50KGQuZ2V0U2VsZWN0aW9uRWxlbWVudCgpKSxlPWZ1bmN0aW9uKGEpe2E9YW5ndWxhci5lbGVtZW50KGEpO3ZhciBiPWE7YW5ndWxhci5mb3JFYWNoKGEuY2hpbGRyZW4oKSxmdW5jdGlvbihhKXt2YXIgYz1hbmd1bGFyLmVsZW1lbnQoXCI8cD48L3A+XCIpO2MuaHRtbChhbmd1bGFyLmVsZW1lbnQoYSkuaHRtbCgpKSxiLmFmdGVyKGMpLGI9Y30pLGEucmVtb3ZlKCl9O2FuZ3VsYXIuZm9yRWFjaChjLmZpbmQoXCJ1bFwiKSxlKSxhbmd1bGFyLmZvckVhY2goYy5maW5kKFwib2xcIiksZSk7dmFyIGY9dGhpcy4kZWRpdG9yKCksZz1mdW5jdGlvbihhKXthPWFuZ3VsYXIuZWxlbWVudChhKSxhWzBdIT09Zi5kaXNwbGF5RWxlbWVudHMudGV4dFswXSYmYS5yZW1vdmVBdHRyKFwiY2xhc3NcIiksYW5ndWxhci5mb3JFYWNoKGEuY2hpbGRyZW4oKSxnKX07YW5ndWxhci5mb3JFYWNoKGMsZyksXCJsaVwiIT09Y1swXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJlwib2xcIiE9PWNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZcInVsXCIhPT1jWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImZvcm1hdEJsb2NrXCIsXCI8cD5cIiksYigpfX0pO3ZhciBnPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbigpe2MudXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudCgpLGMuaGlkZVBvcG92ZXIoKX07YS5wcmV2ZW50RGVmYXVsdCgpLGMuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwid2lkdGhcIixcIjM3NXB4XCIpO3ZhciBlPWMuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXI7ZS5lbXB0eSgpO3ZhciBmPWFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIHN0eWxlPVwicGFkZGluZy1yaWdodDogNnB4O1wiPicpLGc9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+MTAwJSA8L2J1dHRvbj4nKTtnLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIlwifSksZCgpfSk7dmFyIGg9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+NTAlIDwvYnV0dG9uPicpO2gub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyh7d2lkdGg6XCI1MCVcIixoZWlnaHQ6XCJcIn0pLGQoKX0pO3ZhciBpPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjI1JSA8L2J1dHRvbj4nKTtpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3Moe3dpZHRoOlwiMjUlXCIsaGVpZ2h0OlwiXCJ9KSxkKCl9KTt2YXIgaj1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYmluZGV4PVwiLTFcIj5SZXNldDwvYnV0dG9uPicpO2oub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyh7d2lkdGg6XCJcIixoZWlnaHQ6XCJcIn0pLGQoKX0pLGYuYXBwZW5kKGcpLGYuYXBwZW5kKGgpLGYuYXBwZW5kKGkpLGYuYXBwZW5kKGopLGUuYXBwZW5kKGYpLGY9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCIgc3R5bGU9XCJwYWRkaW5nLXJpZ2h0OiA2cHg7XCI+Jyk7dmFyIGs9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1sZWZ0XCI+PC9pPjwvYnV0dG9uPicpO2sub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLmNzcyhcImZsb2F0XCIsXCJsZWZ0XCIpLGQoKX0pO3ZhciBsPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tcmlnaHRcIj48L2k+PC9idXR0b24+Jyk7bC5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGIuY3NzKFwiZmxvYXRcIixcInJpZ2h0XCIpLGQoKX0pO3ZhciBtPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHVuc2VsZWN0YWJsZT1cIm9uXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tanVzdGlmeVwiPjwvaT48L2J1dHRvbj4nKTttLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYi5jc3MoXCJmbG9hdFwiLFwiXCIpLGQoKX0pLGYuYXBwZW5kKGspLGYuYXBwZW5kKG0pLGYuYXBwZW5kKGwpLGUuYXBwZW5kKGYpLGY9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+Jyk7dmFyIG49YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdW5zZWxlY3RhYmxlPVwib25cIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPjwvYnV0dG9uPicpO24ub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxiLnJlbW92ZSgpLGQoKX0pLGYuYXBwZW5kKG4pLGUuYXBwZW5kKGYpLGMuc2hvd1BvcG92ZXIoYiksYy5zaG93UmVzaXplT3ZlcmxheShiKX07YShcImluc2VydEltYWdlXCIse2ljb25jbGFzczpcImZhIGZhLXBpY3R1cmUtb1wiLHRvb2x0aXB0ZXh0OmMuaW5zZXJ0SW1hZ2UudG9vbHRpcCxhY3Rpb246ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gYT1iLnByb21wdChjLmluc2VydEltYWdlLmRpYWxvZ1Byb21wdCxcImh0dHA6Ly9cIiksYSYmXCJcIiE9PWEmJlwiaHR0cDovL1wiIT09YT90aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiaW5zZXJ0SW1hZ2VcIixhLCEwKTp2b2lkIDB9LG9uRWxlbWVudFNlbGVjdDp7ZWxlbWVudDpcImltZ1wiLGFjdGlvbjpnfX0pLGEoXCJpbnNlcnRWaWRlb1wiLHtpY29uY2xhc3M6XCJmYSBmYS15b3V0dWJlLXBsYXlcIix0b29sdGlwdGV4dDpjLmluc2VydFZpZGVvLnRvb2x0aXAsYWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7aWYoYT1iLnByb21wdChjLmluc2VydFZpZGVvLmRpYWxvZ1Byb21wdCxcImh0dHA6Ly9cIiksYSYmXCJcIiE9PWEmJlwiaHR0cDovL1wiIT09YSl7dmFyIGQ9YS5tYXRjaCgvKFxcP3wmKXY9W14mXSovKTtpZihkLmxlbmd0aD4wKXt2YXIgZT1cImh0dHA6Ly93d3cueW91dHViZS5jb20vZW1iZWQvXCIrZFswXS5zdWJzdHJpbmcoMyksZj0nPGltZyBjbGFzcz1cInRhLWluc2VydC12aWRlb1wiIHRhLWluc2VydC12aWRlbz1cIicrZSsnXCIgY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIiBzcmM9XCJcIiBhbGxvd2Z1bGxzY3JlZW49XCJ0cnVlXCIgd2lkdGg9XCIzMDBcIiBmcmFtZWJvcmRlcj1cIjBcIiBoZWlnaHQ9XCIyNTBcIi8+JztyZXR1cm4gdGhpcy4kZWRpdG9yKCkud3JhcFNlbGVjdGlvbihcImluc2VydEhUTUxcIixmLCEwKX19fSxvbkVsZW1lbnRTZWxlY3Q6e2VsZW1lbnQ6XCJpbWdcIixvbmx5V2l0aEF0dHJzOltcInRhLWluc2VydC12aWRlb1wiXSxhY3Rpb246Z319KSxhKFwiaW5zZXJ0TGlua1wiLHt0b29sdGlwdGV4dDpjLmluc2VydExpbmsudG9vbHRpcCxpY29uY2xhc3M6XCJmYSBmYS1saW5rXCIsYWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGE9Yi5wcm9tcHQoYy5pbnNlcnRMaW5rLmRpYWxvZ1Byb21wdCxcImh0dHA6Ly9cIiksYSYmXCJcIiE9PWEmJlwiaHR0cDovL1wiIT09YT90aGlzLiRlZGl0b3IoKS53cmFwU2VsZWN0aW9uKFwiY3JlYXRlTGlua1wiLGEsITApOnZvaWQgMH0sYWN0aXZlU3RhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJBXCI9PT1hWzBdLnRhZ05hbWU6ITF9LG9uRWxlbWVudFNlbGVjdDp7ZWxlbWVudDpcImFcIixhY3Rpb246ZnVuY3Rpb24oYSxkLGUpe2EucHJldmVudERlZmF1bHQoKSxlLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcIndpZHRoXCIsXCI0MzVweFwiKTt2YXIgZj1lLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQ29udGFpbmVyO2YuZW1wdHkoKSxmLmNzcyhcImxpbmUtaGVpZ2h0XCIsXCIyOHB4XCIpO3ZhciBnPWFuZ3VsYXIuZWxlbWVudCgnPGEgaHJlZj1cIicrZC5hdHRyKFwiaHJlZlwiKSsnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JytkLmF0dHIoXCJocmVmXCIpK1wiPC9hPlwiKTtnLmNzcyh7ZGlzcGxheTpcImlubGluZS1ibG9ja1wiLFwibWF4LXdpZHRoXCI6XCIyMDBweFwiLG92ZXJmbG93OlwiaGlkZGVuXCIsXCJ0ZXh0LW92ZXJmbG93XCI6XCJlbGxpcHNpc1wiLFwid2hpdGUtc3BhY2VcIjpcIm5vd3JhcFwiLFwidmVydGljYWwtYWxpZ25cIjpcIm1pZGRsZVwifSksZi5hcHBlbmQoZyk7dmFyIGg9YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIHB1bGwtcmlnaHRcIj4nKSxpPWFuZ3VsYXIuZWxlbWVudCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGJ0bi1zbWFsbFwiIHRhYmluZGV4PVwiLTFcIiB1bnNlbGVjdGFibGU9XCJvblwiPjxpIGNsYXNzPVwiZmEgZmEtZWRpdCBpY29uLWVkaXRcIj48L2k+PC9idXR0b24+Jyk7aS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBmPWIucHJvbXB0KGMuaW5zZXJ0TGluay5kaWFsb2dQcm9tcHQsZC5hdHRyKFwiaHJlZlwiKSk7ZiYmXCJcIiE9PWYmJlwiaHR0cDovL1wiIT09ZiYmKGQuYXR0cihcImhyZWZcIixmKSxlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSksZS5oaWRlUG9wb3ZlcigpfSksaC5hcHBlbmQoaSk7dmFyIGo9YW5ndWxhci5lbGVtZW50KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gYnRuLXNtYWxsXCIgdGFiaW5kZXg9XCItMVwiIHVuc2VsZWN0YWJsZT1cIm9uXCI+PGkgY2xhc3M9XCJmYSBmYS11bmxpbmsgaWNvbi11bmxpbmtcIj48L2k+PC9idXR0b24+Jyk7ai5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGQucmVwbGFjZVdpdGgoZC5jb250ZW50cygpKSxlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKSxlLmhpZGVQb3BvdmVyKCl9KSxoLmFwcGVuZChqKTt2YXIgaz1hbmd1bGFyLmVsZW1lbnQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBidG4tc21hbGxcIiB0YWJpbmRleD1cIi0xXCIgdW5zZWxlY3RhYmxlPVwib25cIj5PcGVuIGluIE5ldyBXaW5kb3c8L2J1dHRvbj4nKTtcIl9ibGFua1wiPT09ZC5hdHRyKFwidGFyZ2V0XCIpJiZrLmFkZENsYXNzKFwiYWN0aXZlXCIpLGsub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSxkLmF0dHIoXCJ0YXJnZXRcIixcIl9ibGFua1wiPT09ZC5hdHRyKFwidGFyZ2V0XCIpP1wiXCI6XCJfYmxhbmtcIiksay50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSxlLnVwZGF0ZVRhQmluZHRhVGV4dEVsZW1lbnQoKX0pLGguYXBwZW5kKGspLGYuYXBwZW5kKGgpLGUuc2hvd1BvcG92ZXIoZCl9fX0pfV0pLGZ1bmN0aW9uKCl7XCJVc2UgU3RyaWN0XCI7ZnVuY3Rpb24gYShhKXt0cnl7cmV0dXJuIDAhPT1hbmd1bGFyLmVsZW1lbnQoYSkubGVuZ3RofWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBiKGEsYyl7dmFyIGQ9W10sZT1hLmNoaWxkcmVuKCk7cmV0dXJuIGUubGVuZ3RoJiZhbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihhKXtkPWQuY29uY2F0KGIoYW5ndWxhci5lbGVtZW50KGEpLGMpKX0pLHZvaWQgMCE9PWEuYXR0cihjKSYmZC5wdXNoKGEpLGR9ZnVuY3Rpb24gYyhiLGMpe2lmKCFifHxcIlwiPT09Ynx8bi5oYXNPd25Qcm9wZXJ0eShiKSl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEEgdW5pcXVlIG5hbWUgaXMgcmVxdWlyZWQgZm9yIGEgVG9vbCBEZWZpbml0aW9uXCI7aWYoYy5kaXNwbGF5JiYoXCJcIj09PWMuZGlzcGxheXx8IWEoYy5kaXNwbGF5KSl8fCFjLmRpc3BsYXkmJiFjLmJ1dHRvbnRleHQmJiFjLmljb25jbGFzcyl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogVG9vbCBEZWZpbml0aW9uIGZvciBcIicrYisnXCIgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIGRpc3BsYXkvaWNvbmNsYXNzL2J1dHRvbnRleHQgdmFsdWUnO25bYl09Y312YXIgZD0hMTsvQXBwbGVXZWJLaXRcXC8oW1xcZC5dKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCkmJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe3ZhciBhPXdpbmRvdy5ldmVudC50YXJnZXQ7aWYoZCYmbnVsbCE9PWEpe2Zvcih2YXIgYj0hMSxjPWE7bnVsbCE9PWMmJlwiaHRtbFwiIT09Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJiFiOyliPVwidHJ1ZVwiPT09Yy5jb250ZW50RWRpdGFibGUsYz1jLnBhcmVudE5vZGU7Ynx8KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dEFuZ3VsYXItZWRpdGFibGVGaXgtMDEwMjAzMDQwNTA2MDcwODA5XCIpLnNldFNlbGVjdGlvblJhbmdlKDAsMCksYS5mb2N1cygpKX1kPSExfSwhMSksYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2FuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KS5hcHBlbmQoYW5ndWxhci5lbGVtZW50KCc8aW5wdXQgaWQ9XCJ0ZXh0QW5ndWxhci1lZGl0YWJsZUZpeC0wMTAyMDMwNDA1MDYwNzA4MDlcIiBzdHlsZT1cIndpZHRoOjFweDtoZWlnaHQ6MXB4O2JvcmRlcjpub25lO21hcmdpbjowO3BhZGRpbmc6MDtwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOiAtMTAwMDA7IGxlZnQ6IC0xMDAwMDtcIiB1bnNlbGVjdGFibGU9XCJvblwiIHRhYkluZGV4PVwiLTFcIj4nKSl9KSk7dmFyIGU9ZnVuY3Rpb24oKXt2YXIgYSxiPS0xLGM9d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQsZD1jLmluZGV4T2YoXCJNU0lFIFwiKSxlPWMuaW5kZXhPZihcIlRyaWRlbnQvXCIpO2lmKGQ+MCliPXBhcnNlSW50KGMuc3Vic3RyaW5nKGQrNSxjLmluZGV4T2YoXCIuXCIsZCkpLDEwKTtlbHNlIGlmKGU+MCl7dmFyIGY9Yy5pbmRleE9mKFwicnY6XCIpO2I9cGFyc2VJbnQoYy5zdWJzdHJpbmcoZiszLGMuaW5kZXhPZihcIi5cIixmKSksMTApfXJldHVybiBiPi0xP2I6YX0oKTtcImZ1bmN0aW9uXCIhPXR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnRyaW0mJihTdHJpbmcucHJvdG90eXBlLnRyaW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzXFxzKi8sXCJcIikucmVwbGFjZSgvXFxzXFxzKiQvLFwiXCIpfSk7dmFyIGYsZyxoLGksajtpZihlPjh8fHZvaWQgMD09PWUpe3ZhciBrPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO3JldHVybi9BcHBsZVdlYktpdFxcLyhbXFxkLl0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSYmYS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKSksZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUoYSxkb2N1bWVudC5oZWFkLmZpcnN0Q2hpbGQpLGEuc2hlZXR9KCk7Zj1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtyZXR1cm4vQXBwbGVXZWJLaXRcXC8oW1xcZC5dKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCkmJmEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIikpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSksYS5zaGVldH0oKSxnPWZ1bmN0aW9uKGEsYil7aShmLGEsYil9LGk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhLnJ1bGVzP2Q9TWF0aC5tYXgoYS5ydWxlcy5sZW5ndGgtMSwwKTphLmNzc1J1bGVzJiYoZD1NYXRoLm1heChhLmNzc1J1bGVzLmxlbmd0aC0xLDApKSxhLmluc2VydFJ1bGU/YS5pbnNlcnRSdWxlKGIrXCJ7XCIrYytcIn1cIixkKTphLmFkZFJ1bGUoYixjLGQpLGR9LGg9ZnVuY3Rpb24oYSl7aihmLGEpfSxqPWZ1bmN0aW9uKGEsYil7YS5yZW1vdmVSdWxlP2EucmVtb3ZlUnVsZShiKTphLmRlbGV0ZVJ1bGUoYil9LGkoayxcIi50YS1zY3JvbGwtd2luZG93LmZvcm0tY29udHJvbFwiLFwiaGVpZ2h0OiBhdXRvOyBtaW4taGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3c6IGF1dG87IGZvbnQtZmFtaWx5OiBpbmhlcml0OyBmb250LXNpemU6IDEwMCU7IHBvc2l0aW9uOiByZWxhdGl2ZTsgcGFkZGluZzogMDtcIiksaShrLFwiLnRhLXJvb3QuZm9jdXNzZWQgLnRhLXNjcm9sbC13aW5kb3cuZm9ybS1jb250cm9sXCIsXCJib3JkZXItY29sb3I6ICM2NmFmZTk7IG91dGxpbmU6IDA7IC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgOHB4IHJnYmEoMTAyLCAxNzUsIDIzMywgMC42KTtcIiksaShrLFwiLnRhLWVkaXRvci50YS1odG1sXCIsXCJtaW4taGVpZ2h0OiAzMDBweDsgaGVpZ2h0OiBhdXRvOyBvdmVyZmxvdzogYXV0bzsgZm9udC1mYW1pbHk6IGluaGVyaXQ7IGZvbnQtc2l6ZTogMTAwJTtcIiksaShrLFwiLnRhLXNjcm9sbC13aW5kb3cgPiAudGEtYmluZFwiLFwiaGVpZ2h0OiBhdXRvOyBtaW4taGVpZ2h0OiAzMDBweDsgcGFkZGluZzogNnB4IDEycHg7XCIpLGkoayxcIi50YS1yb290IC50YS1yZXNpemVyLWhhbmRsZS1vdmVybGF5XCIsXCJ6LWluZGV4OiAxMDA7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgZGlzcGxheTogbm9uZTtcIiksaShrLFwiLnRhLXJvb3QgLnRhLXJlc2l6ZXItaGFuZGxlLW92ZXJsYXkgPiAudGEtcmVzaXplci1oYW5kbGUtaW5mb1wiLFwicG9zaXRpb246IGFic29sdXRlOyBib3R0b206IDE2cHg7IHJpZ2h0OiAxNnB4OyBib3JkZXI6IDFweCBzb2xpZCBibGFjazsgYmFja2dyb3VuZC1jb2xvcjogI0ZGRjsgcGFkZGluZzogMCA0cHg7IG9wYWNpdHk6IDAuNztcIiksaShrLFwiLnRhLXJvb3QgLnRhLXJlc2l6ZXItaGFuZGxlLW92ZXJsYXkgPiAudGEtcmVzaXplci1oYW5kbGUtYmFja2dyb3VuZFwiLFwicG9zaXRpb246IGFic29sdXRlOyBib3R0b206IDVweDsgcmlnaHQ6IDVweDsgbGVmdDogNXB4OyB0b3A6IDVweDsgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7IGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTtcIiksaShrLFwiLnRhLXJvb3QgLnRhLXJlc2l6ZXItaGFuZGxlLW92ZXJsYXkgPiAudGEtcmVzaXplci1oYW5kbGUtY29ybmVyXCIsXCJ3aWR0aDogMTBweDsgaGVpZ2h0OiAxMHB4OyBwb3NpdGlvbjogYWJzb2x1dGU7XCIpLGkoayxcIi50YS1yb290IC50YS1yZXNpemVyLWhhbmRsZS1vdmVybGF5ID4gLnRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lci10bFwiLFwidG9wOiAwOyBsZWZ0OiAwOyBib3JkZXItbGVmdDogMXB4IHNvbGlkIGJsYWNrOyBib3JkZXItdG9wOiAxcHggc29saWQgYmxhY2s7XCIpLGkoayxcIi50YS1yb290IC50YS1yZXNpemVyLWhhbmRsZS1vdmVybGF5ID4gLnRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lci10clwiLFwidG9wOiAwOyByaWdodDogMDsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgYmxhY2s7IGJvcmRlci10b3A6IDFweCBzb2xpZCBibGFjaztcIiksaShrLFwiLnRhLXJvb3QgLnRhLXJlc2l6ZXItaGFuZGxlLW92ZXJsYXkgPiAudGEtcmVzaXplci1oYW5kbGUtY29ybmVyLWJsXCIsXCJib3R0b206IDA7IGxlZnQ6IDA7IGJvcmRlci1sZWZ0OiAxcHggc29saWQgYmxhY2s7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBibGFjaztcIiksaShrLFwiLnRhLXJvb3QgLnRhLXJlc2l6ZXItaGFuZGxlLW92ZXJsYXkgPiAudGEtcmVzaXplci1oYW5kbGUtY29ybmVyLWJyXCIsXCJib3R0b206IDA7IHJpZ2h0OiAwOyBib3JkZXI6IDFweCBzb2xpZCBibGFjazsgY3Vyc29yOiBzZS1yZXNpemU7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1wiKX12YXIgbD0hMSxtPWFuZ3VsYXIubW9kdWxlKFwidGV4dEFuZ3VsYXJcIixbXCJuZ1Nhbml0aXplXCIsXCJ0ZXh0QW5ndWxhclNldHVwXCJdKSxuPXt9O20uY29uc3RhbnQoXCJ0YVJlZ2lzdGVyVG9vbFwiLGMpLG0udmFsdWUoXCJ0YVRvb2xzXCIsbiksbS5jb25maWcoW2Z1bmN0aW9uKCl7YW5ndWxhci5mb3JFYWNoKG4sZnVuY3Rpb24oYSxiKXtkZWxldGUgbltiXX0pfV0pLG0uZGlyZWN0aXZlKFwidGV4dEFuZ3VsYXJcIixbXCIkY29tcGlsZVwiLFwiJHRpbWVvdXRcIixcInRhT3B0aW9uc1wiLFwidGFTZWxlY3Rpb25cIixcInRhRXhlY0NvbW1hbmRcIixcInRleHRBbmd1bGFyTWFuYWdlclwiLFwiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsXCIkYW5pbWF0ZVwiLFwiJGxvZ1wiLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpLGope3JldHVybntyZXF1aXJlOlwiP25nTW9kZWxcIixzY29wZTp7fSxyZXN0cmljdDpcIkVBXCIsbGluazpmdW5jdGlvbihrLGwsbSxuKXt2YXIgbyxwLHEscixzLHQsdSx2LHcseD1tLnNlcmlhbD9tLnNlcmlhbDpNYXRoLmZsb29yKDFlMTYqTWF0aC5yYW5kb20oKSkseT1tLm5hbWU/bS5uYW1lOlwidGV4dEFuZ3VsYXJFZGl0b3JcIit4LHo9ZnVuY3Rpb24oYSxjLGQpe2IoZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbigpe2Eub2ZmKGMsYiksZCgpfTthLm9uKGMsYil9LDEwMCl9O3c9ZShtLnRhRGVmYXVsdFdyYXApLGFuZ3VsYXIuZXh0ZW5kKGssYW5ndWxhci5jb3B5KGMpLHt3cmFwU2VsZWN0aW9uOmZ1bmN0aW9uKGEsYixjKXt3KGEsITEsYiksYyYma1tcInJlQXBwbHlPblNlbGVjdG9ySGFuZGxlcnN0YVRleHRFbGVtZW50XCIreF0oKSxrLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdLmZvY3VzKCl9LHNob3dIdG1sOiExfSksbS50YUZvY3Vzc2VkQ2xhc3MmJihrLmNsYXNzZXMuZm9jdXNzZWQ9bS50YUZvY3Vzc2VkQ2xhc3MpLG0udGFUZXh0RWRpdG9yQ2xhc3MmJihrLmNsYXNzZXMudGV4dEVkaXRvcj1tLnRhVGV4dEVkaXRvckNsYXNzKSxtLnRhSHRtbEVkaXRvckNsYXNzJiYoay5jbGFzc2VzLmh0bWxFZGl0b3I9bS50YUh0bWxFZGl0b3JDbGFzcyksbS50YVRleHRFZGl0b3JTZXR1cCYmKGsuc2V0dXAudGV4dEVkaXRvclNldHVwPWsuJHBhcmVudC4kZXZhbChtLnRhVGV4dEVkaXRvclNldHVwKSksbS50YUh0bWxFZGl0b3JTZXR1cCYmKGsuc2V0dXAuaHRtbEVkaXRvclNldHVwPWsuJHBhcmVudC4kZXZhbChtLnRhSHRtbEVkaXRvclNldHVwKSksay5maWxlRHJvcEhhbmRsZXI9bS50YUZpbGVEcm9wP2suJHBhcmVudC4kZXZhbChtLnRhRmlsZURyb3ApOmsuZGVmYXVsdEZpbGVEcm9wSGFuZGxlcix1PWxbMF0uaW5uZXJIVE1MLGxbMF0uaW5uZXJIVE1MPVwiXCIsay5kaXNwbGF5RWxlbWVudHM9e2Zvcm1pbnB1dDphbmd1bGFyLmVsZW1lbnQoXCI8aW5wdXQgdHlwZT0naGlkZGVuJyB0YWJpbmRleD0nLTEnIHN0eWxlPSdkaXNwbGF5OiBub25lOyc+XCIpLGh0bWw6YW5ndWxhci5lbGVtZW50KFwiPHRleHRhcmVhPjwvdGV4dGFyZWE+XCIpLHRleHQ6YW5ndWxhci5lbGVtZW50KFwiPGRpdj48L2Rpdj5cIiksc2Nyb2xsV2luZG93OmFuZ3VsYXIuZWxlbWVudChcIjxkaXYgY2xhc3M9J3RhLXNjcm9sbC13aW5kb3cnPjwvZGl2PlwiKSxwb3BvdmVyOmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInBvcG92ZXIgZmFkZSBib3R0b21cIiBzdHlsZT1cIm1heC13aWR0aDogbm9uZTsgd2lkdGg6IDMwNXB4O1wiPjwvZGl2PicpLHBvcG92ZXJBcnJvdzphbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PicpLHBvcG92ZXJDb250YWluZXI6YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCI+PC9kaXY+JykscmVzaXplOntvdmVybGF5OmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLW92ZXJsYXlcIj48L2Rpdj4nKSxiYWNrZ3JvdW5kOmFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWJhY2tncm91bmRcIj48L2Rpdj4nKSxhbmNob3JzOlthbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXIgdGEtcmVzaXplci1oYW5kbGUtY29ybmVyLXRsXCI+PC9kaXY+JyksYW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtY29ybmVyIHRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lci10clwiPjwvZGl2PicpLGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInRhLXJlc2l6ZXItaGFuZGxlLWNvcm5lciB0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXItYmxcIj48L2Rpdj4nKSxhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJ0YS1yZXNpemVyLWhhbmRsZS1jb3JuZXIgdGEtcmVzaXplci1oYW5kbGUtY29ybmVyLWJyXCI+PC9kaXY+JyldLGluZm86YW5ndWxhci5lbGVtZW50KCc8ZGl2IGNsYXNzPVwidGEtcmVzaXplci1oYW5kbGUtaW5mb1wiPjwvZGl2PicpfX0say5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5hcHBlbmQoay5kaXNwbGF5RWxlbWVudHMucG9wb3ZlckFycm93KSxrLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmFwcGVuZChrLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQ29udGFpbmVyKSxrLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3cuYXBwZW5kKGsuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIpLGsuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhLGIpe3JldHVybiBiJiZhbmd1bGFyLmV4dGVuZChhLGIpLGEucHJldmVudERlZmF1bHQoKSwhMX0pLGsuc2hvd1BvcG92ZXI9ZnVuY3Rpb24oYSl7ay5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxrLnJlZmxvd1BvcG92ZXIoYSksaS5hZGRDbGFzcyhrLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLFwiaW5cIikseihsLFwiY2xpY2sga2V5dXBcIixmdW5jdGlvbigpe2suaGlkZVBvcG92ZXIoKX0pfSxrLnJlZmxvd1BvcG92ZXI9ZnVuY3Rpb24oYSl7ay5kaXNwbGF5RWxlbWVudHMudGV4dFswXS5vZmZzZXRIZWlnaHQtNTE+YVswXS5vZmZzZXRUb3A/KGsuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwidG9wXCIsYVswXS5vZmZzZXRUb3ArYVswXS5vZmZzZXRIZWlnaHQrXCJweFwiKSxrLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLnJlbW92ZUNsYXNzKFwidG9wXCIpLmFkZENsYXNzKFwiYm90dG9tXCIpKTooay5kaXNwbGF5RWxlbWVudHMucG9wb3Zlci5jc3MoXCJ0b3BcIixhWzBdLm9mZnNldFRvcC01NCtcInB4XCIpLGsuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIucmVtb3ZlQ2xhc3MoXCJib3R0b21cIikuYWRkQ2xhc3MoXCJ0b3BcIikpO3ZhciBiPWsuZGlzcGxheUVsZW1lbnRzLnRleHRbMF0ub2Zmc2V0V2lkdGgtay5kaXNwbGF5RWxlbWVudHMucG9wb3ZlclswXS5vZmZzZXRXaWR0aCxjPWFbMF0ub2Zmc2V0TGVmdCthWzBdLm9mZnNldFdpZHRoLzItay5kaXNwbGF5RWxlbWVudHMucG9wb3ZlclswXS5vZmZzZXRXaWR0aC8yO2suZGlzcGxheUVsZW1lbnRzLnBvcG92ZXIuY3NzKFwibGVmdFwiLE1hdGgubWF4KDAsTWF0aC5taW4oYixjKSkrXCJweFwiKSxrLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQXJyb3cuY3NzKFwibWFyZ2luLWxlZnRcIixNYXRoLm1pbihjLE1hdGgubWF4KDAsYy1iKSktMTErXCJweFwiKX0say5oaWRlUG9wb3Zlcj1mdW5jdGlvbigpe2kucmVtb3ZlQ2xhc3Moay5kaXNwbGF5RWxlbWVudHMucG9wb3ZlcixcImluXCIsZnVuY3Rpb24oKXtrLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyLmNzcyhcImRpc3BsYXlcIixcIlwiKSxrLmRpc3BsYXlFbGVtZW50cy5wb3BvdmVyQ29udGFpbmVyLmF0dHIoXCJzdHlsZVwiLFwiXCIpLGsuZGlzcGxheUVsZW1lbnRzLnBvcG92ZXJDb250YWluZXIuYXR0cihcImNsYXNzXCIsXCJwb3BvdmVyLWNvbnRlbnRcIil9KX0say5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkuYXBwZW5kKGsuZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5iYWNrZ3JvdW5kKSxhbmd1bGFyLmZvckVhY2goay5kaXNwbGF5RWxlbWVudHMucmVzaXplLmFuY2hvcnMsZnVuY3Rpb24oYSl7ay5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkuYXBwZW5kKGEpfSksay5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkuYXBwZW5kKGsuZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5pbmZvKSxrLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3cuYXBwZW5kKGsuZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5vdmVybGF5KSxrLnJlZmxvd1Jlc2l6ZU92ZXJsYXk9ZnVuY3Rpb24oYSl7YT1hbmd1bGFyLmVsZW1lbnQoYSlbMF0say5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIixsZWZ0OmEub2Zmc2V0TGVmdC01K1wicHhcIix0b3A6YS5vZmZzZXRUb3AtNStcInB4XCIsd2lkdGg6YS5vZmZzZXRXaWR0aCsxMCtcInB4XCIsaGVpZ2h0OmEub2Zmc2V0SGVpZ2h0KzEwK1wicHhcIn0pLGsuZGlzcGxheUVsZW1lbnRzLnJlc2l6ZS5pbmZvLnRleHQoYS5vZmZzZXRXaWR0aCtcIiB4IFwiK2Eub2Zmc2V0SGVpZ2h0KX0say5zaG93UmVzaXplT3ZlcmxheT1mdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbihiKXt2YXIgYz17d2lkdGg6cGFyc2VJbnQoYS5hdHRyKFwid2lkdGhcIikpLGhlaWdodDpwYXJzZUludChhLmF0dHIoXCJoZWlnaHRcIikpLHg6Yi5jbGllbnRYLHk6Yi5jbGllbnRZfTt2b2lkIDA9PT1jLndpZHRoJiYoYy53aWR0aD1hWzBdLm9mZnNldFdpZHRoKSx2b2lkIDA9PT1jLmhlaWdodCYmKGMuaGVpZ2h0PWFbMF0ub2Zmc2V0SGVpZ2h0KSxrLmhpZGVQb3BvdmVyKCk7dmFyIGQ9Yy5oZWlnaHQvYy53aWR0aCxlPWZ1bmN0aW9uKGIpe3ZhciBlPXt4Ok1hdGgubWF4KDAsYy53aWR0aCsoYi5jbGllbnRYLWMueCkpLHk6TWF0aC5tYXgoMCxjLmhlaWdodCsoYi5jbGllbnRZLWMueSkpfSxmPWZ1bmN0aW9uKGEsYil7YT1hbmd1bGFyLmVsZW1lbnQoYSksXCJpbWdcIj09PWFbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoYi5oZWlnaHQmJihhLmF0dHIoXCJoZWlnaHRcIixiLmhlaWdodCksZGVsZXRlIGIuaGVpZ2h0KSxiLndpZHRoJiYoYS5hdHRyKFwid2lkdGhcIixiLndpZHRoKSxkZWxldGUgYi53aWR0aCkpLGEuY3NzKGIpfTtpZihiLnNoaWZ0S2V5KXt2YXIgZz1lLnkvZS54O2YoYSx7d2lkdGg6ZD5nP2UueDplLnkvZCxoZWlnaHQ6ZD5nP2UueCpkOmUueX0pfWVsc2UgZihhLHt3aWR0aDplLngsaGVpZ2h0OmUueX0pO2sucmVmbG93UmVzaXplT3ZlcmxheShhKX07aC5maW5kKFwiYm9keVwiKS5vbihcIm1vdXNlbW92ZVwiLGUpLHooay5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXksXCJtb3VzZXVwXCIsZnVuY3Rpb24oKXtoLmZpbmQoXCJib2R5XCIpLm9mZihcIm1vdXNlbW92ZVwiLGUpLGsuc2hvd1BvcG92ZXIoYSl9KSxiLnN0b3BQcm9wYWdhdGlvbigpLGIucHJldmVudERlZmF1bHQoKX07ay5kaXNwbGF5RWxlbWVudHMucmVzaXplLmFuY2hvcnNbM10ub24oXCJtb3VzZWRvd25cIixiKSxrLnJlZmxvd1Jlc2l6ZU92ZXJsYXkoYSkseihsLFwiY2xpY2tcIixmdW5jdGlvbigpe2suaGlkZVJlc2l6ZU92ZXJsYXkoKX0pfSxrLmhpZGVSZXNpemVPdmVybGF5PWZ1bmN0aW9uKCl7ay5kaXNwbGF5RWxlbWVudHMucmVzaXplLm92ZXJsYXkuY3NzKFwiZGlzcGxheVwiLFwiXCIpfSxrLnNldHVwLmh0bWxFZGl0b3JTZXR1cChrLmRpc3BsYXlFbGVtZW50cy5odG1sKSxrLnNldHVwLnRleHRFZGl0b3JTZXR1cChrLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxrLmRpc3BsYXlFbGVtZW50cy5odG1sLmF0dHIoe2lkOlwidGFIdG1sRWxlbWVudFwiK3gsXCJuZy1zaG93XCI6XCJzaG93SHRtbFwiLFwidGEtYmluZFwiOlwidGEtYmluZFwiLFwibmctbW9kZWxcIjpcImh0bWxcIn0pLGsuZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cih7aWQ6XCJ0YVRleHRFbGVtZW50XCIreCxjb250ZW50RWRpdGFibGU6XCJ0cnVlXCIsXCJ0YS1iaW5kXCI6XCJ0YS1iaW5kXCIsXCJuZy1tb2RlbFwiOlwiaHRtbFwifSksay5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmF0dHIoe1wibmctaGlkZVwiOlwic2hvd0h0bWxcIn0pLG0udGFEZWZhdWx0V3JhcCYmay5kaXNwbGF5RWxlbWVudHMudGV4dC5hdHRyKFwidGEtZGVmYXVsdC13cmFwXCIsbS50YURlZmF1bHRXcmFwKSxtLnRhVW5zYWZlU2FuaXRpemVyJiYoay5kaXNwbGF5RWxlbWVudHMudGV4dC5hdHRyKFwidGEtdW5zYWZlLXNhbml0aXplclwiLG0udGFVbnNhZmVTYW5pdGl6ZXIpLGsuZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInRhLXVuc2FmZS1zYW5pdGl6ZXJcIixtLnRhVW5zYWZlU2FuaXRpemVyKSksay5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmFwcGVuZChrLmRpc3BsYXlFbGVtZW50cy50ZXh0KSxsLmFwcGVuZChrLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3cpLGwuYXBwZW5kKGsuZGlzcGxheUVsZW1lbnRzLmh0bWwpLGsuZGlzcGxheUVsZW1lbnRzLmZvcm1pbnB1dC5hdHRyKFwibmFtZVwiLHkpLGwuYXBwZW5kKGsuZGlzcGxheUVsZW1lbnRzLmZvcm1pbnB1dCksbS50YWJpbmRleCYmKGwucmVtb3ZlQXR0cihcInRhYmluZGV4XCIpLGsuZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInRhYmluZGV4XCIsbS50YWJpbmRleCksay5kaXNwbGF5RWxlbWVudHMuaHRtbC5hdHRyKFwidGFiaW5kZXhcIixtLnRhYmluZGV4KSksbS5wbGFjZWhvbGRlciYmKGsuZGlzcGxheUVsZW1lbnRzLnRleHQuYXR0cihcInBsYWNlaG9sZGVyXCIsbS5wbGFjZWhvbGRlciksay5kaXNwbGF5RWxlbWVudHMuaHRtbC5hdHRyKFwicGxhY2Vob2xkZXJcIixtLnBsYWNlaG9sZGVyKSksbS50YURpc2FibGVkJiYoay5kaXNwbGF5RWxlbWVudHMudGV4dC5hdHRyKFwidGEtcmVhZG9ubHlcIixcImRpc2FibGVkXCIpLGsuZGlzcGxheUVsZW1lbnRzLmh0bWwuYXR0cihcInRhLXJlYWRvbmx5XCIsXCJkaXNhYmxlZFwiKSxrLmRpc2FibGVkPWsuJHBhcmVudC4kZXZhbChtLnRhRGlzYWJsZWQpLGsuJHBhcmVudC4kd2F0Y2gobS50YURpc2FibGVkLGZ1bmN0aW9uKGEpe2suZGlzYWJsZWQ9YSxrLmRpc2FibGVkP2wuYWRkQ2xhc3Moay5jbGFzc2VzLmRpc2FibGVkKTpsLnJlbW92ZUNsYXNzKGsuY2xhc3Nlcy5kaXNhYmxlZCl9KSksYShrLmRpc3BsYXlFbGVtZW50cy5zY3JvbGxXaW5kb3cpKGspLGEoay5kaXNwbGF5RWxlbWVudHMuaHRtbCkoayksay51cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50PWtbXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIreF0say51cGRhdGVUYUJpbmR0YUh0bWxFbGVtZW50PWtbXCJ1cGRhdGVUYUJpbmR0YUh0bWxFbGVtZW50XCIreF0sbC5hZGRDbGFzcyhcInRhLXJvb3RcIiksay5kaXNwbGF5RWxlbWVudHMuc2Nyb2xsV2luZG93LmFkZENsYXNzKFwidGEtdGV4dCB0YS1lZGl0b3IgXCIray5jbGFzc2VzLnRleHRFZGl0b3IpLGsuZGlzcGxheUVsZW1lbnRzLmh0bWwuYWRkQ2xhc3MoXCJ0YS1odG1sIHRhLWVkaXRvciBcIitrLmNsYXNzZXMuaHRtbEVkaXRvciksay5fYWN0aW9uUnVubmluZz0hMTt2YXIgQT0hMTtpZihrLnN0YXJ0QWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGsuX2FjdGlvblJ1bm5pbmc9ITAsZy5yYW5neSYmZy5yYW5neS5zYXZlU2VsZWN0aW9uPyhBPWcucmFuZ3kuc2F2ZVNlbGVjdGlvbigpLGZ1bmN0aW9uKCl7QSYmZy5yYW5neS5yZXN0b3JlU2VsZWN0aW9uKEEpfSk6dm9pZCAwfSxrLmVuZEFjdGlvbj1mdW5jdGlvbigpe2suX2FjdGlvblJ1bm5pbmc9ITEsQSYmZy5yYW5neS5yZW1vdmVNYXJrZXJzKEEpLEE9ITEsay51cGRhdGVTZWxlY3RlZFN0eWxlcygpLGsuc2hvd0h0bWx8fGtbXCJ1cGRhdGVUYUJpbmR0YVRleHRFbGVtZW50XCIreF0oKX0scz1mdW5jdGlvbigpe2wuYWRkQ2xhc3Moay5jbGFzc2VzLmZvY3Vzc2VkKSx2LmZvY3VzKCl9LGsuZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJmb2N1c1wiLHMpLGsuZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJmb2N1c1wiLHMpLHQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGsuX2FjdGlvblJ1bm5pbmd8fGhbMF0uYWN0aXZlRWxlbWVudD09PWsuZGlzcGxheUVsZW1lbnRzLmh0bWxbMF18fGhbMF0uYWN0aXZlRWxlbWVudD09PWsuZGlzcGxheUVsZW1lbnRzLnRleHRbMF18fChsLnJlbW92ZUNsYXNzKGsuY2xhc3Nlcy5mb2N1c3NlZCksdi51bmZvY3VzKCksYihmdW5jdGlvbigpe2wudHJpZ2dlckhhbmRsZXIoXCJibHVyXCIpfSwwKSksYS5wcmV2ZW50RGVmYXVsdCgpLCExfSxrLmRpc3BsYXlFbGVtZW50cy5odG1sLm9uKFwiYmx1clwiLHQpLGsuZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJibHVyXCIsdCksay5xdWVyeUZvcm1hdEJsb2NrU3RhdGU9ZnVuY3Rpb24oYSl7cmV0dXJuIWsuc2hvd0h0bWwmJmEudG9Mb3dlckNhc2UoKT09PWhbMF0ucXVlcnlDb21tYW5kVmFsdWUoXCJmb3JtYXRCbG9ja1wiKS50b0xvd2VyQ2FzZSgpfSxrLnF1ZXJ5Q29tbWFuZFN0YXRlPWZ1bmN0aW9uKGEpe3JldHVybiBrLnNob3dIdG1sP1wiXCI6aFswXS5xdWVyeUNvbW1hbmRTdGF0ZShhKX0say5zd2l0Y2hWaWV3PWZ1bmN0aW9uKCl7ay5zaG93SHRtbD0hay5zaG93SHRtbCxrLnNob3dIdG1sP2IoZnVuY3Rpb24oKXtyZXR1cm4gay5kaXNwbGF5RWxlbWVudHMuaHRtbFswXS5mb2N1cygpfSwxMDApOmIoZnVuY3Rpb24oKXtyZXR1cm4gay5kaXNwbGF5RWxlbWVudHMudGV4dFswXS5mb2N1cygpfSwxMDApfSxtLm5nTW9kZWwpe3ZhciBCPSEwO24uJHJlbmRlcj1mdW5jdGlvbigpe2lmKEIpe0I9ITE7dmFyIGE9ay4kcGFyZW50LiRldmFsKG0ubmdNb2RlbCk7dm9pZCAwIT09YSYmbnVsbCE9PWF8fCF1fHxcIlwiPT09dXx8bi4kc2V0Vmlld1ZhbHVlKHUpfWsuZGlzcGxheUVsZW1lbnRzLmZvcm1pbnB1dC52YWwobi4kdmlld1ZhbHVlKSxrLl9lbGVtZW50U2VsZWN0VHJpZ2dlcmVkfHxoWzBdLmFjdGl2ZUVsZW1lbnQ9PT1rLmRpc3BsYXlFbGVtZW50cy5odG1sWzBdfHxoWzBdLmFjdGl2ZUVsZW1lbnQ9PT1rLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdfHwoay5odG1sPW4uJHZpZXdWYWx1ZXx8XCJcIil9O3ZhciBDPWZ1bmN0aW9uKGEpe3JldHVybiBtLnJlcXVpcmVkJiZuLiRzZXRWYWxpZGl0eShcInJlcXVpcmVkXCIsISghYXx8XCJcIj09PWEudHJpbSgpKSksYX07bi4kcGFyc2Vycy5wdXNoKEMpLG4uJGZvcm1hdHRlcnMucHVzaChDKX1lbHNlIGsuZGlzcGxheUVsZW1lbnRzLmZvcm1pbnB1dC52YWwodSksay5odG1sPXU7aWYoay4kd2F0Y2goXCJodG1sXCIsZnVuY3Rpb24oYSxiKXthIT09YiYmKG0ubmdNb2RlbCYmbi4kdmlld1ZhbHVlIT09YSYmbi4kc2V0Vmlld1ZhbHVlKGEpLGsuZGlzcGxheUVsZW1lbnRzLmZvcm1pbnB1dC52YWwoYSkpfSksbS50YVRhcmdldFRvb2xiYXJzKXY9Zi5yZWdpc3RlckVkaXRvcih5LGssbS50YVRhcmdldFRvb2xiYXJzLnNwbGl0KFwiLFwiKSk7ZWxzZXt2YXIgRD1hbmd1bGFyLmVsZW1lbnQoJzxkaXYgdGV4dC1hbmd1bGFyLXRvb2xiYXIgbmFtZT1cInRleHRBbmd1bGFyVG9vbGJhcicreCsnXCI+Jyk7bS50YVRvb2xiYXImJkQuYXR0cihcInRhLXRvb2xiYXJcIixtLnRhVG9vbGJhciksbS50YVRvb2xiYXJDbGFzcyYmRC5hdHRyKFwidGEtdG9vbGJhci1jbGFzc1wiLG0udGFUb29sYmFyQ2xhc3MpLG0udGFUb29sYmFyR3JvdXBDbGFzcyYmRC5hdHRyKFwidGEtdG9vbGJhci1ncm91cC1jbGFzc1wiLG0udGFUb29sYmFyR3JvdXBDbGFzcyksbS50YVRvb2xiYXJCdXR0b25DbGFzcyYmRC5hdHRyKFwidGEtdG9vbGJhci1idXR0b24tY2xhc3NcIixtLnRhVG9vbGJhckJ1dHRvbkNsYXNzKSxtLnRhVG9vbGJhckFjdGl2ZUJ1dHRvbkNsYXNzJiZELmF0dHIoXCJ0YS10b29sYmFyLWFjdGl2ZS1idXR0b24tY2xhc3NcIixtLnRhVG9vbGJhckFjdGl2ZUJ1dHRvbkNsYXNzKSxtLnRhRm9jdXNzZWRDbGFzcyYmRC5hdHRyKFwidGEtZm9jdXNzZWQtY2xhc3NcIixtLnRhRm9jdXNzZWRDbGFzcyksbC5wcmVwZW5kKEQpLGEoRCkoay4kcGFyZW50KSx2PWYucmVnaXN0ZXJFZGl0b3IoeSxrLFtcInRleHRBbmd1bGFyVG9vbGJhclwiK3hdKX1rLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtmLnVucmVnaXN0ZXJFZGl0b3IoeSl9KSxrLiRvbihcInRhLWVsZW1lbnQtc2VsZWN0XCIsZnVuY3Rpb24oYSxiKXt2LnRyaWdnZXJFbGVtZW50U2VsZWN0KGEsYil9KSxrLiRvbihcInRhLWRyb3AtZXZlbnRcIixmdW5jdGlvbihhLGIsYyxkKXtrLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdLmZvY3VzKCksZCYmZC5maWxlcyYmZC5maWxlcy5sZW5ndGg+MCYmKGFuZ3VsYXIuZm9yRWFjaChkLmZpbGVzLGZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gay5maWxlRHJvcEhhbmRsZXIoYSxrLndyYXBTZWxlY3Rpb24pfHxrLmZpbGVEcm9wSGFuZGxlciE9PWsuZGVmYXVsdEZpbGVEcm9wSGFuZGxlciYmay5kZWZhdWx0RmlsZURyb3BIYW5kbGVyKGEsay53cmFwU2VsZWN0aW9uKX1jYXRjaChiKXtqLmVycm9yKGIpfX0pLGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpKX0pLGsuX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMSxrLnVwZGF0ZVNlbGVjdGVkU3R5bGVzPWZ1bmN0aW9uKCl7dmFyIGE7dm9pZCAwIT09KGE9ZC5nZXRTZWxlY3Rpb25FbGVtZW50KCkpJiZhLnBhcmVudE5vZGUhPT1rLmRpc3BsYXlFbGVtZW50cy50ZXh0WzBdP3YudXBkYXRlU2VsZWN0ZWRTdHlsZXMoYW5ndWxhci5lbGVtZW50KGEpKTp2LnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCksay5fYlVwZGF0ZVNlbGVjdGVkU3R5bGVzJiZiKGsudXBkYXRlU2VsZWN0ZWRTdHlsZXMsMjAwKX0sbz1mdW5jdGlvbigpe2suX2JVcGRhdGVTZWxlY3RlZFN0eWxlc3x8KGsuX2JVcGRhdGVTZWxlY3RlZFN0eWxlcz0hMCxrLiRhcHBseShmdW5jdGlvbigpe2sudXBkYXRlU2VsZWN0ZWRTdHlsZXMoKX0pKX0say5kaXNwbGF5RWxlbWVudHMuaHRtbC5vbihcImtleWRvd25cIixvKSxrLmRpc3BsYXlFbGVtZW50cy50ZXh0Lm9uKFwia2V5ZG93blwiLG8pLHA9ZnVuY3Rpb24oKXtrLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITF9LGsuZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJrZXl1cFwiLHApLGsuZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJrZXl1cFwiLHApLHE9ZnVuY3Rpb24oYSxiKXtiJiZhbmd1bGFyLmV4dGVuZChhLGIpLGsuJGFwcGx5KGZ1bmN0aW9uKCl7cmV0dXJuIHYuc2VuZEtleUNvbW1hbmQoYSk/KGsuX2JVcGRhdGVTZWxlY3RlZFN0eWxlc3x8ay51cGRhdGVTZWxlY3RlZFN0eWxlcygpLGEucHJldmVudERlZmF1bHQoKSwhMSk6dm9pZCAwfSl9LGsuZGlzcGxheUVsZW1lbnRzLmh0bWwub24oXCJrZXlwcmVzc1wiLHEpLGsuZGlzcGxheUVsZW1lbnRzLnRleHQub24oXCJrZXlwcmVzc1wiLHEpLHI9ZnVuY3Rpb24oKXtrLl9iVXBkYXRlU2VsZWN0ZWRTdHlsZXM9ITEsay4kYXBwbHkoZnVuY3Rpb24oKXtrLnVwZGF0ZVNlbGVjdGVkU3R5bGVzKCl9KX0say5kaXNwbGF5RWxlbWVudHMuaHRtbC5vbihcIm1vdXNldXBcIixyKSxrLmRpc3BsYXlFbGVtZW50cy50ZXh0Lm9uKFwibW91c2V1cFwiLHIpfX19XSkuZmFjdG9yeShcInRhQnJvd3NlclRhZ1wiLFtmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYT9cIlwiPT09YT92b2lkIDA9PT1lP1wiZGl2XCI6OD49ZT9cIlBcIjpcInBcIjo4Pj1lP2EudG9VcHBlckNhc2UoKTphOjg+PWU/XCJQXCI6XCJwXCJ9fV0pLmZhY3RvcnkoXCJ0YUV4ZWNDb21tYW5kXCIsW1widGFTZWxlY3Rpb25cIixcInRhQnJvd3NlclRhZ1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPS9eKGFkZHJlc3N8YXJ0aWNsZXxhc2lkZXxhdWRpb3xibG9ja3F1b3RlfGNhbnZhc3xkZHxkaXZ8ZGx8ZmllbGRzZXR8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGZvcm18aDF8aDJ8aDN8aDR8aDV8aDZ8aGVhZGVyfGhncm91cHxocnxub3NjcmlwdHxvbHxvdXRwdXR8cHxwcmV8c2VjdGlvbnx0YWJsZXx0Zm9vdHx1bHx2aWRlbykkL2dpLGU9L14odWx8bGl8b2wpJC9naSxmPWZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmPWIuZmluZChcImxpXCIpO2ZvcihlPWYubGVuZ3RoLTE7ZT49MDtlLS0pZD1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrYytcIj5cIitmW2VdLmlubmVySFRNTCtcIjwvXCIrYytcIj5cIiksYi5hZnRlcihkKTtiLnJlbW92ZSgpLGEuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKGRbMF0pfSxnPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YW5ndWxhci5lbGVtZW50KFwiPFwiK2MrXCI+XCIrYlswXS5pbm5lckhUTUwrXCI8L1wiK2MrXCI+XCIpO2IuYWZ0ZXIoZCksYi5yZW1vdmUoKSxhLnNldFNlbGVjdGlvblRvRWxlbWVudEVuZChkLmZpbmQoXCJsaVwiKVswXSl9LGg9ZnVuY3Rpb24oYyxkLGUpe2Zvcih2YXIgZj1cIlwiLGc9MDtnPGMubGVuZ3RoO2crKylmKz1cIjxcIitiKFwibGlcIikrXCI+XCIrY1tnXS5pbm5lckhUTUwrXCI8L1wiK2IoXCJsaVwiKStcIj5cIjt2YXIgaD1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrZStcIj5cIitmK1wiPC9cIitlK1wiPlwiKTtkLmFmdGVyKGgpLGQucmVtb3ZlKCksYS5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQoaC5maW5kKFwibGlcIilbMF0pfTtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIGk9YihpKSxmdW5jdGlvbihqLGssbCl7dmFyIG0sbixvLHAscSxyPWFuZ3VsYXIuZWxlbWVudChcIjxcIitpK1wiPlwiKSxzPWEuZ2V0U2VsZWN0aW9uRWxlbWVudCgpLHQ9YW5ndWxhci5lbGVtZW50KHMpO2lmKHZvaWQgMCE9PXMpe3ZhciB1PXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKFwiaW5zZXJ0b3JkZXJlZGxpc3RcIj09PWoudG9Mb3dlckNhc2UoKXx8XCJpbnNlcnR1bm9yZGVyZWRsaXN0XCI9PT1qLnRvTG93ZXJDYXNlKCkpe3ZhciB2PWIoXCJpbnNlcnRvcmRlcmVkbGlzdFwiPT09ai50b0xvd2VyQ2FzZSgpP1wib2xcIjpcInVsXCIpO2lmKHU9PT12KXJldHVybiBmKHQsaSk7aWYoXCJsaVwiPT09dSYmdC5wYXJlbnQoKVswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PT12JiYxPT09dC5wYXJlbnQoKS5jaGlsZHJlbigpLmxlbmd0aClyZXR1cm4gZih0LnBhcmVudCgpLGkpO2lmKFwibGlcIj09PXUmJnQucGFyZW50KClbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09diYmMT09PXQucGFyZW50KCkuY2hpbGRyZW4oKS5sZW5ndGgpcmV0dXJuIGcodC5wYXJlbnQoKSx2KTtpZih1Lm1hdGNoKGQpJiYhdC5oYXNDbGFzcyhcInRhLWJpbmRcIikpe2lmKFwib2xcIj09PXV8fFwidWxcIj09PXUpcmV0dXJuIGcodCx2KTt2YXIgdz0hMTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKHQuY2hpbGRyZW4oKSxmdW5jdGlvbihhKXthLnRhZ05hbWUubWF0Y2goZCkmJih3PSEwKX0pLHc/aCh0LmNoaWxkcmVuKCksdCx2KTpoKFthbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PlwiK3MuaW5uZXJIVE1MK1wiPC9kaXY+XCIpWzBdXSx0LHYpfWlmKHUubWF0Y2goZCkpe2lmKHA9YS5nZXRPbmx5U2VsZWN0ZWRFbGVtZW50cygpLDE9PT1wLmxlbmd0aCYmKFwib2xcIj09PXBbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcInVsXCI9PT1wWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpcmV0dXJuIHBbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09dj9mKGFuZ3VsYXIuZWxlbWVudChwWzBdKSxpKTpnKGFuZ3VsYXIuZWxlbWVudChwWzBdKSx2KTtvPVwiXCI7dmFyIHg9W107Zm9yKG09MDttPHAubGVuZ3RoO20rKylpZigzIT09cFttXS5ub2RlVHlwZSl7dmFyIHk9YW5ndWxhci5lbGVtZW50KHBbbV0pO28rPVwiPFwiK2IoXCJsaVwiKStcIj5cIit5WzBdLmlubmVySFRNTCtcIjwvXCIrYihcImxpXCIpK1wiPlwiLHgudW5zaGlmdCh5KX1yZXR1cm4gbj1hbmd1bGFyLmVsZW1lbnQoXCI8XCIrditcIj5cIitvK1wiPC9cIit2K1wiPlwiKSx4LnBvcCgpLnJlcGxhY2VXaXRoKG4pLGFuZ3VsYXIuZm9yRWFjaCh4LGZ1bmN0aW9uKGEpe2EucmVtb3ZlKCl9KSx2b2lkIGEuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKG5bMF0pfX1lbHNlIGlmKFwiZm9ybWF0YmxvY2tcIj09PWoudG9Mb3dlckNhc2UoKSl7dmFyIHo9bC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1s8Pl0vZ2ksXCJcIik7Zm9yKG49XCJsaVwiPT09dT90LnBhcmVudCgpOnQ7IW5bMF0udGFnTmFtZS5tYXRjaChkKTspbj1uLnBhcmVudCgpLHU9blswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYodT09PXope3A9bi5jaGlsZHJlbigpO3ZhciBBPSExO2ZvcihtPTA7bTxwLmxlbmd0aDttKyspQT1BfHxwW21dLnRhZ05hbWUubWF0Y2goZCk7QT8obi5hZnRlcihwKSxxPW4ubmV4dCgpLG4ucmVtb3ZlKCksbj1xKTooci5hcHBlbmQoblswXS5jaGlsZE5vZGVzKSxuLmFmdGVyKHIpLG4ucmVtb3ZlKCksbj1yKX1lbHNlIGlmKG4ucGFyZW50KClbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpIT09enx8bi5wYXJlbnQoKS5oYXNDbGFzcyhcInRhLWJpbmRcIikpaWYodS5tYXRjaChlKSluLndyYXAobCk7ZWxzZXtwPWEuZ2V0T25seVNlbGVjdGVkRWxlbWVudHMoKSwwPT09cC5sZW5ndGgmJihwPVtuWzBdXSk7dmFyIEI9ITE7aWYoYW5ndWxhci5mb3JFYWNoKHAsZnVuY3Rpb24oYSl7MyE9PWEubm9kZVR5cGUmJmEudGFnTmFtZS5tYXRjaChkKXx8KEI9ITApfSksQilmb3IoOzM9PT1wWzBdLm5vZGVUeXBlfHwhcFswXS50YWdOYW1lLm1hdGNoKGQpOylwPVtwWzBdLnBhcmVudE5vZGVdO2lmKGFuZ3VsYXIuZWxlbWVudChwWzBdKS5oYXNDbGFzcyhcInRhLWJpbmRcIikpbj1hbmd1bGFyLmVsZW1lbnQobCksblswXS5pbm5lckhUTUw9cFswXS5pbm5lckhUTUwscFswXS5pbm5lckhUTUw9blswXS5vdXRlckhUTUw7ZWxzZSBpZihcImJsb2NrcXVvdGVcIj09PXope2ZvcihvPVwiXCIsbT0wO208cC5sZW5ndGg7bSsrKW8rPXBbbV0ub3V0ZXJIVE1MO249YW5ndWxhci5lbGVtZW50KGwpLG5bMF0uaW5uZXJIVE1MPW8scFswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuWzBdLHBbMF0pLGFuZ3VsYXIuZm9yRWFjaChwLGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfWVsc2UgZm9yKG09MDttPHAubGVuZ3RoO20rKyluPWFuZ3VsYXIuZWxlbWVudChsKSxuWzBdLmlubmVySFRNTD1wW21dLmlubmVySFRNTCxwW21dLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5bMF0scFttXSkscFttXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBbbV0pfWVsc2V7dmFyIEM9bi5wYXJlbnQoKSxEPUMuY29udGVudHMoKTtmb3IobT0wO208RC5sZW5ndGg7bSsrKUMucGFyZW50KCkuaGFzQ2xhc3MoXCJ0YS1iaW5kXCIpJiYzPT09RFttXS5ub2RlVHlwZSYmKHI9YW5ndWxhci5lbGVtZW50KFwiPFwiK2krXCI+XCIpLHJbMF0uaW5uZXJIVE1MPURbbV0ub3V0ZXJIVE1MLERbbV09clswXSksQy5wYXJlbnQoKVswXS5pbnNlcnRCZWZvcmUoRFttXSxDWzBdKTtDLnJlbW92ZSgpfXJldHVybiB2b2lkIGEuc2V0U2VsZWN0aW9uVG9FbGVtZW50RW5kKG5bMF0pfX10cnl7Y1swXS5leGVjQ29tbWFuZChqLGssbCl9Y2F0Y2goRSl7fX19fV0pLmRpcmVjdGl2ZShcInRhQmluZFwiLFtcInRhU2FuaXRpemVcIixcIiR0aW1lb3V0XCIsXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixcInRhRml4Q2hyb21lXCIsXCJ0YUJyb3dzZXJUYWdcIixcInRhU2VsZWN0aW9uXCIsXCJ0YVNlbGVjdGFibGVFbGVtZW50c1wiLFwidGFBcHBseUN1c3RvbVJlbmRlcmVyc1wiLFwidGFPcHRpb25zXCIsZnVuY3Rpb24oYSxiLGMsZixpLGosayxtLG4sbyl7cmV0dXJue3JlcXVpcmU6XCJuZ01vZGVsXCIsc2NvcGU6e30sbGluazpmdW5jdGlvbihqLHAscSxyKXt2YXIgcyx0LHU9dm9pZCAwIT09cC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZwLmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIiksdj11fHxcInRleHRhcmVhXCI9PT1wWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJpbnB1dFwiPT09cFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCksdz0hMSx4PSExLHk9cS50YVVuc2FmZVNhbml0aXplcnx8by5kaXNhYmxlU2FuaXRpemVyO3ZvaWQgMD09PXEudGFEZWZhdWx0V3JhcCYmKHEudGFEZWZhdWx0V3JhcD1cInBcIiksXCJcIj09PXEudGFEZWZhdWx0V3JhcD8ocz1cIlwiLHQ9dm9pZCAwPT09ZT9cIjxkaXY+PGJyPjwvZGl2PlwiOmU+PTExP1wiPHA+PGJyPjwvcD5cIjo4Pj1lP1wiPFA+Jm5ic3A7PC9QPlwiOlwiPHA+Jm5ic3A7PC9wPlwiKToocz12b2lkIDA9PT1lfHxlPj0xMT9cIjxcIitxLnRhRGVmYXVsdFdyYXArXCI+PGJyPjwvXCIrcS50YURlZmF1bHRXcmFwK1wiPlwiOjg+PWU/XCI8XCIrcS50YURlZmF1bHRXcmFwLnRvVXBwZXJDYXNlKCkrXCI+PC9cIitxLnRhRGVmYXVsdFdyYXAudG9VcHBlckNhc2UoKStcIj5cIjpcIjxcIitxLnRhRGVmYXVsdFdyYXArXCI+PC9cIitxLnRhRGVmYXVsdFdyYXArXCI+XCIsdD12b2lkIDA9PT1lfHxlPj0xMT9cIjxcIitxLnRhRGVmYXVsdFdyYXArXCI+PGJyPjwvXCIrcS50YURlZmF1bHRXcmFwK1wiPlwiOjg+PWU/XCI8XCIrcS50YURlZmF1bHRXcmFwLnRvVXBwZXJDYXNlKCkrXCI+Jm5ic3A7PC9cIitxLnRhRGVmYXVsdFdyYXAudG9VcHBlckNhc2UoKStcIj5cIjpcIjxcIitxLnRhRGVmYXVsdFdyYXArXCI+Jm5ic3A7PC9cIitxLnRhRGVmYXVsdFdyYXArXCI+XCIpLHAuYWRkQ2xhc3MoXCJ0YS1iaW5kXCIpO1xudmFyIHo9ZnVuY3Rpb24oKXtpZih1KXJldHVybiBwWzBdLmlubmVySFRNTDtpZih2KXJldHVybiBwLnZhbCgpO3Rocm93XCJ0ZXh0QW5ndWxhciBFcnJvcjogYXR0ZW1wdGluZyB0byB1cGRhdGUgbm9uLWVkaXRhYmxlIHRhQmluZFwifSxBPWZ1bmN0aW9uKGEpe2F8fChhPXooKSksYT09PXQ/XCJcIiE9PXIuJHZpZXdWYWx1ZSYmci4kc2V0Vmlld1ZhbHVlKFwiXCIpOnIuJHZpZXdWYWx1ZSE9PWEmJnIuJHNldFZpZXdWYWx1ZShhKX07aWYoai4kcGFyZW50W1widXBkYXRlVGFCaW5kXCIrKHEuaWR8fFwiXCIpXT1mdW5jdGlvbigpe3d8fEEoKX0sdilpZih1KXtpZihwLm9uKFwiY3V0XCIsZnVuY3Rpb24oYSl7dz9hLnByZXZlbnREZWZhdWx0KCk6YihmdW5jdGlvbigpe0EoKX0sMCl9KSxwLm9uKFwicGFzdGVcIixmdW5jdGlvbihhLGIpe2ImJmFuZ3VsYXIuZXh0ZW5kKGEsYik7dmFyIGQ7aWYoYS5jbGlwYm9hcmREYXRhfHxhLm9yaWdpbmFsRXZlbnQmJmEub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhP2Q9KGEub3JpZ2luYWxFdmVudHx8YSkuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKTpjLmNsaXBib2FyZERhdGEmJihkPWMuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwiVGV4dFwiKSksIWQmJiF3KXJldHVybiEwO2lmKGEucHJldmVudERlZmF1bHQoKSwhdyl7dmFyIGU9YW5ndWxhci5lbGVtZW50KFwiPGRpdj48L2Rpdj5cIik7aWYoZVswXS5pbm5lckhUTUw9ZCxkPWUudGV4dCgpLGZbMF0uc2VsZWN0aW9uKXt2YXIgZz1mWzBdLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO2cucGFzdGVIVE1MKGQpfWVsc2UgZlswXS5leGVjQ29tbWFuZChcImluc2VydFRleHRcIiwhMSxkKTtBKCl9fSkscC5vbihcImtleXVwXCIsZnVuY3Rpb24oYSxiKXtpZihiJiZhbmd1bGFyLmV4dGVuZChhLGIpLCF3KXtpZihcIlwiIT09cyYmMTM9PT1hLmtleUNvZGUmJiFhLnNoaWZ0S2V5KXt2YXIgYz1rLmdldFNlbGVjdGlvbkVsZW1lbnQoKTtpZihjLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9PXEudGFEZWZhdWx0V3JhcCYmXCJsaVwiIT09Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJihcIlwiPT09Yy5pbm5lckhUTUwudHJpbSgpfHxcIjxicj5cIj09PWMuaW5uZXJIVE1MLnRyaW0oKSkpe3ZhciBkPWFuZ3VsYXIuZWxlbWVudChzKTthbmd1bGFyLmVsZW1lbnQoYykucmVwbGFjZVdpdGgoZCksay5zZXRTZWxlY3Rpb25Ub0VsZW1lbnRTdGFydChkWzBdKX19dmFyIGU9eigpO1wiXCIhPT1zJiZcIlwiPT09ZS50cmltKCkmJihwWzBdLmlubmVySFRNTD1zLGsuc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQocC5jaGlsZHJlbigpWzBdKSksQShlKX19KSxwLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7eD0hMSx3fHxBKCksci4kcmVuZGVyKCl9KSxxLnBsYWNlaG9sZGVyJiYoZT44fHx2b2lkIDA9PT1lKSl7dmFyIEI7aWYoIXEuaWQpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBbiB1bmlxdWUgSUQgaXMgcmVxdWlyZWQgZm9yIHBsYWNlaG9sZGVycyB0byB3b3JrXCI7Qj1nKFwiI1wiK3EuaWQrXCIucGxhY2Vob2xkZXItdGV4dDpiZWZvcmVcIiwnY29udGVudDogXCInK3EucGxhY2Vob2xkZXIrJ1wiJyksai4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7aChCKX0pfXAub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7eD0hMCxyLiRyZW5kZXIoKX0pLHAub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhLGIpe2ImJmFuZ3VsYXIuZXh0ZW5kKGEsYiksYS5zdG9wUHJvcGFnYXRpb24oKX0pfWVsc2UgcC5vbihcInBhc3RlIGN1dFwiLGZ1bmN0aW9uKCl7d3x8YihmdW5jdGlvbigpe3IuJHNldFZpZXdWYWx1ZSh6KCkpfSwwKX0pLHAub24oXCJjaGFuZ2UgYmx1clwiLGZ1bmN0aW9uKCl7d3x8ci4kc2V0Vmlld1ZhbHVlKHooKSl9KTt2YXIgQz1mdW5jdGlvbihiKXtyZXR1cm4gci4kb2xkVmlld1ZhbHVlPWEoaShiKSxyLiRvbGRWaWV3VmFsdWUseSl9LEQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHEucmVxdWlyZWQmJnIuJHNldFZhbGlkaXR5KFwicmVxdWlyZWRcIiwhKCFhfHxhLnRyaW0oKT09PXR8fFwiXCI9PT1hLnRyaW0oKSkpLGF9O3IuJHBhcnNlcnMucHVzaChDKSxyLiRwYXJzZXJzLnB1c2goRCksci4kZm9ybWF0dGVycy5wdXNoKEMpLHIuJGZvcm1hdHRlcnMucHVzaChEKTt2YXIgRT1mdW5jdGlvbihhKXtyZXR1cm4gai4kZW1pdChcInRhLWVsZW1lbnQtc2VsZWN0XCIsdGhpcyksYS5wcmV2ZW50RGVmYXVsdCgpLCExfSxGPWZ1bmN0aW9uKGEsYyl7aWYoYyYmYW5ndWxhci5leHRlbmQoYSxjKSwhbCYmIXcpe2w9ITA7dmFyIGQ7ZD1hLm9yaWdpbmFsRXZlbnQ/YS5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlcjphLmRhdGFUcmFuc2ZlcixqLiRlbWl0KFwidGEtZHJvcC1ldmVudFwiLHRoaXMsYSxkKSxiKGZ1bmN0aW9uKCl7bD0hMX0sMTAwKX19O2ouJHBhcmVudFtcInJlQXBwbHlPblNlbGVjdG9ySGFuZGxlcnNcIisocS5pZHx8XCJcIildPWZ1bmN0aW9uKCl7d3x8YW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7cC5maW5kKGEpLm9mZihcImNsaWNrXCIsRSkub24oXCJjbGlja1wiLEUpfSl9O3ZhciBHPWZ1bmN0aW9uKGEpe3BbMF0uaW5uZXJIVE1MPWF9O3IuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPXIuJHZpZXdWYWx1ZXx8XCJcIjtmWzBdLmFjdGl2ZUVsZW1lbnQhPT1wWzBdP3U/KHEucGxhY2Vob2xkZXI/XCJcIj09PWE/KHg/cC5yZW1vdmVDbGFzcyhcInBsYWNlaG9sZGVyLXRleHRcIik6cC5hZGRDbGFzcyhcInBsYWNlaG9sZGVyLXRleHRcIiksRyhzKSk6KHAucmVtb3ZlQ2xhc3MoXCJwbGFjZWhvbGRlci10ZXh0XCIpLEcoYSkpOkcoXCJcIj09PWE/czphKSx3P3Aub2ZmKFwiZHJvcFwiLEYpOihhbmd1bGFyLmZvckVhY2gobSxmdW5jdGlvbihhKXtwLmZpbmQoYSkub24oXCJjbGlja1wiLEUpfSkscC5vbihcImRyb3BcIixGKSkpOlwidGV4dGFyZWFcIiE9PXBbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZcImlucHV0XCIhPT1wWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9HKG4oYSkpOnAudmFsKGEpOnUmJnAucmVtb3ZlQ2xhc3MoXCJwbGFjZWhvbGRlci10ZXh0XCIpfSxxLnRhUmVhZG9ubHkmJih3PWouJHBhcmVudC4kZXZhbChxLnRhUmVhZG9ubHkpLHc/KHAuYWRkQ2xhc3MoXCJ0YS1yZWFkb25seVwiKSwoXCJ0ZXh0YXJlYVwiPT09cFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXBbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKSYmcC5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLHZvaWQgMCE9PXAuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmcC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZwLnJlbW92ZUF0dHIoXCJjb250ZW50ZWRpdGFibGVcIikpOihwLnJlbW92ZUNsYXNzKFwidGEtcmVhZG9ubHlcIiksXCJ0ZXh0YXJlYVwiPT09cFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXBbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpP3AucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpOnUmJnAuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiLFwidHJ1ZVwiKSksai4kcGFyZW50LiR3YXRjaChxLnRhUmVhZG9ubHksZnVuY3Rpb24oYSxiKXtiIT09YSYmKGE/KHAuYWRkQ2xhc3MoXCJ0YS1yZWFkb25seVwiKSwoXCJ0ZXh0YXJlYVwiPT09cFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fFwiaW5wdXRcIj09PXBbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKSYmcC5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLHZvaWQgMCE9PXAuYXR0cihcImNvbnRlbnRlZGl0YWJsZVwiKSYmcC5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIpJiZwLnJlbW92ZUF0dHIoXCJjb250ZW50ZWRpdGFibGVcIiksYW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7cC5maW5kKGEpLm9uKFwiY2xpY2tcIixFKX0pLHAub2ZmKFwiZHJvcFwiLEYpKToocC5yZW1vdmVDbGFzcyhcInRhLXJlYWRvbmx5XCIpLFwidGV4dGFyZWFcIj09PXBbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImlucHV0XCI9PT1wWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9wLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTp1JiZwLmF0dHIoXCJjb250ZW50ZWRpdGFibGVcIixcInRydWVcIiksYW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7cC5maW5kKGEpLm9mZihcImNsaWNrXCIsRSl9KSxwLm9uKFwiZHJvcFwiLEYpKSx3PWEpfSkpLHUmJiF3JiYoYW5ndWxhci5mb3JFYWNoKG0sZnVuY3Rpb24oYSl7cC5maW5kKGEpLm9uKFwiY2xpY2tcIixFKX0pLHAub24oXCJkcm9wXCIsRikscC5vbihcImJsdXJcIixmdW5jdGlvbigpey9BcHBsZVdlYktpdFxcLyhbXFxkLl0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSYmKGQ9ITApfSkpfX19XSkuZmFjdG9yeShcInRhQXBwbHlDdXN0b21SZW5kZXJlcnNcIixbXCJ0YUN1c3RvbVJlbmRlcmVyc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2PjwvZGl2PlwiKTtyZXR1cm4gZFswXS5pbm5lckhUTUw9Yyxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXt2YXIgYz1bXTthLnNlbGVjdG9yJiZcIlwiIT09YS5zZWxlY3Rvcj9jPWQuZmluZChhLnNlbGVjdG9yKTphLmN1c3RvbUF0dHJpYnV0ZSYmXCJcIiE9PWEuY3VzdG9tQXR0cmlidXRlJiYoYz1iKGQsYS5jdXN0b21BdHRyaWJ1dGUpKSxhbmd1bGFyLmZvckVhY2goYyxmdW5jdGlvbihiKXtiPWFuZ3VsYXIuZWxlbWVudChiKSxhLnNlbGVjdG9yJiZcIlwiIT09YS5zZWxlY3RvciYmYS5jdXN0b21BdHRyaWJ1dGUmJlwiXCIhPT1hLmN1c3RvbUF0dHJpYnV0ZT92b2lkIDAhPT1iLmF0dHIoYS5jdXN0b21BdHRyaWJ1dGUpJiZhLnJlbmRlckxvZ2ljKGIpOmEucmVuZGVyTG9naWMoYil9KX0pLGRbMF0uaW5uZXJIVE1MfX1dKS5kaXJlY3RpdmUoXCJ0YU1heFRleHRcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2Lz5cIik7Yi5odG1sKGEpO3ZhciBjPWIudGV4dCgpLmxlbmd0aDtyZXR1cm4gZj49Yz8oZC4kc2V0VmFsaWRpdHkoXCJ0YU1heFRleHRcIiwhMCksYSk6dm9pZCBkLiRzZXRWYWxpZGl0eShcInRhTWF4VGV4dFwiLCExKX12YXIgZj1wYXJzZUludChhLiRldmFsKGMudGFNYXhUZXh0KSk7aWYoaXNOYU4oZikpdGhyb3dcIk1heCB0ZXh0IG11c3QgYmUgYW4gaW50ZWdlclwiO2MuJG9ic2VydmUoXCJ0YU1heFRleHRcIixmdW5jdGlvbihhKXtpZihmPXBhcnNlSW50KGEpLGlzTmFOKGYpKXRocm93XCJNYXggdGV4dCBtdXN0IGJlIGFuIGludGVnZXJcIjtkLiRkaXJ0eSYmZC4kc2V0Vmlld1ZhbHVlKGQuJHZpZXdWYWx1ZSl9KSxkLiRwYXJzZXJzLnVuc2hpZnQoZSl9fX0pLmRpcmVjdGl2ZShcInRhTWluVGV4dFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPWFuZ3VsYXIuZWxlbWVudChcIjxkaXYvPlwiKTtiLmh0bWwoYSk7dmFyIGM9Yi50ZXh0KCkubGVuZ3RoO3JldHVybiFjfHxjPj1mPyhkLiRzZXRWYWxpZGl0eShcInRhTWluVGV4dFwiLCEwKSxhKTp2b2lkIGQuJHNldFZhbGlkaXR5KFwidGFNaW5UZXh0XCIsITEpfXZhciBmPXBhcnNlSW50KGEuJGV2YWwoYy50YU1pblRleHQpKTtpZihpc05hTihmKSl0aHJvd1wiTWluIHRleHQgbXVzdCBiZSBhbiBpbnRlZ2VyXCI7Yy4kb2JzZXJ2ZShcInRhTWluVGV4dFwiLGZ1bmN0aW9uKGEpe2lmKGY9cGFyc2VJbnQoYSksaXNOYU4oZikpdGhyb3dcIk1pbiB0ZXh0IG11c3QgYmUgYW4gaW50ZWdlclwiO2QuJGRpcnR5JiZkLiRzZXRWaWV3VmFsdWUoZC4kdmlld1ZhbHVlKX0pLGQuJHBhcnNlcnMudW5zaGlmdChlKX19fSkuZmFjdG9yeShcInRhRml4Q2hyb21lXCIsZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXtmb3IodmFyIGI9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIithK1wiPC9kaXY+XCIpLGM9YW5ndWxhci5lbGVtZW50KGIpLmZpbmQoXCJzcGFuXCIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9YW5ndWxhci5lbGVtZW50KGNbZF0pO2UuYXR0cihcInN0eWxlXCIpJiZlLmF0dHIoXCJzdHlsZVwiKS5tYXRjaCgvbGluZS1oZWlnaHQ6IDEuNDI4NTcxNDI5O3xjb2xvcjogaW5oZXJpdDsgbGluZS1oZWlnaHQ6IDEuMTsvaSkmJihlLmF0dHIoXCJzdHlsZVwiLGUuYXR0cihcInN0eWxlXCIpLnJlcGxhY2UoLyggfClmb250LWZhbWlseTogaW5oZXJpdDt8KCB8KWxpbmUtaGVpZ2h0OiAxLjQyODU3MTQyOTt8KCB8KWxpbmUtaGVpZ2h0OjEuMTt8KCB8KWNvbG9yOiBpbmhlcml0Oy9naSxcIlwiKSksZS5hdHRyKFwic3R5bGVcIikmJlwiXCIhPT1lLmF0dHIoXCJzdHlsZVwiKXx8KGUubmV4dCgpLmxlbmd0aD4wJiZcIkJSXCI9PT1lLm5leHQoKVswXS50YWdOYW1lJiZlLm5leHQoKS5yZW1vdmUoKSxlLnJlcGxhY2VXaXRoKGVbMF0uaW5uZXJIVE1MKSkpfXZhciBmPWJbMF0uaW5uZXJIVE1MLnJlcGxhY2UoL3N0eWxlPVwiW15cIl0qPyhsaW5lLWhlaWdodDogMS40Mjg1NzE0Mjk7fGNvbG9yOiBpbmhlcml0OyBsaW5lLWhlaWdodDogMS4xOylbXlwiXSpcIi9naSxcIlwiKTtyZXR1cm4gZiE9PWJbMF0uaW5uZXJIVE1MJiYoYlswXS5pbm5lckhUTUw9ZiksYlswXS5pbm5lckhUTUx9O3JldHVybiBhfSkuZmFjdG9yeShcInRhU2FuaXRpemVcIixbXCIkc2FuaXRpemVcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe3ZhciBmPWFuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIrYytcIjwvZGl2PlwiKTthbmd1bGFyLmZvckVhY2goYihmLFwiYWxpZ25cIiksZnVuY3Rpb24oYSl7YS5jc3MoXCJ0ZXh0LWFsaWduXCIsYS5hdHRyKFwiYWxpZ25cIikpLGEucmVtb3ZlQXR0cihcImFsaWduXCIpfSk7dmFyIGc7Yz1mWzBdLmlubmVySFRNTDt0cnl7Zz1hKGMpLGUmJihnPWMpfWNhdGNoKGgpe2c9ZHx8XCJcIn1yZXR1cm4gZ319XSkuZGlyZWN0aXZlKFwidGV4dEFuZ3VsYXJUb29sYmFyXCIsW1wiJGNvbXBpbGVcIixcInRleHRBbmd1bGFyTWFuYWdlclwiLFwidGFPcHRpb25zXCIsXCJ0YVRvb2xzXCIsXCJ0YVRvb2xFeGVjdXRlQWN0aW9uXCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3JldHVybntzY29wZTp7bmFtZTpcIkBcIn0scmVzdHJpY3Q6XCJFQVwiLGxpbms6ZnVuY3Rpb24oZyxoLGkpe2lmKCFnLm5hbWV8fFwiXCI9PT1nLm5hbWUpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBIHRvb2xiYXIgcmVxdWlyZXMgYSBuYW1lXCI7YW5ndWxhci5leHRlbmQoZyxhbmd1bGFyLmNvcHkoYykpLGkudGFUb29sYmFyJiYoZy50b29sYmFyPWcuJHBhcmVudC4kZXZhbChpLnRhVG9vbGJhcikpLGkudGFUb29sYmFyQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhcj1pLnRhVG9vbGJhckNsYXNzKSxpLnRhVG9vbGJhckdyb3VwQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhckdyb3VwPWkudGFUb29sYmFyR3JvdXBDbGFzcyksaS50YVRvb2xiYXJCdXR0b25DbGFzcyYmKGcuY2xhc3Nlcy50b29sYmFyQnV0dG9uPWkudGFUb29sYmFyQnV0dG9uQ2xhc3MpLGkudGFUb29sYmFyQWN0aXZlQnV0dG9uQ2xhc3MmJihnLmNsYXNzZXMudG9vbGJhckJ1dHRvbkFjdGl2ZT1pLnRhVG9vbGJhckFjdGl2ZUJ1dHRvbkNsYXNzKSxpLnRhRm9jdXNzZWRDbGFzcyYmKGcuY2xhc3Nlcy5mb2N1c3NlZD1pLnRhRm9jdXNzZWRDbGFzcyksZy5kaXNhYmxlZD0hMCxnLmZvY3Vzc2VkPSExLGcuXyRlbGVtZW50PWgsaFswXS5pbm5lckhUTUw9XCJcIixoLmFkZENsYXNzKFwidGEtdG9vbGJhciBcIitnLmNsYXNzZXMudG9vbGJhciksZy4kd2F0Y2goXCJmb2N1c3NlZFwiLGZ1bmN0aW9uKCl7Zy5mb2N1c3NlZD9oLmFkZENsYXNzKGcuY2xhc3Nlcy5mb2N1c3NlZCk6aC5yZW1vdmVDbGFzcyhnLmNsYXNzZXMuZm9jdXNzZWQpfSk7dmFyIGo9ZnVuY3Rpb24oYixjKXt2YXIgZDtpZihkPWFuZ3VsYXIuZWxlbWVudChiJiZiLmRpc3BsYXk/Yi5kaXNwbGF5OlwiPGJ1dHRvbiB0eXBlPSdidXR0b24nPlwiKSxkLmFkZENsYXNzKGcuY2xhc3Nlcy50b29sYmFyQnV0dG9uKSxkLmF0dHIoXCJuYW1lXCIsYy5uYW1lKSxkLmF0dHIoXCJ1bnNlbGVjdGFibGVcIixcIm9uXCIpLGQuYXR0cihcIm5nLWRpc2FibGVkXCIsXCJpc0Rpc2FibGVkKClcIiksZC5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpLGQuYXR0cihcIm5nLWNsaWNrXCIsXCJleGVjdXRlQWN0aW9uKClcIiksZC5hdHRyKFwibmctY2xhc3NcIixcImRpc3BsYXlBY3RpdmVUb29sQ2xhc3MoYWN0aXZlKVwiKSxiJiZiLnRvb2x0aXB0ZXh0JiZkLmF0dHIoXCJ0aXRsZVwiLGIudG9vbHRpcHRleHQpLGQub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhLGIpe3JldHVybiBiJiZhbmd1bGFyLmV4dGVuZChhLGIpLGEucHJldmVudERlZmF1bHQoKSwhMX0pLGImJiFiLmRpc3BsYXkmJiFjLl9kaXNwbGF5JiYoZFswXS5pbm5lckhUTUw9XCJcIixiLmJ1dHRvbnRleHQmJihkWzBdLmlubmVySFRNTD1iLmJ1dHRvbnRleHQpLGIuaWNvbmNsYXNzKSl7dmFyIGU9YW5ndWxhci5lbGVtZW50KFwiPGk+XCIpLGY9ZFswXS5pbm5lckhUTUw7ZS5hZGRDbGFzcyhiLmljb25jbGFzcyksZFswXS5pbm5lckhUTUw9XCJcIixkLmFwcGVuZChlKSxmJiZcIlwiIT09ZiYmZC5hcHBlbmQoXCImbmJzcDtcIitmKX1yZXR1cm4gYy5fbGFzdFRvb2xEZWZpbml0aW9uPWFuZ3VsYXIuY29weShiKSxhKGQpKGMpfTtnLnRvb2xzPXt9LGcuX3BhcmVudD17ZGlzYWJsZWQ6ITAsc2hvd0h0bWw6ITEscXVlcnlGb3JtYXRCbG9ja1N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHF1ZXJ5Q29tbWFuZFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuITF9fTt2YXIgaz17JHdpbmRvdzpmLCRlZGl0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gZy5fcGFyZW50fSxpc0Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGV2YWwoXCJkaXNhYmxlZFwiKXx8dGhpcy4kZXZhbChcImRpc2FibGVkKClcIil8fFwiaHRtbFwiIT09dGhpcy5uYW1lJiZ0aGlzLiRlZGl0b3IoKS5zaG93SHRtbHx8dGhpcy4kcGFyZW50LmRpc2FibGVkfHx0aGlzLiRlZGl0b3IoKS5kaXNhYmxlZH0sZGlzcGxheUFjdGl2ZVRvb2xDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gYT9nLmNsYXNzZXMudG9vbGJhckJ1dHRvbkFjdGl2ZTpcIlwifSxleGVjdXRlQWN0aW9uOmV9O2FuZ3VsYXIuZm9yRWFjaChnLnRvb2xiYXIsZnVuY3Rpb24oYSl7dmFyIGI9YW5ndWxhci5lbGVtZW50KFwiPGRpdj5cIik7Yi5hZGRDbGFzcyhnLmNsYXNzZXMudG9vbGJhckdyb3VwKSxhbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhKXtnLnRvb2xzW2FdPWFuZ3VsYXIuZXh0ZW5kKGcuJG5ldyghMCksZFthXSxrLHtuYW1lOmF9KSxnLnRvb2xzW2FdLiRlbGVtZW50PWooZFthXSxnLnRvb2xzW2FdKSxiLmFwcGVuZChnLnRvb2xzW2FdLiRlbGVtZW50KX0pLGguYXBwZW5kKGIpfSksZy51cGRhdGVUb29sRGlzcGxheT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zy50b29sc1thXTtpZihkKXtpZihkLl9sYXN0VG9vbERlZmluaXRpb24mJiFjJiYoYj1hbmd1bGFyLmV4dGVuZCh7fSxkLl9sYXN0VG9vbERlZmluaXRpb24sYikpLG51bGw9PT1iLmJ1dHRvbnRleHQmJm51bGw9PT1iLmljb25jbGFzcyYmbnVsbD09PWIuZGlzcGxheSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogVG9vbCBEZWZpbml0aW9uIGZvciB1cGRhdGluZyBcIicrYSsnXCIgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIGRpc3BsYXkvaWNvbmNsYXNzL2J1dHRvbnRleHQgdmFsdWUnO251bGw9PT1iLmJ1dHRvbnRleHQmJmRlbGV0ZSBiLmJ1dHRvbnRleHQsbnVsbD09PWIuaWNvbmNsYXNzJiZkZWxldGUgYi5pY29uY2xhc3MsbnVsbD09PWIuZGlzcGxheSYmZGVsZXRlIGIuZGlzcGxheTt2YXIgZT1qKGIsZCk7ZC4kZWxlbWVudC5yZXBsYWNlV2l0aChlKSxkLiRlbGVtZW50PWV9fSxnLmFkZFRvb2w9ZnVuY3Rpb24oYSxiLGMsZSl7Zy50b29sc1thXT1hbmd1bGFyLmV4dGVuZChnLiRuZXcoITApLGRbYV0sayx7bmFtZTphfSksZy50b29sc1thXS4kZWxlbWVudD1qKGRbYV0sZy50b29sc1thXSk7dmFyIGY7dm9pZCAwPT09YyYmKGM9Zy50b29sYmFyLmxlbmd0aC0xKSxmPWFuZ3VsYXIuZWxlbWVudChoLmNoaWxkcmVuKClbY10pLHZvaWQgMD09PWU/KGYuYXBwZW5kKGcudG9vbHNbYV0uJGVsZW1lbnQpLGcudG9vbGJhcltjXVtnLnRvb2xiYXJbY10ubGVuZ3RoLTFdPWEpOihmLmNoaWxkcmVuKCkuZXEoZSkuYWZ0ZXIoZy50b29sc1thXS4kZWxlbWVudCksZy50b29sYmFyW2NdW2VdPWEpfSxiLnJlZ2lzdGVyVG9vbGJhcihnKSxnLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtiLnVucmVnaXN0ZXJUb29sYmFyKGcubmFtZSl9KX19fV0pLnNlcnZpY2UoXCJ0YVRvb2xFeGVjdXRlQWN0aW9uXCIsW1wiJHFcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwIT09YiYmKHRoaXMuJGVkaXRvcj1mdW5jdGlvbigpe3JldHVybiBifSk7dmFyIGM9YS5kZWZlcigpLGQ9Yy5wcm9taXNlLGU9dGhpcy4kZWRpdG9yKCk7ZFtcImZpbmFsbHlcIl0oZnVuY3Rpb24oKXtlLmVuZEFjdGlvbi5jYWxsKGUpfSk7dmFyIGY7dHJ5e2Y9dGhpcy5hY3Rpb24oYyxlLnN0YXJ0QWN0aW9uKCkpfWNhdGNoKGcpe30oZnx8dm9pZCAwPT09ZikmJmMucmVzb2x2ZSgpfX1dKS5zZXJ2aWNlKFwidGV4dEFuZ3VsYXJNYW5hZ2VyXCIsW1widGFUb29sRXhlY3V0ZUFjdGlvblwiLFwidGFUb29sc1wiLFwidGFSZWdpc3RlclRvb2xcIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9e30sZT17fTtyZXR1cm57cmVnaXN0ZXJFZGl0b3I6ZnVuY3Rpb24oYyxmLGcpe2lmKCFjfHxcIlwiPT09Yyl0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEFuIGVkaXRvciByZXF1aXJlcyBhIG5hbWVcIjtpZighZil0aHJvd1widGV4dEFuZ3VsYXIgRXJyb3I6IEFuIGVkaXRvciByZXF1aXJlcyBhIHNjb3BlXCI7aWYoZVtjXSl0aHJvdyd0ZXh0QW5ndWxhciBFcnJvcjogQW4gRWRpdG9yIHdpdGggbmFtZSBcIicrYysnXCIgYWxyZWFkeSBleGlzdHMnO3ZhciBoPVtdO3JldHVybiBhbmd1bGFyLmZvckVhY2goZyxmdW5jdGlvbihhKXtkW2FdJiZoLnB1c2goZFthXSl9KSxlW2NdPXtzY29wZTpmLHRvb2xiYXJzOmcsX3JlZ2lzdGVyVG9vbGJhcjpmdW5jdGlvbihhKXt0aGlzLnRvb2xiYXJzLmluZGV4T2YoYS5uYW1lKT49MCYmaC5wdXNoKGEpfSxlZGl0b3JGdW5jdGlvbnM6e2Rpc2FibGU6ZnVuY3Rpb24oKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihhKXthLmRpc2FibGVkPSEwfSl9LGVuYWJsZTpmdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChoLGZ1bmN0aW9uKGEpe2EuZGlzYWJsZWQ9ITF9KX0sZm9jdXM6ZnVuY3Rpb24oKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihhKXthLl9wYXJlbnQ9ZixhLmRpc2FibGVkPSExLGEuZm9jdXNzZWQ9ITB9KX0sdW5mb2N1czpmdW5jdGlvbigpe2FuZ3VsYXIuZm9yRWFjaChoLGZ1bmN0aW9uKGEpe2EuZGlzYWJsZWQ9ITAsYS5mb2N1c3NlZD0hMX0pfSx1cGRhdGVTZWxlY3RlZFN0eWxlczpmdW5jdGlvbihhKXthbmd1bGFyLmZvckVhY2goaCxmdW5jdGlvbihiKXthbmd1bGFyLmZvckVhY2goYi50b29scyxmdW5jdGlvbihiKXtiLmFjdGl2ZVN0YXRlJiYoYi5hY3RpdmU9Yi5hY3RpdmVTdGF0ZShhKSl9KX0pfSxzZW5kS2V5Q29tbWFuZDpmdW5jdGlvbihjKXt2YXIgZD0hMTtyZXR1cm4oYy5jdHJsS2V5fHxjLm1ldGFLZXkpJiZhbmd1bGFyLmZvckVhY2goYixmdW5jdGlvbihiLGUpe2lmKGIuY29tbWFuZEtleUNvZGUmJmIuY29tbWFuZEtleUNvZGU9PT1jLndoaWNoKWZvcih2YXIgZz0wO2c8aC5sZW5ndGg7ZysrKWlmKHZvaWQgMCE9PWhbZ10udG9vbHNbZV0pe2EuY2FsbChoW2ddLnRvb2xzW2VdLGYpLGQ9ITA7YnJlYWt9fSksZH0sdHJpZ2dlckVsZW1lbnRTZWxlY3Q6ZnVuY3Rpb24oYSxjKXt2YXIgZD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0hMCxkPTA7ZDxiLmxlbmd0aDtkKyspYz1jJiZhLmF0dHIoYltkXSk7cmV0dXJuIGN9LGU9W10sZz17fSxpPSExO2M9YW5ndWxhci5lbGVtZW50KGMpO3ZhciBqPSExO2lmKGFuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGEsYil7YS5vbkVsZW1lbnRTZWxlY3QmJmEub25FbGVtZW50U2VsZWN0LmVsZW1lbnQmJmEub25FbGVtZW50U2VsZWN0LmVsZW1lbnQudG9Mb3dlckNhc2UoKT09PWNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoIWEub25FbGVtZW50U2VsZWN0LmZpbHRlcnx8YS5vbkVsZW1lbnRTZWxlY3QuZmlsdGVyKGMpKSYmKGo9anx8YW5ndWxhci5pc0FycmF5KGEub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMpJiZkKGMsYS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycyksKCFhLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzfHxkKGMsYS5vbkVsZW1lbnRTZWxlY3Qub25seVdpdGhBdHRycykpJiYoZ1tiXT1hKSl9KSxqPyhhbmd1bGFyLmZvckVhY2goZyxmdW5jdGlvbihhLGIpe2Eub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMmJmQoYyxhLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzKSYmZS5wdXNoKHtuYW1lOmIsdG9vbDphfSl9KSxlLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b29sLm9uRWxlbWVudFNlbGVjdC5vbmx5V2l0aEF0dHJzLmxlbmd0aC1hLnRvb2wub25FbGVtZW50U2VsZWN0Lm9ubHlXaXRoQXR0cnMubGVuZ3RofSkpOmFuZ3VsYXIuZm9yRWFjaChnLGZ1bmN0aW9uKGEsYil7ZS5wdXNoKHtuYW1lOmIsdG9vbDphfSl9KSxlLmxlbmd0aD4wKWZvcih2YXIgaz0wO2s8ZS5sZW5ndGg7aysrKXtmb3IodmFyIGw9ZVtrXS50b29sLG09ZVtrXS5uYW1lLG49MDtuPGgubGVuZ3RoO24rKylpZih2b2lkIDAhPT1oW25dLnRvb2xzW21dKXtsLm9uRWxlbWVudFNlbGVjdC5hY3Rpb24uY2FsbChoW25dLnRvb2xzW21dLGEsYyxmKSxpPSEwO2JyZWFrfWlmKGkpYnJlYWt9cmV0dXJuIGl9fX0sZVtjXS5lZGl0b3JGdW5jdGlvbnN9LHJldHJpZXZlRWRpdG9yOmZ1bmN0aW9uKGEpe3JldHVybiBlW2FdfSx1bnJlZ2lzdGVyRWRpdG9yOmZ1bmN0aW9uKGEpe2RlbGV0ZSBlW2FdfSxyZWdpc3RlclRvb2xiYXI6ZnVuY3Rpb24oYSl7aWYoIWEpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBIHRvb2xiYXIgcmVxdWlyZXMgYSBzY29wZVwiO2lmKCFhLm5hbWV8fFwiXCI9PT1hLm5hbWUpdGhyb3dcInRleHRBbmd1bGFyIEVycm9yOiBBIHRvb2xiYXIgcmVxdWlyZXMgYSBuYW1lXCI7aWYoZFthLm5hbWVdKXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBBIHRvb2xiYXIgd2l0aCBuYW1lIFwiJythLm5hbWUrJ1wiIGFscmVhZHkgZXhpc3RzJztkW2EubmFtZV09YSxhbmd1bGFyLmZvckVhY2goZSxmdW5jdGlvbihiKXtiLl9yZWdpc3RlclRvb2xiYXIoYSl9KX0scmV0cmlldmVUb29sYmFyOmZ1bmN0aW9uKGEpe3JldHVybiBkW2FdfSxyZXRyaWV2ZVRvb2xiYXJzVmlhRWRpdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcztyZXR1cm4gYW5ndWxhci5mb3JFYWNoKHRoaXMucmV0cmlldmVFZGl0b3IoYSkudG9vbGJhcnMsZnVuY3Rpb24oYSl7Yi5wdXNoKGMucmV0cmlldmVUb29sYmFyKGEpKX0pLGJ9LHVucmVnaXN0ZXJUb29sYmFyOmZ1bmN0aW9uKGEpe2RlbGV0ZSBkW2FdfSx1cGRhdGVUb29sc0Rpc3BsYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthbmd1bGFyLmZvckVhY2goYSxmdW5jdGlvbihhLGMpe2IudXBkYXRlVG9vbERpc3BsYXkoYyxhKX0pfSxyZXNldFRvb2xzRGlzcGxheTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYixjKXthLnJlc2V0VG9vbERpc3BsYXkoYyl9KX0sdXBkYXRlVG9vbERpc3BsYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2FuZ3VsYXIuZm9yRWFjaChkLGZ1bmN0aW9uKGQsZSl7Yy51cGRhdGVUb29sYmFyVG9vbERpc3BsYXkoZSxhLGIpfSl9LHJlc2V0VG9vbERpc3BsYXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthbmd1bGFyLmZvckVhY2goZCxmdW5jdGlvbihjLGQpe2IucmVzZXRUb29sYmFyVG9vbERpc3BsYXkoZCxhKX0pfSx1cGRhdGVUb29sYmFyVG9vbERpc3BsYXk6ZnVuY3Rpb24oYSxiLGMpe2lmKCFkW2FdKXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBObyBUb29sYmFyIHdpdGggbmFtZSBcIicrYSsnXCIgZXhpc3RzJztkW2FdLnVwZGF0ZVRvb2xEaXNwbGF5KGIsYyl9LHJlc2V0VG9vbGJhclRvb2xEaXNwbGF5OmZ1bmN0aW9uKGEsYyl7aWYoIWRbYV0pdGhyb3cndGV4dEFuZ3VsYXIgRXJyb3I6IE5vIFRvb2xiYXIgd2l0aCBuYW1lIFwiJythKydcIiBleGlzdHMnO2RbYV0udXBkYXRlVG9vbERpc3BsYXkoYyxiW2NdLCEwKX0scmVtb3ZlVG9vbDpmdW5jdGlvbihhKXtkZWxldGUgYlthXSxhbmd1bGFyLmZvckVhY2goZCxmdW5jdGlvbihiKXtkZWxldGUgYi50b29sc1thXTtmb3IodmFyIGM9MDtjPGIudG9vbGJhci5sZW5ndGg7YysrKXtmb3IodmFyIGQsZT0wO2U8Yi50b29sYmFyW2NdLmxlbmd0aDtlKyspe2lmKGIudG9vbGJhcltjXVtlXT09PWEpe2Q9e2dyb3VwOmMsaW5kZXg6ZX07YnJlYWt9aWYodm9pZCAwIT09ZClicmVha312b2lkIDAhPT1kJiYoYi50b29sYmFyW2QuZ3JvdXBdLnNsaWNlKGQuaW5kZXgsMSksYi5fJGVsZW1lbnQuY2hpbGRyZW4oKS5lcShkLmdyb3VwKS5jaGlsZHJlbigpLmVxKGQuaW5kZXgpLnJlbW92ZSgpKX19KX0sYWRkVG9vbDpmdW5jdGlvbihhLGIsZSxmKXtjKGEsYiksYW5ndWxhci5mb3JFYWNoKGQsZnVuY3Rpb24oYyl7Yy5hZGRUb29sKGEsYixlLGYpfSl9LGFkZFRvb2xUb1Rvb2xiYXI6ZnVuY3Rpb24oYSxiLGUsZixnKXtjKGEsYiksZFtlXS5hZGRUb29sKGEsYixmLGcpfSxyZWZyZXNoRWRpdG9yOmZ1bmN0aW9uKGEpe2lmKCFlW2FdKXRocm93J3RleHRBbmd1bGFyIEVycm9yOiBObyBFZGl0b3Igd2l0aCBuYW1lIFwiJythKydcIiBleGlzdHMnO2VbYV0uc2NvcGUudXBkYXRlVGFCaW5kdGFUZXh0RWxlbWVudCgpLGVbYV0uc2NvcGUuJCRwaGFzZXx8ZVthXS5zY29wZS4kZGlnZXN0KCl9fX1dKS5zZXJ2aWNlKFwidGFTZWxlY3Rpb25cIixbXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihhLGIpe3ZhciBjPWJbMF0sZD1mdW5jdGlvbihhKXtpZihhLmhhc0NoaWxkTm9kZXMoKSlyZXR1cm4gYS5maXJzdENoaWxkO2Zvcig7YSYmIWEubmV4dFNpYmxpbmc7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhP2EubmV4dFNpYmxpbmc6bnVsbH0sZT1mdW5jdGlvbihhKXt2YXIgYj1hLnN0YXJ0Q29udGFpbmVyLGM9YS5lbmRDb250YWluZXI7aWYoYj09PWMpcmV0dXJuW2JdO2Zvcih2YXIgZT1bXTtiJiZiIT09YzspYj1kKGIpLGIucGFyZW50Tm9kZT09PWEuY29tbW9uQW5jZXN0b3JDb250YWluZXImJmUucHVzaChiKTtmb3IoYj1hLnN0YXJ0Q29udGFpbmVyO2ImJmIhPT1hLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyOyliLnBhcmVudE5vZGU9PT1hLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyJiZlLnVuc2hpZnQoYiksYj1iLnBhcmVudE5vZGU7cmV0dXJuIGV9O3JldHVybntnZXRPbmx5U2VsZWN0ZWRFbGVtZW50czpmdW5jdGlvbigpe2lmKHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciBiPWEuZ2V0U2VsZWN0aW9uKCk7aWYoIWIuaXNDb2xsYXBzZWQpcmV0dXJuIGUoYi5nZXRSYW5nZUF0KDApKX1yZXR1cm5bXX0sZ2V0U2VsZWN0aW9uRWxlbWVudDpmdW5jdGlvbigpe3ZhciBiLGQsZTtyZXR1cm4gYy5zZWxlY3Rpb24mJmMuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlPyhiPWMuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksYi5wYXJlbnRFbGVtZW50KCkpOmEuZ2V0U2VsZWN0aW9uJiYoZD1hLmdldFNlbGVjdGlvbigpLGQuZ2V0UmFuZ2VBdD9kLnJhbmdlQ291bnQ+MCYmKGI9ZC5nZXRSYW5nZUF0KDApKTooYj1jLmNyZWF0ZVJhbmdlKCksYi5zZXRTdGFydChkLmFuY2hvck5vZGUsZC5hbmNob3JPZmZzZXQpLGIuc2V0RW5kKGQuZm9jdXNOb2RlLGQuZm9jdXNPZmZzZXQpLGIuY29sbGFwc2VkIT09ZC5pc0NvbGxhcHNlZCYmKGIuc2V0U3RhcnQoZC5mb2N1c05vZGUsZC5mb2N1c09mZnNldCksYi5zZXRFbmQoZC5hbmNob3JOb2RlLGQuYW5jaG9yT2Zmc2V0KSkpLGIpPyhlPWIuY29tbW9uQW5jZXN0b3JDb250YWluZXIsMz09PWUubm9kZVR5cGU/ZS5wYXJlbnROb2RlOmUpOnZvaWQgMH0sc2V0U2VsZWN0aW9uVG9FbGVtZW50U3RhcnQ6ZnVuY3Rpb24oYil7aWYoYy5jcmVhdGVSYW5nZSYmYS5nZXRTZWxlY3Rpb24pe3ZhciBkPWMuY3JlYXRlUmFuZ2UoKTtkLnNlbGVjdE5vZGVDb250ZW50cyhiKSxkLnNldFN0YXJ0KGIsMCksZC5zZXRFbmQoYiwwKTt2YXIgZT1hLmdldFNlbGVjdGlvbigpO2UucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShkKX1lbHNlIGlmKGMuc2VsZWN0aW9uJiZjLmJvZHkuY3JlYXRlVGV4dFJhbmdlKXt2YXIgZj1jLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7Zi5tb3ZlVG9FbGVtZW50VGV4dChiKSxmLmNvbGxhcHNlKCEwKSxmLm1vdmVFbmQoXCJjaGFyYWN0ZXJcIiwwKSxmLm1vdmVTdGFydChcImNoYXJhY3RlclwiLDApLGYuc2VsZWN0KCl9fSxzZXRTZWxlY3Rpb25Ub0VsZW1lbnRFbmQ6ZnVuY3Rpb24oYil7aWYoYy5jcmVhdGVSYW5nZSYmYS5nZXRTZWxlY3Rpb24pe3ZhciBkPWMuY3JlYXRlUmFuZ2UoKTtkLnNlbGVjdE5vZGVDb250ZW50cyhiKSxkLmNvbGxhcHNlKCExKTt2YXIgZT1hLmdldFNlbGVjdGlvbigpO2UucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShkKX1lbHNlIGlmKGMuc2VsZWN0aW9uJiZjLmJvZHkuY3JlYXRlVGV4dFJhbmdlKXt2YXIgZj1jLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7Zi5tb3ZlVG9FbGVtZW50VGV4dChiKSxmLmNvbGxhcHNlKCExKSxmLnNlbGVjdCgpfX19fV0pfSgpfSh7fSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBhcHAgPSByZXF1aXJlKCdhbmd1bGFyJykubW9kdWxlKCdrb250QXBwJyk7XG5cbmFwcC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCByZXF1aXJlKCcuL2xvZ2luJykpO1xuYXBwLmNvbnRyb2xsZXIoJ1BhZ2VFZGl0Q29udHJvbGxlcicsIHJlcXVpcmUoJy4vcGFnZWVkaXQnKSk7XG5hcHAuY29udHJvbGxlcignUGFnZVRyZWVDb250cm9sbGVyJywgcmVxdWlyZSgnLi9wYWdldHJlZScpKTtcbmFwcC5jb250cm9sbGVyKCdQcmVyZW5kZXJDb250cm9sbGVyJywgcmVxdWlyZSgnLi9wcmVyZW5kZXInKSk7XG5hcHAuY29udHJvbGxlcignU2lkZU5hdkNvbnRyb2xsZXInLCByZXF1aXJlKCcuL3NpZGVuYXYnKSk7XG5hcHAuY29udHJvbGxlcignU2l0ZUFkZENvbnRyb2xsZXInLCByZXF1aXJlKCcuL3NpdGVhZGQnKSk7XG5hcHAuY29udHJvbGxlcignU2l0ZURldGFpbENvbnRyb2xsZXInLCByZXF1aXJlKCcuL3NpdGVkZXRhaWwnKSk7XG5hcHAuY29udHJvbGxlcignU2l0ZUxpc3RDb250cm9sbGVyJywgcmVxdWlyZSgnLi9zaXRlbGlzdCcpKTtcbmFwcC5jb250cm9sbGVyKCdTaXRlbWFwQ29udHJvbGxlcicsIHJlcXVpcmUoJy4vc2l0ZW1hcCcpKTtcbmFwcC5jb250cm9sbGVyKCdVc2VyQWRkTmV3Q29udHJvbGxlcicsIHJlcXVpcmUoJy4vdXNlcmFkZCcpKTtcbmFwcC5jb250cm9sbGVyKCdVc2VyQXV0aFRva2VuQ29udHJvbGxlcicsIHJlcXVpcmUoJy4vdXNlcmF1dGh0b2tlbicpKTtcbmFwcC5jb250cm9sbGVyKCdVc2VyQ3JlZENvbnRyb2xsZXInLCByZXF1aXJlKCcuL3VzZXJjcmVkJykpO1xuYXBwLmNvbnRyb2xsZXIoJ1VzZXJDcmVkUGFzc3dvcmRDb250cm9sbGVyJywgcmVxdWlyZSgnLi91c2VyY3JlZHBhc3N3b3JkJykpO1xuYXBwLmNvbnRyb2xsZXIoJ1VzZXJEZXRhaWxDb250cm9sbGVyJywgcmVxdWlyZSgnLi91c2VyZGV0YWlsJykpO1xuYXBwLmNvbnRyb2xsZXIoJ1VzZXJMaXN0Q29udHJvbGxlcicsIHJlcXVpcmUoJy4vdXNlcmxpc3QnKSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkY29va2llU3RvcmUsIFJlc3Rhbmd1bGFyKSB7XG4gICRzY29wZS5yZW1lbWJlck1lID0gdHJ1ZTtcbiAgJHNjb3BlLnJlc3BvbnNlRXJyb3JTaG93ID0gZmFsc2U7XG4gICRzY29wZS5yZXNwb25zZUVycm9yID0gJyc7XG5cbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGNyZWRlbnRpYWxzID0ge1xuICAgICAgdXNlcm5hbWU6ICRzY29wZS51c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmRcbiAgICB9O1xuXG4gICAgUmVzdGFuZ3VsYXIuYWxsKCd1c2VyJykuY3VzdG9tUE9TVChjcmVkZW50aWFscywnYXV0aGVudGljYXRlJykudGhlbiggZnVuY3Rpb24odG9rZW5Db250YWluZXIpIHtcblxuICAgICAgJHJvb3RTY29wZS5hdXRoVG9rZW4gPSB0b2tlbkNvbnRhaW5lci50b2tlbjtcbiAgICAgIGlmICgkc2NvcGUucmVtZW1iZXJNZSkge1xuICAgICAgICAkY29va2llU3RvcmUucHV0KCdhdXRoVG9rZW4nLCB0b2tlbkNvbnRhaW5lci50b2tlbik7XG4gICAgICB9XG4gICAgICAvLyByZXRyaWV2ZSBjdXJyZW50IHVzZXIgZGV0YWlsc1xuICAgICAgUmVzdGFuZ3VsYXIub25lKCd1c2VyJykuZ2V0KCkudGhlbihmdW5jdGlvbiAodXNlckRhdGEpIHtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gdXNlckRhdGE7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICB9KTtcblxuICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSkge1xuICAgICAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yOiAnICsgcmVzcG9uc2UuZGF0YS5tZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yOiAnICsgcmVzcG9uc2UuZGF0YS5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yOiAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3JTaG93ID0gdHJ1ZTtcblxuICAgICAgLy9jb25zb2xlLmxvZygnRXJyb3Igd2l0aCBzdGF0dXMgY29kZTogJywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIC8vY29uc29sZS5sb2coJ0Vycm9yIG1lc3NhZ2U6ICcsICRzY29wZS5yZXNwb25zZUVycm9yKTtcbiAgICB9KTtcblxuICB9O1xuXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhciwgJHVwbG9hZCwgICRpbnRlcnZhbCkge1xuICAkc2NvcGUucGFnZSA9IHt9O1xuICAkc2NvcGUuaW1hZ2VzID0gW107XG4gICRzY29wZS5kb2NmaWxlcyA9IFtdO1xuICAkc2NvcGUuZW1iZWRpbWFnZXMgPSBbXTtcblxuICAkc2NvcGUubWFzdGVyID0ge307XG4gICRzY29wZS5uZXdQcm9wTmFtZSA9ICcnO1xuICAkc2NvcGUubmV3UHJvcENvbnRlbnQgPSAnJztcblxuICAkc2NvcGUuZWRpdG9yT3B0aW9ucyA9IHtcbiAgICBsYW5ndWFnZTogJ2VuJ1xuICB9O1xuXG4gIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgJHNjb3BlLnBhZ2UgPSBkYXRhO1xuICAgICRzY29wZS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkoZGF0YSk7XG4gIH0pO1xuXG4gICRzY29wZS4kd2F0Y2goJ3BhZ2UudGl0bGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCRzY29wZS5wYWdlLmF1dG9OYW1lKSB7XG4gICAgICB2YXIgdHh0ID0gJHNjb3BlLnBhZ2UudGl0bGUgKyAnJztcbiAgICAgIHZhciBuZXdOYW1lID0gdHh0LnJlcGxhY2UoL1xcVy9nLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICRzY29wZS5wYWdlLm5hbWUgPSBuZXdOYW1lO1xuICAgIH1cbiAgfSk7XG5cbiAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgJHNjb3BlLm1hc3RlciA9IGFuZ3VsYXIuY29weShwYWdlKTtcbiAgICBwYWdlLnNhdmUoKTtcbiAgfTtcblxuICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgJHNjb3BlLnBhZ2UgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3Rlcik7XG4gIH07XG5cbiAgJHNjb3BlLmlzVW5jaGFuZ2VkID0gZnVuY3Rpb24gKHBhZ2UpIHtcbiAgICByZXR1cm4gYW5ndWxhci5lcXVhbHMocGFnZSwgJHNjb3BlLm1hc3Rlcik7XG4gIH07XG5cbiAgJHNjb3BlLmxvYWRJbWFnZXMgPSBmdW5jdGlvbigpIHtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgJHN0YXRlUGFyYW1zLnBhZ2VJZCkuYWxsKCdpbWFnZXMnKS5nZXRMaXN0KCkudGhlbihmdW5jdGlvbiAobGlzdCkge1xuICAgICAgJHNjb3BlLmltYWdlcyA9IGxpc3Q7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLmxvYWRJbWFnZXMoKTtcblxuICAkc2NvcGUucmVtb3ZlSW1hZ2UgPSBmdW5jdGlvbihpbWcpIHtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgJHN0YXRlUGFyYW1zLnBhZ2VJZCkub25lKCdpbWFnZXMnLCBpbWcuaWQpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgJHNjb3BlLmxvYWRJbWFnZXMoKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuaW1hZ2VVcmwgPSBmdW5jdGlvbihpbWcpIHtcbiAgICB2YXIgbCA9ICcvYXR0LycgKyAkc2NvcGUucGFnZS5zaXRlSWQgKyBpbWcuZGlyZWN0b3J5UGF0aCArICcvJyArIGltZy5uYW1lO1xuICAgIHJldHVybiBsO1xuICB9O1xuXG4gICRzY29wZS50aHVtYlVybCA9IGZ1bmN0aW9uKGltZykge1xuICAgIGlmIChpbWcudGh1bWIgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcvaW1hZ2VzLzI4Mi5naWYnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiAnL2F0dC8nICsgJHNjb3BlLnBhZ2Uuc2l0ZUlkICsgaW1nLnRodW1iLmRpcmVjdG9yeVBhdGggKyAnLycgKyBpbWcubmFtZTtcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLmltZ1NldE1haW4gPSBmdW5jdGlvbihpbWcpIHtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgJHN0YXRlUGFyYW1zLnBhZ2VJZCkub25lKCdpbWFnZXMnLCBpbWcuaWQpLmFsbCgnc2V0bWFpbicpLmN1c3RvbVBPU1QoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICRzY29wZS5sb2FkSW1hZ2VzKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLmltZ01vdmVVcCA9IGZ1bmN0aW9uKGltZykge1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5vbmUoJ2ltYWdlcycsIGltZy5pZCkuYWxsKCdtb3ZldXAnKS5jdXN0b21QT1NUKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAkc2NvcGUubG9hZEltYWdlcygpO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5pbWdNb3ZlRG93biA9IGZ1bmN0aW9uKGltZykge1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5vbmUoJ2ltYWdlcycsIGltZy5pZCkuYWxsKCdtb3ZlZG93bicpLmN1c3RvbVBPU1QoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICRzY29wZS5sb2FkSW1hZ2VzKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLm9uSW1hZ2VTZWxlY3QgPSBmdW5jdGlvbiAoJGZpbGVzKSB7XG4gICAgLy8kZmlsZXM6IGFuIGFycmF5IG9mIGZpbGVzIHNlbGVjdGVkLCBlYWNoIGZpbGUgaGFzIG5hbWUsIHNpemUsIGFuZCB0eXBlLlxuICAgICRzY29wZS5zZWxlY3RlZEZpbGVzID0gW107XG4gICAgJHNjb3BlLnByb2dyZXNzID0gW107XG4gICAgaWYgKCRzY29wZS51cGxvYWQgJiYgJHNjb3BlLnVwbG9hZC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS51cGxvYWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCRzY29wZS51cGxvYWRbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICRzY29wZS51cGxvYWRbaV0uYWJvcnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAkc2NvcGUudXBsb2FkID0gW107XG4gICAgJHNjb3BlLnVwbG9hZFJlc3VsdCA9IFtdO1xuICAgICRzY29wZS5zZWxlY3RlZEZpbGVzID0gJGZpbGVzO1xuICAgICRzY29wZS5kYXRhVXJscyA9IFtdO1xuICAgIGZvciAodmFyIGl0ID0gMDsgaXQgPCAkZmlsZXMubGVuZ3RoOyBpdCsrKSB7XG4gICAgICB2YXIgZmlsZSA9ICRmaWxlc1tpdF07XG4gICAgICAkc2NvcGUudXBsb2FkID0gJHVwbG9hZC51cGxvYWQoe1xuICAgICAgICB1cmw6ICcvYXBpL3BhZ2VzLycgKyAkc3RhdGVQYXJhbXMucGFnZUlkICsgJy9pbWFnZXMnLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgLy8gbWV0aG9kOiAnUE9TVCcgb3IgJ1BVVCcsXG4gICAgICAgIC8vIGhlYWRlcnM6IHsnaGVhZGVyLWtleSc6ICdoZWFkZXItdmFsdWUnfSxcbiAgICAgICAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7IGZpbGVOdW06IGl0IH0sXG4gICAgICAgIGZpbGU6IGZpbGVcbiAgICAgICAgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XG4gICAgICAgIC8qIHNldCB0aGUgZmlsZSBmb3JtRGF0YSBuYW1lICgnQ29udGVudC1EZXNwb3NpdGlvbicpLiBEZWZhdWx0IGlzICdmaWxlJyAqL1xuICAgICAgICAvL2ZpbGVGb3JtRGF0YU5hbWU6IG15RmlsZSwgLy9vciBhIGxpc3Qgb2YgbmFtZXMgZm9yIG11bHRpcGxlIGZpbGVzIChodG1sNSkuXG4gICAgICAgIC8qIGN1c3RvbWl6ZSBob3cgZGF0YSBpcyBhZGRlZCB0byBmb3JtRGF0YS4gU2VlICM0MCNpc3N1ZWNvbW1lbnQtMjg2MTIwMDAgZm9yIHNhbXBsZSBjb2RlICovXG4gICAgICAgIC8vZm9ybURhdGFBcHBlbmRlcjogZnVuY3Rpb24oZm9ybURhdGEsIGtleSwgdmFsKXt9XG4gICAgICB9KS5wcm9ncmVzcyhmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICRzY29wZS5wcm9ncmVzc1tpdF0gPSBNYXRoLm1pbigxMDAsIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdwZXJjZW50OiAnICsgcGFyc2VJbnQoMTAwLjAgKiBldnQubG9hZGVkIC8gZXZ0LnRvdGFsKSk7XG4gICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgICAvLyBmaWxlIGlzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiZmlsZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHk6IFwiICsgZGF0YSk7XG4gICAgICAgICRzY29wZS51cGxvYWRSZXN1bHQucHVzaChkYXRhKTtcbiAgICAgICAgJHNjb3BlLmxvYWRVcGxvYWRlZEltYWdlcygpO1xuICAgICAgfSlcbiAgICAgIC54aHIoZnVuY3Rpb24oeGhyKXsgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnYWJvcnQgY29tcGxldGUnKVxuICAgICAgfSwgZmFsc2UpfSk7XG4gICAgfVxuICAgIC8qIGFsdGVybmF0aXZlIHdheSBvZiB1cGxvYWRpbmcsIHNlbmQgdGhlIGZpbGUgYmluYXJ5IHdpdGggdGhlIGZpbGUncyBjb250ZW50LXR5cGUuXG4gICAgICAgICAgICAgICAgIENvdWxkIGJlIHVzZWQgdG8gdXBsb2FkIGZpbGVzIHRvIENvdWNoREIsIGltZ3VyLCBldGMuLi4gaHRtbDUgRmlsZVJlYWRlciBpcyBuZWVkZWQuXG4gICAgICAgICAgICAgICAgIEl0IGNvdWxkIGFsc28gYmUgdXNlZCB0byBtb25pdG9yIHRoZSBwcm9ncmVzcyBvZiBhIG5vcm1hbCBodHRwIHBvc3QvcHV0IHJlcXVlc3Qgd2l0aCBsYXJnZSBkYXRhKi9cbiAgICAvLyAkc2NvcGUudXBsb2FkID0gJHVwbG9hZC5odHRwKHsuLi59KSAgc2VlIDg4I2lzc3VlY29tbWVudC0zMTM2NjQ4NyBmb3Igc2FtcGxlIGNvZGUuXG4gIH07XG5cbiAgdmFyIHBvbGxlcnMgPSB7fTtcblxuICB2YXIgcmVmcmVzaEltZ0RhdGEgPSBmdW5jdGlvbihpbWcpIHtcbiAgICAvL2NvbnNvbGUubG9nKFwiUG9sbCBmb3IgbmV3IGRhdGEgZm9yOlwiICsgaW1nLmlkICsgJy8nICsgaW1nLm5hbWUpO1xuXG4gICAgUmVzdGFuZ3VsYXIub25lKCdwYWdlcycsICRzdGF0ZVBhcmFtcy5wYWdlSWQpLm9uZSgnaW1hZ2VzJywgaW1nLmlkKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZiAoZGF0YS50aHVtYiAhPSBudWxsKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdUaHVtYiBnZW5lcmF0ZWQgZm9yOiAnICsgZGF0YS5uYW1lICsgJy8nICsgZGF0YS5pZCk7XG4gICAgICAgIGltZyA9IGRhdGE7XG4gICAgICAgIHZhciBpbWdJZCA9IGRhdGEuaWQ7XG4gICAgICAgIHZhciBwcm9taXNlID0gcG9sbGVyc1tpbWdJZF07XG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChwcm9taXNlKSkge1xuICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSk7XG4gICAgICAgICAgcHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBwb2xsZXJzW2ltZ0lkXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBkZWxldGUgcG9sbGVyc1tpbWdJZF07XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ1BvbGxlciByZW1vdmVkIGZvcjogJyArIGRhdGEubmFtZSArICcvJyArIGRhdGEuaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHJlcGxhY2VJbWcgPSBmdW5jdGlvbihuZXdJbWcpIHtcbiAgICB2YXIgcG9zID0gXy5maW5kSW5kZXgoJHNjb3BlLmltYWdlcywgeyAnaWQnOiBuZXdJbWcuaWQgfSk7XG4gICAgLy9jb25zb2xlLmxvZyhcIkZvdW5kIGluZGV4OiBcIiArIHBvcyk7XG4gICAgJHNjb3BlLmltYWdlc1twb3NdID0gbmV3SW1nO1xuICAgIC8vJHNjb3BlLmltYWdlcy5zcGxpY2UocG9zLCAxKTtcbiAgICAvLyRzY29wZS5pbWFnZXMuc3BsaWNlKHBvcywgMCwgbmV3SW1nKTtcbiAgfTtcblxuICAkc2NvcGUubG9hZFVwbG9hZGVkSW1hZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgUmVzdGFuZ3VsYXIub25lKCdwYWdlcycsICRzdGF0ZVBhcmFtcy5wYWdlSWQpLmFsbCgnaW1hZ2VzJykuZ2V0TGlzdCgpLnRoZW4oZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICRzY29wZS5pbWFnZXMgPSBsaXN0O1xuICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5pbWFnZXMsIGZ1bmN0aW9uKGltZywgaWR4KSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJpbWcudGh1bWI6IFwiICsgaW1nLnRodW1iKTtcbiAgICAgICAgaWYgKChpbWcudGh1bWIgPT0gbnVsbCkgfHwgKHR5cGVvZiBpbWcudGh1bWIgPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgIGlmICghYW5ndWxhci5pc0RlZmluZWQocG9sbGVyc1tpbWcuaWRdKSkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkltYWdlIHVwbG9hZGVkLCBidXQgdGh1bWJuYWlsIGlzIG5vdCBnZW5lcmF0ZWQgeWV0LCBzZXQgcG9sbGluZyBmb3I6IFwiICsgaW1nLmlkICsgXCIvXCIgKyBpbWcubmFtZSk7XG4gICAgICAgICAgICAvLyBwb2xsZXJzW2ltZy5pZF0gPSAkaW50ZXJ2YWwocmVmcmVzaEltZ0RhdGEoaW1nKSwgNTAwKTtcbiAgICAgICAgICAgIHBvbGxlcnNbaW1nLmlkXSA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJQb2xsIGZvciBuZXcgZGF0YSBmb3I6XCIgKyBpbWcuaWQgKyAnLycgKyBpbWcubmFtZSk7XG4gICAgICAgICAgICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5vbmUoJ2ltYWdlcycsIGltZy5pZCkuZ2V0KCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnRodW1iICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJUaHVtYiBnZW5lcmF0ZWQgZm9yOiBcIiArIGRhdGEubmFtZSArIFwiL1wiICsgZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICByZXBsYWNlSW1nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgdmFyIGltZ0lkID0gZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChwb2xsZXJzW2ltZ0lkXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChwb2xsZXJzW2ltZ0lkXSk7XG4gICAgICAgICAgICAgICAgICAgIHBvbGxlcnNbaW1nSWRdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcG9sbGVyc1tpbWdJZF07XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJQb2xsZXIgcmVtb3ZlZCBmb3I6IFwiICsgZGF0YS5uYW1lICsgXCIvXCIgKyBkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgIF8uZm9yRWFjaChwb2xsZXJzLCBmdW5jdGlvbihwb2xsZXIpIHtcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChwb2xsZXIpKSB7XG4gICAgICAgICRpbnRlcnZhbC5jYW5jZWwocG9sbGVyKTtcbiAgICAgICAgcG9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHBvbGxlcnMgPSB1bmRlZmluZWQ7XG4gIH0pO1xuXG4gICRzY29wZS5vbkZpbGVTZWxlY3QgPSBmdW5jdGlvbiAoJGZpbGVzKSB7XG4gICAgLy8kZmlsZXM6IGFuIGFycmF5IG9mIGZpbGVzIHNlbGVjdGVkLCBlYWNoIGZpbGUgaGFzIG5hbWUsIHNpemUsIGFuZCB0eXBlLlxuICAgICRzY29wZS5zZWxlY3RlZEZpbGVzID0gW107XG4gICAgJHNjb3BlLnByb2dyZXNzID0gW107XG4gICAgaWYgKCRzY29wZS51cGxvYWQgJiYgJHNjb3BlLnVwbG9hZC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS51cGxvYWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCRzY29wZS51cGxvYWRbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICRzY29wZS51cGxvYWRbaV0uYWJvcnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAkc2NvcGUudXBsb2FkID0gW107XG4gICAgJHNjb3BlLnVwbG9hZFJlc3VsdCA9IFtdO1xuICAgICRzY29wZS5zZWxlY3RlZEZpbGVzID0gJGZpbGVzO1xuICAgICRzY29wZS5kYXRhVXJscyA9IFtdO1xuICAgIGZvciAodmFyIGl0ID0gMDsgaXQgPCAkZmlsZXMubGVuZ3RoOyBpdCsrKSB7XG4gICAgICB2YXIgZmlsZSA9ICRmaWxlc1tpdF07XG4gICAgICAkc2NvcGUudXBsb2FkID0gJHVwbG9hZC51cGxvYWQoe1xuICAgICAgICB1cmw6ICcvYXBpL3BhZ2VzLycgKyAkc3RhdGVQYXJhbXMucGFnZUlkICsgJy9maWxlcycsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAvLyBtZXRob2Q6ICdQT1NUJyBvciAnUFVUJyxcbiAgICAgICAgLy8gaGVhZGVyczogeydoZWFkZXIta2V5JzogJ2hlYWRlci12YWx1ZSd9LFxuICAgICAgICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAgIGRhdGE6IHtmaWxlTnVtOiBpdH0sXG4gICAgICAgIGZpbGU6IGZpbGVcbiAgICAgICAgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XG4gICAgICAgIC8qIHNldCB0aGUgZmlsZSBmb3JtRGF0YSBuYW1lICgnQ29udGVudC1EZXNwb3NpdGlvbicpLiBEZWZhdWx0IGlzICdmaWxlJyAqL1xuICAgICAgICAvL2ZpbGVGb3JtRGF0YU5hbWU6IG15RmlsZSwgLy9vciBhIGxpc3Qgb2YgbmFtZXMgZm9yIG11bHRpcGxlIGZpbGVzIChodG1sNSkuXG4gICAgICAgIC8qIGN1c3RvbWl6ZSBob3cgZGF0YSBpcyBhZGRlZCB0byBmb3JtRGF0YS4gU2VlICM0MCNpc3N1ZWNvbW1lbnQtMjg2MTIwMDAgZm9yIHNhbXBsZSBjb2RlICovXG4gICAgICAgIC8vZm9ybURhdGFBcHBlbmRlcjogZnVuY3Rpb24oZm9ybURhdGEsIGtleSwgdmFsKXt9XG4gICAgICB9KS5wcm9ncmVzcyhmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICRzY29wZS5wcm9ncmVzc1tpdF0gPSBNYXRoLm1pbigxMDAsIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdwZXJjZW50OiAnICsgcGFyc2VJbnQoMTAwLjAgKiBldnQubG9hZGVkIC8gZXZ0LnRvdGFsKSk7XG4gICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgICAvLyBmaWxlIGlzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAkc2NvcGUudXBsb2FkUmVzdWx0LnB1c2goZGF0YSk7XG4gICAgICAgICRzY29wZS5sb2FkRmlsZXMoKTtcbiAgICAgIH0pXG4gICAgICAvLy5lcnJvciguLi4pXG4gICAgICAvLy50aGVuKHN1Y2Nlc3MsIGVycm9yLCBwcm9ncmVzcyk7XG4gICAgICAueGhyKFxuICAgICAgICBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnYWJvcnQgY29tcGxldGUnKTtcbiAgICAgICAgICB9LCBmYWxzZSl9KTtcbiAgICB9XG4gICAgLyogYWx0ZXJuYXRpdmUgd2F5IG9mIHVwbG9hZGluZywgc2VuZCB0aGUgZmlsZSBiaW5hcnkgd2l0aCB0aGUgZmlsZSdzIGNvbnRlbnQtdHlwZS5cbiAgICAgICAgICAgICAgICAgQ291bGQgYmUgdXNlZCB0byB1cGxvYWQgZmlsZXMgdG8gQ291Y2hEQiwgaW1ndXIsIGV0Yy4uLiBodG1sNSBGaWxlUmVhZGVyIGlzIG5lZWRlZC5cbiAgICAgICAgICAgICAgICAgSXQgY291bGQgYWxzbyBiZSB1c2VkIHRvIG1vbml0b3IgdGhlIHByb2dyZXNzIG9mIGEgbm9ybWFsIGh0dHAgcG9zdC9wdXQgcmVxdWVzdCB3aXRoIGxhcmdlIGRhdGEqL1xuICAgIC8vICRzY29wZS51cGxvYWQgPSAkdXBsb2FkLmh0dHAoey4uLn0pICBzZWUgODgjaXNzdWVjb21tZW50LTMxMzY2NDg3IGZvciBzYW1wbGUgY29kZS5cbiAgfTtcblxuICAkc2NvcGUuZmlsZU1vdmVVcCA9IGZ1bmN0aW9uKGltZykge1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5vbmUoJ2ZpbGVzJywgaW1nLmlkKS5hbGwoJ21vdmV1cCcpXG4gICAgLmN1c3RvbVBPU1QoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICRzY29wZS5sb2FkRmlsZXMoKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuZmlsZU1vdmVEb3duID0gZnVuY3Rpb24oaW1nKSB7XG4gICAgUmVzdGFuZ3VsYXIub25lKCdwYWdlcycsICRzdGF0ZVBhcmFtcy5wYWdlSWQpLm9uZSgnZmlsZXMnLCBpbWcuaWQpLmFsbCgnbW92ZWRvd24nKVxuICAgIC5jdXN0b21QT1NUKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAkc2NvcGUubG9hZEZpbGVzKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnNhdmVGaWxlID0gZnVuY3Rpb24oZGYpIHtcbiAgICBkZi5wdXQoKTtcbiAgfTtcblxuICAkc2NvcGUubG9hZEZpbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgUmVzdGFuZ3VsYXIub25lKCdwYWdlcycsICRzdGF0ZVBhcmFtcy5wYWdlSWQpLmFsbCgnZmlsZXMnKS5nZXRMaXN0KCkudGhlbihmdW5jdGlvbiAobGlzdCkge1xuICAgICAgJHNjb3BlLmRvY2ZpbGVzID0gbGlzdDtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUubG9hZEZpbGVzKCk7XG5cbiAgJHNjb3BlLnJlbW92ZUZpbGUgPSBmdW5jdGlvbihkZikge1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5vbmUoJ2ZpbGVzJywgZGYuaWQpLnJlbW92ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgJHNjb3BlLmxvYWRGaWxlcygpO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5maWxlVXJsID0gZnVuY3Rpb24oZGYpIHtcbiAgICB2YXIgbCA9ICcvYXR0LycgKyAkc2NvcGUucGFnZS5zaXRlSWQgKyBkZi5kaXJlY3RvcnlQYXRoICsgJy8nICsgZGYubmFtZTtcbiAgICByZXR1cm4gbDtcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAkc2NvcGUub25FbWJlZEltYWdlU2VsZWN0ID0gZnVuY3Rpb24gKCRmaWxlcykge1xuICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cbiAgICAkc2NvcGUuc2VsZWN0ZWRGaWxlcyA9IFtdO1xuICAgICRzY29wZS5wcm9ncmVzcyA9IFtdO1xuICAgIGlmICgkc2NvcGUudXBsb2FkICYmICRzY29wZS51cGxvYWQubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUudXBsb2FkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICgkc2NvcGUudXBsb2FkW2ldICE9IG51bGwpIHtcbiAgICAgICAgICAkc2NvcGUudXBsb2FkW2ldLmFib3J0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgJHNjb3BlLnVwbG9hZCA9IFtdO1xuICAgICRzY29wZS51cGxvYWRSZXN1bHQgPSBbXTtcbiAgICAkc2NvcGUuc2VsZWN0ZWRGaWxlcyA9ICRmaWxlcztcbiAgICAkc2NvcGUuZGF0YVVybHMgPSBbXTtcbiAgICBmb3IgKHZhciBpdCA9IDA7IGl0IDwgJGZpbGVzLmxlbmd0aDsgaXQrKykge1xuICAgICAgdmFyIGZpbGUgPSAkZmlsZXNbaXRdO1xuICAgICAgJHNjb3BlLnVwbG9hZCA9ICR1cGxvYWQudXBsb2FkKHtcbiAgICAgICAgdXJsOiAnL2FwaS9wYWdlcy8nICsgJHN0YXRlUGFyYW1zLnBhZ2VJZCArICcvZW1iZWQnLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YToge2ZpbGVOdW06IGl0fSxcbiAgICAgICAgZmlsZTogZmlsZVxuICAgICAgfSkucHJvZ3Jlc3MoZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAkc2NvcGUucHJvZ3Jlc3NbaXRdID0gTWF0aC5taW4oMTAwLCBwYXJzZUludCgxMDAuMCAqIGV2dC5sb2FkZWQgLyBldnQudG90YWwpKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygncGVyY2VudDogJyArIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xuICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgJHNjb3BlLnVwbG9hZFJlc3VsdC5wdXNoKGRhdGEpO1xuICAgICAgICAkc2NvcGUubG9hZEVtYmVkSW1hZ2VzKCk7XG4gICAgICB9KVxuICAgICAgLnhocihcbiAgICAgICAgZnVuY3Rpb24gKHhocikge1xuICAgICAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2Fib3J0IGNvbXBsZXRlJyk7XG4gICAgICAgICAgfSwgZmFsc2UpfSk7XG4gICAgfVxuICB9O1xuXG4gICRzY29wZS5sb2FkRW1iZWRJbWFnZXMgPSBmdW5jdGlvbigpIHtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgJHN0YXRlUGFyYW1zLnBhZ2VJZCkuYWxsKCdlbWJlZCcpLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAkc2NvcGUuZW1iZWRpbWFnZXMgPSBsaXN0O1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS5sb2FkRW1iZWRJbWFnZXMoKTtcblxuICAkc2NvcGUucmVtb3ZlRW1iZWRJbWFnZSA9IGZ1bmN0aW9uKGVtYikge1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5vbmUoJ2VtYmVkJywgZW1iLmlkKS5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICRzY29wZS5sb2FkRW1iZWRJbWFnZXMoKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuZW1iZWRJbWFnZVVybCA9IGZ1bmN0aW9uKGVtYikge1xuICAgIHZhciBsID0gJy9hdHQvJyArICRzY29wZS5wYWdlLnNpdGVJZCArIGVtYi5kaXJlY3RvcnlQYXRoICsgJy8nICsgZW1iLm5hbWU7XG4gICAgcmV0dXJuIGw7XG4gIH07XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuICAkc2NvcGUuYWRkUHJvcCA9IGZ1bmN0aW9uIChsb2NhbFNjb3BlKSB7XG4gICAgdmFyIHBhZ2VQcm9wZXJ0eSA9IHtcbiAgICAgIG5hbWU6IGxvY2FsU2NvcGUubmV3UHJvcE5hbWUsXG4gICAgICBjb250ZW50OiBsb2NhbFNjb3BlLm5ld1Byb3BDb250ZW50XG4gICAgfTtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgJHN0YXRlUGFyYW1zLnBhZ2VJZCkuYWxsKCdwcm9wZXJ0aWVzJylcbiAgICAgIC5jdXN0b21QT1NUKHBhZ2VQcm9wZXJ0eSkudGhlbihmdW5jdGlvbiAodXBkYXRlZFBhZ2UpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzIC0gcHJvcGVydHkgY3JlYXRlZFwiKTtcbiAgICAgICRzY29wZS5wYWdlLnByb3BlcnRpZXMgPSB1cGRhdGVkUGFnZS5wcm9wZXJ0aWVzO1xuICAgICAgJHNjb3BlLnBhZ2UucHJvcGVydHlNYXAgPSB1cGRhdGVkUGFnZS5wcm9wZXJ0eU1hcDtcbiAgICAgIGxvY2FsU2NvcGUubmV3UHJvcE5hbWUgPSAnJztcbiAgICAgIGxvY2FsU2NvcGUubmV3UHJvcENvbnRlbnQgPSAnJztcbiAgICAgICRzY29wZS5tYXN0ZXIucHJvcGVydGllcyA9IGFuZ3VsYXIuY29weSh1cGRhdGVkUGFnZS5wcm9wZXJ0aWVzKTtcbiAgICAgIC8vJHNjb3BlLm1hc3Rlci5wcm9wZXJ0aWVzID0gUmVzdGFuZ3VsYXIuY29weSh1cGRhdGVkUGFnZS5wcm9wZXJ0aWVzKTtcbiAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yIGNyZWF0aW5nIHByb3BlcnR5OiAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IHRydWU7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiRXJyb3Igd2l0aCBzdGF0dXMgY29kZTogXCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gIH07XG5cbiAgJHNjb3BlLnNhdmVQcm9wID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgJHN0YXRlUGFyYW1zLnBhZ2VJZCkub25lKCdwcm9wZXJ0aWVzJywgcHJvcC5pZClcbiAgICAgIC5jdXN0b21QVVQocHJvcCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiU3VjY2VzcyAtIHByb3BlcnR5IHNhdmVkXCIpO1xuICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3IgPSAnRXJyb3Igc2F2aW5nIHByb3BlcnR5OiAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IHRydWU7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiRXJyb3Igd2l0aCBzdGF0dXMgY29kZTogXCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gIH07XG5cbiAgJHNjb3BlLmRlbGV0ZVByb3AgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKS5vbmUoJ3Byb3BlcnRpZXMnLCBwcm9wLmlkKS5yZW1vdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpZHggPSAkc2NvcGUucGFnZS5wcm9wZXJ0aWVzLmluZGV4T2YocHJvcCk7XG4gICAgICAkc2NvcGUucGFnZS5wcm9wZXJ0aWVzLnNwbGljZShpZHgsIDEpO1xuICAgICAgLy9jb25zb2xlLmxvZyhcIlN1Y2Nlc3MgLSBwcm9wZXJ0eSByZW1vdmVkXCIpO1xuICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3IgPSAnRXJyb3IgcmVtb3ZpbmcgcHJvcGVydHk6ICcgKyByZXNwb25zZS5zdGF0dXNUZXh0O1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3JTaG93ID0gdHJ1ZTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJFcnJvciB3aXRoIHN0YXR1cyBjb2RlOiBcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICB9O1xuXG4gICRzY29wZS5yZXNldCgpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xuICAkc2NvcGUuZGF0YSA9IHt9O1xuICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2V0cmVlcycsICRzdGF0ZVBhcmFtcy5zaXRlSWQpLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgJHNjb3BlLmRhdGEgPSBsaXN0O1xuICB9KTtcblxuICAkc2NvcGUudHJlZU9wdGlvbnMgPSB7XG4gICAgYWNjZXB0OiBmdW5jdGlvbihzb3VyY2VOb2RlU2NvcGUsIGRlc3ROb2Rlc1Njb3BlLCBkZXN0SW5kZXgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgZHJvcHBlZDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBzcmNQYWdlSWQgPSAgZXZlbnQuc291cmNlLm5vZGVTY29wZS4kbW9kZWxWYWx1ZS5pZDtcbiAgICAgIHZhciBzcmNQYXJlbnRJZCA9IDA7XG4gICAgICBpZiAoZXZlbnQuc291cmNlLm5vZGVTY29wZS4kcGFyZW50Tm9kZVNjb3BlICE9IG51bGwpIHtcbiAgICAgICAgc3JjUGFyZW50SWQgPSBldmVudC5zb3VyY2Uubm9kZVNjb3BlLiRwYXJlbnROb2RlU2NvcGUuJG1vZGVsVmFsdWUuaWQ7XG4gICAgICB9XG4gICAgICB2YXIgc3JjSW5kZXggPSBldmVudC5zb3VyY2UuaW5kZXg7XG4gICAgICB2YXIgZHN0UGFyZW50SWQgPSAwO1xuICAgICAgaWYgKGV2ZW50LmRlc3Qubm9kZXNTY29wZS4kcGFyZW50LiRtb2RlbFZhbHVlKSB7XG4gICAgICAgIGRzdFBhcmVudElkID0gZXZlbnQuZGVzdC5ub2Rlc1Njb3BlLiRwYXJlbnQuJG1vZGVsVmFsdWUuaWQ7XG4gICAgICB9XG4gICAgICB2YXIgZHN0SW5kZXggPSBldmVudC5kZXN0LmluZGV4O1xuICAgICAgLy9jb25zb2xlLmxvZyhcImRyb3BwZWQgZXZlbnQ6IHBhZ2UgI1wiICsgc3JjUGFnZUlkICsgXCIgbW92ZWQgZnJvbSBwYXJlbnQgI1wiICsgc3JjUGFyZW50SWQgKyBcIiB0byBwYXJlbnQgI1wiICsgZHN0UGFyZW50SWQpO1xuICAgICAgLy9jb25zb2xlLmxvZyhcImluZGV4IGNoYW5nZWQ6IFwiICsgc3JjSW5kZXggKyBcIiB0byBcIiArIGRzdEluZGV4KTtcbiAgICAgIGlmICgoZHN0SW5kZXggIT09IHNyY0luZGV4KSB8fCAoZHN0UGFyZW50SWQgIT09IHNyY1BhcmVudElkKSkge1xuICAgICAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgc3JjUGFnZUlkKS5hbGwoJ21vdmUnKVxuICAgICAgICAuY3VzdG9tUE9TVCh7IHNyY1BhcmVudElkOiBzcmNQYXJlbnRJZCwgZHN0UGFyZW50SWQ6IGRzdFBhcmVudElkLCBzcmNJbmRleDogc3JjSW5kZXgsIGRzdEluZGV4OiBkc3RJbmRleH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAkc2NvcGUucmVsb2FkVHJlZSA9IGZ1bmN0aW9uKCkge1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgncGFnZXRyZWVzJywgJHN0YXRlUGFyYW1zLnNpdGVJZCkuZ2V0TGlzdCgpLnRoZW4oZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICRzY29wZS5kYXRhID0gbGlzdDtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuZWRpdFBhZ2UgPSBmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICB2YXIgbm9kZURhdGEgPSBzY29wZS4kbW9kZWxWYWx1ZTtcbiAgICAkc3RhdGUuZ28oJ14ucGFnZXMnLCB7c2l0ZUlkOiAkc3RhdGVQYXJhbXMuc2l0ZUlkLCBwYWdlSWQ6IG5vZGVEYXRhLmlkfSk7XG4gIH07XG5cbiAgJHNjb3BlLnJlbW92ZVBhZ2UgPSBmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICB2YXIgbm9kZURhdGEgPSBzY29wZS4kbW9kZWxWYWx1ZTtcbiAgICAvL2NvbnNvbGUubG9nKFwicmVtb3ZlIHBhZ2U6IFwiICsgbm9kZURhdGEuaWQgKyBcIi9cIiArIG5vZGVEYXRhLnRpdGxlKTtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3BhZ2VzJywgbm9kZURhdGEuaWQpLmN1c3RvbURFTEVURSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgc2NvcGUucmVtb3ZlKCk7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiU3VjY2VzcyAtIHBhZ2UgcmVtb3ZlZFwiKTtcbiAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yIHJlbW92aW5nIHBhZ2U6ICcgKyByZXNwb25zZS5zdGF0dXNUZXh0O1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3JTaG93ID0gdHJ1ZTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJFcnJvciB3aXRoIHN0YXR1cyBjb2RlOiBcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICB9O1xuXG4gICRzY29wZS50b2dnbGUgPSBmdW5jdGlvbihzY29wZSkge1xuICAgIC8vY29uc29sZS5sb2coXCJ0b2dnbGVcIik7XG4gICAgc2NvcGUudG9nZ2xlKCk7XG4gIH07XG5cbiAgJHNjb3BlLm1vdmVMYXN0VG9UaGVCZWdpbm5pbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEgPSAkc2NvcGUuZGF0YS5wb3AoKTtcbiAgICAkc2NvcGUuZGF0YS5zcGxpY2UoMCwwLCBhKTtcbiAgfTtcblxuICAkc2NvcGUubmV3Um9vdFBhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoJHNjb3BlLmRhdGEgPT0gbnVsbCkgeyAkc2NvcGUuZGF0YSA9IFtdOyB9XG4gICAgdmFyIG5ld1BhZ2UgPSB7XG4gICAgICBzaXRlSWQ6ICRzdGF0ZVBhcmFtcy5zaXRlSWQsXG4gICAgICBwYXJlbnRJZDogMCxcbiAgICAgIHRpdGxlOiAnTmV3IHBhZ2UuJyArICgkc2NvcGUuZGF0YS5sZW5ndGggKyAxKSxcbiAgICAgIG5hbWU6ICduZXdwYWdlJyArICgkc2NvcGUuZGF0YS5sZW5ndGggKyAxKSxcbiAgICAgIHB1YmxpY1BhZ2U6IGZhbHNlLFxuICAgICAgcGxhY2Vob2xkZXI6IGZhbHNlXG4gICAgfTtcbiAgICBSZXN0YW5ndWxhci5hbGwoJ3BhZ2VzJykuY3VzdG9tUE9TVChuZXdQYWdlKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzIC0gcGFnZSBjcmVhdGVkXCIpO1xuICAgICAgJHNjb3BlLnJlbG9hZFRyZWUoKTtcbiAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yIGNyZWF0aW5nIG5ldyByb290IHBhZ2U6ICcgKyByZXNwb25zZS5zdGF0dXNUZXh0O1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3JTaG93ID0gdHJ1ZTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJFcnJvciB3aXRoIHN0YXR1cyBjb2RlOiBcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gIH07XG5cbiAgJHNjb3BlLm5ld1N1Ykl0ZW0gPSBmdW5jdGlvbihzY29wZSkge1xuICAgIHZhciBub2RlRGF0YSA9IHNjb3BlLiRtb2RlbFZhbHVlO1xuICAgIGlmIChub2RlRGF0YS5ub2RlcyA9PSBudWxsKSB7IG5vZGVEYXRhLm5vZGVzID0gW107IH1cblxuICAgIHZhciBuZXdQYWdlID0ge1xuICAgICAgc2l0ZUlkOiAkc3RhdGVQYXJhbXMuc2l0ZUlkLFxuICAgICAgcGFyZW50SWQ6IG5vZGVEYXRhLmlkLFxuICAgICAgdGl0bGU6IG5vZGVEYXRhLnRpdGxlICsgJy4nICsgKG5vZGVEYXRhLm5vZGVzLmxlbmd0aCArIDEpLFxuICAgICAgbmFtZTogbm9kZURhdGEudGl0bGUgKyAobm9kZURhdGEubm9kZXMubGVuZ3RoICsgMSksXG4gICAgICBwdWJsaWNQYWdlOiBmYWxzZSxcbiAgICAgIHBsYWNlaG9sZGVyOiBmYWxzZVxuICAgIH07XG4gICAgUmVzdGFuZ3VsYXIuYWxsKCdwYWdlcycpLmN1c3RvbVBPU1QobmV3UGFnZSkudGhlbihmdW5jdGlvbiAobmV3UGFnZSkge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIlN1Y2Nlc3MgLSBwYWdlIGNyZWF0ZWRcIik7XG5cbiAgICAgIG5vZGVEYXRhLm5vZGVzLnB1c2goe1xuICAgICAgICBpZDogbmV3UGFnZS5pZCxcbiAgICAgICAgdGl0bGU6IG5ld1BhZ2UudGl0bGUsXG4gICAgICAgIG5vZGVzOiBbXVxuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAkc2NvcGUucmVzcG9uc2VFcnJvciA9ICdFcnJvciBjcmVhdGluZyBuZXcgcGFnZTogJyArIHJlc3BvbnNlLnN0YXR1c1RleHQ7XG4gICAgICAkc2NvcGUucmVzcG9uc2VFcnJvclNob3cgPSB0cnVlO1xuICAgICAgLy9jb25zb2xlLmxvZyhcIkVycm9yIHdpdGggc3RhdHVzIGNvZGU6IFwiLCByZXNwb25zZS5zdGF0dXMpO1xuICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgfTtcblxuICB2YXIgZ2V0Um9vdE5vZGVzU2NvcGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmVlLXJvb3QnKSkuc2NvcGUoKTtcbiAgfTtcblxuICAkc2NvcGUuY29sbGFwc2VBbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NvcGUgPSBnZXRSb290Tm9kZXNTY29wZSgpO1xuICAgIHNjb3BlLmNvbGxhcHNlQWxsKCk7XG4gIH07XG5cbiAgJHNjb3BlLmV4cGFuZEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY29wZSA9IGdldFJvb3ROb2Rlc1Njb3BlKCk7XG4gICAgc2NvcGUuZXhwYW5kQWxsKCk7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xuICBSZXN0YW5ndWxhci5hbGwoJ3ByZXJlbmRlcicpLmFsbCgnc3VibWl0JykuZG9QT1NUKFt7fV0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFJlc3Rhbmd1bGFyKSB7XG4gICRzY29wZS5zaXRlID0ge307XG5cbiAgJHNjb3BlLmNyZWF0ZU5ldyA9IGZ1bmN0aW9uIChzaXRlKSB7XG4gICAgUmVzdGFuZ3VsYXIuYWxsKCdzaXRlcycpLnBvc3Qoc2l0ZSkudGhlbihmdW5jdGlvbihuZXdTaXRlKXtcbiAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzOiBzaXRlIGNyZWF0ZWRcIik7XG4gICAgICAkc3RhdGUuZ28oJ3NpdGVzLmRldGFpbCcsIHsgc2l0ZUlkOiBuZXdTaXRlLmlkfSwge3JlbG9hZDogdHJ1ZX0pO1xuICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3IgPSAnRXJyb3IgY3JlYXRpbmcgc2l0ZTogJyArIHJlc3BvbnNlLnN0YXR1c1RleHQ7XG4gICAgICAkc2NvcGUucmVzcG9uc2VFcnJvclNob3cgPSB0cnVlO1xuICAgICAgLy9jb25zb2xlLmxvZyhcIkVycm9yIHdpdGggc3RhdHVzIGNvZGU6IFwiLCByZXNwb25zZS5zdGF0dXMpO1xuICAgIH0pO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xuICAkc2NvcGUuc2l0ZSA9IHt9O1xuICAkc2NvcGUubWFzdGVyID0ge307XG4gICRzY29wZS5zZWxlY3RlZFNpdGVJbmRleCA9ICRzdGF0ZVBhcmFtcy5zaXRlSWQ7XG4gICRzY29wZS5uZXdQcm9wTmFtZSA9ICcnO1xuICAkc2NvcGUubmV3UHJvcENvbnRlbnQgPSAnJztcblxuICBSZXN0YW5ndWxhci5vbmUoJ3NpdGVzJywgJHN0YXRlUGFyYW1zLnNpdGVJZCkuZ2V0KCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICRzY29wZS5zaXRlID0gZGF0YTtcbiAgICAkc2NvcGUubWFzdGVyID0gYW5ndWxhci5jb3B5KGRhdGEpO1xuICB9KTtcblxuICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKHNpdGUpIHtcbiAgICAkc2NvcGUubWFzdGVyID0gYW5ndWxhci5jb3B5KHNpdGUpO1xuICAgIHNpdGUuc2F2ZSgpO1xuICB9O1xuXG4gICRzY29wZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkc2NvcGUuc2l0ZSA9IGFuZ3VsYXIuY29weSgkc2NvcGUubWFzdGVyKTtcbiAgfTtcblxuICAkc2NvcGUuaXNVbmNoYW5nZWQgPSBmdW5jdGlvbiAoc2l0ZSkge1xuICAgIHJldHVybiBhbmd1bGFyLmVxdWFscyhzaXRlLCAkc2NvcGUubWFzdGVyKTtcbiAgfTtcblxuICAkc2NvcGUuZGVsZXRlU2l0ZSA9IGZ1bmN0aW9uIChzaXRlKSB7XG4gICAgc2l0ZS5yZW1vdmUoKVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzXCIpO1xuICAgICAgJHN0YXRlLmdvKCdeJywgJHN0YXRlUGFyYW1zLCB7cmVsb2FkOiB0cnVlfSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAkc2NvcGUucmVzcG9uc2VFcnJvciA9ICdFcnJvcjogJyArIHJlc3BvbnNlLnN0YXR1c1RleHQ7XG4gICAgICAkc2NvcGUucmVzcG9uc2VFcnJvclNob3cgPSB0cnVlO1xuICAgICAgLy9jb25zb2xlLmxvZygnRXJyb3Igd2l0aCBzdGF0dXMgY29kZTogJywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuYWRkUHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2l0ZVByb3BlcnR5ID0ge1xuICAgICAgbmFtZTogJHNjb3BlLm5ld1Byb3BOYW1lLFxuICAgICAgY29udGVudDogJHNjb3BlLm5ld1Byb3BDb250ZW50XG4gICAgfTtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3NpdGVzJywgJHN0YXRlUGFyYW1zLnNpdGVJZCkuY3VzdG9tUE9TVChzaXRlUHJvcGVydHkpLnRoZW4oZnVuY3Rpb24gKHVwZGF0ZWRTaXRlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIlN1Y2Nlc3MgLSBwcm9wZXJ0eSBjcmVhdGVkXCIpO1xuICAgICAgJHNjb3BlLnNpdGUucHJvcGVydGllcyA9IHVwZGF0ZWRTaXRlLnByb3BlcnRpZXM7XG4gICAgICAkc2NvcGUuc2l0ZS5wcm9wZXJ0eU1hcCA9IHVwZGF0ZWRTaXRlLnByb3BlcnR5TWFwO1xuICAgICAgJHNjb3BlLm5ld1Byb3BOYW1lID0gJyc7XG4gICAgICAkc2NvcGUubmV3UHJvcENvbnRlbnQgPSAnJztcbiAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yIGNyZWF0aW5nIHByb3BlcnR5OiAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IHRydWU7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkVycm9yIHdpdGggc3RhdHVzIGNvZGU6IFwiLCByZXNwb25zZS5zdGF0dXMpO1xuICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICB9O1xuXG4gICRzY29wZS5zYXZlUHJvcCA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgUmVzdGFuZ3VsYXIub25lKCdzaXRlcycsICRzdGF0ZVBhcmFtcy5zaXRlSWQpLmFsbChwcm9wLmlkKS5jdXN0b21QVVQocHJvcCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiU3VjY2VzcyAtIHByb3BlcnR5IHNhdmVkXCIpO1xuICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3IgPSAnRXJyb3Igc2F2aW5nIHByb3BlcnR5OiAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IHRydWU7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiRXJyb3Igd2l0aCBzdGF0dXMgY29kZTogXCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICB9O1xuXG4gICRzY29wZS5kZWxldGVQcm9wID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICBSZXN0YW5ndWxhci5vbmUoJ3NpdGVzJywgJHN0YXRlUGFyYW1zLnNpdGVJZCkuYWxsKHByb3AubmFtZSkucmVtb3ZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaWR4ID0gJHNjb3BlLnNpdGUucHJvcGVydGllcy5pbmRleE9mKHByb3ApO1xuICAgICAgJHNjb3BlLnNpdGUucHJvcGVydGllcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzIC0gcHJvcGVydHkgcmVtb3ZlZFwiKTtcbiAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yIHJlbW92aW5nIHByb3BlcnR5OiAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IHRydWU7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiRXJyb3Igd2l0aCBzdGF0dXMgY29kZTogXCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRzY29wZSwgUmVzdGFuZ3VsYXIpIHtcbiAgUmVzdGFuZ3VsYXIuYWxsKCdzaXRlcycpLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgJHNjb3BlLnNpdGVzID0gbGlzdDtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xuICBSZXN0YW5ndWxhci5hbGwoJ3NpdGVtYXBzJykuYWxsKCRzdGF0ZVBhcmFtcy5hY3Rpb25OYW1lKS5kb1BPU1QoW3t9XSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFJlc3Rhbmd1bGFyKSB7XG4gICRzY29wZS51c2VyID0ge1xuICAgIHJvbGVNYXA6IHtcbiAgICAgIGFkbWluOiBmYWxzZSxcbiAgICAgIGVkaXRvcjogZmFsc2UsXG4gICAgICB1c2VyOiB0cnVlXG4gICAgfSxcbiAgICByb2xlczogWyd1c2VyJ11cbiAgfTtcbiAgJHNjb3BlLm1hc3RlciA9IHt9O1xuXG4gICRzY29wZS5yZXNwb25zZUVycm9yID0gJyc7XG4gICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IGZhbHNlO1xuXG4gICRzY29wZS51cGRhdGVSb2xlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJHNjb3BlLnVzZXIucm9sZU1hcCkge1xuICAgICAgdmFyIHJvbGVzID0gW107XG4gICAgICB2YXIgcm9sZSA9ICcnO1xuICAgICAgZm9yIChyb2xlIGluICRzY29wZS51c2VyLnJvbGVNYXApIHtcbiAgICAgICAgaWYgKCRzY29wZS51c2VyLnJvbGVNYXBbcm9sZV0pIHsgcm9sZXMucHVzaChyb2xlKTsgfVxuICAgICAgfVxuICAgICAgJHNjb3BlLnVzZXIucm9sZXMgPSByb2xlcztcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLiR3YXRjaCgndXNlci5yb2xlTWFwLmVkaXRvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAkc2NvcGUudXBkYXRlUm9sZXMoKTtcbiAgfSk7XG4gICRzY29wZS4kd2F0Y2goJ3VzZXIucm9sZU1hcC5hZG1pbicsIGZ1bmN0aW9uICgpIHtcbiAgICAkc2NvcGUudXBkYXRlUm9sZXMoKTtcbiAgfSk7XG4gICRzY29wZS4kd2F0Y2goJ3VzZXIucm9sZU1hcC51c2VyJywgZnVuY3Rpb24gKCkge1xuICAgICRzY29wZS51cGRhdGVSb2xlcygpO1xuICB9KTtcblxuICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAkc2NvcGUubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuICAgIFJlc3Rhbmd1bGFyLmFsbCgndXNlcnMnKS5wb3N0KHtcbiAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsXG4gICAgICByb2xlczogdXNlci5yb2xlc1xuICAgIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIlN1Y2Nlc3NcIik7XG4gICAgICAkc3RhdGUuZ28oJ14nLCAkc3RhdGVQYXJhbXMsIHtyZWxvYWQ6IHRydWV9KTtcbiAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yID0gJ0Vycm9yOiAnICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDtcbiAgICAgICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IHRydWU7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiRXJyb3Igd2l0aCBzdGF0dXMgY29kZTogXCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICRzY29wZS51c2VyID0gYW5ndWxhci5jb3B5KCRzY29wZS5tYXN0ZXIpO1xuICB9O1xuXG4gICRzY29wZS5pc1VuY2hhbmdlZCA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIGFuZ3VsYXIuZXF1YWxzKHVzZXIsICRzY29wZS5tYXN0ZXIpO1xuICB9O1xuXG4gICRzY29wZS5yZXNldCgpO1xuXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZVBhcmFtcywgUmVzdGFuZ3VsYXIpIHtcbiAgUmVzdGFuZ3VsYXIub25lKCd1c2VycycsICRzdGF0ZVBhcmFtcy51c2VySWQpLmdldExpc3QoJ2F1dGh0b2tlbnMnKS50aGVuKGZ1bmN0aW9uICh0b2tlbnMpIHtcbiAgICAkc2NvcGUuYXV0aHRva2VucyA9IHRva2VucztcbiAgfSk7XG5cbiAgJHNjb3BlLmdldFRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgLy9jb25zb2xlLmxvZyhcIlRva2VuOiBcIiArIHRva2VuLnV1aWQpO1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgndXNlcnMnLCAkc3RhdGVQYXJhbXMudXNlcklkKS5vbmUoJ2F1dGh0b2tlbnMnLCB0b2tlbi51dWlkKS5nZXQoKS50aGVuKGZ1bmN0aW9uICh0KSB7XG4gICAgICAkc2NvcGUuYXV0aHRva2VuID0gdDtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUucmVtb3ZlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAvL2NvbnNvbGUubG9nKFwiUmVtb3ZlIHRva2VuOiBcIiArIHRva2VuLnV1aWQpO1xuICAgIFJlc3Rhbmd1bGFyLm9uZSgndXNlcnMnLCAkc3RhdGVQYXJhbXMudXNlcklkKS5vbmUoJ2F1dGh0b2tlbnMnLCB0b2tlbi51dWlkKS5yZW1vdmUoKTtcbiAgICB2YXIgaWR4ID0gJHNjb3BlLmF1dGh0b2tlbnMuaW5kZXhPZih0b2tlbik7XG4gICAgJHNjb3BlLmF1dGh0b2tlbnMuc3BsaWNlKGlkeCwgMSk7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xuICBSZXN0YW5ndWxhci5vbmUoJ3VzZXJzJywgJHN0YXRlUGFyYW1zLnVzZXJJZCkuZ2V0TGlzdCgnY3JlZGVudGlhbHMnKS50aGVuKGZ1bmN0aW9uIChjcmVkcykge1xuICAgICRzY29wZS5jcmVkZW50aWFscyA9IGNyZWRzO1xuICB9KTtcblxuICAkc2NvcGUucmVtb3ZlQ3JlZGVudGlhbCA9IGZ1bmN0aW9uIChjcmVkZW50aWFsKSB7XG5cbiAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgUmVzdGFuZ3VsYXIpIHtcbiAgLy9jb25zb2xlLmxvZyhcInN0YXRlUGFyYW1zOiBcIiArICRzdGF0ZVBhcmFtcyk7XG4gIFJlc3Rhbmd1bGFyLm9uZSgndXNlcnMnLCAkc3RhdGVQYXJhbXMudXNlcklkKS5vbmUoJ2NyZWRlbnRpYWxzJywgJHN0YXRlUGFyYW1zLmNyZWRJZClcbiAgLmN1c3RvbUdFVCgnY2hwYXNzd29yZCcpLnRoZW4oZnVuY3Rpb24gKGZvcm1kYXRhKSB7XG4gICAgJHNjb3BlLnBhc3N3b3JkRGF0YSA9IGZvcm1kYXRhO1xuICAgICRzY29wZS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLnBhc3N3b3JkRGF0YSk7XG4gIH0pO1xuXG4gICRzY29wZS5yZXNwb25zZUVycm9yID0gJyc7XG4gICRzY29wZS5yZXNwb25zZUVycm9yU2hvdyA9IGZhbHNlO1xuXG4gICRzY29wZS5tYXN0ZXIgPSB7fTtcblxuICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKHBhc3N3b3JkRGF0YSkge1xuICAgICRzY29wZS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkocGFzc3dvcmREYXRhKTtcbiAgICBSZXN0YW5ndWxhclxuICAgIC5vbmUoJ3VzZXJzJywgJHN0YXRlUGFyYW1zLnVzZXJJZClcbiAgICAub25lKCdjcmVkZW50aWFscycsICRzdGF0ZVBhcmFtcy5jcmVkSWQpXG4gICAgLmFsbCgnY2hwYXNzd29yZCcpXG4gICAgLmN1c3RvbVBVVCgkc2NvcGUucGFzc3dvcmREYXRhKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzXCIpO1xuICAgICAgJHN0YXRlLmdvKCdeJyk7XG4gICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAkc2NvcGUucmVzcG9uc2VFcnJvciA9ICdFcnJvcjogJyArIHJlc3BvbnNlLnN0YXR1c1RleHQ7XG4gICAgICAkc2NvcGUucmVzcG9uc2VFcnJvclNob3cgPSB0cnVlO1xuICAgICAgLy9jb25zb2xlLmxvZyhcIkVycm9yIHdpdGggc3RhdHVzIGNvZGU6IFwiLCByZXNwb25zZS5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgLy8kc2NvcGUucGFzc3dvcmREYXRhLmN1c3RvbVBVVChcImNocGFzc3dvcmRcIik7XG4gIH07XG5cbiAgJHNjb3BlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICRzY29wZS5wYXNzd29yZERhdGEgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3Rlcik7XG4gIH07XG5cbiAgJHNjb3BlLmlzVW5jaGFuZ2VkID0gZnVuY3Rpb24gKHBhc3N3b3JkRGF0YSkge1xuICAgIHJldHVybiBhbmd1bGFyLmVxdWFscyhwYXNzd29yZERhdGEsICRzY29wZS5tYXN0ZXIpO1xuICB9O1xuXG4gICRzY29wZS5yZXNldCgpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBSZXN0YW5ndWxhcikge1xuICAkc2NvcGUudXNlciA9IHt9O1xuICAkc2NvcGUubWFzdGVyID0ge307XG5cbiAgUmVzdGFuZ3VsYXIub25lKCd1c2VycycsICRzdGF0ZVBhcmFtcy51c2VySWQpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAkc2NvcGUudXNlciA9IHVzZXI7XG4gICAgJHNjb3BlLm1hc3RlciA9IGFuZ3VsYXIuY29weSh1c2VyKTtcbiAgfSk7XG5cbiAgJHNjb3BlLnVwZGF0ZVJvbGVzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICgkc2NvcGUudXNlci5yb2xlTWFwKSB7XG4gICAgICB2YXIgcm9sZXMgPSBbXTtcbiAgICAgIHZhciByb2xlO1xuICAgICAgZm9yIChyb2xlIGluICRzY29wZS51c2VyLnJvbGVNYXApIHtcbiAgICAgICAgaWYgKCRzY29wZS51c2VyLnJvbGVNYXBbcm9sZV0pIHsgcm9sZXMucHVzaChyb2xlKTsgfVxuICAgICAgfVxuICAgICAgJHNjb3BlLnVzZXIucm9sZXMgPSByb2xlcztcbiAgICB9XG4gIH07XG5cbiAgJHNjb3BlLiR3YXRjaCgndXNlci5yb2xlTWFwLmVkaXRvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAkc2NvcGUudXBkYXRlUm9sZXMoKTtcbiAgfSk7XG4gICRzY29wZS4kd2F0Y2goJ3VzZXIucm9sZU1hcC5hZG1pbicsIGZ1bmN0aW9uICgpIHtcbiAgICAkc2NvcGUudXBkYXRlUm9sZXMoKTtcbiAgfSk7XG4gICRzY29wZS4kd2F0Y2goJ3VzZXIucm9sZU1hcC51c2VyJywgZnVuY3Rpb24gKCkge1xuICAgICRzY29wZS51cGRhdGVSb2xlcygpO1xuICB9KTtcblxuICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAkc2NvcGUubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuICAgIHVzZXIuc2F2ZSgpO1xuXG4gIH07XG5cbiAgJHNjb3BlLmRlbGV0ZVVzZXIgPSBmdW5jdGlvbiAodXNlcikge1xuICAgIHVzZXIucmVtb3ZlKClcbiAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiU3VjY2Vzc1wiKTtcbiAgICAgICRzdGF0ZS5nbygnXicsICRzdGF0ZVBhcmFtcywge3JlbG9hZDogdHJ1ZX0pO1xuICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3IgPSAnRXJyb3I6ICcgKyByZXNwb25zZS5zdGF0dXNUZXh0O1xuICAgICAgJHNjb3BlLnJlc3BvbnNlRXJyb3JTaG93ID0gdHJ1ZTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJFcnJvciB3aXRoIHN0YXR1cyBjb2RlOiBcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgJHNjb3BlLnVzZXIgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLm1hc3Rlcik7XG4gIH07XG5cbiAgJHNjb3BlLmlzVW5jaGFuZ2VkID0gZnVuY3Rpb24gKHVzZXIpIHtcbiAgICByZXR1cm4gYW5ndWxhci5lcXVhbHModXNlciwgJHNjb3BlLm1hc3Rlcik7XG4gIH07XG5cbiAgJHNjb3BlLnJlc2V0KCk7XG5cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRzY29wZSwgUmVzdGFuZ3VsYXIpIHtcbiAgUmVzdGFuZ3VsYXIuYWxsKCd1c2VycycpLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgJHNjb3BlLnVzZXJzID0gbGlzdDtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gcmVxdWlyZSgnYW5ndWxhcicpLm1vZHVsZSgna29udEFwcCcpO1xuXG5hcHAuZGlyZWN0aXZlKCdhcHBWZXJzaW9uJywgZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxtLCBhdHRycykge1xuICAgIGVsbS50ZXh0KHZlcnNpb24pO1xuICB9O1xufSk7XG5cbmFwcC5kaXJlY3RpdmUoJ3Bhc3N3b3JkVmFsaWRhdGUnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxtLCBhdHRycywgY3RybCkge1xuICAgICAgY3RybC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uICh2aWV3VmFsdWUpIHtcblxuICAgICAgICBzY29wZS5wd2RWYWxpZExlbmd0aCA9ICh2aWV3VmFsdWUgJiYgdmlld1ZhbHVlLmxlbmd0aCA+PSA4ID8gdHJ1ZSA6IGZhbHNlKTtcbiAgICAgICAgc2NvcGUucHdkSGFzTGV0dGVyID0gKHZpZXdWYWx1ZSAmJiAvW0Etel0vLnRlc3Qodmlld1ZhbHVlKSkgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHNjb3BlLnB3ZEhhc051bWJlciA9ICh2aWV3VmFsdWUgJiYgL1xcZC8udGVzdCh2aWV3VmFsdWUpKSA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICBpZiAoc2NvcGUucHdkVmFsaWRMZW5ndGggJiYgc2NvcGUucHdkSGFzTGV0dGVyICYmIHNjb3BlLnB3ZEhhc051bWJlcikge1xuICAgICAgICAgIGN0cmwuJHNldFZhbGlkaXR5KCdwd2QnLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gdmlld1ZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN0cmwuJHNldFZhbGlkaXR5KCdwd2QnLCBmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcblxuYXBwLmRpcmVjdGl2ZSgnbmdDb25maXJtQ2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJpb3JpdHk6IC0xLFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XG4gICAgICAgIGVsZW1lbnQuYmluZCgnY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICB2YXIgbWVzc2FnZSA9IGF0dHJzLm5nQ29uZmlybUNsaWNrO1xuICAgICAgICAgIGlmKG1lc3NhZ2UgJiYgIWNvbmZpcm0obWVzc2FnZSkpe1xuICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbik7XG5cbmFwcC5kaXJlY3RpdmUoJ2xvYWRpbmdXaWRnZXQnLCBmdW5jdGlvbiAocmVxdWVzdE5vdGlmaWNhdGlvbikge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQUMnLFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xuICAgICAgLy8gaGlkZSB0aGUgZWxlbWVudCBpbml0aWFsbHlcbiAgICAgIGVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAvL3N1YnNjcmliZSB0byBsaXN0ZW4gd2hlbiBhIHJlcXVlc3Qgc3RhcnRzXG4gICAgICByZXF1ZXN0Tm90aWZpY2F0aW9uLnN1YnNjcmliZU9uUmVxdWVzdFN0YXJ0ZWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBzaG93IHRoZSBzcGlubmVyIVxuICAgICAgICBlbGVtZW50LnNob3coKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXF1ZXN0Tm90aWZpY2F0aW9uLnN1YnNjcmliZU9uUmVxdWVzdEVuZGVkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gaGlkZSB0aGUgc3Bpbm5lciBpZiB0aGVyZSBhcmUgbm8gbW9yZSBwZW5kaW5nIHJlcXVlc3RzXG4gICAgICAgIGlmIChyZXF1ZXN0Tm90aWZpY2F0aW9uLmdldFJlcXVlc3RDb3VudCgpID09PSAwKSB7IGVsZW1lbnQuaGlkZSgpOyB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcblxuYXBwLmRpcmVjdGl2ZSgnZW5zdXJlVW5pcXVlJywgZnVuY3Rpb24oUmVzdGFuZ3VsYXIsICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQpIHtcbiAgdmFyIGNoZWNraW5nID0gbnVsbDtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZSwgYXR0cnMsIGMpIHtcbiAgICAgIHNjb3BlLiR3YXRjaChhdHRycy5uZ01vZGVsLCBmdW5jdGlvbihuZXdWYWwpIHtcbiAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgIGNoZWNraW5nID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBSZXN0YW5ndWxhclxuICAgICAgICAgICAgLm9uZSgncGFnZXMnLCAkc3RhdGVQYXJhbXMucGFnZUlkKVxuICAgICAgICAgICAgLmN1c3RvbUdFVCgnbmFtZWNoZWNrJywge25hbWU6IGVuY29kZVVSSUNvbXBvbmVudChjLiRtb2RlbFZhbHVlKX0pXG4gICAgICAgICAgICAudGhlbihcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCduYW1lIHVuaXF1ZSBjaGVjayBPSycpO1xuICAgICAgICAgICAgICAgIGMuJHNldFZhbGlkaXR5KCd1bmlxdWUnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjaGVja2luZyA9IG51bGw7XG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCduYW1lIHVuaXF1ZSBjaGVjayBGQUlMJyk7XG4gICAgICAgICAgICAgICAgYy4kc2V0VmFsaWRpdHkoJ3VuaXF1ZScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjaGVja2luZyA9IG51bGw7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5hcHAuZGlyZWN0aXZlKCdueEVxdWFsRXgnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMsIG1vZGVsKSB7XG4gICAgICBpZiAoIWF0dHJzLm54RXF1YWxFeCkge1xuICAgICAgICAvLyBjb25zb2xlLmVycm9yKCdueEVxdWFsRXggZXhwZWN0cyBhIG1vZGVsIGFzIGFuIGFyZ3VtZW50IScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzY29wZS4kd2F0Y2goYXR0cnMubnhFcXVhbEV4LCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHZhbHVlcyBpZiB0aGUgc2Vjb25kIGN0cmwgaGFzIGEgdmFsdWUuXG4gICAgICAgIGlmIChtb2RlbC4kdmlld1ZhbHVlICE9PSB1bmRlZmluZWQgJiYgbW9kZWwuJHZpZXdWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICBtb2RlbC4kc2V0VmFsaWRpdHkoJ254RXF1YWxFeCcsIHZhbHVlID09PSBtb2RlbC4kdmlld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBtb2RlbC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBNdXRlIHRoZSBueEVxdWFsIGVycm9yIGlmIHRoZSBzZWNvbmQgY3RybCBpcyBlbXB0eS5cbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgbW9kZWwuJHNldFZhbGlkaXR5KCdueEVxdWFsRXgnLCB0cnVlKTtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzVmFsaWQgPSB2YWx1ZSA9PT0gc2NvcGUuJGV2YWwoYXR0cnMubnhFcXVhbEV4KTtcbiAgICAgICAgbW9kZWwuJHNldFZhbGlkaXR5KCdueEVxdWFsRXgnLCBpc1ZhbGlkKTtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gcmVxdWlyZSgnYW5ndWxhcicpLm1vZHVsZSgna29udEFwcCcpO1xuXG5hcHAuZmlsdGVyKCdpbnRlcnBvbGF0ZScsIGZ1bmN0aW9uKHZlcnNpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHRleHQpIHtcbiAgICByZXR1cm4gU3RyaW5nKHRleHQpLnJlcGxhY2UoL1xcJVZFUlNJT05cXCUvbWcsIHZlcnNpb24pO1xuICB9O1xufSk7XG4iXX0=
